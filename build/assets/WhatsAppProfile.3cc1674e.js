import{u as j,al as D,aG as R,aH as N,aI as X,r as i,aJ as u,j as e,am as z,a as o,V as J,L as O,W as q}from"./index.fd4ae6d6.js";import{u as K,F as l}from"./FormTextField.2a1e5a18.js";import{F as Q,s as Y}from"./FormFileField.68f62bbc.js";import{L as Z}from"./LeftArrow.5ec3afba.js";import $ from"./LinkPlatForm.07dd3e68.js";import{d as ee,a as f,F as A}from"./Style.ced39dc3.js";import{c as te,H as se,d as re,e as ae}from"./Wrappers.39eb0e5b.js";import{F as c,A as ie,a as oe}from"./Form.f7d2dffb.js";import{C as w,a as ne,h as le}from"./Card.ec9aa8ee.js";import{C as ce,F as m,G as p,S as me,a as pe,H as S}from"./Grid.5052dff7.js";import{p as de}from"./Position.module.ff7b7fa6.js";import{M as W}from"./MenuItem.b8d16956.js";import"./TextField.fa193343.js";import"./Select.96b8ae4e.js";import"./useFormControl.13400fe7.js";import"./isMuiElement.8b92655b.js";import"./Menu.c4bc1234.js";import"./List.bc505dcb.js";import"./useControlled.9f1cf0dd.js";import"./Styles.3864ecd6.js";import"./Tags.1cd57cb3.js";import"./toConsumableArray.52b4c8e6.js";import"./ListItem.b71d9e15.js";import"./listItemButtonClasses.091445a7.js";import"./styled.fbb11cbf.js";import"./CommonComponents.edc6200b.js";import"./ArrowRight.5a51b024.js";import"./Styles.c059562f.js";import"./Card.e09e37ac.js";import"./CardContent.f0d0982c.js";import"./listItemTextClasses.93f3772f.js";import"./dividerClasses.8305ae6e.js";const he=()=>{const{isMobile:P,isTablet:ue,navigate:L}=j(),{setErrorMessage:d,setSuccessMessage:B}=D(),{allowedVerticals:y,chatbotNumber:E}=R(),{platformExist:r}=N(),{setChatBotNumber:V}=X(),[v,g]=i.exports.useState(!0),[I,H]=i.exports.useState("Submit"),{control:n,handleSubmit:_,watch:k,reset:b,setValue:x}=K({defaultValues:{address:"",description:"",email:"",file:void 0,profile_picture_url:"",websites:[],messaging_product:"",vertical:""}}),G=k(),{profile_picture_url:M,vertical:h}=G,T=({target:{files:t}})=>{if(t&&t.length>0){const[s]=t;x("file",s),x("profile_picture_url",URL.createObjectURL(s))}},U=async t=>{try{const s=Y.serialize(t),a=await u.saveWAProfile(s);if(a.errors)throw Error(a.errors.pop().message);if(!a.success&&a.message)throw Error(a.message);B(a.message),L(0)}catch(s){d(s.message)}},F=i.exports.useCallback(async()=>{try{if(typeof r=="boolean"&&r){const t=await u.getWAProfile();if(!t.success)throw Error(t.message);H("Update Business Information"),b(t.payload)}}catch(t){d(t.message)}finally{g(!1)}},[r,b]),C=i.exports.useCallback(async()=>{try{if(typeof r=="boolean"&&r&&E===void 0){const t=await u.getWAChatBots();if(!t.success)throw Error(t.message);const[s]=t.payload;s&&V(s.id)}}catch(t){d(t.message)}finally{g(!1)}},[r]);return i.exports.useEffect(()=>{C()},[C]),i.exports.useEffect(()=>{F()},[F]),v?e(w,{className:de.AbsCenter,children:e(z,{height:72,width:72})}):o(i.exports.Fragment,{children:[P&&o(te,{children:[e(J,{component:O,to:"/business-settings",sx:{width:32,height:32},children:e(Z,{})}),e(se,{children:"WhatsApp Profile"})]}),e(re,{children:typeof r=="boolean"&&r===!1?e(ce,{children:e($,{})}):o(ae,{onSubmit:_(U),children:[e(w,{elevation:0,children:o(ne,{children:[e(le,{children:"Business Information"}),o(m,{children:[e(p,{children:e(c,{sx:{mb:0,height:"100%"},children:e(l,{control:n,name:"description",label:"Business Description",rows:5,sx:ee,inputProps:{maxLength:256},multiline:!0})})}),e(me,{children:e(Q,{control:n,name:"file",defaultValue:M,onChange:T,previewAlt:"Profile Image",label:"Upload Profile Image"})})]}),e(m,{sx:{mt:3.75},children:e(p,{children:e(c,{children:o(l,{select:!0,control:n,label:"Business Vertical",name:"vertical",sx:f,defaultValue:h!=null?h:"",children:[e(W,{value:"",disabled:!0,children:"Select Vertical"}),y.map(({label:t,value:s},a)=>e(W,{value:s,children:t},a))]})})})}),e(m,{children:e(p,{children:e(c,{children:e(l,{control:n,label:"Business Address",name:"address",inputProps:{maxLength:256},sx:f})})})}),e(m,{children:e(p,{children:e(c,{children:e(l,{control:n,label:"Email",name:"email",inputProps:{maxLength:256},sx:f})})})}),o(pe,{children:[e(S,{children:e(c,{children:e(l,{control:n,name:"websites[0]",label:"Website 1",placeholder:"Website 1",inputProps:{maxLength:256},sx:A})})}),e(S,{children:e(c,{children:e(l,{control:n,name:"websites[1]",label:"Website 2",placeholder:"Website 2",inputProps:{maxLength:256},sx:A})})})]}),e(ie,{children:e(oe,{type:"submit",children:I})})]})}),!1]})})]})},Oe=()=>o(i.exports.Fragment,{children:[e(q,{children:e("title",{children:"WhatsApp Profile"})}),e(he,{})]});export{Oe as default};
