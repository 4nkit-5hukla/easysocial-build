var Me=Object.defineProperty;var Ve=(t,s,i)=>s in t?Me(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i;var P=(t,s,i)=>(Ve(t,typeof s!="symbol"?s+"":s,i),i);import{v as ye,j as e,S as ve,a as d,r as g,aU as C,aV as Ne,ap as B,aj as te,ax as ne,V,a2 as Ie,u as ze,aW as H,W as He,c as Re,B as R,I as $e,U as $}from"./index.02460f2f.js";import{L as N}from"./LeftArrow.b98d3ba9.js";import{a as ke,A as xe,D as Ge,b as We,c as Ze,d as Ke}from"./CommonComponents.76c3adb5.js";import{D as ae,d as oe,H as se,g as ie,P as G,h as W,L as Xe,e as qe,f as Ye,C as pe,i as Je,j as Z,k as K}from"./Tags.9d475fda.js";import{D as re}from"./Drawer.bb693379.js";import{L as E}from"./List.d98e1e10.js";import{L as j}from"./ListItem.5e600663.js";import{L as q}from"./ListItemButton.4dcc0979.js";import{a as T,L as Y}from"./ListItemText.8ce0ae8a.js";import{D as J}from"./Divider.a9550c36.js";import{L as U}from"./ListItemAvatar.68f2d5c7.js";import{C as Qe}from"./CircularProgress.e9ec2845.js";import{c as et,C as me,a as fe,F as he,I as tt}from"./Styles.3864ecd6.js";import{C as _e}from"./Card.597853f8.js";import{C as Ce}from"./CardContent.309e0f09.js";import{L as A}from"./Link.2b9bf4d7.js";import"./ArrowRight.4a777a0f.js";import"./Styles.c059562f.js";import"./styled.668b30bd.js";import"./toConsumableArray.52b4c8e6.js";import"./MenuItem.3d84d5ce.js";import"./listItemTextClasses.8b7cacbf.js";import"./dividerClasses.f77eeabb.js";import"./listItemButtonClasses.bda98cd6.js";import"./isMuiElement.8fb3c8cf.js";const Q=ye(e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlined"),ee=ye(e("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CircleOutlined"),X=({bg:t="#4267B2"})=>e(ve,{viewBox:"0 0 32 32",fill:"none",children:e("path",{d:"M3.55556 0H28.4444C29.3874 0 30.2918 0.374602 30.9586 1.0414C31.6254 1.70819 32 2.61256 32 3.55556V28.4444C32 29.3874 31.6254 30.2918 30.9586 30.9586C30.2918 31.6254 29.3874 32 28.4444 32H3.55556C2.61256 32 1.70819 31.6254 1.0414 30.9586C0.374602 30.2918 0 29.3874 0 28.4444V3.55556C0 2.61256 0.374602 1.70819 1.0414 1.0414C1.70819 0.374602 2.61256 0 3.55556 0ZM26.6667 3.55556H22.2222C20.572 3.55556 18.9893 4.21111 17.8224 5.378C16.6556 6.5449 16 8.12754 16 9.77778V14.2222H12.4444V19.5556H16V32H21.3333V19.5556H26.6667V14.2222H21.3333V10.6667C21.3333 10.1952 21.5206 9.74299 21.854 9.40959C22.1874 9.07619 22.6396 8.88889 23.1111 8.88889H26.6667V3.55556Z",fill:t})}),nt=()=>d("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"//www.w3.org/2000/svg",children:[e("path",{d:"M39.6914 11.1896C39.6914 9.59435 38.3985 8.30626 36.8092 8.30626C35.2198 8.30626 33.9258 9.59435 33.9258 11.1896C33.9258 12.779 35.2198 14.0671 36.8092 14.0671C38.3985 14.0671 39.6914 12.779 39.6914 11.1896",fill:"url(#paint0_linear_1330_9)"}),e("path",{d:"M43.5331 33.6969C43.4264 36.0371 43.035 37.3085 42.71 38.153C42.2735 39.2727 41.7528 40.0733 40.9084 40.9131C40.0733 41.7528 39.2727 42.2723 38.153 42.704C37.3085 43.0338 36.0323 43.4264 33.6922 43.5379C31.1622 43.6494 30.4126 43.6731 23.997 43.6731C17.5874 43.6731 16.8318 43.6494 14.3019 43.5379C11.9618 43.4264 10.6915 43.0338 9.84691 42.704C8.72134 42.2723 7.92669 41.7528 7.08693 40.9131C6.24122 40.0733 5.72055 39.2727 5.29 38.153C4.96495 37.3085 4.56767 36.0371 4.46679 33.6969C4.3435 31.1669 4.3209 30.4055 4.3209 24.003C4.3209 17.5874 4.3435 16.8318 4.46679 14.3019C4.56767 11.9618 4.96495 10.6915 5.29 9.83979C5.72055 8.72133 6.24122 7.92543 7.08693 7.08568C7.92669 6.24717 8.72134 5.72642 9.84691 5.29C10.6915 4.95908 11.9618 4.57238 14.3019 4.46092C16.8318 4.34937 17.5874 4.3209 23.997 4.3209C30.4126 4.3209 31.1622 4.34937 33.6922 4.46092C36.0323 4.57238 37.3085 4.95908 38.153 5.29C39.2727 5.72642 40.0733 6.24717 40.9084 7.08568C41.7528 7.92543 42.2735 8.72133 42.71 9.83979C43.035 10.6915 43.4264 11.9618 43.5331 14.3019C43.6505 16.8318 43.679 17.5874 43.679 24.003C43.679 30.4055 43.6505 31.1669 43.5331 33.6969V33.6969ZM47.8541 14.105C47.7367 11.5478 47.3334 9.80065 46.7344 8.27895C46.1248 6.70023 45.3075 5.36232 43.9696 4.02441C42.6377 2.69245 41.2998 1.87521 39.721 1.25847C38.1934 0.665394 36.4521 0.257347 33.8937 0.145884C31.3353 0.0225003 30.5182 -7.11842e-06 23.997 -7.11842e-06C17.4818 -7.11842e-06 16.6587 0.0225003 14.1003 0.145884C11.5478 0.257347 9.80777 0.665394 8.27299 1.25847C6.70024 1.87521 5.36232 2.69245 4.03037 4.02441C2.69246 5.36232 1.87521 6.70023 1.25963 8.27895C0.666554 9.80065 0.263312 11.5478 0.139929 14.105C0.0284662 16.6634 0 17.4818 0 24.003C0 30.5182 0.0284662 31.3353 0.139929 33.8937C0.263312 36.4463 0.666554 38.1921 1.25963 39.721C1.87521 41.2938 2.69246 42.6377 4.03037 43.9696C5.36232 45.3016 6.70024 46.1248 8.27299 46.7404C9.80777 47.3334 11.5478 47.7367 14.1003 47.8541C16.6587 47.9715 17.4818 48 23.997 48C30.5182 48 31.3353 47.9715 33.8937 47.8541C36.4521 47.7367 38.1934 47.3334 39.721 46.7404C41.2998 46.1248 42.6377 45.3016 43.9696 43.9696C45.3075 42.6377 46.1248 41.2938 46.7344 39.721C47.3334 38.1921 47.7367 36.4463 47.8541 33.8937C47.9715 31.3353 48 30.5182 48 24.003C48 17.4818 47.9715 16.6634 47.8541 14.105V14.105Z",fill:"url(#paint1_linear_1330_9)"}),e("path",{d:"M23.9976 31.996C19.5818 31.996 15.9986 28.4187 15.9986 24.0029C15.9986 19.58 19.5818 15.998 23.9976 15.998C28.4147 15.998 32.0026 19.58 32.0026 24.0029C32.0026 28.4187 28.4147 31.996 23.9976 31.996V31.996ZM23.9976 11.6711C17.1907 11.6711 11.6777 17.1959 11.6777 24.0029C11.6777 30.804 17.1907 36.3229 23.9976 36.3229C30.8046 36.3229 36.3235 30.804 36.3235 24.0029C36.3235 17.1959 30.8046 11.6711 23.9976 11.6711Z",fill:"url(#paint2_linear_1330_9)"}),d("defs",{children:[d("linearGradient",{id:"paint0_linear_1330_9",x1:"0.431785",y1:"47.5037",x2:"44.001",y2:"3.93475",gradientUnits:"userSpaceOnUse",children:[e("stop",{stopColor:"#FFD521"}),e("stop",{offset:"0.05",stopColor:"#FFD521"}),e("stop",{offset:"0.501119",stopColor:"#F50000"}),e("stop",{offset:"0.95",stopColor:"#B900B4"}),e("stop",{offset:"0.950079",stopColor:"#B900B4"}),e("stop",{offset:"1",stopColor:"#B900B4"})]}),d("linearGradient",{id:"paint1_linear_1330_9",x1:"0.432953",y1:"47.5635",x2:"44.0379",y2:"3.95858",gradientUnits:"userSpaceOnUse",children:[e("stop",{stopColor:"#FFD521"}),e("stop",{offset:"0.05",stopColor:"#FFD521"}),e("stop",{offset:"0.501119",stopColor:"#F50000"}),e("stop",{offset:"0.95",stopColor:"#B900B4"}),e("stop",{offset:"0.950079",stopColor:"#B900B4"}),e("stop",{offset:"1",stopColor:"#B900B4"})]}),d("linearGradient",{id:"paint2_linear_1330_9",x1:"0.444883",y1:"47.5646",x2:"44.0393",y2:"3.97022",gradientUnits:"userSpaceOnUse",children:[e("stop",{stopColor:"#FFD521"}),e("stop",{offset:"0.05",stopColor:"#FFD521"}),e("stop",{offset:"0.501119",stopColor:"#F50000"}),e("stop",{offset:"0.95",stopColor:"#B900B4"}),e("stop",{offset:"0.950079",stopColor:"#B900B4"}),e("stop",{offset:"1","stop-color":"#B900B4"})]})]})]}),at=()=>d(ve,{viewBox:"0 0 32 32",fill:"none",children:[e("rect",{width:"32",height:"32",rx:"6",fill:"#0077B5"}),e("path",{d:"M28.4444 0C29.3874 0 30.2918 0.374602 30.9586 1.0414C31.6254 1.70819 32 2.61256 32 3.55556V28.4444C32 29.3874 31.6254 30.2918 30.9586 30.9586C30.2918 31.6254 29.3874 32 28.4444 32H3.55556C2.61256 32 1.70819 31.6254 1.0414 30.9586C0.374602 30.2918 0 29.3874 0 28.4444V3.55556C0 2.61256 0.374602 1.70819 1.0414 1.0414C1.70819 0.374602 2.61256 0 3.55556 0H28.4444ZM27.5556 27.5556V18.1333C27.5556 16.5963 26.945 15.1221 25.8581 14.0353C24.7712 12.9484 23.2971 12.3378 21.76 12.3378C20.2489 12.3378 18.4889 13.2622 17.6356 14.6489V12.6756H12.6756V27.5556H17.6356V18.7911C17.6356 17.4222 18.7378 16.3022 20.1067 16.3022C20.7668 16.3022 21.3998 16.5644 21.8666 17.0312C22.3333 17.498 22.5956 18.131 22.5956 18.7911V27.5556H27.5556ZM6.89778 9.88445C7.68989 9.88445 8.44956 9.56978 9.00967 9.00967C9.56978 8.44956 9.88445 7.68989 9.88445 6.89778C9.88445 5.24444 8.55111 3.89333 6.89778 3.89333C6.10095 3.89333 5.33676 4.20987 4.77331 4.77331C4.20987 5.33676 3.89333 6.10095 3.89333 6.89778C3.89333 8.55111 5.24444 9.88445 6.89778 9.88445V9.88445ZM9.36889 27.5556V12.6756H4.44444V27.5556H9.36889V27.5556Z",fill:"#FFFFFF"})]}),Le=g.exports.createContext(void 0),Se=g.exports.createContext(void 0),ot=({children:t})=>{const[s,i]=g.exports.useState([]),[a,o]=g.exports.useState([]),[n,r]=g.exports.useState(null),[l,p]=g.exports.useState(null),[f,b]=g.exports.useState(null),[w,x]=g.exports.useState({show:!1,provider:""}),h={connectedAccounts:s,unconnectedAccounts:a,TWUser:n,LIUser:l,platform:f,permissions:w},L=g.exports.useMemo(()=>({setConnectedAccounts:i,setUnconnectedAccounts:o,setTWUser:r,setLIUser:p,setPlatform:b,setPermissions:x}),[]);return e(Le.Provider,{value:h,children:e(Se.Provider,{value:L,children:t})})},ce=()=>{const t=g.exports.useContext(Le);if(t===void 0)throw Error("Item must be used inside of SocialMediasProvider, otherwise it will not function correctly.");return t},le=()=>{const t=g.exports.useContext(Se);if(t===void 0)throw Error("Item must be used inside of SocialMediasProvider, otherwise it will not function correctly.");return t};var Fe={},M={},de={},ue={},z={};Object.defineProperty(z,"__esModule",{value:!0});z.createScriptEle=void 0;const st=(t,s)=>new Promise(i=>{const o=document.getElementsByTagName("script")[0];if(document.getElementById(t))return;const n=document.createElement("script");n.id=t,n.src=s,n.onload=i,o.parentNode.insertBefore(n,o)});z.createScriptEle=st;var Pe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.paramsToObject=t.objectToParams=t.isObject=void 0;const s=o=>Object.prototype.toString.call(o)==="[object Object]";t.isObject=s;const i=o=>!(0,t.isObject)(o)||Object.keys(o).length===0?"":"?"+Object.keys(o).map(n=>`${n}=${encodeURIComponent(o[n])}`).join("&");t.objectToParams=i;const a=o=>(o==null?void 0:o.replace(/^\?/,"").split("&").reduce((n,r)=>{if(!r)return n;const[l,p]=r.split("=");return Object.assign(Object.assign({},n),{[l]:decodeURIComponent(p)})},{}))||{};t.paramsToObject=a})(Pe);(function(t){var s=C&&C.__createBinding||(Object.create?function(a,o,n,r){r===void 0&&(r=n);var l=Object.getOwnPropertyDescriptor(o,n);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[n]}}),Object.defineProperty(a,r,l)}:function(a,o,n,r){r===void 0&&(r=n),a[r]=o[n]}),i=C&&C.__exportStar||function(a,o){for(var n in a)n!=="default"&&!Object.prototype.hasOwnProperty.call(o,n)&&s(o,a,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(z,t),i(Pe,t)})(ue);(function(t){var s=C&&C.__awaiter||function(a,o,n,r){function l(p){return p instanceof n?p:new n(function(f){f(p)})}return new(n||(n=Promise))(function(p,f){function b(h){try{x(r.next(h))}catch(L){f(L)}}function w(h){try{x(r.throw(h))}catch(L){f(L)}}function x(h){h.done?p(h.value):l(h.value).then(b,w)}x((r=r.apply(a,o||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.FacebookLoginClient=t.SDK_SCRIPT_ELE_ID=void 0;const i=ue;t.SDK_SCRIPT_ELE_ID="facebook-jssdk",t.FacebookLoginClient={getFB:()=>window.FB?window.FB:(console.warn("FB not found"),null),getLoginStatus(a,o=!1){const n=this.getFB();if(!n){a({status:"unknown"});return}n.getLoginStatus(a,o)},getProfile(a,o){var n;(n=this.getFB())===null||n===void 0||n.api("me",o,a)},init(a){var o;(o=this.getFB())===null||o===void 0||o.init(a)},clear(){window.FB=null;const a=document.getElementById(t.SDK_SCRIPT_ELE_ID);a&&a.remove()},isRedirected(a){var o,n;const r=(0,i.paramsToObject)(window.location.search);return((o=r.state===(a==null?void 0:a.state))!==null&&o!==void 0?o:"facebookdirect")&&r[(n=a==null?void 0:a.response_type)!==null&&n!==void 0?n:""]!==void 0},loadSdk(a,o){return s(this,void 0,void 0,function*(){yield(0,i.createScriptEle)(t.SDK_SCRIPT_ELE_ID,`https://connect.facebook.net/${a}/sdk${o?"/xfbml.customerchat":""}.js`)})},redirectToDialog(a,o){window.location.href=`https://www.facebook.com/dialog/oauth${(0,i.objectToParams)(Object.assign(Object.assign({},a),o))}`},login(a,o){var n;(n=this.getFB())===null||n===void 0||n.login(a,o)},logout(a){this.getLoginStatus(o=>{var n;o.status==="connected"?(n=this.getFB())===null||n===void 0||n.logout(a):a()})}}})(de);var it=C&&C.__createBinding||(Object.create?function(t,s,i,a){a===void 0&&(a=i);var o=Object.getOwnPropertyDescriptor(s,i);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(t,a,o)}:function(t,s,i,a){a===void 0&&(a=i),t[a]=s[i]}),rt=C&&C.__setModuleDefault||(Object.create?function(t,s){Object.defineProperty(t,"default",{enumerable:!0,value:s})}:function(t,s){t.default=s}),ct=C&&C.__importStar||function(t){if(t&&t.__esModule)return t;var s={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&it(s,t,i);return rt(s,t),s},lt=C&&C.__awaiter||function(t,s,i,a){function o(n){return n instanceof i?n:new i(function(r){r(n)})}return new(i||(i=Promise))(function(n,r){function l(b){try{f(a.next(b))}catch(w){r(w)}}function p(b){try{f(a.throw(b))}catch(w){r(w)}}function f(b){b.done?n(b.value):o(b.value).then(l,p)}f((a=a.apply(t,s||[])).next())})};Object.defineProperty(M,"__esModule",{value:!0});const be=ct(g.exports),O=de;function dt(t){var s,i;const{appId:a,language:o="en_US",scope:n="public_profile, email",fields:r="name,email,picture",onSuccess:l,onFail:p,onProfileSuccess:f,className:b,style:w,children:x="Login with Facebook",render:h,autoLoad:L=!1,useRedirect:F=!1,useCustomerChat:u=!1}=t,I=Object.assign(Object.assign({version:"v9.0",xfbml:!1,cookie:!1,localStorage:!0},t.initParams),{appId:a}),c=Object.assign(Object.assign({redirect_uri:typeof window<"u"?location.origin+location.pathname:"/",state:"facebookdirect",response_type:"code"},t.dialogParams),{client_id:a}),_=Object.assign(Object.assign({return_scopes:!1},t.loginOptions),{auth_nonce:typeof((s=t.loginOptions)===null||s===void 0?void 0:s.auth_nonce)=="function"?t.loginOptions.auth_nonce():(i=t.loginOptions)===null||i===void 0?void 0:i.auth_nonce,scope:n});(0,be.useEffect)(()=>{m()},[]);const m=()=>lt(this,void 0,void 0,function*(){yield O.FacebookLoginClient.loadSdk(o,u),window.fbAsyncInit=()=>{O.FacebookLoginClient.init(I);const S=O.FacebookLoginClient.isRedirected(c);if(S===!1&&L){v();return}S===!0&&F&&k()}}),k=()=>{O.FacebookLoginClient.login(S=>{if(!S.authResponse){p&&p({status:"loginCancelled"});return}l&&l(S.authResponse),f&&O.FacebookLoginClient.getProfile(f,{fields:r})},Object.assign(Object.assign({},_),{scope:n}))},v=()=>{if(F){O.FacebookLoginClient.redirectToDialog(c,_);return}if(!window.FB){p&&p({status:"facebookNotLoaded"});return}k()};return h?h({onClick:v,logout:O.FacebookLoginClient.logout}):be.default.createElement("button",{type:"button",onClick:v,className:b,style:w},x)}M.default=dt;var Be={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});var De={};Object.defineProperty(De,"__esModule",{value:!0});var je={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStatus=void 0,function(s){s.Connected="connected",s.NotAuthorized="not_authorized",s.Unknown="unknown"}(t.LoginStatus||(t.LoginStatus={}))})(je);(function(t){var s=C&&C.__createBinding||(Object.create?function(a,o,n,r){r===void 0&&(r=n);var l=Object.getOwnPropertyDescriptor(o,n);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[n]}}),Object.defineProperty(a,r,l)}:function(a,o,n,r){r===void 0&&(r=n),a[r]=o[n]}),i=C&&C.__exportStar||function(a,o){for(var n in a)n!=="default"&&!Object.prototype.hasOwnProperty.call(o,n)&&s(o,a,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(Oe,t),i(De,t),i(je,t)})(Be);(function(t){var s=C&&C.__createBinding||(Object.create?function(n,r,l,p){p===void 0&&(p=l);var f=Object.getOwnPropertyDescriptor(r,l);(!f||("get"in f?!r.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return r[l]}}),Object.defineProperty(n,p,f)}:function(n,r,l,p){p===void 0&&(p=l),n[p]=r[l]}),i=C&&C.__exportStar||function(n,r){for(var l in n)l!=="default"&&!Object.prototype.hasOwnProperty.call(r,l)&&s(r,n,l)},a=C&&C.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(M);i(ue,t),i(Be,t),i(M,t),i(de,t),t.default=o.default})(Fe);const we=Ne(Fe);class y{}P(y,"getSetupInfo",async()=>await B("/platforms/sm-connected-platform","GET")),P(y,"getBusinessFBPages",async()=>await B("/fb/facebook-pages","GET")),P(y,"saveFBUserData",async(s,i)=>await B(`/fb/pages/${s}`,"POST",{data:i})),P(y,"saveFBPageData",async s=>await B("/fb/account","POST",{data:s})),P(y,"getIgAccountData",async()=>await B("/ig/fetchData","GET")),P(y,"saveIgAccountData",async s=>await B("/ig/account","POST",{data:s})),P(y,"unlinkSocialMediaAccount",async s=>await B("/platforms/unlinkAccount/","DELETE",{data:s})),P(y,"getLiUserPages",async s=>await B("/setup/linkedin/pages","POST",{data:s})),P(y,"setLinkedinBusiness",async s=>await B("/setup/linkedin/setup-page","POST",{data:s}));const ut=({anchor:t="right",open:s,closeDrawer:i})=>{const{setErrorMessage:a}=te(),{setPlatform:o}=le(),[n,r]=g.exports.useState(1),[l,p]=g.exports.useState(null),[f,b]=g.exports.useState([]),[w,x]=g.exports.useState(!1),[h,L]=g.exports.useState(null),F=({src:c,alt:_})=>{const[m,k]=g.exports.useState(!0);return d(U,{children:[m&&e(Ie,{variant:"rectangular",className:"avatar",width:50,height:50}),e("img",{src:c,alt:_,onLoad:()=>k(!1),className:`avatar${m?" hidden":""}`,width:m?0:50,height:m?0:50})]})},u=async()=>{try{if(n===1){const c=f.find(k=>k.page_id===l),_={img_url:c.profile_image_url,page_id:c.page_id,page_name:c.page_name},m=await y.saveFBPageData(_);if(!m.success)throw Error(m.message);m.success&&(r(2),p(null))}else if(n===2){if(!h)return a("Please select an instagram account");const c={account_id:h.igAccID,profile_picture:h.image,name:h.name,username:h.username},_=await y.saveIgAccountData(c);if(!_.success)throw Error(_.message);_.success&&(o(null),r(1),p(null))}}catch(c){a(c.message)}},I=g.exports.useCallback(async()=>{try{if(s){if(n===1){const c=await y.getBusinessFBPages();if(!c.success)throw Error(c.message);const{payload:_}=c;if(!_.length)return x(!0);b(_)}else if(n===2){const c=await y.getIgAccountData();if(!c.success)throw Error(c.message);if(c.message==="not found")window.open(c.payload,"_blank");else{const _={igAccID:c.payload.account_id,name:c.payload.name,username:c.payload.username,image:c.payload.profile_picture};L(_)}}}}catch(c){a(c.message)}},[s,n]);return g.exports.useEffect(()=>{I()},[I]),e(re,{anchor:t,open:s,onClose:(c,_)=>{ne(_)||i()},sx:{zIndex:"modal"},children:d(ae,{sx:{width:{xs:"100vw",md:360}},children:[d(oe,{children:[e(V,{onClick:()=>i(),className:"icon-md-button",children:e(N,{})}),e(se,{children:n===1?"Select Facebook Page":"Select Instagram Account"})]}),d(ie,{children:[n===1?d(g.exports.Fragment,{children:[w&&e("p",{children:"Sorry, we couldn't find any Facebook page associated with your account."}),f.length>0&&e(E,{children:f.map(c=>d("div",{children:[e(j,{sx:{p:0},children:d(q,{onClick:()=>p(l?null:c.page_id),children:[e(F,{src:c.profile_image_url,alt:"FB page image url"}),e(T,{primary:c.page_name,secondary:c.isUsedByBusiness?"Page already in use":void 0}),e(Y,{children:l===c.page_id?e(Q,{sx:{color:"#12B0EE"}}):e(ee,{sx:{color:"#F75D34"}})})]})}),e(J,{})]},c.page_id))})]}):e(E,{children:h&&d(g.exports.Fragment,{children:[e(j,{sx:{p:0},children:d(q,{onClick:()=>p(l?null:h.igAccID),children:[e(F,{src:h.image,alt:"name"}),e(T,{primary:h.name}),e(Y,{children:l===h.igAccID?e(Q,{sx:{color:"#12B0EE"}}):e(ee,{sx:{color:"#24272C80"}})})]})}),e(J,{})]})}),e(ke,{children:e(xe,{variant:"contained",style:{marginTop:"40px",marginBottom:"30px",marginLeft:0},disabled:l===null,onClick:u,children:n===1?"Link & Continue to Instagram":"Link Instagram Account"})})]})]})})},gt=[{name:"pages_manage_cta",desc:"The pages_manage_cta permission allows your app to carry out POST and DELETE functions on endpoints used to manage call-to-action buttons on a Facebook Page."},{name:"pages_read_engagement",desc:"The pages_read_engagement permission allows your app to read content (posts, photos, videos, events) posted by the Page, read followers data (including name, PSID), and profile picture, and read metadata and other insights about the Page."},{name:"pages_read_user_content",desc:"The pages_read_user_content permission allows your app to read user-generated content on the Page, such as posts, comments and ratings by users or other Pages, and to delete user comments on Page posts."},{name:"pages_manage_posts",desc:"The pages_manage_posts permission allows your app to create, edit and delete your Page posts."},{name:"ads_management",desc:"The ads_management permission allows your app to both read and manage the Ads account it owns, or has been granted access to, by the Ad account owner."},{name:"ads_read",desc:"The ads_read permission allows your app to access the Ads Insights API to pull Ads report information for Ad accounts you own or have been granted access to by the owner or owners of other ad accounts through this permission. This permissions also grants your app access to the Server-Side API to allow advertisers to send web events from their servers directly to"},{name:"leads_retrieval",desc:"The leads_retrieval permission allows your app to retrieve and read all information captured by a lead ads form associated with an ad created in Ads Manager or the Marketing API."},{name:"instagram_basic",desc:"The instagram_basic permission allows your app to read an Instagram account profile's info and media."},{name:"instagram_manage_comments",desc:"The instagram_manage_comments permission allows your app to create, delete and hide comments on behalf of the Instagram account linked to a Page. Your app can also read and respond to public media and comments that a business has been photo tagged or @mentioned in."},{name:"read_insights",desc:"The read_insights permission allows your app to read the Insights data for Pages, apps and web domains the person owns."},{name:"instagram_content_publish",desc:"The instagram_content_publish permission allows your app to create organic feed photo and video posts on behalf of a business user."},{name:"instagram_manage_insights",desc:"The instagram_manage_insights permission allows your app to get access to insights for the Instagram account linked to a Facebook Page. Your app can also discover and read the profile info and media of other business profiles."},{name:"pages_manage_engagement",desc:"The pages_manage_engagement permission allows your app to create, edit and delete comments posted on the Page."}],pt=[{name:"Read only",desc:"This permission level permits read access to Twitter resources, including (for example) a user\u2019s Tweets, home timeline, and profile information. It does not allow access to read a user\u2019s Direct Messages, and it does not allow to update any element or object."},{name:"Read and write",desc:"This permission level permits read and write access to Twitter resources. In addition to allowing read access, it also allow to post Tweets, follow users, or update elements of a user\u2019s profile information. It also allow to hide replies on behalf of the authenticating user. This permission level does not allow any access to Direct Messages (including read, write, or delete)."}],mt=[{name:"r_emailaddress",desc:"Use the primary email address associated with your LinkedIn account"},{name:"r_liteprofile",desc:"Use your name and photo"},{name:"r_basicprofile",desc:"Use your basic profile including your name, photo, headline, and public profile URL"},{name:"r_organization_social",desc:"Retrieve your organization's posts, comments, reactions, and other engagement data"},{name:"w_member_social",desc:"Create, modify, and delete posts, comments, and reactions on your behalf"},{name:"w_organization_social",desc:"Create, modify, and delete posts, comments, and reactions on your organization's behalf"},{name:"rw_organization_admin",desc:"Manage your organizations' pages and retrieve reporting data"},{name:"r_1st_connections_size",desc:"Use your 1st-degree connections' data"},{name:"r_ads_reporting",desc:"Retrieve reporting for your advertising accounts"},{name:"r_ads",desc:"Retrieve your advertising accounts"},{name:"rw_ads",desc:"Manage your advertising accounts"}],ft=({platform:t})=>d(g.exports.Fragment,{children:[(t==="facebook and instagram"||t==="facebook"||t==="instagram"||t==="")&&gt.map(({name:s,desc:i},a)=>d(g.exports.Fragment,{children:[e(G,{children:s}),e(W,{children:i})]},a)),t==="twitter"&&pt.map(({name:s,desc:i},a)=>d(g.exports.Fragment,{children:[e(G,{children:s}),e(W,{children:i})]},a)),t==="linkedin"&&mt.map(({name:s,desc:i},a)=>d(g.exports.Fragment,{children:[e(G,{children:s}),e(W,{children:i})]},a))]}),ht=({anchor:t="right",closeDrawer:s})=>{const{permissions:i}=ce(),a=()=>({twitter:"Twitter",linkedin:"LinkedIn",facebook:"Facebook & Instagram",instagram:"Facebook & Instagram","":"Facebook & Instagram"})[i.provider];return e(re,{anchor:t,open:i.show,onClose:(o,n)=>!ne(n)&&s(),sx:{zIndex:"modal"},children:d(ae,{sx:{width:{xs:"100vw",md:360}},children:[d(Ge,{children:[e(V,{onClick:()=>s(),className:"icon-md-button",children:e(N,{})}),d(We,{children:[e(Ze,{children:"Permissions Granted"}),e(Ke,{children:a()})]})]}),e(ie,{sx:{pb:2.5},children:e(ft,{platform:i.provider})})]})})},_t=({anchor:t="right",open:s,closeDrawer:i})=>{const{LIUser:a}=ce(),{setLIUser:o,setPlatform:n}=le(),{setErrorMessage:r}=te(),[l,p]=g.exports.useState(!0),[f,b]=g.exports.useState(null),[w,x]=g.exports.useState([]),[h,L]=g.exports.useState(!1),[F,u]=g.exports.useState(!0),I=({src:m,alt:k})=>{const[v,S]=g.exports.useState(!0);return d(U,{children:[v&&e(Ie,{variant:"rectangular",className:"avatar",width:50,height:50}),e("img",{src:m,alt:k,onLoad:()=>S(!1),className:`avatar${v?" hidden":""}`,width:v?0:50,height:v?0:50})]})},c=async()=>{try{const m=w.find(Ue=>Ue.orgID===f);if(!m)throw Error("Error finding organization!");if(a===null)throw Error("LinkedIn User data not found.");const{orgID:k,image:v,name:S}=m,{token:D,tokenSecret:Te,id:Ae}=a,Ee={orgID:k,orgLogo:v,orgName:S,token:D,tokenSecret:Te,linkedinUserId:Ae},ge=await y.setLinkedinBusiness(Ee);if(!ge.success)throw Error(ge.message);n(null),o(null)}catch(m){r(m.message)}},_=g.exports.useCallback(async()=>{try{if(a){const{token:m}=a,k=await y.getLiUserPages({liToken:m});if(!k.success)throw Error(k.message);const{payload:v}=k;if(console.log("fetch li user pages data: ",v),!v)return r("No organization data found in response!");if(v&&!v.length)p(!1),r("No user linkedin organization pages found!"),L(!0),u(!0);else{const S=v.map(D=>({orgID:D.id,image:D.logo,name:D.name,selected:!1,inUse:!1}));p(!1),u(!1),x(S)}}}catch(m){r(m.message)}},[a]);return g.exports.useEffect(()=>{_()},[_]),e(re,{anchor:t,open:s,onClose:(m,k)=>!ne(k)&&i(),sx:{zIndex:"modal"},children:d(ae,{sx:{width:{xs:"100vw",md:360}},children:[d(oe,{children:[e(V,{onClick:()=>i(),className:"icon-md-button",children:e(N,{})}),e(se,{children:"Select Linkedin Page"})]}),d(ie,{children:[l&&e(Xe,{children:e(Qe,{})}),h&&e("p",{children:"Sorry, we could not find any LinkedIn organization page associated with your account."}),w.length>0&&e(E,{children:w.map(m=>d("div",{children:[e(j,{sx:{p:0},children:d(q,{onClick:()=>b(f?null:m.orgID),children:[e(I,{src:m.image,alt:"LI organization profile image"}),e(T,{primary:m.name,secondary:m.inUse?"Page already in use":void 0}),e(Y,{children:f===m.orgID?e(Q,{sx:{color:"#12B0EE"}}):e(ee,{sx:{color:"#F75D34"}})})]})}),e(J,{})]},m.orgID))}),e(ke,{children:e(xe,{variant:"contained",style:{marginTop:"40px",marginBottom:"30px",marginLeft:0},disabled:F,onClick:c,children:"Link LinkedIn Account"})})]})]})})},Ct=()=>{const t="Social Media Linking",{isMobile:s,businessId:i}=ze(),{setErrorMessage:a,setSuccessMessage:o}=te(),{connectedAccounts:n,unconnectedAccounts:r,platform:l}=ce(),{setConnectedAccounts:p,setUnconnectedAccounts:f,setPlatform:b,setPermissions:w}=le(),x=async u=>{if(!u)return;if(!("accessToken"in u)&&!("userID"in u)){a("Problem logging in with Facebook!");return}const I={businessId:i,fb_user_id:u.userID,short_lived_token:u.accessToken};try{const c=await y.saveFBUserData(i,I);c.success?b("facebook"):a(c.messages?c.messages.errors[0].message:c.message)}catch(c){a(c.message)}},h=()=>{localStorage.setItem("esUpdateLIAccount","true"),window.open("https://stg-api.e-so.in/api/v1/setup/linkedin/login","_self")},L=async u=>{try{if((await y.unlinkSocialMediaAccount({platform:u.toUpperCase(),product:"curate"})).success){const c=`${`${u.charAt(0).toUpperCase()}${u.slice(1)}`} unlinked!`;o(c);let _;u==="facebook"||u==="instagram"?(_=n.filter(m=>m.platform!==u),p(_),r.includes("facebook and instagram")||f(H([...r,u]))):(_=n.filter(m=>m.platform!==u),p(_),f(H([...r,u])))}}catch(I){a(I.message)}},F=g.exports.useCallback(async()=>{try{const u=await y.getSetupInfo();if(u.success)p(u.payload.connectedAccounts),f(H(u.payload.unconnectedAccounts));else throw Error(u.message)}catch(u){a(u.message)}},[l]);return g.exports.useEffect(()=>{F()},[F]),d(g.exports.Fragment,{children:[e(He,{children:e("title",{children:t})}),s&&d(oe,{children:[e(V,{component:Re,to:"/business-settings",className:"icon-md-button",children:e(N,{})}),e(se,{children:t})]}),e(qe,{children:d(Ye,{sx:et,children:[n.length>0&&e(_e,{elevation:0,sx:me,children:d(Ce,{sx:fe,children:[e(pe,{sx:{borderBottom:"1px solid #24272C1f",pb:2},children:"Linked Accounts"}),e(E,{children:n.map(({platform:u,accountProfileIMG:I,accountID:c,accountName:_})=>u==="facebook and instagram"?d(j,{sx:{alignItems:"flex-start",p:0,mb:3.75,flexWrap:"wrap"},children:[e(T,{primary:u}),d(U,{children:[e(X,{}),e(nt,{})]}),d("div",{className:"linked-account",children:[e("figure",{children:e("img",{src:"logoURL",alt:"logoURL",height:40,width:40})}),e("span",{className:"account-name",children:"xyz"})]}),d("div",{className:"actions",children:[e(A,{underline:"always",children:"Unlink Account"}),e(A,{underline:"always",onClick:()=>{w({show:!0,provider:"facebook"})},children:"View Permissions"})]})]}):d(j,{sx:{alignItems:"flex-start",p:0,mb:3.75,flexWrap:"wrap"},children:[e(T,{primary:`${u.charAt(0).toUpperCase()}${u.slice(1)}`,sx:{mb:1.5}}),e(U,{sx:{display:"flex",columnGap:1.25,mt:.5,justifyContent:"end"},children:e("img",{src:`/static/images/svg/${u}.svg`,alt:u,height:18,width:18})}),d(R,{sx:{width:"100%",display:"flex",columnGap:1.5,alignItems:"center",mb:1,justifyContent:"flex-start"},children:[e(R,{component:"figure",sx:{display:"flex"},children:e($e,{src:I,alt:I,height:40,width:40})}),e("span",{className:"account-name",children:_})]}),d(R,{sx:{display:"flex",columnGap:4,justifyContent:"space-between"},children:[e(A,{underline:"always",onClick:()=>L(u),sx:{color:"#656F7A",cursor:"pointer",fontSize:12,fontWeight:500,lineHeight:"14px",textDecorationColor:"#656F7A"},children:"Unlink Account"}),e(A,{underline:"always",onClick:()=>w({show:!0,provider:u}),sx:{color:"#656F7A",cursor:"pointer",fontSize:12,fontWeight:500,lineHeight:"14px",textDecorationColor:"#656F7A"},children:"View Permissions"})]})]},c))})]})}),r.length>0&&e(_e,{elevation:0,sx:me,children:d(Ce,{sx:fe,children:[e(pe,{sx:{borderBottom:"1px solid #24272C1f",pb:2},children:"Link More Accounts"}),e(Je,{children:r.map((u,I)=>d("div",{children:[(u==="facebook"||u==="instagram")&&d(Z,{children:[e(K,{children:`${u.charAt(0).toUpperCase()}${u.slice(1)}`}),e(we,{appId:"567369298124889",fields:"name,email,picture",scope:"pages_manage_cta,pages_read_engagement,pages_manage_posts,instagram_basic,instagram_manage_comments,read_insights,instagram_content_publish,instagram_manage_insights,pages_manage_engagement",onSuccess:x,render:c=>d($,{onClick:()=>{c.onClick()},sx:he,children:[e(X,{}),e("span",{className:"label",children:"Sign In with Facebook"})]})})]}),u==="facebook and instagram"&&d(Z,{children:[e(K,{children:"Facebook and Instagram"}),e(we,{appId:"567369298124889",fields:"name,email,picture",scope:"pages_manage_cta,pages_read_engagement,pages_manage_posts,instagram_basic,instagram_manage_comments,read_insights,instagram_content_publish,instagram_manage_insights,pages_manage_engagement",onSuccess:x,render:c=>d($,{onClick:()=>{c.onClick()},sx:he,children:[e(X,{bg:"#FFFFFF"}),e("span",{className:"label",children:"Sign In with Facebook"})]})})]}),!1,u==="linkedin"&&d(Z,{children:[e(K,{children:"LinkedIn"}),d($,{onClick:h,sx:tt,children:[e(at,{}),e("span",{className:"label",children:"Sign in with LinkedIn"})]})]})]},I))})]})})]})}),e(ht,{closeDrawer:()=>w({show:!1,provider:""})}),e(_t,{open:l==="linkedin",closeDrawer:()=>b(null)}),e(ut,{open:l==="facebook",closeDrawer:()=>b(null)})]})},Gt=()=>e(ot,{children:e(Ct,{})});export{Gt as default};
