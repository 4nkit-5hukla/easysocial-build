var Ce=Object.defineProperty;var Ne=(r,i,o)=>i in r?Ce(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o;var re=(r,i,o)=>(Ne(r,typeof i!="symbol"?i+"":i,o),o);import{r as s,j as e,a as t,I as Pe,u as R,aj as H,ak as K,al as oe,aM as q,A as Be,V as _e,cb as $,ap as we,m as Ie,C as Te,b5 as Ae,aa as Fe,ab as Le,ac as De,ad as ke,U as ae,b0 as ie,a5 as Me,W as Ee,ce as We,c7 as $e,cf as qe}from"./index.3f755f43.js";import{u as Y,F as v}from"./FormTextField.42593052.js";import{g as ce}from"./mui-tel-input.es.4c1344f0.js";import{S as le}from"./SettingsApi.4d0e7775.js";import{F as U,G as J}from"./Grid.55238631.js";import{F as b,a as Q}from"./Form.86858169.js";import{F,b as de,a as V}from"./Style.ced39dc3.js";import{C as X}from"./Card.7fc2e334.js";import{M as L}from"./MenuItem.93c4c08f.js";import Ve from"./MapContainer.c9073d42.js";import{L as Re}from"./LeftArrow.2a02d883.js";import{F as Oe}from"./FormControlLabel.39a3e4f7.js";import{C as ze}from"./Checkbox.f820d7e0.js";import{R as Ge}from"./RazorPayApi.5173a384.js";import{A as He}from"./CommonComponents.51c638c4.js";import{E as je}from"./ExpandLess.52442011.js";import{E as Ue}from"./ExpandMore.b6033744.js";import{D as Je}from"./Divider.a2357665.js";import"./TextField.b05be362.js";import"./Select.c042a67e.js";import"./useFormControl.ae5beb16.js";import"./isMuiElement.382d0fe2.js";import"./Menu.92c0f563.js";import"./List.65d7d5bb.js";import"./useControlled.b7ea6072.js";import"./ListItemText.14bf1e60.js";import"./listItemTextClasses.ff0ce9ef.js";import"./InputAdornment.4f38b966.js";import"./ArrowRight.51809bda.js";import"./dividerClasses.de1a71f9.js";import"./index.f3d48750.js";import"./ListItem.9d03250f.js";import"./listItemButtonClasses.577a91ae.js";import"./Search.a51f1312.js";import"./SwitchBase.82e52644.js";import"./Styles.c059562f.js";import"./styled.3dd1de67.js";const ue=s.exports.createContext(void 0),me=s.exports.createContext(void 0),Xe=({children:r})=>{const[i,o]=s.exports.useState(1),[p,B]=s.exports.useState("/static/images/svg/login.svg"),[P,y]=s.exports.useState({firstLine:"Sign Up Successful !",secondLine:"Enter your business details to start your journey."}),f={step:i,leftImg:p,leftText:P},S=s.exports.useMemo(()=>({setStep:o,setLeftImg:B,setLeftText:y}),[]);return e(ue.Provider,{value:f,children:e(me.Provider,{value:S,children:r})})},ee=()=>{const r=s.exports.useContext(ue);if(r===void 0)throw Error("Item must be used inside of BusinessSetupProvider, otherwise it will not function correctly.");return r},O=()=>{const r=s.exports.useContext(me);if(r===void 0)throw Error("Item must be used inside of BusinessSetupProvider, otherwise it will not function correctly.");return r},Ze=()=>{const{leftImg:r,leftText:i}=ee();return t(s.exports.Fragment,{children:[i.firstLine?t("h1",{children:[i.firstLine,e("br",{}),i.secondLine]}):"",e(Pe,{src:r,alt:"Business Setup",width:455,height:478})]})},Ke="AoW5",Ye="SeZ1",Qe="_5mZs",et="_012o",tt="bKmh",st="gJF3",rt="JwIV",at="_8Aao",nt="ze9y",ot="k3eu",it="KXUS",ct="vsMk",lt="MIhE",dt="CORl",ut="V1WY",mt="NE2E",pt="_7nix",ht="Yvkz",gt="zoN5",n={BusiSetupTitle:Ke,Form:Ye,CheckBoxlabel:Qe,OrderSummary:et,Head:tt,Heading:st,Duration:rt,Particulars:at,Particular:nt,DiscountInput:ot,CheckPromoBtn:it,DiscountCard:ct,BillingWrapper:lt,Billingheader:dt,BillingAddress:ut,PlanDetailWrapper:mt,Info:pt,ActionBtn:ht,PlanDetail:gt},bt=()=>{const{country:r,countryName:i}=R(),{setStep:o}=O(),{setErrorMessage:p}=H(),{industryList:B,countriesList:P,provinces:y}=K(),{setProvinces:f}=oe(),[S,C]=s.exports.useState(!1),{control:c,handleSubmit:T,watch:_,reset:I,setValue:N}=Y({defaultValues:{business_name:"",industry:"",mobile_number:"",address:"",pin_code:"",city:"",state:"",country:i}}),{industry:x,mobile_number:u,state:l,country:A}=_(),z=async a=>{try{if(S){const g=await q.updatePendingSetup(a);g.success||p(g.message)}else{const g=await q.createBusiness(a);g.success||p(g.message),localStorage.setItem("businessId",g.payload.businessId)}o(2)}catch(g){p(g.message)}},M=async()=>{const a=await Be.loggedUserInfo();N("mobile_number",a.payload.mobile_number)};s.exports.useEffect(()=>{M()},[]);const h=s.exports.useRef(async()=>{const a=await q.getPendingBusiness();a.payload&&a.success&&(I(a.payload),localStorage.setItem("businessId",a.payload.id),C(!0))});s.exports.useEffect(()=>{h.current()},[]);const d=s.exports.useCallback(async()=>{if(A){const a=await le.getCountryProvinces(A);f(a)}},[A]);return s.exports.useEffect(()=>{d()},[d]),t(X,{component:"form",onSubmit:T(z),className:n.Form,children:[e("div",{className:n.BusiSetupTitle,children:"Connect your business"}),e(U,{children:t(J,{children:[e(b,{children:e(v,{control:c,name:"business_name",label:"Business Name",placeholder:"Business Name",required:!0,sx:F})}),e(b,{children:t(v,{select:!0,control:c,label:"Industry",name:"industry",sx:F,required:!0,defaultValue:x!=null?x:"",children:[e(L,{value:"",disabled:!0,children:"Select Industry"}),B.map((a,g)=>e(L,{value:a,children:a},g))]})}),e(b,{children:e(ce,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:r,value:u,onChange:(a,g)=>{var j;N("mobile_number",(j=g.numberValue)!=null?j:a)},variant:"filled",sx:de})}),e(b,{children:e(v,{control:c,name:"address",label:"Address",placeholder:"Address",required:!0,sx:F})}),e(b,{children:t(v,{select:!0,control:c,label:"Country",name:"country",sx:V,required:!0,defaultValue:A!=null?A:"",children:[e(L,{value:"",disabled:!0,children:"Select Country"}),P.map((a,g)=>e(L,{value:a.name,children:a.name},g))]})}),e(b,{children:y.length>0?t(v,{select:!0,control:c,label:"State",name:"state",sx:V,required:!0,defaultValue:l!=null?l:"",children:[e(L,{value:"",disabled:!0,children:"Select State"}),y.map((a,g)=>e(L,{value:a.name,children:a.name},g))]}):e(v,{control:c,name:"state",label:"State",placeholder:"State",required:!0,sx:V})}),e(b,{children:e(v,{control:c,name:"city",label:"City",placeholder:"City",required:!0,sx:F})}),e(b,{children:e(v,{control:c,name:"pin_code",label:"Pincode",placeholder:"Pincode",required:!0,sx:F})}),e(Q,{type:"submit",children:"Save & Tag Location"})]})})]})},yt="mtuX",ft="WjCW",ne={MainWrapper:yt,Title:ft},te=({title:r})=>{const{setStep:i}=O(),{step:o}=ee();return e(s.exports.Fragment,{children:t("div",{className:ne.MainWrapper,children:[e(_e,{onClick:()=>i(o-1),sx:{width:32,height:32},children:e(Re,{})}),e("div",{className:ne.Title,children:r})]})})},St=()=>{var x;const{isMobile:r,isTablet:i}=R(),{setStep:o,setLeftText:p}=O(),{setErrorMessage:B}=H(),{timeZoneList:P}=K();s.exports.useEffect(()=>{p({firstLine:"",secongLine:""})},[]);const{control:y,handleSubmit:f,watch:S,setValue:C}=Y({defaultValues:{latitude:20.5937,longitude:78.9629,timezone:{label:"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi",value:5.5}}}),{latitude:c,longitude:T,timezone:_}=S(),I=u=>{C("latitude",typeof u.lat=="function"?u.lat():u.lat),C("longitude",typeof u.lng=="function"?u.lng():u.lng)},N=async u=>{try{const l=await q.updateLocation(u);l.success||B(l.messages?l.messages.errors[0].message:l.message),o(3)}catch(l){B(l.message)}};return t(s.exports.Fragment,{children:[r&&e(te,{title:"Save Location"}),t(X,{component:"form",onSubmit:f(N),className:n.Form,children:[i&&e("div",{className:n.BusiSetupTitle,children:"Save Location"}),e(U,{children:t(J,{style:{width:"100%"},children:[e(b,{children:e(Ve,{onChange:I,initialCenter:{lat:c!=null?c:20.5937,lng:T!=null?T:78.9629}})}),e(b,{children:t(v,{select:!0,control:y,label:"Time Zone",name:"timezone.label",sx:V,required:!0,defaultValue:(x=_==null?void 0:_.label)!=null?x:"",children:[e(L,{value:"",disabled:!0,children:"Select Time Zone"}),P.map((u,l)=>e(L,{value:u.label,children:u.label},l))]})}),e(Q,{type:"submit",children:"Save & Select Plan"})]})})]})]})},xt=({setBillingDetail:r})=>{const{isMobile:i,isTablet:o}=R(),{setErrorMessage:p}=H(),{countriesList:B,provinces:P}=K(),{setProvinces:y}=oe(),{setLeftText:f,setStep:S}=O(),C={company_name:"",email:"",number:"",address:"",city:"",state:"",country:"",pin_code:"",gst_number:"",pan_number:""},{control:c,handleSubmit:T,watch:_,reset:I,setValue:N}=Y({defaultValues:C}),{number:x,state:u,country:l}=_(),A=s.exports.useCallback(async()=>{if(l){const h=await le.getCountryProvinces(l);y(h)}},[l]);s.exports.useEffect(()=>{A()},[A]),s.exports.useEffect(()=>{f({firstLine:"",secongLine:""})},[]);const z=async h=>{try{console.log("data",h);const d=await q.updateBillingDetail(h);if(!d.success)throw Error(d.messages?d.messages.errors[0].message:d.message);r(h),S(5)}catch(d){p(d.message)}},M=async h=>{const d=h.target.checked;try{if(d){const a=await q.getBusinessById(Number(localStorage.getItem("businessId")));if(a.errors)throw Error(a.errors.pop().message);if(!a.success)throw Error(a.message);console.log("res.payload.mobile_number",a.payload.mobile_number),I({company_name:a.payload.business_name,number:a.payload.mobile_number,address:a.payload.address,city:a.payload.city,state:a.payload.state,country:a.payload.country,pin_code:a.payload.pin_code})}else I(C)}catch(a){p(a.message)}};return t(s.exports.Fragment,{children:[i&&e(te,{title:"Billing Detail"}),t(X,{component:"form",onSubmit:T(z),className:n.Form,children:[o&&e("div",{className:n.BusiSetupTitle,children:"Billing Detail"}),e(U,{children:t(J,{children:[e(Oe,{className:n.CheckBoxlabel,control:e(ze,{onChange:h=>M(h)}),label:"Billing Details are same as Business Details"}),e(b,{children:e(v,{control:c,name:"company_name",label:"Company Name",placeholder:"Company Name",required:!0,sx:F})}),e(b,{children:e(v,{control:c,name:"email",label:"Email",placeholder:"Email",required:!0,sx:F})}),e(b,{children:e(ce,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:"IN",value:x,onChange:(h,d)=>{var a;N("number",(a=d.numberValue)!=null?a:h)},variant:"filled",sx:de})}),e(b,{children:e(v,{control:c,name:"address",label:"Address",placeholder:"Address",required:!0,sx:F})}),e(b,{children:t(v,{select:!0,control:c,label:"Country",name:"country",sx:V,required:!0,defaultValue:l!=null?l:"",children:[e(L,{value:"",disabled:!0,children:"Select Country"}),B.map((h,d)=>e(L,{value:h.name,children:h.name},d))]})}),e(b,{children:P.length>0?t(v,{select:!0,control:c,label:"State",name:"state",sx:V,required:!0,defaultValue:u!=null?u:"",children:[e(L,{value:"",disabled:!0,children:"Select State"}),P.map((h,d)=>e(L,{value:h.name,children:h.name},d))]}):e(v,{control:c,name:"state",label:"State",placeholder:"State",required:!0,sx:F})}),e(b,{children:e(v,{control:c,name:"city",label:"City",placeholder:"City",required:!0,sx:F})}),e(b,{children:e(v,{control:c,name:"pin_code",label:"Pincode",placeholder:"Pincode",required:!0,sx:F})}),e(b,{children:e(v,{control:c,name:"gst_number",label:"GST Number",placeholder:"GST Number",sx:F})}),e(b,{children:e(v,{control:c,name:"pan_number",label:"PAN Number",placeholder:"PAN Number",sx:F})}),e(Q,{type:"submit",children:"Verify & Pay"})]})})]})]})},vt=({currency:r,grandTotal:i,billingDetail:o,udf2:p,description:B})=>{const[P,y]=s.exports.useState(!0);return s.exports.useEffect(()=>{const S=document.createElement("script");S.src="https://checkout.razorpay.com/v1/checkout.js",S.async=!0,document.body.appendChild(S)},[]),e(He,{type:"button",variant:"contained",className:"mt-5 ms-0 pay-btn",onClick:async()=>{var _,I;y(!0);const S=await Ge.createOrder({amount:parseFloat(i.toFixed(2)),notes:{businessId:localStorage.getItem("businessId"),plans:p==null?void 0:p.join(","),gst:o.gst_number,pan:o.pan_number}}),C={key:"rzp_test_RRNQ95mWTINe0J",name:"Easy Social",description:B,order_id:S.payload.order.id,prefill:{name:o.company_name,email:o.email,contact:o.number},notes:{billing_name:o.company_name,billing_address:o.address,billing_city:o.city,billing_state:o.state,billing_zip:(_=o.pin_code)==null?void 0:_.toString(),billing_country:o.country,billing_tel:(I=o.number)==null?void 0:I.toString(),billing_email:o.email},theme:{color:"#686CFD"},modal:{confirm_close:!0,ondismiss:function(){y(!1)}},callback_url:`https://stg-api.e-so.in${S.payload.url}`,redirect:!0,handler:function(){y(!1)}},c=window;new c.Razorpay(C).open()},showLoader:P,children:`Pay ${r}${$(i)}`})};class pe{}re(pe,"validatePromoCode",async i=>await we("/promocode/validate","POST",{data:i}));const Ct=({plans:r,setPlans:i})=>{H();const[o,p]=s.exports.useState(""),[B,P]=s.exports.useState(!1),y=()=>{P(!1)},[f,S]=s.exports.useState(),[C,c]=s.exports.useState([!1,!1]),T=N=>{const x=C.map((u,l)=>l===N?C[l]=!0:C[l]=!1);c(x)},_=()=>{P(!0)},I=async()=>{const N=r.filter(x=>x.id!==f);localStorage.setItem("selectedPlan",JSON.stringify(N)),i(N)};return t(s.exports.Fragment,{children:[e("div",{className:Ie(n.PlanDetailWrapper,"col-10 col-sm-6 col-md-12"),children:t("div",{className:n.BillingWrapper,children:[e("div",{className:n.Billingheader,children:e("h5",{children:"Plan Detail"})}),r&&r.map((N,x)=>{const u=$(N.amount);return t("div",{children:[t("div",{className:n.Billingheader,children:[t("div",{className:n.Info,children:[e("h6",{children:N.title}),e("small",{className:"price",children:`${o}${u}/Month`})]}),t("div",{className:n.ActionBtn,children:[r.length>1&&e("button",{type:"button",onClick:()=>{S(N.id),_()},children:"Remove"}),t("button",{onClick:()=>T(x),type:"button",children:["Details ",C[x]?e(je,{}):e(Ue,{})]})]})]}),e(Te,{in:C[x],className:"data",children:e("div",{className:n.PlanDetail,children:Ae(N.plan_detail)})})]},`${x}`)})]})}),t(Fe,{open:B,"aria-labelledby":"responsive-dialog-title",children:[e(Le,{id:"responsive-dialog-title",children:"Delete"}),e(De,{children:"Are you sure you want to delete?"}),t(ke,{children:[e(ae,{color:"secondary",onClick:()=>{y()},children:"Cancel"}),e(ae,{onClick:async()=>{await I(),y()},autoFocus:!0,children:"Delete"})]})]})]})},Nt=ie(new Date).format("Do MMM"),Pt=({billingDetail:r})=>{const{setErrorMessage:i}=H(),{isMobile:o,isTablet:p}=R(),{setStep:B,setLeftText:P,setLeftImg:y}=O(),[f,S]=s.exports.useState([]),[,C]=s.exports.useState(0),[c,T]=s.exports.useState(""),[_,I]=s.exports.useState(""),[N,x]=s.exports.useState(0),[u,l]=s.exports.useState(0),[A,z]=s.exports.useState(0),[M,h]=s.exports.useState(0),[d,a]=s.exports.useState(""),[g,j]=s.exports.useState(""),[he,ge]=s.exports.useState([]),[be,ye]=s.exports.useState();s.exports.useEffect(()=>{y("/static/images/svg/order_summary.svg"),P({firstLine:"",secongLine:""})},[]),s.exports.useEffect(()=>{const m=[],D=localStorage.getItem("selectedPlan");if(D){const w=JSON.parse(D),k=new Date;let E=k.setDate(k.getDate()+w[0].validity-1);E=ie(E).format("Do MMM"),ye(E),S(w),a(w[0].currency==="INR"?"\u20B9":"$"),j(w[0].currency);let se=0;const ve=0;for(let W=0;W<w.length;W++)se+=w[W].has_discount?w[W].discount_amount:w[W].amount,m.push(w[W].slug);Z(se,ve,w[0].currency),ge(m)}},[]);const Z=async(m,D,w)=>{let k=m-D;k<1&&(k=0);const E=w==="INR"?k*.18:0;l(E),x(k),h(m),z(k+E)},fe=()=>{C(0),I(""),T(""),Z(M,0,g)},Se=()=>{B(4)},xe=async()=>{const m=c,D=await pe.validatePromoCode({promocode:m,total_amount:M,currency:g});if(!D.success)i(D.message);else{const w=D.payload.promo_discount;C(w),I(m),Z(M,w,g)}};return t(s.exports.Fragment,{children:[o&&e(te,{title:"Order Summary"}),t(X,{className:n.Form,children:[p&&e("div",{className:n.BusiSetupTitle,children:"Order Summary"}),e(U,{children:e(J,{children:t("div",{className:n.OrderSummary,children:[t("div",{className:n.Head,children:[e("h5",{className:n.Heading,children:"Details"}),e("small",{className:n.Duration,children:`${Nt} to ${be}`})]}),t("div",{className:n.Particulars,children:[f&&f.map((m,D)=>t("div",{className:n.Particular,children:[t("p",{className:n.Title,children:[`${m.category} - ${m.name} - ${m.validity} Days `,m.has_discount&&t("s",{children:[d,m.amount]})]}),t("p",{children:[d,$(m.has_discount?m.discount_amount:m.amount)]})]},`${D}`)),t("div",{className:n.Particular,children:[e("p",{children:"Discount Promo"}),e("div",{children:_===""?t(s.exports.Fragment,{children:[e("input",{type:"text",placeholder:"Enter Code",name:"discount",className:n.DiscountInput,onChange:m=>T(m.target.value)}),e("button",{className:n.CheckPromoBtn,onClick:xe,children:"Check"})]}):e("span",{className:"discount-value",children:" "})})]}),e("div",{className:n.Particular,children:_!==""&&t("div",{className:n.DiscountCard,children:[e("small",{children:String(_).toUpperCase()}),e("button",{type:"button",onClick:fe,children:e("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"//www.w3.org/2000/svg",children:t("g",{opacity:"0.7",children:[e("path",{d:"M1 1L9.5 9.5",stroke:"#24272C"}),e("path",{d:"M9.5 1L1 9.5",stroke:"#24272C"})]})})})]})}),g==="INR"&&t(s.exports.Fragment,{children:[t("div",{className:n.Particular,children:[e("p",{className:"title",children:"Taxable Amount"}),e("p",{className:"amount",children:`${d}${$(N)}`})]}),t("div",{className:n.Particular,children:[e("p",{className:"title",children:"GST Amount"}),e("p",{className:"amount",children:`${d}${$(u)}`})]}),t("div",{className:n.Particular,children:[e("p",{className:"title",children:"GST No."}),e("p",{className:"number",children:r.gst_number})]})]}),e(Je,{style:{margin:"10px 0"}}),t("div",{className:n.Particular,children:[e("p",{className:n.Title,children:e("strong",{children:"Total Payable Amount"})}),e("p",{className:"amount",children:e("strong",{children:`${d}${$(A)}`})})]})]}),e("div",{className:"col-10 col-sm-6 col-md-12",children:t("div",{className:n.BillingWrapper,children:[t("div",{className:n.Billingheader,children:[e("h5",{children:r.company_name}),e("button",{type:"button",onClick:()=>Se(),children:"Edit Billing Address"})]}),e("div",{className:n.BillingAddress,children:`${r.address}, ${r.city}, ${r.state}-${r.pin_code}`})]})}),e(Ct,{plans:f,setPlans:m=>S(m)}),A&&e(vt,{currency:d,grandTotal:A,billingDetail:r,udf2:he,description:f[0].name})]})})})]})]})},Bt=()=>{const r=Me(),{navigate:i,isMobile:o}=R(),{step:p}=ee(),{setStep:B}=O(),[P,y]=s.exports.useState("");if(p===3&&i("/choose-plan"),r.state){const{name:f}=r.state&&r.state;f==="redirectBusi"&&(i("/business-setup",{replace:!0}),p!==4&&B(4))}return e(s.exports.Fragment,{children:(()=>{switch(p){case 1:return e(bt,{});case 2:return e(St,{});case 4:return e(xt,{setBillingDetail:f=>y(f)});case 5:return e(Pt,{billingDetail:P})}})()})},_t="ighc",wt="onBD",It="a-wS",Tt="Ty1D",At="_6yu3",G={OuterWrapper:_t,InnerWrapper:wt,LeftWrapper:It,LeftFixed:Tt,RightWrapper:At},gs=()=>{const{isTablet:r}=R();return t(s.exports.Fragment,{children:[e(Ee,{children:e("title",{children:"Business Setup"})}),e(We,{children:e($e,{children:t(Xe,{children:[e(qe,{}),e("div",{className:G.OuterWrapper,children:t("div",{className:G.InnerWrapper,children:[r&&e("div",{className:G.LeftWrapper,children:e("div",{className:G.LeftFixed,children:e(Ze,{})})}),e("div",{className:G.RightWrapper,children:e(Bt,{})})]})})]})})})]})};export{gs as default};
