import{u as _,al as v,r as s,a as n,j as r,a$ as m,aq as w,c8 as N,c9 as A,W as E}from"./index.0e50089d.js";import{B as P}from"./BizParticipantsProvider.ed3b0130.js";import{A as D}from"./AllPaymentsApi.35eca7b4.js";import{M as B,c as t,a as F,D as H}from"./MobileFilter.36c1d0cf.js";import{S as $}from"./ServiceExpiryAlert.cbde0d09.js";import{C as k}from"./Card.de383c1e.js";import{C as I}from"./CardContent.14eca7f7.js";import{T as R,a as j,b as z,c as O,d as a,e as G}from"./TableRow.84527090.js";import"./Search.e50af5f1.js";import"./Clear.a2274ef2.js";import"./LeftArrow.21b3a4cf.js";import"./Wrappers.34ec9d49.js";import"./RangePopUp.dedb1fb9.js";import"./index.eb4aa1c1.js";import"./TextField.c3de8082.js";import"./Select.4f434c76.js";import"./useFormControl.19c227b5.js";import"./isMuiElement.abfbb6fd.js";import"./Menu.75696a10.js";import"./List.f68a2eea.js";import"./useControlled.8f6662af.js";import"./usePickerState.3071379e.js";import"./Grid.9db95d03.js";import"./InputAdornment.b9328cbd.js";import"./StaticDateRangePicker.dfbf3933.js";import"./PickersToolbarButton.e2646569.js";import"./Link.123a1b4e.js";const W=()=>{const{isMobile:d,isTablet:y}=_(),{showSnack:h}=v(),[u,g]=s.exports.useState([]),[f,b]=s.exports.useState(""),[x,T]=s.exports.useState(0),[c,C]=s.exports.useState(new Date(new Date().getFullYear(),0,1)),[l,S]=s.exports.useState(new Date(new Date().getFullYear(),11,31)),M=s.exports.useRef(async(e,o,p)=>{e&&e.setHours(0,0,0,0),o&&o.setHours(23,59,59,999);const i=await D.getAllOrders(e,o,p);if(!i.success)return h(i.message,"error");g(i.payload)});s.exports.useEffect(()=>{M.current(c,l,f)},[c,l,f]);const Y=s.exports.useRef(async()=>{const e=await D.getExpiryBusinessCount();if(!e.success)return h(e.message,"error");T(e.payload)});return s.exports.useEffect(()=>{Y.current()},[]),n(s.exports.Fragment,{children:[d&&r(B,{title:"Orders"}),r("div",{className:t.ContentInner,children:n("div",{className:t.InnerWrapper,children:[d&&r(F,{placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>S(e)}),x>0&&r($,{noOfBusi:x}),r(k,{elevation:0,className:t.Card,children:n(I,{className:t.CardContent,children:[y&&r(H,{title:"Orders",placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>S(e)}),r("div",{className:t.TableOuter,children:r(R,{className:t.TableContainer,children:n(j,{children:[r(z,{children:n(O,{className:t.TableHead,children:[r(a,{component:"th",children:"Date"}),r(a,{component:"th",children:"Particulars"}),r(a,{component:"th",children:"Order No."}),r(a,{component:"th",children:"Amount"}),r(a,{component:"th",children:"Inv No."})]})}),r(G,{children:u&&u.map(e=>{var i;let o="",p="";return e.order_type==="plan"&&(o=`${m(e.start_date).format("D")} - ${m(e.expiry_date).format("D MMM YYYY")}`,p=` Plan Code: ${(i=e.plan)==null?void 0:i.slug}`),r(w,{children:n(O,{children:[r(a,{className:t.OrderDate,children:m(e.created_at).format("D MMM YYYY")}),n(a,{className:t.Particulars,children:[r("p",{children:e.business.business_name}),n("span",{children:[e.particulars.charAt(0).toUpperCase()+e.particulars.slice(1)," -"," ",e.short_desc&&e.short_desc]}),r("br",{}),r("span",{children:o}),r("label",{children:p})]}),r(a,{className:t.OrderNumber,children:N(e.id)}),n(a,{className:t.OrderDate,children:[e.currency==="INR"?"\u20B9":"$",A(e.paid_amount)]}),r(a,{children:N(e.invoice_number)})]})})})})]})})})]})})]})})]})},Ce=()=>n(s.exports.Fragment,{children:[r(E,{children:r("title",{children:"Orders"})}),r(P,{children:r(W,{})})]});export{Ce as default};
