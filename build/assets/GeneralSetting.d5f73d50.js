import{ai as A,j as e,a as n,aj as R,r as d,ak as N,u as k,al as z,V as H,L as U,am as X,W as D}from"./index.fd4ae6d6.js";import{F as f,u as V}from"./FormTextField.2a1e5a18.js";import{S as v}from"./SettingsApi.16b434c3.js";import{L as Z}from"./LeftArrow.5ec3afba.js";import{c as j,H as W,d as $,e as K}from"./Wrappers.39eb0e5b.js";import{C as w,a as q}from"./Card.ec9aa8ee.js";import{F as u,A as O,a as J}from"./Form.f7d2dffb.js";import{p as Q}from"./Position.module.ff7b7fa6.js";import{g as Y}from"./mui-tel-input.es.a35b6f96.js";import{F as ee}from"./FileUpload.890efadc.js";import{C as _}from"./Tags.1cd57cb3.js";import{F as G,G as T,S as re,a as M,H as y}from"./Grid.5052dff7.js";import{F as x,a as L,b as te}from"./Style.ced39dc3.js";import{M as g}from"./MenuItem.b8d16956.js";import{C as se,a as ae}from"./Styles.3864ecd6.js";import{F as ne}from"./Styles.c059562f.js";import{C as ie}from"./Card.e09e37ac.js";import{C as le}from"./CardContent.f0d0982c.js";import"./TextField.fa193343.js";import"./Select.96b8ae4e.js";import"./useFormControl.13400fe7.js";import"./isMuiElement.8b92655b.js";import"./Menu.c4bc1234.js";import"./List.bc505dcb.js";import"./useControlled.9f1cf0dd.js";import"./ArrowRight.5a51b024.js";import"./ListItemText.6e629602.js";import"./listItemTextClasses.93f3772f.js";import"./InputAdornment.57d392ca.js";import"./FileType.118a3b25.js";import"./AssetsApi.e47c6a62.js";import"./index.1ccbe93f.js";import"./tslib.es6.61e9e735.js";import"./toConsumableArray.52b4c8e6.js";import"./ListItem.b71d9e15.js";import"./listItemButtonClasses.091445a7.js";import"./styled.fbb11cbf.js";import"./dividerClasses.8305ae6e.js";const oe=({control:s,setValue:b,watch:c})=>{const{industryList:h}=A(),{logo:l,industry:r,mobile_number:a}=c();return e(w,{elevation:0,children:n(q,{children:[e(_,{children:"Business Details"}),n(G,{children:[n(T,{children:[e(u,{children:e(f,{control:s,name:"business_name",label:"Business Name",placeholder:"Business Name",required:!0,sx:x})}),e(u,{children:n(f,{select:!0,control:s,label:"Industry",name:"industry",sx:L,required:!0,defaultValue:r!=null?r:"",children:[e(g,{value:"",disabled:!0,children:"Select Industry"}),h.map((o,i)=>e(g,{value:o,children:o},i))]})}),e(u,{children:e(f,{control:s,name:"website",label:"Website URL",placeholder:"Website URL",sx:x})}),e(u,{children:e(Y,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:"IN",value:a,onChange:o=>{b("mobile_number",o)},variant:"filled",sx:te})})]}),e(re,{children:e(ee,{setValue:b,control:s,label:"Upload Logo Image",defaultFieldName:"logo",fileURL:l!=null?l:""})})]})]})})},de=({control:s,watch:b})=>{const{countriesList:c,provinces:h}=A(),{setProvinces:l}=R(),{country:r,state:a}=b(),o=d.exports.useRef(async()=>{const i=await v.getCountryProvinces(r);l(i)});return d.exports.useEffect(()=>{r&&o.current()},[r]),e(w,{elevation:0,children:n(q,{children:[e(_,{children:"Business Address"}),e(G,{children:e(T,{children:e(u,{children:e(f,{control:s,name:"address",label:"Address",placeholder:"Address",required:!0,sx:x})})})}),n(M,{children:[e(y,{children:e(u,{children:n(f,{select:!0,control:s,label:"Country",name:"country",sx:L,required:!0,defaultValue:r!=null?r:"",children:[e(g,{value:"",disabled:!0,children:"Select Country"}),Array.isArray(c)&&c.map((i,m)=>e(g,{value:i.name,children:i.name},m))]})})}),e(y,{children:e(u,{children:h.length>0?n(f,{select:!0,control:s,label:"State",name:"state",sx:L,required:!0,defaultValue:a!=null?a:"",children:[e(g,{value:"",disabled:!0,children:"Select State"}),Array.isArray(h)&&h.map((i,m)=>e(g,{value:i.name,children:i.name},m))]}):e(f,{control:s,name:"state",label:"State",placeholder:"State",required:!0,sx:x})})})]}),n(M,{children:[e(y,{children:e(u,{children:e(f,{control:s,name:"city",label:"City",placeholder:"City",required:!0,sx:x})})}),e(y,{children:e(u,{children:e(f,{control:s,name:"pin_code",label:"Pincode",placeholder:"Pincode",required:!0,sx:x})})})]})]})})},ce=d.exports.lazy(()=>N(()=>import("./MapContainer.6ed6fa4d.js"),["assets/MapContainer.6ed6fa4d.js","assets/index.fd4ae6d6.js","assets/index.b66c0569.css","assets/index.f3d48750.js","assets/List.bc505dcb.js","assets/ListItem.b71d9e15.js","assets/listItemButtonClasses.091445a7.js","assets/isMuiElement.8b92655b.js","assets/ListItemText.6e629602.js","assets/listItemTextClasses.93f3772f.js","assets/Search.d9fec008.js","assets/Select.96b8ae4e.js","assets/useFormControl.13400fe7.js","assets/Menu.c4bc1234.js","assets/useControlled.9f1cf0dd.js","assets/MapContainer.270eacac.css"])),me=({control:s,watch:b,setValue:c})=>{var m;const{timeZoneList:h}=A(),{latitude:l,longitude:r,timezone:a}=b(),o=t=>{c("address",typeof t.address=="function"?t.address():t.address),c("latitude",typeof t.lat=="function"?t.lat():t.lat),c("longitude",typeof t.lng=="function"?t.lng():t.lng)},i=d.exports.useRef(async()=>{const[t]=h.filter(({label:S})=>S===a.label);t&&c("timezone.value",parseFloat(t.value))});return d.exports.useEffect(()=>{a.value&&i.current()},[a.value]),console.log(l,r,a),e(ie,{elevation:0,sx:se,children:n(le,{sx:ae,children:[e(_,{children:"Location Tagging & Timezone"}),e(d.exports.Suspense,{fallback:null,children:e(u,{children:e(ce,{onChange:o,initialCenter:{lat:l!=null?l:20.5937,lng:r!=null?r:78.9629}})})}),e(G,{children:e(T,{children:e(u,{children:n(f,{select:!0,control:s,label:"Time Zone",name:"timezone.label",sx:ne,required:!0,defaultValue:(m=a==null?void 0:a.label)!=null?m:"",children:[e(g,{value:"",disabled:!0,children:"Select Time Zone"}),h.map((t,S)=>e(g,{value:t.label,children:t.label},S))]})})})})]})})},ue=()=>{const{isMobile:s}=k(),{setErrorMessage:b,setSuccessMessage:c}=z(),[h,l]=d.exports.useState(!0),[r,a]=d.exports.useState(Math.random()),{control:o,handleSubmit:i,watch:m,reset:t,setValue:S}=V({defaultValues:{business_name:"",mobile_number:"",industry:"",website:"",logo:"",address:"",city:"",state:"",country:"",pin_code:"",latitude:20.5937,longitude:78.9629,timezone:{label:"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi",value:5.5}}}),{timezone:E}=m(),B=async p=>{try{const{id:F,mobile_number:P}=p,C=await v.putGeneralSettings(F,{...p,number:P,timezoneLabel:E.label,timezoneValue:E.value});if(C.errors)throw Error(C.errors.pop().message);if(!C.success&&C.message)throw Error(C.message);c(C.message),a(Math.random())}catch(F){b(F.message)}},I=d.exports.useRef(async()=>{try{const p=await v.getGeneralSettings();if(p.errors)throw Error(p.errors.pop().message);if(!p.success)throw Error(p.message);t(p.payload),l(!1)}catch(p){b(p.message)}});return d.exports.useEffect(()=>{I.current()},[r]),n(d.exports.Fragment,{children:[s&&n(j,{children:[e(H,{component:U,to:"/business-settings",className:"icon-md-button",children:e(Z,{})}),e(W,{children:"General Settings"})]}),h?e(w,{className:Q.AbsCenter,children:e(X,{height:72,width:72})}):e($,{children:n(K,{onSubmit:i(B),children:[e(oe,{control:o,watch:m,setValue:S}),e(de,{control:o,watch:m}),e(me,{control:o,watch:m,setValue:S}),e(O,{children:e(J,{type:"submit",children:"Save"})})]})})]})},Je=()=>n(d.exports.Fragment,{children:[e(D,{children:e("title",{children:"General Settings"})}),e(ue,{})]});export{Je as default};
