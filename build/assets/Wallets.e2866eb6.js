import{r as n,c as X,b as E,j as a,a as e,B as d,ca as C,u as M,Z as z,as as P,aV as R,W as v}from"./index.be83498f.js";import{B as O}from"./BizParticipantsProvider.23575c9f.js";import{A as Y}from"./AllPaymentsApi.a8858557.js";import{A as _,r as H,g as j,I as B,T as $}from"./Tags.14afa6dc.js";import{a as W,i as V,j as L,A as N,k as q,l as G,m as J,C as Q,I as Z,b as K,T as U,c as tt,d as at,O as rt}from"./Styles.623f0960.js";import{M as et,a as ot,D as nt}from"./DeskHeader.9e836c6c.js";import{u as it}from"./index.esm.d5c830c3.js";import{I as S}from"./Inr.ef19c78f.js";import{W as lt}from"./Wallet.d5523d31.js";import{g as st}from"./Styles.ab1c376b.js";import{F as ct}from"./FormTextField.3dcd98ea.js";import{R as mt}from"./RazorPayApi.ea2ee807.js";import{C as F}from"./Card.095d38fe.js";import{C as k}from"./CardContent.52d68517.js";import{D as pt}from"./Divider.8d1c721f.js";import{I as dt}from"./InputAdornment.2641cb81.js";import{T as ht,a as ut,b as bt,c as I,d as s,e as xt}from"./TableRow.bab20141.js";import"./withStyles.5199bd64.js";import"./ListItem.f4e4c30f.js";import"./List.52405447.js";import"./listItemButtonClasses.f171b0ff.js";import"./isMuiElement.06135e34.js";import"./styled.b1d02db7.js";import"./LeftArrow.9ba8f037.js";import"./Search.e8235d91.js";import"./Clear.35265845.js";import"./RangePopUp.e3ebbd69.js";import"./index.eb4aa1c1.js";import"./TextField.966cb2e6.js";import"./Select.10d84ef4.js";import"./useFormControl.62e75b61.js";import"./Menu.9e38a63f.js";import"./useControlled.0fd5f443.js";import"./usePickerState.78039cc2.js";import"./Grid.bf78bcfb.js";import"./StaticDateRangePicker.98db8f9a.js";import"./PickersToolbarButton.721eb14e.js";import"./Link.c8642aac.js";import"./dividerClasses.ba5b8194.js";var D=(i=>(i.CREDIT="Credit",i.DEBIT="Debit",i))(D||{});const gt=({balance:i})=>{const[T,c]=n.exports.useState(!0),{fetchDefaultBusiness:h}=X(),{selectedBusiness:t}=E();n.exports.useEffect(()=>{!t&&h.current()},[t]);const{control:u,watch:b,setValue:y}=it({defaultValues:{amount:100}}),{amount:m}=b(),l=async o=>{y("amount",o+m)};n.exports.useEffect(()=>{const o=document.createElement("script");o.src="https://checkout.razorpay.com/v1/checkout.js",o.async=!0,document.body.appendChild(o)},[]);const x=async()=>{c(!0);const o=m*.18,p=await mt.createOrder({amount:parseFloat(o)+parseFloat(m.toFixed(2)),notes:{plans:"wallet",gstAmt:o,businessId:localStorage.getItem("businessId")}}),A={key:"rzp_test_RRNQ95mWTINe0J",name:"Easy Social",description:"Wallet Recharge",order_id:p.payload.order.id,prefill:{name:t==null?void 0:t.billing_detail.company_name,email:t==null?void 0:t.billing_detail.email,contact:t==null?void 0:t.billing_detail.number},notes:{billing_name:t==null?void 0:t.billing_detail.company_name,billing_address:t==null?void 0:t.billing_detail.address,billing_city:t==null?void 0:t.billing_detail.city,billing_state:t==null?void 0:t.billing_detail.state,billing_zip:t==null?void 0:t.billing_detail.pin_code,billing_country:t==null?void 0:t.billing_detail.country,billing_tel:t==null?void 0:t.billing_detail.number,billing_email:t==null?void 0:t.billing_detail.email},theme:{color:"#686CFD"},modal:{confirm_close:!0,ondismiss:function(){c(!1)}},callback_url:`https://api.easysocial.in${p.payload.url}`,redirect:!0,handler:function(){c(!1)}},r=window;new r.Razorpay(A).open()};return a(F,{elevation:0,sx:{...W,marginTop:{xs:"30px",md:0}},children:e(k,{sx:V,children:[e(d,{sx:L,children:[a(lt,{sx:{verticalAlign:"middle"}})," ",a("span",{children:"Wallet Balance"}),a("br",{}),e("p",{children:["\u20B9 ",C(i)]})]}),a(pt,{sx:{height:"auto",borderLeftWidth:1,marginY:{xs:"20px",md:0}}}),e(d,{sx:N,children:[e(d,{sx:q,children:[a(ct,{control:u,name:"amount",required:!0,type:"number",InputProps:{startAdornment:a(dt,{position:"start",children:a(S,{sx:{fontSize:12,color:"#7B8AA2"}})})},variant:"standard",sx:{...st,px:1.25,input:{color:"#7B8AA2",fontWeight:700,fontSize:"24px",textAlign:{xs:"left",md:"right"}}}}),a("p",{children:"Increment Amount by"}),e(d,{sx:G,children:[e(_,{onClick:()=>l(100),children:[a(S,{}),"100"]}),e(_,{onClick:()=>l(500),children:[a(S,{}),"500"]}),e(_,{onClick:()=>l(1e3),children:[a(S,{}),"1000"]})]})]}),a(d,{sx:J,children:a(H,{onClick:x,children:"Add Money"})})]})]})})},ft=()=>{const{isMobile:i,isTablet:T}=M(),{showSnack:c}=z(),[h,t]=n.exports.useState([]),[u,b]=n.exports.useState(""),[y,m]=n.exports.useState(0),[l,x]=n.exports.useState(new Date(new Date().getFullYear(),0,1)),[o,p]=n.exports.useState(new Date(new Date().getFullYear(),11,31)),A=n.exports.useRef(async(r,g,w)=>{r&&r.setHours(0,0,0,0),g&&g.setHours(23,59,59,999);const f=await Y.getWalletOrders(r,g,w);if(!f.success)return c(f.message,"error");t(f.payload.waTransactions),m(f.payload.balance)});return n.exports.useEffect(()=>{A.current(l,o,u)},[l,o,u]),e(n.exports.Fragment,{children:[i&&a(et,{title:"Wallet"}),a(j,{sx:Q,children:e(B,{sx:Z,children:[a(gt,{balance:y}),i&&a(ot,{placeholder:"Search Particular",setSearch:r=>b(r),from:l,to:o,setStartDate:r=>x(r),setEndDate:r=>p(r)}),a(F,{elevation:0,sx:W,children:e(k,{sx:K,children:[T&&a(nt,{title:"Wallet Transactions",placeholder:"Search Particular",setSearch:r=>b(r),from:l,to:o,setStartDate:r=>x(r),setEndDate:r=>p(r)}),a($,{sx:U,children:a(ht,{sx:tt,children:e(ut,{children:[a(bt,{children:e(I,{sx:at,children:[a(s,{component:"th",children:"Date"}),a(s,{component:"th",children:"Particulars"}),a(s,{component:"th",children:"Debit"}),a(s,{component:"th",children:"Credit"})]})}),a(xt,{children:h&&h.map(r=>a(P,{children:e(I,{children:[a(s,{sx:rt,children:R(r.created_at).format("D MMM YYYY")}),a(s,{children:r.particular}),a(s,{sx:{color:"rgba(200, 91, 112, 0.7)",fontWeight:400},children:r.type===D.DEBIT&&`\u20B9${C(r.amount)}`}),a(s,{sx:{color:"rgba(21, 132, 92, 0.7)",fontWeight:400},children:r.type===D.CREDIT&&`\u20B9${C(r.amount)}`})]})}))})]})})})]})})]})})]})},oa=()=>e(n.exports.Fragment,{children:[a(v,{children:a("title",{children:"Wallets"})}),a(O,{children:a(ft,{})})]});export{oa as default};
