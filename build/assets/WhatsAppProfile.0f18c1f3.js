import{u as j,al as D,aG as R,aH as N,aI as X,r as i,aJ as u,j as e,am as z,a as o,V as J,L as O,W as q}from"./index.2d98d0ad.js";import{u as K,F as n}from"./FormTextField.6d99424e.js";import{F as Q,s as Y}from"./FormFileField.fe6d0916.js";import{L as Z}from"./LeftArrow.66d21ebf.js";import $ from"./LinkPlatForm.f06c4bcb.js";import{d as ee,a as f,F as A}from"./Style.ced39dc3.js";import{c as te,H as se,d as re,e as ae}from"./Wrappers.5defd22b.js";import{F as c,A as ie,a as oe}from"./Form.0806766e.js";import{C as w,a as le,h as ne}from"./Card.fd99c2fb.js";import{C as ce,F as m,G as p,S as me,a as pe,H as S}from"./Grid.5a3112b8.js";import{p as de}from"./Position.module.ff7b7fa6.js";import{M as W}from"./MenuItem.6acd7479.js";import"./TextField.6d44061e.js";import"./Select.13473313.js";import"./useFormControl.d9d4270f.js";import"./isMuiElement.3299311e.js";import"./Menu.82d3cc2b.js";import"./List.17d248ed.js";import"./useControlled.a2954169.js";import"./Styles.3864ecd6.js";import"./Tags.b27bc85d.js";import"./toConsumableArray.52b4c8e6.js";import"./ListItem.430c57dc.js";import"./listItemButtonClasses.717e7470.js";import"./styled.e1f4b282.js";import"./CommonComponents.878681bf.js";import"./ArrowRight.4a5b76be.js";import"./Styles.c059562f.js";import"./Card.684874a8.js";import"./CardContent.619ddd1d.js";import"./listItemTextClasses.0a98fac9.js";import"./dividerClasses.3f5faf95.js";const he=()=>{const{isMobile:P,isTablet:ue,navigate:L}=j(),{setErrorMessage:d,setSuccessMessage:y}=D(),{allowedVerticals:B,chatbotNumber:E}=R(),{platformExist:r}=N(),{setChatBotNumber:V}=X(),[v,g]=i.exports.useState(!0),[H,I]=i.exports.useState("Submit"),{control:l,handleSubmit:_,watch:k,reset:b,setValue:x}=K({defaultValues:{address:"",description:"",email:"",file:void 0,profile_picture_url:"",websites:[],messaging_product:"",vertical:""}}),G=k(),{profile_picture_url:M,vertical:h}=G,T=({target:{files:t}})=>{if(t&&t.length>0){const[s]=t;x("file",s),x("profile_picture_url",URL.createObjectURL(s))}},U=async t=>{try{const s=Y.serialize(t),a=await u.saveWAProfile(s);if(a.errors)throw Error(a.errors.pop().message);if(!a.success&&a.message)throw Error(a.message);y(a.message),L(0)}catch(s){d(s.message)}},F=i.exports.useCallback(async()=>{try{if(typeof r=="boolean"&&r){const t=await u.getWAProfile();if(!t.success)throw Error(t.message);I("Update"),b(t.payload)}}catch(t){d(t.message)}finally{g(!1)}},[r,b]),C=i.exports.useCallback(async()=>{try{if(typeof r=="boolean"&&r&&E===void 0){const t=await u.getWAChatBots();if(!t.success)throw Error(t.message);const[s]=t.payload;s&&V(s.id)}}catch(t){d(t.message)}finally{g(!1)}},[r]);return i.exports.useEffect(()=>{C()},[C]),i.exports.useEffect(()=>{F()},[F]),v?e(w,{className:de.AbsCenter,children:e(z,{height:72,width:72})}):o(i.exports.Fragment,{children:[P&&o(te,{children:[e(J,{component:O,to:"/business-settings",sx:{width:32,height:32},children:e(Z,{})}),e(se,{children:"WhatsApp Profile"})]}),e(re,{children:typeof r=="boolean"&&r===!1?e(ce,{children:e($,{})}):o(ae,{onSubmit:_(U),children:[e(w,{elevation:0,children:o(le,{children:[e(ne,{children:"Business Information"}),o(m,{children:[e(p,{children:e(c,{sx:{mb:0,height:"100%"},children:e(n,{control:l,name:"description",label:"Business Description",rows:5,sx:ee,inputProps:{maxLength:256},multiline:!0})})}),e(me,{children:e(Q,{control:l,name:"file",defaultValue:M,onChange:T,previewAlt:"Profile Image",label:"Upload Profile Image"})})]}),e(m,{sx:{mt:3.75},children:e(p,{children:e(c,{children:o(n,{select:!0,control:l,label:"Business Vertical",name:"vertical",sx:f,defaultValue:h!=null?h:"",children:[e(W,{value:"",disabled:!0,children:"Select Vertical"}),B.map(({label:t,value:s},a)=>e(W,{value:s,children:t},a))]})})})}),e(m,{children:e(p,{children:e(c,{children:e(n,{control:l,label:"Business Address",name:"address",inputProps:{maxLength:256},sx:f})})})}),e(m,{children:e(p,{children:e(c,{children:e(n,{control:l,label:"Email",name:"email",inputProps:{maxLength:256},sx:f})})})}),o(pe,{children:[e(S,{children:e(c,{children:e(n,{control:l,name:"websites[0]",label:"Website 1",placeholder:"Website 1",inputProps:{maxLength:256},sx:A})})}),e(S,{children:e(c,{children:e(n,{control:l,name:"websites[1]",label:"Website 2",placeholder:"Website 2",inputProps:{maxLength:256},sx:A})})})]}),e(ie,{children:e(oe,{type:"submit",children:H})})]})}),!1]})})]})},Oe=()=>o(i.exports.Fragment,{children:[e(q,{children:e("title",{children:"WhatsApp Profile"})}),e(he,{})]});export{Oe as default};
