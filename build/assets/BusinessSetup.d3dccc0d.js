var Ce=Object.defineProperty;var Ne=(r,i,o)=>i in r?Ce(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o;var re=(r,i,o)=>(Ne(r,typeof i!="symbol"?i+"":i,o),o);import{r as t,j as e,a as s,I as Pe,u as R,al as j,ai as K,aj as oe,aM as q,A as Be,V as _e,c9 as $,ao as we,m as Ie,C as Te,b4 as Ae,aa as Fe,ab as Le,ac as De,ad as ke,U as ae,a$ as ie,a5 as Me,W as Ee,cb as We,c6 as $e}from"./index.0e50089d.js";import{u as Y,F as v}from"./FormTextField.c0e3e790.js";import{g as ce}from"./mui-tel-input.es.e81d5065.js";import{S as le}from"./SettingsApi.d735bf16.js";import{F as U,G as J}from"./Grid.146b9954.js";import{F as y,a as Q}from"./Form.52a74fc4.js";import{F,b as de,a as V}from"./Style.ced39dc3.js";import{C as X}from"./Card.de383c1e.js";import{M as L}from"./MenuItem.2347b4b6.js";import qe from"./MapContainer.3e8a2973.js";import{L as Ve}from"./LeftArrow.21b3a4cf.js";import{F as Re}from"./FormControlLabel.d9667f4a.js";import{C as Oe}from"./Checkbox.bbe908c3.js";import{R as ze}from"./RazorPayApi.e5c374f5.js";import{A as Ge}from"./CommonComponents.cd423189.js";import{E as je}from"./ExpandLess.8b3fa4cc.js";import{E as He}from"./ExpandMore.b5e0d8ec.js";import{D as Ue}from"./Divider.434821ef.js";import"./TextField.c3de8082.js";import"./Select.4f434c76.js";import"./useFormControl.19c227b5.js";import"./isMuiElement.abfbb6fd.js";import"./Menu.75696a10.js";import"./List.f68a2eea.js";import"./useControlled.8f6662af.js";import"./ListItemText.ae179aaa.js";import"./listItemTextClasses.425e33b6.js";import"./InputAdornment.b9328cbd.js";import"./ArrowRight.e09ead02.js";import"./dividerClasses.ce986c4c.js";import"./index.f3d48750.js";import"./ListItem.ae8bdac7.js";import"./listItemButtonClasses.e1110cf3.js";import"./Search.1d102819.js";import"./SwitchBase.9ebb922d.js";import"./Styles.c059562f.js";import"./styled.bc7059ff.js";const ue=t.exports.createContext(void 0),me=t.exports.createContext(void 0),Je=({children:r})=>{const[i,o]=t.exports.useState(1),[p,B]=t.exports.useState("/static/images/svg/login.svg"),[P,b]=t.exports.useState({firstLine:"Sign Up Successful !",secondLine:"Enter your business details to start your journey."}),f={step:i,leftImg:p,leftText:P},S=t.exports.useMemo(()=>({setStep:o,setLeftImg:B,setLeftText:b}),[]);return e(ue.Provider,{value:f,children:e(me.Provider,{value:S,children:r})})},ee=()=>{const r=t.exports.useContext(ue);if(r===void 0)throw Error("Item must be used inside of BusinessSetupProvider, otherwise it will not function correctly.");return r},O=()=>{const r=t.exports.useContext(me);if(r===void 0)throw Error("Item must be used inside of BusinessSetupProvider, otherwise it will not function correctly.");return r},Xe=()=>{const{leftImg:r,leftText:i}=ee();return s(t.exports.Fragment,{children:[i.firstLine?s("h1",{children:[i.firstLine,e("br",{}),i.secondLine]}):"",e(Pe,{src:r,alt:"Business Setup",width:455,height:478})]})},Ze="AoW5",Ke="SeZ1",Ye="_5mZs",Qe="_012o",et="bKmh",tt="gJF3",st="JwIV",rt="_8Aao",at="ze9y",nt="k3eu",ot="KXUS",it="vsMk",ct="MIhE",lt="CORl",dt="V1WY",ut="NE2E",mt="_7nix",pt="Yvkz",ht="zoN5",n={BusiSetupTitle:Ze,Form:Ke,CheckBoxlabel:Ye,OrderSummary:Qe,Head:et,Heading:tt,Duration:st,Particulars:rt,Particular:at,DiscountInput:nt,CheckPromoBtn:ot,DiscountCard:it,BillingWrapper:ct,Billingheader:lt,BillingAddress:dt,PlanDetailWrapper:ut,Info:mt,ActionBtn:pt,PlanDetail:ht},gt=()=>{const{country:r,countryName:i}=R(),{setStep:o}=O(),{setErrorMessage:p}=j(),{industryList:B,countriesList:P,provinces:b}=K(),{setProvinces:f}=oe(),[S,C]=t.exports.useState(!1),{control:c,handleSubmit:T,watch:_,reset:I,setValue:N}=Y({defaultValues:{business_name:"",industry:"",mobile_number:"",address:"",pin_code:"",city:"",state:"",country:i}}),{industry:x,mobile_number:u,state:l,country:A}=_(),z=async a=>{try{if(S){const g=await q.updatePendingSetup(a);g.success||p(g.message)}else{const g=await q.createBusiness(a);g.success||p(g.message),localStorage.setItem("businessId",g.payload.businessId)}o(2)}catch(g){p(g.message)}},M=async()=>{const a=await Be.loggedUserInfo();N("mobile_number",a.payload.mobile_number)};t.exports.useEffect(()=>{M()},[]);const h=t.exports.useRef(async()=>{const a=await q.getPendingBusiness();a.payload&&a.success&&(I(a.payload),localStorage.setItem("businessId",a.payload.id),C(!0))});t.exports.useEffect(()=>{h.current()},[]);const d=t.exports.useCallback(async()=>{if(A){const a=await le.getCountryProvinces(A);f(a)}},[A]);return t.exports.useEffect(()=>{d()},[d]),s(X,{component:"form",onSubmit:T(z),className:n.Form,children:[e("div",{className:n.BusiSetupTitle,children:"Connect your business"}),e(U,{children:s(J,{children:[e(y,{children:e(v,{control:c,name:"business_name",label:"Business Name",placeholder:"Business Name",required:!0,sx:F})}),e(y,{children:s(v,{select:!0,control:c,label:"Industry",name:"industry",sx:F,required:!0,defaultValue:x!=null?x:"",children:[e(L,{value:"",disabled:!0,children:"Select Industry"}),B.map((a,g)=>e(L,{value:a,children:a},g))]})}),e(y,{children:e(ce,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:r,value:u,onChange:(a,g)=>{var H;N("mobile_number",(H=g.numberValue)!=null?H:a)},variant:"filled",sx:de})}),e(y,{children:e(v,{control:c,name:"address",label:"Address",placeholder:"Address",required:!0,sx:F})}),e(y,{children:s(v,{select:!0,control:c,label:"Country",name:"country",sx:V,required:!0,defaultValue:A!=null?A:"",children:[e(L,{value:"",disabled:!0,children:"Select Country"}),P.map((a,g)=>e(L,{value:a.name,children:a.name},g))]})}),e(y,{children:b.length>0?s(v,{select:!0,control:c,label:"State",name:"state",sx:V,required:!0,defaultValue:l!=null?l:"",children:[e(L,{value:"",disabled:!0,children:"Select State"}),b.map((a,g)=>e(L,{value:a.name,children:a.name},g))]}):e(v,{control:c,name:"state",label:"State",placeholder:"State",required:!0,sx:V})}),e(y,{children:e(v,{control:c,name:"city",label:"City",placeholder:"City",required:!0,sx:F})}),e(y,{children:e(v,{control:c,name:"pin_code",label:"Pincode",placeholder:"Pincode",required:!0,sx:F})}),e(Q,{type:"submit",children:"Save & Tag Location"})]})})]})},yt="mtuX",bt="WjCW",ne={MainWrapper:yt,Title:bt},te=({title:r})=>{const{setStep:i}=O(),{step:o}=ee();return e(t.exports.Fragment,{children:s("div",{className:ne.MainWrapper,children:[e(_e,{onClick:()=>i(o-1),sx:{width:32,height:32},children:e(Ve,{})}),e("div",{className:ne.Title,children:r})]})})},ft=()=>{var x;const{isMobile:r,isTablet:i}=R(),{setStep:o,setLeftText:p}=O(),{setErrorMessage:B}=j(),{timeZoneList:P}=K();t.exports.useEffect(()=>{p({firstLine:"",secongLine:""})},[]);const{control:b,handleSubmit:f,watch:S,setValue:C}=Y({defaultValues:{latitude:20.5937,longitude:78.9629,timezone:{label:"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi",value:5.5}}}),{latitude:c,longitude:T,timezone:_}=S(),I=u=>{C("latitude",typeof u.lat=="function"?u.lat():u.lat),C("longitude",typeof u.lng=="function"?u.lng():u.lng)},N=async u=>{try{const l=await q.updateLocation(u);l.success||B(l.messages?l.messages.errors[0].message:l.message),o(3)}catch(l){B(l.message)}};return s(t.exports.Fragment,{children:[r&&e(te,{title:"Save Location"}),s(X,{component:"form",onSubmit:f(N),className:n.Form,children:[i&&e("div",{className:n.BusiSetupTitle,children:"Save Location"}),e(U,{children:s(J,{style:{width:"100%"},children:[e(y,{children:e(qe,{onChange:I,initialCenter:{lat:c!=null?c:20.5937,lng:T!=null?T:78.9629}})}),e(y,{children:s(v,{select:!0,control:b,label:"Time Zone",name:"timezone.label",sx:V,required:!0,defaultValue:(x=_==null?void 0:_.label)!=null?x:"",children:[e(L,{value:"",disabled:!0,children:"Select Time Zone"}),P.map((u,l)=>e(L,{value:u.label,children:u.label},l))]})}),e(Q,{type:"submit",children:"Save & Select Plan"})]})})]})]})},St=({setBillingDetail:r})=>{const{isMobile:i,isTablet:o}=R(),{setErrorMessage:p}=j(),{countriesList:B,provinces:P}=K(),{setProvinces:b}=oe(),{setLeftText:f,setStep:S}=O(),C={company_name:"",email:"",number:"",address:"",city:"",state:"",country:"",pin_code:"",gst_number:"",pan_number:""},{control:c,handleSubmit:T,watch:_,reset:I,setValue:N}=Y({defaultValues:C}),{number:x,state:u,country:l}=_(),A=t.exports.useCallback(async()=>{if(l){const h=await le.getCountryProvinces(l);b(h)}},[l]);t.exports.useEffect(()=>{A()},[A]),t.exports.useEffect(()=>{f({firstLine:"",secongLine:""})},[]);const z=async h=>{try{console.log("data",h);const d=await q.updateBillingDetail(h);if(!d.success)throw Error(d.messages?d.messages.errors[0].message:d.message);r(h),S(5)}catch(d){p(d.message)}},M=async h=>{const d=h.target.checked;try{if(d){const a=await q.getBusinessById(Number(localStorage.getItem("businessId")));if(a.errors)throw Error(a.errors.pop().message);if(!a.success)throw Error(a.message);console.log("res.payload.mobile_number",a.payload.mobile_number),I({company_name:a.payload.business_name,number:a.payload.mobile_number,address:a.payload.address,city:a.payload.city,state:a.payload.state,country:a.payload.country,pin_code:a.payload.pin_code})}else I(C)}catch(a){p(a.message)}};return s(t.exports.Fragment,{children:[i&&e(te,{title:"Billing Detail"}),s(X,{component:"form",onSubmit:T(z),className:n.Form,children:[o&&e("div",{className:n.BusiSetupTitle,children:"Billing Detail"}),e(U,{children:s(J,{children:[e(Re,{className:n.CheckBoxlabel,control:e(Oe,{onChange:h=>M(h)}),label:"Billing Details are same as Business Details"}),e(y,{children:e(v,{control:c,name:"company_name",label:"Company Name",placeholder:"Company Name",required:!0,sx:F})}),e(y,{children:e(v,{control:c,name:"email",label:"Email",placeholder:"Email",required:!0,sx:F})}),e(y,{children:e(ce,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:"IN",value:x,onChange:(h,d)=>{var a;N("number",(a=d.numberValue)!=null?a:h)},variant:"filled",sx:de})}),e(y,{children:e(v,{control:c,name:"address",label:"Address",placeholder:"Address",required:!0,sx:F})}),e(y,{children:s(v,{select:!0,control:c,label:"Country",name:"country",sx:V,required:!0,defaultValue:l!=null?l:"",children:[e(L,{value:"",disabled:!0,children:"Select Country"}),B.map((h,d)=>e(L,{value:h.name,children:h.name},d))]})}),e(y,{children:P.length>0?s(v,{select:!0,control:c,label:"State",name:"state",sx:V,required:!0,defaultValue:u!=null?u:"",children:[e(L,{value:"",disabled:!0,children:"Select State"}),P.map((h,d)=>e(L,{value:h.name,children:h.name},d))]}):e(v,{control:c,name:"state",label:"State",placeholder:"State",required:!0,sx:F})}),e(y,{children:e(v,{control:c,name:"city",label:"City",placeholder:"City",required:!0,sx:F})}),e(y,{children:e(v,{control:c,name:"pin_code",label:"Pincode",placeholder:"Pincode",required:!0,sx:F})}),e(y,{children:e(v,{control:c,name:"gst_number",label:"GST Number",placeholder:"GST Number",sx:F})}),e(y,{children:e(v,{control:c,name:"pan_number",label:"PAN Number",placeholder:"PAN Number",sx:F})}),e(Q,{type:"submit",children:"Verify & Pay"})]})})]})]})},xt=({currency:r,grandTotal:i,billingDetail:o,udf2:p,description:B})=>{const[P,b]=t.exports.useState(!0);return t.exports.useEffect(()=>{const S=document.createElement("script");S.src="https://checkout.razorpay.com/v1/checkout.js",S.async=!0,document.body.appendChild(S)},[]),e(Ge,{type:"button",variant:"contained",className:"mt-5 ms-0 pay-btn",onClick:async()=>{var _,I;b(!0);const S=await ze.createOrder({amount:parseFloat(i.toFixed(2)),notes:{businessId:localStorage.getItem("businessId"),plans:p==null?void 0:p.join(","),gst:o.gst_number,pan:o.pan_number}}),C={key:"rzp_test_RRNQ95mWTINe0J",name:"Easy Social",description:B,order_id:S.payload.order.id,prefill:{name:o.company_name,email:o.email,contact:o.number},notes:{billing_name:o.company_name,billing_address:o.address,billing_city:o.city,billing_state:o.state,billing_zip:(_=o.pin_code)==null?void 0:_.toString(),billing_country:o.country,billing_tel:(I=o.number)==null?void 0:I.toString(),billing_email:o.email},theme:{color:"#686CFD"},modal:{confirm_close:!0,ondismiss:function(){b(!1)}},callback_url:`https://api.easysocial.in${S.payload.url}`,redirect:!0,handler:function(){b(!1)}},c=window;new c.Razorpay(C).open()},showLoader:P,children:`Pay ${r}${$(i)}`})};class pe{}re(pe,"validatePromoCode",async i=>await we("/promocode/validate","POST",{data:i}));const vt=({plans:r,setPlans:i})=>{j();const[o,p]=t.exports.useState(""),[B,P]=t.exports.useState(!1),b=()=>{P(!1)},[f,S]=t.exports.useState(),[C,c]=t.exports.useState([!1,!1]),T=N=>{const x=C.map((u,l)=>l===N?C[l]=!0:C[l]=!1);c(x)},_=()=>{P(!0)},I=async()=>{const N=r.filter(x=>x.id!==f);localStorage.setItem("selectedPlan",JSON.stringify(N)),i(N)};return s(t.exports.Fragment,{children:[e("div",{className:Ie(n.PlanDetailWrapper,"col-10 col-sm-6 col-md-12"),children:s("div",{className:n.BillingWrapper,children:[e("div",{className:n.Billingheader,children:e("h5",{children:"Plan Detail"})}),r&&r.map((N,x)=>{const u=$(N.amount);return s("div",{children:[s("div",{className:n.Billingheader,children:[s("div",{className:n.Info,children:[e("h6",{children:N.title}),e("small",{className:"price",children:`${o}${u}/Month`})]}),s("div",{className:n.ActionBtn,children:[r.length>1&&e("button",{type:"button",onClick:()=>{S(N.id),_()},children:"Remove"}),s("button",{onClick:()=>T(x),type:"button",children:["Details ",C[x]?e(je,{}):e(He,{})]})]})]}),e(Te,{in:C[x],className:"data",children:e("div",{className:n.PlanDetail,children:Ae(N.plan_detail)})})]},`${x}`)})]})}),s(Fe,{open:B,"aria-labelledby":"responsive-dialog-title",children:[e(Le,{id:"responsive-dialog-title",children:"Delete"}),e(De,{children:"Are you sure you want to delete?"}),s(ke,{children:[e(ae,{color:"secondary",onClick:()=>{b()},children:"Cancel"}),e(ae,{onClick:async()=>{await I(),b()},autoFocus:!0,children:"Delete"})]})]})]})},Ct=ie(new Date).format("Do MMM"),Nt=({billingDetail:r})=>{const{setErrorMessage:i}=j(),{isMobile:o,isTablet:p}=R(),{setStep:B,setLeftText:P,setLeftImg:b}=O(),[f,S]=t.exports.useState([]),[,C]=t.exports.useState(0),[c,T]=t.exports.useState(""),[_,I]=t.exports.useState(""),[N,x]=t.exports.useState(0),[u,l]=t.exports.useState(0),[A,z]=t.exports.useState(0),[M,h]=t.exports.useState(0),[d,a]=t.exports.useState(""),[g,H]=t.exports.useState(""),[he,ge]=t.exports.useState([]),[ye,be]=t.exports.useState();t.exports.useEffect(()=>{b("/static/images/svg/order_summary.svg"),P({firstLine:"",secongLine:""})},[]),t.exports.useEffect(()=>{const m=[],D=localStorage.getItem("selectedPlan");if(D){const w=JSON.parse(D),k=new Date;let E=k.setDate(k.getDate()+w[0].validity-1);E=ie(E).format("Do MMM"),be(E),S(w),a(w[0].currency==="INR"?"\u20B9":"$"),H(w[0].currency);let se=0;const ve=0;for(let W=0;W<w.length;W++)se+=w[W].has_discount?w[W].discount_amount:w[W].amount,m.push(w[W].slug);Z(se,ve,w[0].currency),ge(m)}},[]);const Z=async(m,D,w)=>{let k=m-D;k<1&&(k=0);const E=w==="INR"?k*.18:0;l(E),x(k),h(m),z(k+E)},fe=()=>{C(0),I(""),T(""),Z(M,0,g)},Se=()=>{B(4)},xe=async()=>{const m=c,D=await pe.validatePromoCode({promocode:m,total_amount:M,currency:g});if(!D.success)i(D.message);else{const w=D.payload.promo_discount;C(w),I(m),Z(M,w,g)}};return s(t.exports.Fragment,{children:[o&&e(te,{title:"Order Summary"}),s(X,{className:n.Form,children:[p&&e("div",{className:n.BusiSetupTitle,children:"Order Summary"}),e(U,{children:e(J,{children:s("div",{className:n.OrderSummary,children:[s("div",{className:n.Head,children:[e("h5",{className:n.Heading,children:"Details"}),e("small",{className:n.Duration,children:`${Ct} to ${ye}`})]}),s("div",{className:n.Particulars,children:[f&&f.map((m,D)=>s("div",{className:n.Particular,children:[s("p",{className:n.Title,children:[`${m.category} - ${m.name} - ${m.validity} Days `,m.has_discount&&s("s",{children:[d,m.amount]})]}),s("p",{children:[d,$(m.has_discount?m.discount_amount:m.amount)]})]},`${D}`)),s("div",{className:n.Particular,children:[e("p",{children:"Discount Promo"}),e("div",{children:_===""?s(t.exports.Fragment,{children:[e("input",{type:"text",placeholder:"Enter Code",name:"discount",className:n.DiscountInput,onChange:m=>T(m.target.value)}),e("button",{className:n.CheckPromoBtn,onClick:xe,children:"Check"})]}):e("span",{className:"discount-value",children:" "})})]}),e("div",{className:n.Particular,children:_!==""&&s("div",{className:n.DiscountCard,children:[e("small",{children:String(_).toUpperCase()}),e("button",{type:"button",onClick:fe,children:e("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"//www.w3.org/2000/svg",children:s("g",{opacity:"0.7",children:[e("path",{d:"M1 1L9.5 9.5",stroke:"#24272C"}),e("path",{d:"M9.5 1L1 9.5",stroke:"#24272C"})]})})})]})}),g==="INR"&&s(t.exports.Fragment,{children:[s("div",{className:n.Particular,children:[e("p",{className:"title",children:"Taxable Amount"}),e("p",{className:"amount",children:`${d}${$(N)}`})]}),s("div",{className:n.Particular,children:[e("p",{className:"title",children:"GST Amount"}),e("p",{className:"amount",children:`${d}${$(u)}`})]}),s("div",{className:n.Particular,children:[e("p",{className:"title",children:"GST No."}),e("p",{className:"number",children:r.gst_number})]})]}),e(Ue,{style:{margin:"10px 0"}}),s("div",{className:n.Particular,children:[e("p",{className:n.Title,children:e("strong",{children:"Total Payable Amount"})}),e("p",{className:"amount",children:e("strong",{children:`${d}${$(A)}`})})]})]}),e("div",{className:"col-10 col-sm-6 col-md-12",children:s("div",{className:n.BillingWrapper,children:[s("div",{className:n.Billingheader,children:[e("h5",{children:r.company_name}),e("button",{type:"button",onClick:()=>Se(),children:"Edit Billing Address"})]}),e("div",{className:n.BillingAddress,children:`${r.address}, ${r.city}, ${r.state}-${r.pin_code}`})]})}),e(vt,{plans:f,setPlans:m=>S(m)}),A&&e(xt,{currency:d,grandTotal:A,billingDetail:r,udf2:he,description:f[0].name})]})})})]})]})},Pt=()=>{const r=Me(),{navigate:i,isMobile:o}=R(),{step:p}=ee(),{setStep:B}=O(),[P,b]=t.exports.useState("");if(p===3&&i("/choose-plan"),r.state){const{name:f}=r.state&&r.state;f==="redirectBusi"&&(i("/business-setup",{replace:!0}),p!==4&&B(4))}return e(t.exports.Fragment,{children:(()=>{switch(p){case 1:return e(gt,{});case 2:return e(ft,{});case 4:return e(St,{setBillingDetail:f=>b(f)});case 5:return e(Nt,{billingDetail:P})}})()})},Bt="ighc",_t="onBD",wt="a-wS",It="Ty1D",Tt="_6yu3",G={OuterWrapper:Bt,InnerWrapper:_t,LeftWrapper:wt,LeftFixed:It,RightWrapper:Tt},hs=()=>{const{isTablet:r}=R();return s(t.exports.Fragment,{children:[e(Ee,{children:e("title",{children:"Business Setup"})}),e(We,{children:e($e,{children:e(Je,{children:e("div",{className:G.OuterWrapper,children:s("div",{className:G.InnerWrapper,children:[r&&e("div",{className:G.LeftWrapper,children:e("div",{className:G.LeftFixed,children:e(Xe,{})})}),e("div",{className:G.RightWrapper,children:e(Pt,{})})]})})})})})]})};export{hs as default};
