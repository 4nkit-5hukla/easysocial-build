var U=Object.defineProperty;var V=(o,a,n)=>a in o?U(o,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[a]=n;var c=(o,a,n)=>(V(o,typeof a!="symbol"?a+"":a,n),n);import{a as h,j as s,ai as p,r as f,aC as M,B as $,aV as b,X as w}from"./index.d51e5c95.js";import{d as u}from"./WhatsApp.c407ea69.js";import{P as R,a as I}from"./Play.2a62926f.js";import{ah as X,ai as j,aj as P,ak as S,al as G,am as D,an as Y,ao as Z,ap as T}from"./Tags.232f38f7.js";import{L as B}from"./Link.6febdab1.js";const q=()=>h("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"//www.w3.org/2000/svg",children:[s("path",{d:"M10.5378 1.11084H7.60995C7.35479 1.11084 7.14798 1.31765 7.14798 1.57281C7.14798 1.82797 7.35479 2.03478 7.60995 2.03478H9.42251L4.99274 6.46455C4.81232 6.64498 4.81232 6.93746 4.99274 7.11788C5.08298 7.20807 5.20119 7.25319 5.3194 7.25319C5.43762 7.25319 5.55583 7.20807 5.64607 7.11788L10.0758 2.68811V4.50072C10.0758 4.75588 10.2826 4.96269 10.5378 4.96269C10.793 4.96269 10.9998 4.75588 10.9998 4.50072V1.57286C10.9998 1.31765 10.793 1.11084 10.5378 1.11084Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"}),s("path",{d:"M8.64816 6.53803C8.393 6.53803 8.18619 6.74484 8.18619 7V9.965H1.92394V3.70275H5.5C5.75516 3.70275 5.96197 3.49594 5.96197 3.24078C5.96197 2.98562 5.75516 2.77881 5.5 2.77881L1.46197 2.77881C1.20681 2.77881 1 2.98562 1 3.24078V10.427C1 10.6821 1.20681 10.8889 1.46197 10.8889H8.64816C8.90333 10.8889 9.11013 10.6821 9.11013 10.427V7C9.11013 6.74484 8.90333 6.53803 8.64816 6.53803Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"})]});class m{}c(m,"getWaTemplateMessages",async()=>await p("/wa-templates","GET")),c(m,"getWaTemplateMessage",async a=>await p(`/wa-templates/${a}`,"GET")),c(m,"syncWaTemplateMessage",async()=>await p("/wa-templates/sync-templates","GET")),c(m,"createWaTemplateMessage",async a=>await p("/wa-templates/create-template","POST",{data:a})),c(m,"updateWaTemplateMessage",async(a,n)=>await p(`/wa-templates/update-template-form/${a}`,"PUT",{data:n})),c(m,"updateWaTemplateComponents",async(a,n)=>await p(`/wa-templates/update/${a}`,"PUT",{data:n})),c(m,"deleteWaTemplateMessage",async a=>await p(`/wa-templates/delete/${a}`,"DELETE"));const te=({components:o})=>{const a=f.exports.useRef(null),[n,H]=f.exports.useState(!1),[L,v]=f.exports.useState(!1),[F,x]=f.exports.useState(""),i=o.find(({type:e})=>e===u.HEADER),g=o.find(({type:e})=>e===u.BODY),C=o.find(({type:e})=>e===u.FOOTER),y=o.find(({type:e})=>e===u.BUTTONS),O=(e=>{if(e){const{example:r}=e;if(r){const{header_text:t}=r;return t||[]}else return[]}else return[]})(i),d=(e=>{if(e){const{example:r}=e;if(r){const{header_handle:t}=r;if(t&&t.length>0){const[l]=t;return l}else return""}else return""}else return""})(i),W=(e=>{if(e){const{example:r}=e;if(r){const{header_files:t}=r;if(t&&t.length>0){const[l]=t;return l}else return""}else return""}else return""})(i),E=(e=>{if(e){const{example:r}=e;if(r){console.log(r);const{body_text:t}=r;return t?t.length===1&&Array.isArray(t[0])?t.pop():t:[]}else return[]}else return[]})(g),k=(e=>i?e.reduce((r,t,l)=>t&&t!==""?r.replace(`{{${l+1}}}`,t):r,i.text):"")(O),N=(e=>g?e.reduce((r,t,l)=>t&&t!==""?r.replace(`{{${l+1}}}`,t):r,g.text):"")(E);return console.log(E),f.exports.useEffect(()=>{a.current&&(a.current.addEventListener("playing",()=>{x("playing")}),a.current.addEventListener("pause",()=>{x("")}),a.current.addEventListener("ended",()=>{x("")}),n?a.current.play():a.current.pause())},[n]),h(X,{children:[i&&i.format==="IMAGE"&&s(j,{children:d&&d!==""&&s(M,{component:"img",alt:"header-img",image:d,sx:P})}),i&&i.format==="VIDEO"&&h(B,{underline:"none",component:"button",type:"button",onClick:()=>H(!n),onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),sx:S,children:[s(M,{component:"video",ref:a,className:"video",disablePictureInPicture:!0,sx:{...P,height:130},children:d&&d!==""&&s("source",{src:d,type:"video/mp4"})}),h($,{position:"absolute",display:"flex",children:[F===""&&s(R,{}),L&&F==="playing"&&s(I,{})]})]}),i&&i.format==="DOCUMENT"&&s(B,{underline:"none",className:"media-wrapper doc",href:d,target:"_blank",sx:{...S,backgroundColor:"#F5F5F5",color:"#A1AEB4",fontSize:90,fontWeight:900,lineHeight:"96px"},children:d&&d!==""?W.split(".").pop().slice(0,4).toUpperCase():""}),i&&i.format==="TEXT"&&s(G,{children:k}),s(D,{children:b(N)}),C&&C.text!==""&&s(Y,{children:C.text}),y&&y.buttons.length>0&&s(Z,{children:y.buttons.map((e,r)=>s(f.exports.Fragment,{children:e.type==="QUICK_REPLY"?s(w,{variant:"outlined",type:"button",sx:{...T,color:"#767676",minWidth:"calc(50% - 8px)"},children:e.text}):e.type==="PHONE_NUMBER"?s(w,{href:`tel:${e.phone_number}`,variant:"outlined",sx:{...T,color:"#32C5FF",minWidth:"100%"},children:e.text}):h(w,{href:e.example?e.example.reduce((t,l,_)=>l&&l!==""?t.replace(`{{${_+1}}}`,l):t,e.url):"",variant:"outlined",target:"_blank",rel:"noreferrer",sx:{...T,color:"#32C5FF",minWidth:"100%"},children:[s(q,{}),e.text]})},r))})]})};export{te as T,m as W};
