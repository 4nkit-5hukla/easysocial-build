import{bO as _,u as w,al as A,r as a,a as n,j as t,a$ as d,aq as E,c8 as S,c9 as P,W as B}from"./index.2d98d0ad.js";import{B as k}from"./BizParticipantsProvider.b878d785.js";import{A as g}from"./AllPaymentsApi.fb7f4bb9.js";import{c as r,M as F,D as H}from"./MobileFilter.759541b0.js";import{M as $}from"./MobileHeader.f6327d79.js";import{S as I}from"./ServiceExpiryAlert.477cb5ac.js";import{C as R}from"./Card.684874a8.js";import{C as j}from"./CardContent.619ddd1d.js";import{T as z,a as G,b as L,c as D,d as s,e as W}from"./TableRow.ada42e7f.js";import{L as q}from"./Link.c30ec873.js";import"./Search.26123050.js";import"./Clear.67340fe3.js";import"./RangePopUp.99e60bd1.js";import"./index.eb4aa1c1.js";import"./TextField.6d44061e.js";import"./Select.13473313.js";import"./useFormControl.d9d4270f.js";import"./isMuiElement.3299311e.js";import"./Menu.82d3cc2b.js";import"./List.17d248ed.js";import"./useControlled.a2954169.js";import"./usePickerState.2364e5bb.js";import"./Grid.67e109ad.js";import"./InputAdornment.3ee2d82b.js";import"./StaticDateRangePicker.21a53412.js";import"./PickersToolbarButton.d41261ce.js";import"./LeftArrow.66d21ebf.js";import"./Wrappers.5defd22b.js";const U=()=>{const O=_(),{isMobile:h,isTablet:y}=w(),{showSnack:u}=A(),[c,v]=a.exports.useState([]),[f,b]=a.exports.useState(""),[N,T]=a.exports.useState(0),[l,x]=a.exports.useState(new Date(new Date().getFullYear(),0,1)),[m,C]=a.exports.useState(new Date(new Date().getFullYear(),11,31)),M=a.exports.useRef(async(e,o,p)=>{e&&e.setHours(0,0,0,0),o&&o.setHours(23,59,59,999);const i=await g.getAllOrders(e,o,p);if(!i.success)return u(i.message,"error");v(i.payload)});a.exports.useEffect(()=>{M.current(l,m,f)},[l,m,f]);const Y=a.exports.useRef(async()=>{const e=await g.getExpiryBusinessCount();if(!e.success)return u(e.message,"error");T(e.payload)});return a.exports.useEffect(()=>{Y.current()},[]),n(a.exports.Fragment,{children:[h&&t($,{title:"Orders"}),t("div",{className:r.ContentInner,children:n("div",{className:r.InnerWrapper,children:[c.length>0&&h&&t(F,{placeholder:"Search Order No.",setSearch:e=>b(e),from:l,to:m,setStartDate:e=>x(e),setEndDate:e=>C(e)}),N>0&&t(I,{noOfBusi:N}),t(R,{elevation:0,className:r.Card,children:n(j,{className:r.CardContent,children:[c.length>0&&y&&t(H,{title:"Orders",placeholder:"Search Order No.",setSearch:e=>b(e),from:l,to:m,setStartDate:e=>x(e),setEndDate:e=>C(e)}),c.length>0?t("div",{className:r.TableOuter,children:t(z,{className:r.TableContainer,children:n(G,{children:[t(L,{children:n(D,{className:r.TableHead,children:[t(s,{component:"th",children:"Date"}),t(s,{component:"th",children:"Particulars"}),t(s,{component:"th",children:"Order No."}),t(s,{component:"th",children:"Amount"}),t(s,{component:"th",children:"Inv No."})]})}),t(W,{children:c&&c.map(e=>{var i;let o="",p="";return e.order_type==="plan"&&(o=`${d(e.start_date).format("D")} - ${d(e.expiry_date).format("D MMM YYYY")}`,p=` Plan Code: ${(i=e.plan)==null?void 0:i.slug}`),t(E,{children:n(D,{children:[t(s,{className:r.OrderDate,children:d(e.created_at).format("D MMM YYYY")}),n(s,{className:r.Particulars,children:[t("p",{children:e.business.business_name}),n("span",{children:[e.particulars.charAt(0).toUpperCase()+e.particulars.slice(1)," -"," ",e.short_desc&&e.short_desc]}),t("br",{}),t("span",{children:o}),t("label",{children:p})]}),t(s,{className:r.OrderNumber,children:t(q,{onClick:()=>{O(`${e.id}`)},children:S(e.id)})}),n(s,{className:r.OrderDate,children:[e.currency==="INR"?"\u20B9":"$",P(e.paid_amount)]}),t(s,{children:S(e.invoice_number)})]})})})})]})})}):t("div",{className:r.NoData,children:"No order available."})]})})]})})]})},De=()=>n(a.exports.Fragment,{children:[t(B,{children:t("title",{children:"Orders"})}),t(k,{children:t(U,{})})]});export{De as default};
