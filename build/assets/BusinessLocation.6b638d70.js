import{r as c,j as e,p as w,ao as k,au as j,a as v,B as K,X,a0 as z,al as E}from"./index.15d836c8.js";import{F as Z}from"./FormTextField.dea7213a.js";import{L as q}from"./List.6b4b786f.js";import{L as H}from"./ListItem.062b54be.js";import{L as J}from"./ListItemText.578f19c3.js";import{S as U}from"./Search.2741089e.js";import{e as V}from"./Select.29acf267.js";import{d as B}from"./index.f3d48750.js";import{C as Y,l as W,p as Q}from"./Tags.d5498258.js";import{F as ee,G as te}from"./Grid.165ffb95.js";import{F as M}from"./Form.735a830b.js";import{d as oe}from"./Styles.3fefcec0.js";import{C as ae}from"./Card.245962dd.js";import{C as re}from"./CardContent.7207ee4f.js";import{M as A}from"./MenuItem.b4008723.js";import"./index.esm.4c35eef3.js";import"./TextField.38860a94.js";import"./listItemButtonClasses.6f3887a0.js";import"./isMuiElement.d480ea63.js";import"./listItemTextClasses.47a9127d.js";import"./Menu.cf04ab82.js";import"./useControlled.35a0926f.js";import"./withStyles.eb2ff75b.js";import"./ArrowRight.7c2382cd.js";const se="SAhR",ne="n2Ln",ce="A48M",G={Search_Box:se,Input_Container:ne,InputField:ce};const ie="GgRS",le="jPPX",de="_5-J2",me="UTL7",pe="DlNT",_={List:ie,ListItem:le,secondary:de,Active:me,CustomButton:pe},ue=({predictions:t,google:m,onChange:s,recenterMap:n,isOpen:p,closeList:i})=>{const[l,u]=c.exports.useState(null),d=({place:r,main_text:C,secondary_text:a})=>{new m.maps.Geocoder().geocode({placeId:r.place_id},(h,g)=>{if(g!=="OK"&&h)return;const L=h[0].geometry.location,{lat:b,lng:o}=L;s({lng:o(),lat:b(),address:a,name:C}),u(null),i()})},x=({place:r})=>{new m.maps.Geocoder().geocode({placeId:r.place_id},(a,S)=>{if(S!=="OK"&&a)return;const h=a[0].geometry.location,{lat:g,lng:L}=h;n({lat:g(),lng:L()}),u(a[0].place_id)})};return e(q,{sx:{display:p&&t&&t.length>0?"block":"none"},classes:{root:_.List},children:t.map((r,C)=>{const{structured_formatting:a}=r;return e(H,{button:!0,classes:{root:w(_.ListItem,l===r.place_id&&_.Active)},onClick:()=>{x({place:r}),d({place:r,main_text:a.main_text,secondary_text:a.secondary_text})},children:e(J,{classes:{root:w(_.root),secondary:w(_.secondary)},primary:a.main_text,secondary:a.secondary_text||""})},r.place_id)})})},fe=({google:t,onChange:m,initialCenter:s})=>{var b;const[n,p]=c.exports.useState({lat:Number(s.lat)||20.5937,lng:Number(s.lng)||78.9629}),[i,l]=c.exports.useState(!1),u=k.useRef(),d=k.useRef(),[x,r]=c.exports.useState([{lat:Number(s.lat)||20.5937,lng:Number(s.lat)||78.9629}]),[C,a]=c.exports.useState([]),S=c.exports.useCallback(({lat:o,lng:f})=>{r(()=>[{lat:o,lng:f}]),p({lat:o,lng:f})},[t.maps]);c.exports.useEffect(()=>{S(s)},[]);const h=c.exports.useCallback((o,f,{latLng:T})=>{const{lat:F,lng:R}=T,N=new t.maps.Geocoder,P={lat:F(),lng:R()},D=new t.maps.places.PlacesService(f);N.geocode({location:P}).then(I=>{if(I.results[0]){const O={placeId:I.results[0].place_id,fields:["name","formatted_address","place_id","geometry"]};D.getDetails(O,(y,$)=>{$===t.maps.places.PlacesServiceStatus.OK&&y&&y.geometry&&y.geometry.location&&m({...P,name:y.name,address:y.formatted_address})})}}).catch(I=>window.alert("Geocoder failed due to: "+I)),r(()=>[{lat:F(),lng:R()}])},[]),g=c.exports.useCallback(()=>{n&&new t.maps.places.SearchBox(d.current)},[n,t.maps]),L=function(o,f){return f!==t.maps.places.PlacesServiceStatus.OK||!o?a([]):a(o)};return n&&e(j,{children:v("div",{style:{width:"100%",position:"relative",height:"300px",display:"flex"},children:[e(K,{sx:{width:"100%",position:"relative",height:"100%","& div[aria-roledescription='map']":{cursor:"crosshair !important"}},children:e(B.Map,{ref:u,google:t,zoom:15,initialCenter:n,centerAroundCurrentLocation:!0,onClick:h,onBoundsChanged:g,center:n,panControl:!0,draggable:!0,mapTypeControl:!1,fullscreenControl:!1,zoomControl:!0,streetViewControl:!1,children:x.map(o=>e(B.Marker,{position:o},`${o.lat}-${o.lng}`))})}),e("div",{className:w(G.Search_Box),children:v("div",{className:G.Input_Container,children:[v(X,{sx:{p:"5px 10px",display:"flex",alignItems:"center",width:"95%",borderRadius:"8px",margin:"2% auto"},children:[e(z,{sx:{p:"10px"},"aria-label":"search",children:e(U,{})}),e(V,{onFocus:()=>l(!0),onInput:({target:o})=>{new t.maps.places.AutocompleteService().getPlacePredictions({input:o.value},L)},inputRef:d,sx:{ml:1,flex:1},placeholder:"Search your Location",inputProps:{"aria-label":"Search Your Location"}})]}),i&&e(ue,{isOpen:i&&((b=d.current)==null?void 0:b.value.length)>=1,recenterMap:S,google:t,predictions:C,onChange:m,closeList:()=>l(!1)})]})})]})})},he=B.GoogleApiWrapper({apiKey:"AIzaSyDJfxykafBBE2rkeU5EHbkl7j2DmcGfNYA"})(fe),je=({control:t,watch:m,updatePlace:s})=>{var u;const{timeZoneList:n}=E(),{latitude:p,longitude:i,timezone:l}=m();return e(ae,{elevation:0,sx:Y,children:v(re,{sx:W,children:[e(Q,{children:"Location Tagging & Timezone"}),e(M,{children:e(he,{onChange:s,initialCenter:{lat:p!=null?p:20.5937,lng:i!=null?i:78.9629}})}),e(ee,{children:e(te,{children:e(M,{children:v(Z,{select:!0,control:t,label:"Time Zone",name:"timezone.label",sx:oe,required:!0,defaultValue:(u=l==null?void 0:l.label)!=null?u:"",children:[e(A,{value:"",disabled:!0,children:"Select Time Zone"}),n.map((d,x)=>e(A,{value:d.label,children:d.label},x))]})})})})]})})};export{je as default};
