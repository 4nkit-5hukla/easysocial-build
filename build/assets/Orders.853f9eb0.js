import{bO as w,u as _,al as A,r as a,a as s,j as r,a$ as d,aq as E,c8 as S,c9 as P,W as B}from"./index.df75c103.js";import{B as k}from"./BizParticipantsProvider.e3ff50d1.js";import{A as D}from"./AllPaymentsApi.c73f8f7a.js";import{c as t,M as F,D as H}from"./MobileFilter.8a830ba2.js";import{M as $}from"./MobileHeader.dda7a2ef.js";import{S as I}from"./ServiceExpiryAlert.de16c07c.js";import{C as R}from"./Card.756b2844.js";import{C as j}from"./CardContent.0ec41bf5.js";import{T as z,a as G,b as L,c as O,d as n,e as W}from"./TableRow.b936d75b.js";import{L as q}from"./Link.c6e66c98.js";import"./Search.5ffce5ef.js";import"./Clear.5261c159.js";import"./Divider.d6aa9dd4.js";import"./dividerClasses.0f2232b0.js";import"./RangePopUp.03203d22.js";import"./index.eb4aa1c1.js";import"./TextField.fb9bb265.js";import"./Select.076265ad.js";import"./useFormControl.4cd44c9d.js";import"./isMuiElement.551f16f6.js";import"./Menu.ade2397a.js";import"./List.9aca8875.js";import"./useControlled.74b410f2.js";import"./usePickerState.1a396737.js";import"./Grid.789d9a62.js";import"./InputAdornment.0096216e.js";import"./StaticDateRangePicker.8e9a0406.js";import"./PickersToolbarButton.58c7c721.js";import"./LeftArrow.c862dadb.js";import"./Wrappers.948b5f32.js";const U=()=>{const g=w(),{isMobile:h,isTablet:y}=_(),{showSnack:u}=A(),[p,T]=a.exports.useState([]),[f,b]=a.exports.useState(""),[x,v]=a.exports.useState(0),[c,C]=a.exports.useState(new Date(new Date().getFullYear(),0,1)),[l,N]=a.exports.useState(new Date(new Date().getFullYear(),11,31)),M=a.exports.useRef(async(e,o,m)=>{e&&e.setHours(0,0,0,0),o&&o.setHours(23,59,59,999);const i=await D.getAllOrders(e,o,m);if(!i.success)return u(i.message,"error");T(i.payload)});a.exports.useEffect(()=>{M.current(c,l,f)},[c,l,f]);const Y=a.exports.useRef(async()=>{const e=await D.getExpiryBusinessCount();if(!e.success)return u(e.message,"error");v(e.payload)});return a.exports.useEffect(()=>{Y.current()},[]),s(a.exports.Fragment,{children:[h&&r($,{title:"Orders"}),r("div",{className:t.ContentInner,children:s("div",{className:t.InnerWrapper,children:[h&&r(F,{placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>N(e)}),x>0&&r(I,{noOfBusi:x}),s(R,{elevation:0,className:t.Card,children:[y&&r(H,{title:"Orders",placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>N(e)}),r(j,{className:t.CardContent,children:p.length>0?r("div",{className:t.TableOuter,children:r(z,{className:t.TableContainer,children:s(G,{children:[r(L,{children:s(O,{className:t.TableHead,children:[r(n,{component:"th",children:"Date"}),r(n,{component:"th",children:"Particulars"}),r(n,{component:"th",children:"Order No."}),r(n,{component:"th",children:"Amount"}),r(n,{component:"th",children:"Inv No."})]})}),r(W,{children:p&&p.map(e=>{var i;let o="",m="";return e.order_type==="plan"&&(o=`${d(e.start_date).format("D")} - ${d(e.expiry_date).format("D MMM YYYY")}`,m=` Plan Code: ${(i=e.plan)==null?void 0:i.slug}`),r(E,{children:s(O,{children:[r(n,{className:t.OrderDate,children:d(e.created_at).format("D MMM YYYY")}),s(n,{className:t.Particulars,children:[r("p",{children:e.business.business_name}),s("span",{children:[e.particulars.charAt(0).toUpperCase()+e.particulars.slice(1)," -"," ",e.short_desc&&e.short_desc]}),r("br",{}),r("span",{children:o}),r("label",{children:m})]}),r(n,{className:t.OrderNumber,children:r(q,{onClick:()=>{g(`${e.id}`)},children:S(e.id)})}),s(n,{className:t.OrderDate,children:[e.currency==="INR"?"\u20B9":"$",P(e.paid_amount)]}),r(n,{children:S(e.invoice_number)})]})})})})]})})}):s("div",{className:t.NoData,children:["There is no order to show for this duration.",r("br",{}),"Try to select a different date range."]})})]})]})})]})},ye=()=>s(a.exports.Fragment,{children:[r(B,{children:r("title",{children:"Orders"})}),r(k,{children:r(U,{})})]});export{ye as default};
