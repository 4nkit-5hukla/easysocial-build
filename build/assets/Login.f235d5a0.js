import{j as o,I as N,u as I,ai as k,r as l,a as t,$ as G,c as f,A as W,W as $}from"./index.b6939ac4.js";import{u as V}from"./index.esm.0195c433.js";import{g as M}from"./mui-tel-input.es.4c2f29f7.js";import{I as m,P as a}from"./Auth.bb306ec0.js";import{F as O,G as D}from"./Grid.c94a65f1.js";import{F,a as R}from"./Form.d6354f4c.js";import{F as b,a as _}from"./Style.57c2f24e.js";import{F as S}from"./FormTextField.02b305ff.js";import{C as z}from"./Card.693f787f.js";import{I as j}from"./InputAdornment.740865a9.js";import{V as B}from"./Visibility.f0994eff.js";import{V as U}from"./VisibilityOff.80a3930e.js";import"./ListItemIcon.a766ad45.js";import"./listItemTextClasses.ceb65530.js";import"./List.cdccc7e3.js";import"./ListItemText.8189d4ac.js";import"./TextField.d30c805e.js";import"./Select.479df9cf.js";import"./useFormControl.d77c63c8.js";import"./isMuiElement.b8c25462.js";import"./Menu.ebd65fdc.js";import"./useControlled.4ac3feb9.js";import"./MenuItem.61818f9c.js";import"./dividerClasses.5f8b1a07.js";import"./ArrowRight.60cb55a6.js";const X="_48mr",q="aEbD",H="NzPd",J="-oSe",K="HEnC",Q="Aeze",Y="poGz",Z="OC8M",e={LoginGfx:X,LoginForm:q,LoginFormCard:H,LoginTitle:J,SignIn:K,ForgotPassword:Q,LoginCaption:Y,LoginCaptionLink:Z},oo=()=>o("div",{className:e.LoginGfx,children:o(N,{src:"/static/images/svg/login.svg",alt:"Login Graphics",width:455,height:478})}),eo=()=>{const{country:c,callingCode:p,setAccessToken:w}=I(),{setErrorMessage:C}=k(),x=`+${p}`.length,[P,g]=l.exports.useState(m.EMAIL),u=6,[d,A]=l.exports.useState(a.PASSWORD),{control:h,handleSubmit:T,watch:E,setValue:i}=V({defaultValues:{email:"",password:""}}),{email:s,mobile_number:r}=E(),y=()=>{A(d===a.PASSWORD?a.TEXT:a.PASSWORD)},v=async L=>{const n=await W.doSignIn(L);if(!n.success)return C(n.message);w(n.payload.token),console.log(n.message)};return l.exports.useEffect(()=>{s&&s.length===u+1&&`${parseInt(s)}`.length===s.length&&(g(m.MOBILE),i("mobile_number",`+${p}${s}`),i("email",void 0))},[s]),l.exports.useEffect(()=>{r&&r.length===u+x&&(g(m.EMAIL),i("email",r.replace(`+${p}`,"")),i("mobile_number",void 0))},[r]),t("div",{className:e.LoginForm,children:[t(z,{component:"form",className:e.LoginFormCard,onSubmit:T(v),children:[o("h1",{className:e.LoginTitle,children:"Sign In, to get started!"}),o(O,{children:t(D,{children:[o(F,{children:P===m.EMAIL?o(S,{control:h,name:"email",label:"Email",placeholder:"Email",required:!0,sx:b,autoFocus:!0}):o(M,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:c,value:r,onChange:(L,n)=>{i("mobile_number",n.numberValue)},variant:"filled",sx:_,autoFocus:!0})}),o(F,{children:o(S,{control:h,name:"password",label:"Password",placeholder:"Password",type:d,required:!0,sx:b,InputLabelProps:{shrink:!0},InputProps:{endAdornment:o(j,{position:"end",children:o(G,{onClick:y,children:d===a.PASSWORD?o(B,{}):o(U,{})})})}})}),o(R,{type:"submit",className:e.SignIn,children:"Sign In"}),o(f,{to:"/forgot-password",className:e.ForgotPassword,children:"Forgot Password?"})]})})]}),t("div",{className:e.LoginCaption,children:["Don\u2019t have an account? ",o(f,{to:"/sign-up",className:e.LoginCaptionLink,children:"Sign Up"})]})]})},so="zdw2",no={LoginWrapper:so},vo=()=>{const{isTablet:c}=I();return t(l.exports.Fragment,{children:[o($,{children:o("title",{children:"Login"})}),t("div",{className:no.LoginWrapper,children:[c&&o(oo,{}),o(eo,{})]})]})};export{vo as default};
