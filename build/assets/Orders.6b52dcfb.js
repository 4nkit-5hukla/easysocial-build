import{bO as w,u as _,am as A,r as a,a as s,j as r,a$ as d,ae as E,c8 as S,c9 as P,W as B}from"./index.cec7120b.js";import{B as k}from"./BizParticipantsProvider.367714c1.js";import{A as D}from"./AllPaymentsApi.141cbd1c.js";import{c as t,M as F,D as H}from"./MobileFilter.4f8a9f62.js";import{M as $}from"./MobileHeader.531b455e.js";import{S as I}from"./ServiceExpiryAlert.5a85ee7f.js";import{C as R}from"./Card.f238ca4f.js";import{C as j}from"./CardContent.cf5d0c9f.js";import{T as z,a as G,b as L,c as O,d as n,e as W}from"./TableRow.fda0ffb5.js";import{L as U}from"./Link.947db9d7.js";import"./Search.38359f57.js";import"./Clear.7aeecb79.js";import"./Divider.d6fdd8a2.js";import"./dividerClasses.25d8e604.js";import"./RangePopUp.4e1f9ef9.js";import"./index.eb4aa1c1.js";import"./TextField.9a0b3901.js";import"./Select.ed33f368.js";import"./useFormControl.2e215265.js";import"./isMuiElement.d9d5f399.js";import"./Menu.ad604829.js";import"./List.f61e1c40.js";import"./useControlled.5f64f480.js";import"./usePickerState.de51c480.js";import"./Grid.37871592.js";import"./InputAdornment.ebd1d839.js";import"./StaticDateRangePicker.6025c10d.js";import"./PickersToolbarButton.1dd9ada0.js";import"./LeftArrow.6eedcb3f.js";import"./Wrappers.abfff74b.js";const q=()=>{const g=w(),{isMobile:h,isTablet:y}=_(),{showSnack:u}=A(),[p,T]=a.exports.useState([]),[f,b]=a.exports.useState(""),[x,v]=a.exports.useState(0),[c,C]=a.exports.useState(new Date(new Date().getFullYear(),0,1)),[l,N]=a.exports.useState(new Date(new Date().getFullYear(),11,31)),M=a.exports.useRef(async(e,o,m)=>{e&&e.setHours(0,0,0,0),o&&o.setHours(23,59,59,999);const i=await D.getAllOrders(e,o,m);if(!i.success)return u(i.message,"error");T(i.payload)});a.exports.useEffect(()=>{M.current(c,l,f)},[c,l,f]);const Y=a.exports.useRef(async()=>{const e=await D.getExpiryBusinessCount();if(!e.success)return u(e.message,"error");v(e.payload)});return a.exports.useEffect(()=>{Y.current()},[]),s(a.exports.Fragment,{children:[h&&r($,{title:"Orders"}),r("div",{className:t.ContentInner,children:s("div",{className:t.InnerWrapper,children:[h&&r(F,{placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>N(e)}),x>0&&r(I,{noOfBusi:x}),s(R,{elevation:0,className:t.Card,children:[y&&r(H,{title:"Orders",placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>N(e)}),r(j,{className:t.CardContent,children:p.length>0?r("div",{className:t.TableOuter,children:r(z,{className:t.TableContainer,children:s(G,{children:[r(L,{children:s(O,{className:t.TableHead,children:[r(n,{component:"th",children:"Date"}),r(n,{component:"th",children:"Particulars"}),r(n,{component:"th",children:"Order No."}),r(n,{component:"th",children:"Amount"}),r(n,{component:"th",children:"Inv No."})]})}),r(W,{children:p&&p.map(e=>{var i;let o="",m="";return e.order_type==="plan"&&(o=`${d(e.start_date).format("D")} - ${d(e.expiry_date).format("D MMM YYYY")}`,m=` Plan Code: ${(i=e.plan)==null?void 0:i.slug}`),r(E,{children:s(O,{children:[r(n,{className:t.OrderDate,children:d(e.created_at).format("D MMM YYYY")}),s(n,{className:t.Particulars,children:[r("p",{children:e.business.business_name}),s("span",{children:[e.particulars.charAt(0).toUpperCase()+e.particulars.slice(1)," -"," ",e.short_desc&&e.short_desc]}),r("br",{}),r("span",{children:o}),r("label",{children:m})]}),r(n,{className:t.OrderNumber,children:r(U,{onClick:()=>{g(`${e.id}`)},children:S(e.id)})}),s(n,{className:t.OrderDate,children:[e.currency==="INR"?"\u20B9":"$",P(e.paid_amount)]}),r(n,{children:S(e.invoice_number)})]})})})})]})})}):s("div",{className:t.NoData,children:["There is no order to show for this duration.",r("br",{}),"Try to select a different date range."]})})]})]})})]})},ye=()=>s(a.exports.Fragment,{children:[r(B,{children:r("title",{children:"Orders"})}),r(k,{children:r(q,{})})]});export{ye as default};
