import{u as _,Z as w,r,a,j as t,aY as p,as as A,c6 as C,c7 as B,W as E}from"./index.a8b2df7b.js";import{B as I}from"./BizParticipantsProvider.b20170db.js";import{A as D,M as P,a as F,D as H}from"./DeskHeader.f205eab8.js";import{g as v,I as k,T as N}from"./Tags.0cb2a8a8.js";import{C as R,I as $,a as j,b as W,T as z,c as G,d as U,O,P as Z,e as q}from"./Styles.6343e2a9.js";import{S as J}from"./ServiceExpiryAlert.b5149b95.js";import{C as K}from"./Card.bd9c7588.js";import{C as L}from"./CardContent.da5f0df4.js";import{T as Q,a as V,b as ee,c as T,d as s,e as te}from"./TableRow.8990a2cb.js";import"./LeftArrow.a1fcfefa.js";import"./Search.b56f4801.js";import"./Clear.30a48954.js";import"./RangePopUp.a3e1f399.js";import"./index.eb4aa1c1.js";import"./TextField.f1851448.js";import"./Select.a83a6cc9.js";import"./isMuiElement.42abfbfb.js";import"./Menu.58d7bdb3.js";import"./List.e9d0b826.js";import"./useControlled.e7b8947c.js";import"./usePickerState.50d91eeb.js";import"./Grid.599f3dbe.js";import"./InputAdornment.b97a990b.js";import"./StaticDateRangePicker.7b2d6f25.js";import"./PickersToolbarButton.527dc5a1.js";import"./Link.59aaed31.js";import"./withStyles.7c05d18e.js";import"./ListItem.912ff118.js";import"./listItemButtonClasses.07cb6408.js";import"./styled.3f21e940.js";const re=()=>{const{isMobile:m,isTablet:y}=_(),{showSnack:d}=w(),[u,g]=r.exports.useState([]),[h,x]=r.exports.useState(""),[f,Y]=r.exports.useState(0),[o,S]=r.exports.useState(new Date(new Date().getFullYear(),0,1)),[i,b]=r.exports.useState(new Date(new Date().getFullYear(),11,31)),M=r.exports.useRef(async(e,n,c)=>{e&&e.setHours(0,0,0,0),n&&n.setHours(23,59,59,999);const l=await D.getAllOrders(e,n,c);if(!l.success)return d(l.message,"error");g(l.payload)});r.exports.useEffect(()=>{M.current(o,i,h)},[o,i,h]);const X=r.exports.useRef(async()=>{const e=await D.getExpiryBusinessCount();if(!e.success)return d(e.message,"error");Y(e.payload)});return r.exports.useEffect(()=>{X.current()},[]),a(r.exports.Fragment,{children:[m&&t(P,{title:"Orders"}),t(v,{sx:R,children:a(k,{sx:$,children:[m&&t(F,{setSearch:e=>x(e),from:o,to:i,setStartDate:e=>S(e),setEndDate:e=>b(e)}),f>0&&t(J,{noOfBusi:f}),t(K,{elevation:0,sx:j,children:a(L,{sx:W,children:[y&&t(H,{title:"Orders",setSearch:e=>x(e),from:o,to:i,setStartDate:e=>S(e),setEndDate:e=>b(e)}),t(N,{sx:z,children:t(Q,{sx:G,children:a(V,{children:[t(ee,{children:a(T,{sx:U,children:[t(s,{component:"th",children:"Date"}),t(s,{component:"th",children:"Particulars"}),t(s,{component:"th",children:"Order No."}),t(s,{component:"th",children:"Amount"}),t(s,{component:"th",children:"Inv No."})]})}),t(te,{children:u&&u.map(e=>{let n="",c="";return e.order_type==="plan"&&(n=`${p(e.start_date).format("D")} - ${p(e.expiry_date).format("D MMM YYYY")}`,c=` Plan Code: ${e.plan.slug}`),t(A,{children:a(T,{children:[t(s,{sx:O,children:p(e.created_at).format("D MMM YYYY")}),a(s,{sx:Z,children:[t("p",{children:e.business.business_name}),a("span",{children:[e.particulars.charAt(0).toUpperCase()+e.particulars.slice(1)," -"," ",e.short_desc&&e.short_desc]}),t("br",{}),t("span",{children:n}),t("label",{children:c})]}),t(s,{sx:q,children:C(e.id)}),a(s,{sx:O,children:[e.plan.currency==="INR"?"\u20B9":"$",B(e.paid_amount)]}),t(s,{children:C(e.invoice_number)})]})})})})]})})})]})})]})})]})},Ie=()=>a(r.exports.Fragment,{children:[t(E,{children:t("title",{children:"Orders"})}),t(I,{children:t(re,{})})]});export{Ie as default};
