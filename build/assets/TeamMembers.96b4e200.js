import{aj as y,j as e,ax as A,a,V as h,r as p,u as z,an as V,L as W,W as j}from"./index.0c7937d1.js";import{u as D,a as G,B as U}from"./BizParticipantsProvider.04b97df7.js";import{B as F}from"./BizParticipantsApi.48281d22.js";import{L as E}from"./LeftArrow.343d6d0f.js";import{S as x}from"./Search.831a3a4c.js";import{u as X,F as k}from"./FormTextField.490654b3.js";import{g as q}from"./mui-tel-input.es.2b48c13e.js";import{F as T,A as _,a as M}from"./Form.45a8318b.js";import{D as K,a as Y,b as $,c as J}from"./Drawer.4d7b168b.js";import{F as Q,G as Z}from"./Grid.122346a7.js";import{F as S,b as ee}from"./Style.8807be1a.js";import{D as re}from"./Drawer.17538e60.js";import{S as N,a as P,b as H}from"./Search.05324c08.js";import{b as te,c as ae,d as oe,e as se,f as ne,g as ie,C as L,a as le}from"./Card.205e4239.js";import{C as O}from"./Clear.97e7f6ce.js";import{C as ce}from"./PopupBoxes.d3a5c198.js";import{L as me}from"./ListItem.64aafc01.js";import{a as de,L as pe}from"./ListItemText.e275a68e.js";import{M as he}from"./MoreVert.bfb82082.js";import{M as ue}from"./Menu.15848a2c.js";import{M as B}from"./MenuItem.11b6ef6e.js";import{f as be,H as fe,d as ge,I as Ce,g as Ie,h as Me}from"./Wrappers.ad083052.js";import{C as xe,a as ve,b as Te}from"./Cta.b4c4e79b.js";import{p as we}from"./Position.module.ff7b7fa6.js";import{D as ye}from"./Divider.ff60a579.js";import"./TextField.5745f0da.js";import"./Select.be735c75.js";import"./useFormControl.763a4420.js";import"./isMuiElement.dd254e09.js";import"./useControlled.8beb15eb.js";import"./InputAdornment.f824c32c.js";import"./ArrowRight.d6e17dbc.js";import"./Card.c2b9d419.js";import"./CardContent.24bc29ea.js";import"./List.d7eed8e1.js";import"./listItemButtonClasses.39489ea2.js";import"./listItemTextClasses.d7de1de1.js";import"./dividerClasses.66984175.js";const Fe=({open:s,closeDrawer:o})=>{const{setErrorMessage:u,setSuccessMessage:m}=y(),{control:n,handleSubmit:i,watch:b,setValue:l}=X({defaultValues:{name:"",number:"",email:"",plan_category:["engage"]}}),{number:C}=b();return e(re,{anchor:"right",open:s,onClose:(c,t)=>!A(t)&&o(),sx:{zIndex:"modal"},children:a(K,{children:[a(Y,{children:[e(h,{onClick:o,className:"icon-md-button",children:e(E,{})}),e($,{children:"Invite a Team Member"})]}),a(J,{onSubmit:i(async c=>{try{const t=await F.sendUserInvite(c);if(!t.success)throw Error(t.messages?t.messages.errors[0].message:t.message);m(t.message),setTimeout(()=>window.location.reload(),1e3)}catch(t){u(t.message)}finally{o()}}),children:[e(Q,{children:a(Z,{children:[e(T,{children:e(k,{control:n,name:"name",label:"Name",placeholder:"Name",required:!0,sx:S})}),e(T,{children:e(k,{control:n,name:"email",label:"Email",placeholder:"Email",required:!0,sx:S})}),e(T,{children:e(q,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:"IN",value:C,onChange:(c,t)=>{var f;l("number",(f=t.numberValue)!=null?f:c),console.log(t.numberValue)},variant:"filled",sx:ee})})]})}),a(_,{children:[e(M,{disableIcon:!0,color:"secondary",onClick:o,children:"Cancel"}),e(M,{type:"submit",children:"Send Invite"})]})]})]})})},ke=({isSearchActive:s,setSearchActive:o})=>{const{setShowInviteForm:u,setInvitedMemberFilter:m}=D();return a(te,{children:[e(ae,{children:e(M,{disableIcon:!0,type:"button",onClick:()=>u(!0),className:"small",children:"Invite Team Member"})}),a(oe,{children:[!s&&e(se,{children:e(ne,{children:"Team Members"})}),a(ie,{children:[s&&e(N,{children:a(P,{children:[e(h,{disableTouchRipple:!0,disableFocusRipple:!0,disableRipple:!0,sx:{position:"absolute",left:0,top:0},children:e(x,{})}),e(H,{onChange:({target:{value:n}})=>m(n),placeholder:"Search People"}),e(h,{onClick:()=>{m(""),o(!s)},sx:{position:"absolute",right:0,top:0},children:e(O,{})})]})}),!s&&e(h,{onClick:()=>o(n=>!n),children:e(x,{})})]})]})]})},Se="z5df",Le="AMgb",w={TeamMemberItem:Se,OptionMenuPaper:Le},Be={px:{xs:3.75,md:2},"&:hover":{bgcolor:"#edfaff"}},De=s=>{const{setErrorMessage:o,setSuccessMessage:u}=y(),{title:m,description:n,invitationId:i,status:b}=s,[l,C]=p.exports.useState(null),[I,c]=p.exports.useState(!1),t=()=>{c(!0)},f=()=>{c(!1)},v=d=>{C(d.currentTarget)},r=()=>{C(null)},g=async()=>{try{const d=await F.deleteUserInvite(i);if(!d.success)throw Error(d.message);u(d.payload.message),setTimeout(()=>window.location.reload(),1e3)}catch(d){o(d.message)}finally{f()}};return a(p.exports.Fragment,{children:[a(me,{component:"div",sx:Be,children:[e(de,{primary:e("div",{className:"primary-block",children:e("h2",{className:"list-title",children:m})}),secondary:n,className:w.TeamMemberItem}),e(pe,{children:e(h,{onClick:v,children:e(he,{})})})]}),Boolean(l)&&a(ue,{anchorEl:l,open:Boolean(l),onClose:r,keepMounted:!0,MenuListProps:{"aria-labelledby":"Options"},className:w.OptionMenu,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},classes:{paper:w.OptionMenuPaper},children:[e(B,{onClick:()=>{t(),r()},children:"Delete"}),!b&&e(B,{onClick:()=>{r()},children:"Resend"})]}),e(ce,{title:"Delete",open:I,setOpen:c,onConfirm:async()=>{await g()},positiveLabel:"Delete",negativeLabel:"Cancel",children:"Are you sure you want to delete?"})]})},Ee=()=>{const{isMobile:s,isTablet:o}=z(),{setErrorMessage:u}=y(),[m,n]=p.exports.useState(!0),[i,b]=p.exports.useState(!1),{invitedMembers:l,showInviteForm:C,invitedMemberFilter:I}=G(),{setInvitedMembers:c,setShowInviteForm:t,setInvitedMemberFilter:f}=D(),v=p.exports.useRef(async()=>{try{const r=await F.getUserInvites();if(!r.success)throw Error(r.message);c(r.payload.data),n(!1)}catch(r){u(r.message)}});return p.exports.useEffect(()=>{v.current()},[]),m?e(L,{className:we.AbsCenter,children:e(V,{height:72,width:72})}):a(p.exports.Fragment,{children:[s&&a(be,{children:[!i&&e(h,{component:W,to:"/business-settings",sx:{width:32,height:32},children:e(E,{})}),!i&&e(fe,{children:"Team Members"}),i&&e(N,{children:a(P,{children:[e(h,{disableTouchRipple:!0,disableFocusRipple:!0,disableRipple:!0,sx:{position:"absolute"},children:e(x,{})}),e(H,{onChange:({target:{value:r}})=>f(r),placeholder:"Search People"}),e(h,{onClick:()=>{f(""),b(!i)},sx:{position:"absolute",right:0,top:0},children:e(O,{})})]})}),!i&&l.length>0&&e(h,{onClick:()=>b(r=>!r),children:e(x,{})})]}),e(ge,{children:e(Ce,{children:!m&&e(L,{elevation:0,children:e(le,{sx:{mx:{xs:-3.75,md:0}},children:l.length===0?a(Ie,{children:[e(xe,{children:e(M,{disableIcon:!0,onClick:()=>t(!0),className:"small",children:"Invite Team Member"})}),e(ve,{children:e(Te,{children:"You don\u2019t have any team members yet. Invite a team member and start working in collaboration."})})]}):a(p.exports.Fragment,{children:[o&&e(ke,{isSearchActive:i,setSearchActive:b}),o&&e(ye,{}),l.filter(r=>{var g;return(g=r==null?void 0:r.name)==null?void 0:g.toLowerCase().includes(I==null?void 0:I.toLowerCase())}).map(({name:r,status:g,id:d},R)=>e(De,{title:r,description:g,invitationId:d,status:g},R))]})})})})}),s&&l.length>0&&e(Me,{children:e(M,{onClick:()=>t(!0),variant:"outlined",color:"primary",disableIcon:!0,children:"Invite Team Member"})}),e(Fe,{open:C,closeDrawer:()=>t(!1)})]})},gr=()=>a(U,{children:[e(j,{children:e("title",{children:"Team Members"})}),e(Ee,{})]});export{gr as default};
