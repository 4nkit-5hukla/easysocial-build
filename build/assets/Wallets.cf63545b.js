import{r as n,R as X,b as E,j as a,a as e,B as d,cb as C,u as M,ai as R,as as z,aW as P,W as v}from"./index.1216e28e.js";import{B as O}from"./BizParticipantsProvider.45a49ae4.js";import{A as Y}from"./AllPaymentsApi.7fa971cc.js";import{A as _,r as H,g as j,I as B,T as $}from"./Tags.119fa417.js";import{a as W,i as L,j as N,A as V,k as q,l as G,m as J,C as Q,I as K,b as U,T as Z,c as tt,d as at,O as rt}from"./Styles.623f0960.js";import{M as et,a as ot,D as nt}from"./DeskHeader.fd57b27a.js";import{u as it}from"./index.esm.7a23e4a0.js";import{I as S}from"./Inr.90bc1ce6.js";import{W as lt}from"./Wallet.ae8af2c5.js";import{g as st}from"./Styles.ab1c376b.js";import{F as ct}from"./FormTextField.a2d50268.js";import{R as mt}from"./RazorPayApi.393cf812.js";import{C as F}from"./Card.9aa5f189.js";import{C as k}from"./CardContent.e6225265.js";import{D as pt}from"./Divider.4f3dc1ba.js";import{I as dt}from"./InputAdornment.9191edfb.js";import{T as ht,a as ut,b as bt,c as I,d as s,e as xt}from"./TableRow.128b2c5b.js";import"./withStyles.5eadc4a8.js";import"./ListItem.152d8599.js";import"./List.8f8744c2.js";import"./listItemButtonClasses.7ee5290a.js";import"./isMuiElement.3e2de034.js";import"./styled.3be2929c.js";import"./LeftArrow.a627eb69.js";import"./Search.fb930079.js";import"./Clear.6389075f.js";import"./RangePopUp.4f0a742e.js";import"./index.eb4aa1c1.js";import"./TextField.5384ccb5.js";import"./Select.4cd0be1e.js";import"./useFormControl.4dcd90d2.js";import"./Menu.b5c2af2b.js";import"./useControlled.9518d4c9.js";import"./usePickerState.4a937df6.js";import"./Grid.59784725.js";import"./StaticDateRangePicker.e51f731c.js";import"./PickersToolbarButton.8b895d93.js";import"./Link.22b627b3.js";import"./dividerClasses.24ea718d.js";var D=(i=>(i.CREDIT="Credit",i.DEBIT="Debit",i))(D||{});const gt=({balance:i})=>{const[T,c]=n.exports.useState(!0),{fetchDefaultBusiness:h}=X(),{selectedBusiness:t}=E();n.exports.useEffect(()=>{!t&&h.current()},[t]);const{control:u,watch:b,setValue:y}=it({defaultValues:{amount:100}}),{amount:m}=b(),l=async o=>{y("amount",o+m)};n.exports.useEffect(()=>{const o=document.createElement("script");o.src="https://checkout.razorpay.com/v1/checkout.js",o.async=!0,document.body.appendChild(o)},[]);const x=async()=>{c(!0);const o=m*.18,p=await mt.createOrder({amount:parseFloat(o)+parseFloat(m.toFixed(2)),notes:{plans:"wallet",gstAmt:o,businessId:localStorage.getItem("businessId")}}),A={key:"rzp_test_RRNQ95mWTINe0J",name:"Easy Social",description:"Wallet Recharge",order_id:p.payload.order.id,prefill:{name:t==null?void 0:t.billing_detail.company_name,email:t==null?void 0:t.billing_detail.email,contact:t==null?void 0:t.billing_detail.number},notes:{billing_name:t==null?void 0:t.billing_detail.company_name,billing_address:t==null?void 0:t.billing_detail.address,billing_city:t==null?void 0:t.billing_detail.city,billing_state:t==null?void 0:t.billing_detail.state,billing_zip:t==null?void 0:t.billing_detail.pin_code,billing_country:t==null?void 0:t.billing_detail.country,billing_tel:t==null?void 0:t.billing_detail.number,billing_email:t==null?void 0:t.billing_detail.email},theme:{color:"#686CFD"},modal:{confirm_close:!0,ondismiss:function(){c(!1)}},callback_url:`https://api.easysocial.in${p.payload.url}`,redirect:!0,handler:function(){c(!1)}},r=window;new r.Razorpay(A).open()};return a(F,{elevation:0,sx:{...W,marginTop:{xs:"30px",md:0}},children:e(k,{sx:L,children:[e(d,{sx:N,children:[a(lt,{sx:{verticalAlign:"middle"}})," ",a("span",{children:"Wallet Balance"}),a("br",{}),e("p",{children:["\u20B9 ",C(i)]})]}),a(pt,{sx:{height:"auto",borderLeftWidth:1,marginY:{xs:"20px",md:0}}}),e(d,{sx:V,children:[e(d,{sx:q,children:[a(ct,{control:u,name:"amount",required:!0,type:"number",InputProps:{startAdornment:a(dt,{position:"start",children:a(S,{sx:{fontSize:12,color:"#7B8AA2"}})})},variant:"standard",sx:{...st,px:1.25,input:{color:"#7B8AA2",fontWeight:700,fontSize:"24px",textAlign:{xs:"left",md:"right"}}}}),a("p",{children:"Increment Amount by"}),e(d,{sx:G,children:[e(_,{onClick:()=>l(100),children:[a(S,{}),"100"]}),e(_,{onClick:()=>l(500),children:[a(S,{}),"500"]}),e(_,{onClick:()=>l(1e3),children:[a(S,{}),"1000"]})]})]}),a(d,{sx:J,children:a(H,{onClick:x,children:"Add Money"})})]})]})})},ft=()=>{const{isMobile:i,isTablet:T}=M(),{showSnack:c}=R(),[h,t]=n.exports.useState([]),[u,b]=n.exports.useState(""),[y,m]=n.exports.useState(0),[l,x]=n.exports.useState(new Date(new Date().getFullYear(),0,1)),[o,p]=n.exports.useState(new Date(new Date().getFullYear(),11,31)),A=n.exports.useRef(async(r,g,w)=>{r&&r.setHours(0,0,0,0),g&&g.setHours(23,59,59,999);const f=await Y.getWalletOrders(r,g,w);if(!f.success)return c(f.message,"error");t(f.payload.waTransactions),m(f.payload.balance)});return n.exports.useEffect(()=>{A.current(l,o,u)},[l,o,u]),e(n.exports.Fragment,{children:[i&&a(et,{title:"Wallet"}),a(j,{sx:Q,children:e(B,{sx:K,children:[a(gt,{balance:y}),i&&a(ot,{placeholder:"Search Particular",setSearch:r=>b(r),from:l,to:o,setStartDate:r=>x(r),setEndDate:r=>p(r)}),a(F,{elevation:0,sx:W,children:e(k,{sx:U,children:[T&&a(nt,{title:"Wallet Transactions",placeholder:"Search Particular",setSearch:r=>b(r),from:l,to:o,setStartDate:r=>x(r),setEndDate:r=>p(r)}),a($,{sx:Z,children:a(ht,{sx:tt,children:e(ut,{children:[a(bt,{children:e(I,{sx:at,children:[a(s,{component:"th",children:"Date"}),a(s,{component:"th",children:"Particulars"}),a(s,{component:"th",children:"Debit"}),a(s,{component:"th",children:"Credit"})]})}),a(xt,{children:h&&h.map(r=>a(z,{children:e(I,{children:[a(s,{sx:rt,children:P(r.created_at).format("D MMM YYYY")}),a(s,{children:r.particular}),a(s,{sx:{color:"rgba(200, 91, 112, 0.7)",fontWeight:400},children:r.type===D.DEBIT&&`\u20B9${C(r.amount)}`}),a(s,{sx:{color:"rgba(21, 132, 92, 0.7)",fontWeight:400},children:r.type===D.CREDIT&&`\u20B9${C(r.amount)}`})]})}))})]})})})]})})]})})]})},oa=()=>e(n.exports.Fragment,{children:[a(v,{children:a("title",{children:"Wallets"})}),a(O,{children:a(ft,{})})]});export{oa as default};
