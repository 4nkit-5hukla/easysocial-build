var D=Object.defineProperty;var G=(s,t,r)=>t in s?D(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var f=(s,t,r)=>(G(s,typeof t!="symbol"?t+"":t,r),r);import{j as e,r as c,a,ae as W,I as x,ap as I,aj as F,u as O,V as X,bP as Y,c5 as H,W as L,c7 as U}from"./index.3f755f43.js";import{u as N,a as C,A as z}from"./AuthProvider.f6bf9427.js";import{u as J,F as v}from"./FormTextField.42593052.js";import{g as K}from"./mui-tel-input.es.4c1344f0.js";import{P as u}from"./Auth.bb306ec0.js";import{F as Z,G as Q}from"./Grid.55238631.js";import{F as g,a as R}from"./Form.86858169.js";import{b as ee,F as y}from"./Style.ced39dc3.js";import{C as _}from"./Card.7fc2e334.js";import{I as se}from"./InputAdornment.4f38b966.js";import{V as te}from"./Visibility.39c08683.js";import{V as re}from"./VisibilityOff.4d36d806.js";import"./tslib.es6.61e9e735.js";import"./TextField.b05be362.js";import"./Select.c042a67e.js";import"./useFormControl.ae5beb16.js";import"./isMuiElement.382d0fe2.js";import"./Menu.92c0f563.js";import"./List.65d7d5bb.js";import"./useControlled.b7ea6072.js";import"./ListItemText.14bf1e60.js";import"./listItemTextClasses.ff0ce9ef.js";import"./MenuItem.93c4c08f.js";import"./dividerClasses.de1a71f9.js";import"./ArrowRight.51809bda.js";const ae="Zrbq",ne={ImgWrapper:ae},ie=()=>{const{isLogged:s}=N();return e(c.exports.Fragment,{children:e("div",{className:ne.ImgWrapper,children:e("div",{style:{position:"fixed"},children:s?a(W,{children:[e("h1",{children:"Your team is waiting for you!"}),e(x,{src:"/static/images/svg/invitation_accept.svg",alt:"Signup"})]}):a(W,{children:[a("h1",{children:["You\u2019re Invited!",e("br",{})," Sign Up and start collaborating!"]}),e(x,{src:"/static/images/svg/team_sign_up.svg",alt:"Signup"})]})})})})};class m{}f(m,"getInvitation",async t=>await I(`/invitation/${t}`,"GET")),f(m,"Signup",async t=>await I("/auth/invited-sign-up","POST",{data:t})),f(m,"acceptTeamInvite",async t=>await I("/invitation/accept-invitation","POST",{data:t}));const oe="Hd2F",ce="VOpp",A={Form:oe,Title:ce},le=({invitationData:s})=>{const{setErrorMessage:t,setSuccessMessage:r}=F(),{country:p,countryName:i,setAccessToken:d,setUserId:o}=O(),{authCheck:l}=C(),[h,E]=c.exports.useState(u.PASSWORD),{control:b,handleSubmit:M,watch:V,setValue:k}=J({defaultValues:{name:s.name,mobile_number:s.number,email:s.email,country:i,password:"",confirm_password:""}}),{name:q,mobile_number:j}=V(),$=async S=>{const n=await m.Signup(S);if(!n.success)return t(n.messages?n.messages.errors[0].message:n.message);d(n.payload.token),o(n.payload.user_id),r(n.message),l()},B=()=>{E(h===u.PASSWORD?u.TEXT:u.PASSWORD)};return a(_,{component:"form",onSubmit:M($),className:A.Form,children:[e("div",{className:A.Title,children:"Register & Accept"}),e(Z,{children:a(Q,{children:[e(g,{children:e(K,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:p,value:j,onChange:(S,n)=>{var T;k("mobile_number",(T=n.numberValue)!=null?T:S)},variant:"filled",sx:ee,inputProps:{readOnly:!0}})}),e(g,{children:e(v,{control:b,name:"name",label:"Name",placeholder:"Name",value:q,required:!0,sx:y,inputProps:{readOnly:!0}})}),e(g,{children:e(v,{control:b,name:"email",label:"Email",placeholder:"Email",required:!0,sx:y,inputProps:{readOnly:!0}})}),e(g,{children:e(v,{control:b,name:"password",label:"Password",placeholder:"Password",type:h,required:!0,sx:y})}),e(g,{children:e(v,{control:b,name:"confirm_password",label:"Confirm Password",placeholder:"Confirm Password",type:h,required:!0,sx:y,InputProps:{endAdornment:e(se,{position:"end",children:e(X,{onClick:B,children:h===u.PASSWORD?e(te,{}):e(re,{})})})}})}),e(R,{type:"submit",children:"Register"})]})})]})},me="i5OF",pe="zxHM",de="wNLB",P={Wrapper:me,Title:pe,MiddlePara:de},ue=({invitationData:s})=>{const t=Y(),{setErrorMessage:r,setSuccessMessage:p}=F(),i=async()=>{const d={id:s.slug},o=await m.acceptTeamInvite(d);o.success?(p(o.message),setTimeout(()=>{t("/")},5e3)):r(o.message)};return a(_,{className:P.Wrapper,children:[e("div",{className:P.Title,children:"Accept Invitation"}),a("p",{children:["Dear ",s.name,","]}),a("p",{className:P.MiddlePara,children:["You have been invited by ",s.invited_by," to join ",e("strong",{children:s.business_name})," ","business profile on EasySocial. You are requested to join in and start contributing as a team member."]}),e("p",{children:"Follow the link below to accept the invitation."}),e(R,{type:"button",onClick:()=>i(),children:"Accept Invitation"})]})},ge=()=>{const{invitation_id:s}=H(),{setErrorMessage:t}=F(),{isLogged:r}=N(),{authCheck:p}=C(),[i,d]=c.exports.useState(),o=async()=>{const l=await m.getInvitation(s);l.success?(console.log("res",l.payload),d(l.payload)):t(l.message)};return c.exports.useEffect(()=>{o()},[]),c.exports.useEffect(()=>{p()},[r]),e(c.exports.Fragment,{children:!r&&i?e(le,{invitationData:i}):i&&e(ue,{invitationData:i})})},he="oBgf",be="-KEX",fe="-MVJ",w={OuterWrapper:he,InnerWrapper:be,RightWrapper:fe},Xe=()=>{const{isTablet:s}=O();return a(c.exports.Fragment,{children:[e(L,{children:e("title",{children:"Signup"})}),e(U,{children:e(z,{children:e("div",{className:w.OuterWrapper,children:a("div",{className:w.InnerWrapper,children:[s&&e(ie,{}),e("div",{className:w.RightWrapper,children:e(ge,{})})]})})})})]})};export{Xe as default};
