import{j as e,a as s,B as y,aC as A,T as I,u as Z,ao as K,aD as Q,aE as $,r as n,W as q,a0 as J,L as k,Z as Y}from"./index.6d7cebbf.js";import{C as ee,u as te,F as l}from"./FormTextField.e00bf294.js";import{W as v,s as se}from"./WASettingsApi.063ed4ed.js";import{a as ie}from"./Select.373439ca.js";import{L as ae,H as R,a as M,A as oe,b as z}from"./CommonComponents.07d1ab3a.js";import{b as ne,H as re,c as le,d as ce,e as de,f as he,g as me,h as pe,F as p,i as P,G as x,j as c,K as ge,S as ue,l as W,n as xe,k as T,M as fe,N as be,O as Se,P as Ce,Q as Fe}from"./Tags.bbeae880.js";import{C as V,a as Be}from"./CardContent.26c3c0b8.js";import{M as _}from"./MenuItem.e5daf721.js";import"./TextField.78e0843d.js";import"./isMuiElement.d504a926.js";import"./Menu.c568f487.js";import"./List.7f34a280.js";import"./styled.3765d5b8.js";import"./listItemTextClasses.25e89b82.js";const we=({control:f,defaultValue:d,onChange:b,rules:h,name:S,accept:C="image/png, image/jpeg",allowedTypes:m="png or jpg format",previewAlt:g="Profile Image",label:F,width:r,height:u,children:L,...a})=>e(ee,{rules:h,control:f,name:S,render:({field:B})=>s(y,{sx:{display:"flex",position:"relative",margin:"auto",transition:"all 0.2s ease-in-out",width:r||{xs:157,lg:180,xl:200},height:u||{xs:157,lg:180,xl:200}},children:[d&&d!==""&&e(y,{sx:{backgroundColor:"#F2F3F7",borderRadius:"15px",boxShadow:"0px 0px 5px 1px rgba(0, 0, 0, 0.3)",display:"flex",justifyContent:"center",height:"100%",left:0,overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,width:"100%",zIndex:2},children:e(A,{component:"img",image:d,alt:g})}),s(y,{sx:{alignItems:"center",backgroundColor:"#F2F3F7",borderRadius:"15px",display:"flex",height:"100%",justifyContent:"center",flexDirection:"column",position:"relative",textAlign:"center",width:"100%"},children:[e(ie,{...a,inputProps:{accept:C,type:"file",title:g,sx:{backgroundColor:"transparent",borderRadius:"5px",height:"100%",margin:0,opacity:0,padding:0,position:"absolute",top:0,width:"100%",zIndex:0}},name:B.name,onChange:b,sx:{height:"100%",position:"absolute",left:0,m:0,opacity:0,p:0,top:0,width:"100%",zIndex:1}}),e(I,{sx:{color:"#616C7D",fontSize:15,fontWeight:500,lineHeight:"18px",maxWidth:r},children:F}),e(I,{className:"allowed-types",sx:{color:"#758399",fontSize:10,fontWeight:400,lineHeight:"12px",marginBottom:0},children:m})]})]})}),ye=()=>{const{isMobile:f,isTablet:d,navigate:b}=Z(),{setErrorMessage:h,setSuccessMessage:S}=K(),{allowedVerticals:C,chatbotNumber:m}=Q(),{setChatBotNumber:g}=$(),[F,r]=n.exports.useState(!0),[u,L]=n.exports.useState("Submit"),{control:a,handleSubmit:B,watch:D,reset:E,setValue:H}=te({defaultValues:{address:"",description:"",email:"",file:void 0,profile_picture_url:"",websites:[],messaging_product:"",vertical:""}}),U=D(),{profile_picture_url:G,vertical:w}=U,N=({target:{files:t}})=>{if(t&&t.length>0){const[i]=t;H("file",i),H("profile_picture_url",URL.createObjectURL(i))}},O=async t=>{try{const i=se.serialize(t),o=await v.saveWABasicSettings(i);if(o.errors)throw Error(o.errors.pop().message);if(!o.success&&o.message)throw Error(o.message);S(o.message),b(0)}catch(i){h(i.message)}},X=n.exports.useCallback(async()=>{try{const t=await v.getWABasicSettings();if(!t.success)throw Error(t.message);L("Update Business Information"),E(t.payload)}catch(t){h(t.message)}finally{r(!1)}},[E]),j=n.exports.useCallback(async()=>{try{if(m===void 0){const t=await v.getWAChatBots();if(!t.success)throw Error(t.message);const[i]=t.payload;i&&g(i.id)}}catch(t){h(t.message)}finally{r(!1)}},[]);return n.exports.useEffect(()=>{j()},[j]),n.exports.useEffect(()=>{X()},[X]),s(n.exports.Fragment,{children:[e(q,{children:e("title",{children:"WhatsApp Basic Settings"})}),f&&s(ne,{children:[e(J,{component:k,to:"/business-settings",sx:{width:32,height:32},children:e(ae,{})}),e(re,{children:"Business Information"})]}),e(le,{children:s(ce,{onSubmit:B(O),sx:de,children:[e(V,{elevation:0,sx:he,children:s(Be,{sx:me,children:[e(pe,{children:"Business Information"}),s(p,{sx:P,children:[e(x,{children:e(c,{sx:{mb:0,height:"100%"},children:e(l,{control:a,name:"description",label:"Business Description",rows:5,sx:ge,multiline:!0})})}),e(ue,{children:e(we,{control:a,name:"file",defaultValue:G,onChange:N,previewAlt:"Profile Image",label:"Upload Profile Image"})})]}),e(p,{sx:{...P,mt:3.75},children:e(x,{children:e(c,{children:s(l,{select:!0,control:a,label:"Business Vertical",name:"vertical",sx:W,defaultValue:w!=null?w:"",children:[e(_,{value:"",disabled:!0,children:"Select Vertical"}),C.map(({label:t,value:i},o)=>e(_,{value:i,children:t},o))]})})})}),e(p,{children:e(x,{children:e(c,{children:e(l,{control:a,label:"Business Address",name:"address",sx:W})})})}),e(p,{children:e(x,{children:e(c,{children:e(l,{control:a,label:"Email",name:"email",sx:W})})})}),s(p,{sx:xe,children:[e(R,{sx:M,children:e(c,{children:e(l,{control:a,name:"websites[0]",label:"Website 1",placeholder:"Website 1",sx:T})})}),e(R,{sx:M,children:e(c,{children:e(l,{control:a,name:"websites[1]",label:"Website 2",placeholder:"Website 2",sx:T})})})]}),e(oe,{children:!F&&e(z,{type:"submit",children:u})})]})}),m&&s(V,{elevation:0,sx:fe,children:[e(A,{component:"img",image:"/static/images/svg/bot.svg",alt:"bot",sx:{display:"flex",flexShrink:1,height:"auto",maxWidth:196,width:{xs:194,md:"calc(100% - 200px)"}}}),s(be,{sx:{maxWidth:420},children:[s(I,{component:"h3",sx:{color:"#FFFFFF",fontSize:14,fontWeight:400,lineHeight:"18px"},children:["Start building your WhatsApp Chatbot in seconds. Use the advanced ",e("strong",{children:"Chatflow"})," tool by EasySocial, and build complex conversations in a jiffy."]}),s(Se,{sx:Ce,children:[s(z,{component:k,to:`/chat-flow/${m}`,sx:Fe,disableIcon:!0,children:[e("span",{children:"Build Chatbot"}),e(Y,{viewBox:"0 0 14 10",fill:"none",sx:{width:14,height:10},children:e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3692 4.19223L8.28352 1.00205L9.25275 0L14 4.90798L9.43077 10L8.46154 8.99796L11.3692 5.62372H0V4.19223H11.3692Z",fill:"#12B0EE"})})]}),d&&e(A,{component:"img",image:"/static/images/svg/messages.svg",alt:"messages",sx:{width:"auto"}})]})]})]})]})})]})},Te=()=>e(ye,{});export{Te as default};
