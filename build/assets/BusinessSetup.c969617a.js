var ve=Object.defineProperty;var Ce=(r,i,o)=>i in r?ve(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o;var re=(r,i,o)=>(Ce(r,typeof i!="symbol"?i+"":i,o),o);import{r as t,j as e,a as s,I as Ne,u as O,aj as j,ak as K,al as ne,aM as q,A as Pe,V as Be,cb as $,ap as _e,m as we,C as Ie,b4 as Le,b0 as oe,a5 as Te,W as Ae,ce as Fe,c6 as ke,cf as De}from"./index.4acaa181.js";import{u as Y,F as x}from"./FormTextField.eaa611cf.js";import{g as ie}from"./mui-tel-input.es.72e94db5.js";import{S as ce}from"./SettingsApi.bc362b14.js";import{F as U,G as J}from"./Grid.18ada5ee.js";import{F as b,a as Q}from"./Form.91fe2bd9.js";import{F as A,b as le,a as V}from"./Style.8807be1a.js";import{C as X}from"./Card.41ee0ba8.js";import{M as F}from"./MenuItem.a519f58e.js";import Me from"./MapContainer.6fefdb96.js";import{L as Ee}from"./LeftArrow.a30f4a0f.js";import{F as We}from"./FormControlLabel.570b125d.js";import{C as $e}from"./Checkbox.f8a93b44.js";import{R as qe}from"./RazorPayApi.4aa59c77.js";import{A as Ve}from"./CommonComponents.e3538eb5.js";import{C as Oe}from"./PopupBoxes.570bf28c.js";import{E as Re}from"./ExpandLess.063a204d.js";import{E as ze}from"./ExpandMore.bb029016.js";import{D as Ge}from"./Divider.17ed9266.js";import"./TextField.3759393b.js";import"./Select.302fde0b.js";import"./useFormControl.bc0edc20.js";import"./isMuiElement.4f0a05d3.js";import"./Menu.7644575b.js";import"./List.e2978a9f.js";import"./useControlled.478cc12c.js";import"./ListItemText.a382266d.js";import"./listItemTextClasses.7aecd1d3.js";import"./InputAdornment.2a830e3f.js";import"./ArrowRight.bfcf0baa.js";import"./dividerClasses.4f496ad1.js";import"./index.f3d48750.js";import"./ListItem.223c2eb8.js";import"./listItemButtonClasses.eef3a49e.js";import"./Search.dd148e0c.js";import"./SwitchBase.b2298ebb.js";import"./Styles.c059562f.js";import"./styled.06abffd5.js";import"./Drawer.37a9be28.js";const de=t.exports.createContext(void 0),ue=t.exports.createContext(void 0),He=({children:r})=>{const[i,o]=t.exports.useState(1),[p,B]=t.exports.useState("/static/images/svg/login.svg"),[v,C]=t.exports.useState({firstLine:"Sign Up Successful !",secondLine:"Enter your business details to start your journey."}),y={step:i,leftImg:p,leftText:v},f=t.exports.useMemo(()=>({setStep:o,setLeftImg:B,setLeftText:C}),[]);return e(de.Provider,{value:y,children:e(ue.Provider,{value:f,children:r})})},ee=()=>{const r=t.exports.useContext(de);if(r===void 0)throw Error("Item must be used inside of BusinessSetupProvider, otherwise it will not function correctly.");return r},R=()=>{const r=t.exports.useContext(ue);if(r===void 0)throw Error("Item must be used inside of BusinessSetupProvider, otherwise it will not function correctly.");return r},je=()=>{const{leftImg:r,leftText:i}=ee();return s(t.exports.Fragment,{children:[i.firstLine?s("h1",{children:[i.firstLine,e("br",{}),i.secondLine]}):"",e(Ne,{src:r,alt:"Business Setup",width:455,height:478})]})},Ue="AoW5",Je="SeZ1",Xe="_5mZs",Ze="_012o",Ke="bKmh",Ye="gJF3",Qe="JwIV",et="_8Aao",tt="ze9y",st="k3eu",rt="KXUS",at="vsMk",nt="MIhE",ot="CORl",it="V1WY",ct="NE2E",lt="_7nix",dt="Yvkz",ut="zoN5",n={BusiSetupTitle:Ue,Form:Je,CheckBoxlabel:Xe,OrderSummary:Ze,Head:Ke,Heading:Ye,Duration:Qe,Particulars:et,Particular:tt,DiscountInput:st,CheckPromoBtn:rt,DiscountCard:at,BillingWrapper:nt,Billingheader:ot,BillingAddress:it,PlanDetailWrapper:ct,Info:lt,ActionBtn:dt,PlanDetail:ut},mt=()=>{const{country:r,countryName:i}=O(),{setStep:o}=R(),{setErrorMessage:p}=j(),{industryList:B,countriesList:v,provinces:C}=K(),{setProvinces:y}=ne(),[f,N]=t.exports.useState(!1),{control:c,handleSubmit:L,watch:_,reset:I,setValue:P}=Y({defaultValues:{business_name:"",industry:"",mobile_number:"",address:"",pin_code:"",city:"",state:"",country:i}}),{industry:S,mobile_number:u,state:l,country:T}=_(),z=async a=>{try{if(f){const g=await q.updatePendingSetup(a);g.success||p(g.message)}else{const g=await q.createBusiness(a);g.success||p(g.message),localStorage.setItem("businessId",g.payload.businessId)}o(2)}catch(g){p(g.message)}},M=async()=>{const a=await Pe.loggedUserInfo();P("mobile_number",a.payload.mobile_number)};t.exports.useEffect(()=>{M()},[]);const h=t.exports.useRef(async()=>{const a=await q.getPendingBusiness();a.payload&&a.success&&(I(a.payload),localStorage.setItem("businessId",a.payload.id),N(!0))});t.exports.useEffect(()=>{h.current()},[]);const d=t.exports.useCallback(async()=>{if(T){const a=await ce.getCountryProvinces(T);y(a)}},[T]);return t.exports.useEffect(()=>{d()},[d]),s(X,{component:"form",onSubmit:L(z),className:n.Form,children:[e("div",{className:n.BusiSetupTitle,children:"Connect your business"}),e(U,{children:s(J,{children:[e(b,{children:e(x,{control:c,name:"business_name",label:"Business Name",placeholder:"Business Name",required:!0,sx:A})}),e(b,{children:s(x,{select:!0,control:c,label:"Industry",name:"industry",sx:A,required:!0,defaultValue:S!=null?S:"",children:[e(F,{value:"",disabled:!0,children:"Select Industry"}),B.map((a,g)=>e(F,{value:a,children:a},g))]})}),e(b,{children:e(ie,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:r,value:u,onChange:(a,g)=>{var H;P("mobile_number",(H=g.numberValue)!=null?H:a)},variant:"filled",sx:le})}),e(b,{children:e(x,{control:c,name:"address",label:"Address",placeholder:"Address",required:!0,sx:A})}),e(b,{children:s(x,{select:!0,control:c,label:"Country",name:"country",sx:V,required:!0,defaultValue:T!=null?T:"",children:[e(F,{value:"",disabled:!0,children:"Select Country"}),v.map((a,g)=>e(F,{value:a.name,children:a.name},g))]})}),e(b,{children:C.length>0?s(x,{select:!0,control:c,label:"State",name:"state",sx:V,required:!0,defaultValue:l!=null?l:"",children:[e(F,{value:"",disabled:!0,children:"Select State"}),C.map((a,g)=>e(F,{value:a.name,children:a.name},g))]}):e(x,{control:c,name:"state",label:"State",placeholder:"State",required:!0,sx:V})}),e(b,{children:e(x,{control:c,name:"city",label:"City",placeholder:"City",required:!0,sx:A})}),e(b,{children:e(x,{control:c,name:"pin_code",label:"Pincode",placeholder:"Pincode",required:!0,sx:A})}),e(Q,{type:"submit",children:"Save & Tag Location"})]})})]})},pt="mtuX",ht="WjCW",ae={MainWrapper:pt,Title:ht},te=({title:r})=>{const{setStep:i}=R(),{step:o}=ee();return e(t.exports.Fragment,{children:s("div",{className:ae.MainWrapper,children:[e(Be,{onClick:()=>i(o-1),sx:{width:32,height:32},children:e(Ee,{})}),e("div",{className:ae.Title,children:r})]})})},gt=()=>{var S;const{isMobile:r,isTablet:i}=O(),{setStep:o,setLeftText:p}=R(),{setErrorMessage:B}=j(),{timeZoneList:v}=K();t.exports.useEffect(()=>{p({firstLine:"",secongLine:""})},[]);const{control:C,handleSubmit:y,watch:f,setValue:N}=Y({defaultValues:{latitude:20.5937,longitude:78.9629,timezone:{label:"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi",value:5.5}}}),{latitude:c,longitude:L,timezone:_}=f(),I=u=>{N("latitude",typeof u.lat=="function"?u.lat():u.lat),N("longitude",typeof u.lng=="function"?u.lng():u.lng)},P=async u=>{try{const l=await q.updateLocation(u);l.success||B(l.messages?l.messages.errors[0].message:l.message),o(3)}catch(l){B(l.message)}};return s(t.exports.Fragment,{children:[r&&e(te,{title:"Save Location"}),s(X,{component:"form",onSubmit:y(P),className:n.Form,children:[i&&e("div",{className:n.BusiSetupTitle,children:"Save Location"}),e(U,{children:s(J,{style:{width:"100%"},children:[e(b,{children:e(Me,{onChange:I,initialCenter:{lat:c!=null?c:20.5937,lng:L!=null?L:78.9629}})}),e(b,{children:s(x,{select:!0,control:C,label:"Time Zone",name:"timezone.label",sx:V,required:!0,defaultValue:(S=_==null?void 0:_.label)!=null?S:"",children:[e(F,{value:"",disabled:!0,children:"Select Time Zone"}),v.map((u,l)=>e(F,{value:u.label,children:u.label},l))]})}),e(Q,{type:"submit",children:"Save & Select Plan"})]})})]})]})},bt=({setBillingDetail:r})=>{const{isMobile:i,isTablet:o}=O(),{setErrorMessage:p}=j(),{countriesList:B,provinces:v}=K(),{setProvinces:C}=ne(),{setLeftText:y,setStep:f}=R(),N={company_name:"",email:"",number:"",address:"",city:"",state:"",country:"",pin_code:"",gst_number:"",pan_number:""},{control:c,handleSubmit:L,watch:_,reset:I,setValue:P}=Y({defaultValues:N}),{number:S,state:u,country:l}=_(),T=t.exports.useCallback(async()=>{if(l){const h=await ce.getCountryProvinces(l);C(h)}},[l]);t.exports.useEffect(()=>{T()},[T]),t.exports.useEffect(()=>{y({firstLine:"",secongLine:""})},[]);const z=async h=>{try{console.log("data",h);const d=await q.updateBillingDetail(h);if(!d.success)throw Error(d.messages?d.messages.errors[0].message:d.message);r(h),f(5)}catch(d){p(d.message)}},M=async h=>{const d=h.target.checked;try{if(d){const a=await q.getBusinessById(Number(localStorage.getItem("businessId")));if(a.errors)throw Error(a.errors.pop().message);if(!a.success)throw Error(a.message);console.log("res.payload.mobile_number",a.payload.mobile_number),I({company_name:a.payload.business_name,number:a.payload.mobile_number,address:a.payload.address,city:a.payload.city,state:a.payload.state,country:a.payload.country,pin_code:a.payload.pin_code})}else I(N)}catch(a){p(a.message)}};return s(t.exports.Fragment,{children:[i&&e(te,{title:"Billing Detail"}),s(X,{component:"form",onSubmit:L(z),className:n.Form,children:[o&&e("div",{className:n.BusiSetupTitle,children:"Billing Detail"}),e(U,{children:s(J,{children:[e(We,{className:n.CheckBoxlabel,control:e($e,{onChange:h=>M(h)}),label:"Billing Details are same as Business Details"}),e(b,{children:e(x,{control:c,name:"company_name",label:"Company Name",placeholder:"Company Name",required:!0,sx:A})}),e(b,{children:e(x,{control:c,name:"email",label:"Email",placeholder:"Email",required:!0,sx:A})}),e(b,{children:e(ie,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:"IN",value:S,onChange:(h,d)=>{var a;P("number",(a=d.numberValue)!=null?a:h)},variant:"filled",sx:le})}),e(b,{children:e(x,{control:c,name:"address",label:"Address",placeholder:"Address",required:!0,sx:A})}),e(b,{children:s(x,{select:!0,control:c,label:"Country",name:"country",sx:V,required:!0,defaultValue:l!=null?l:"",children:[e(F,{value:"",disabled:!0,children:"Select Country"}),B.map((h,d)=>e(F,{value:h.name,children:h.name},d))]})}),e(b,{children:v.length>0?s(x,{select:!0,control:c,label:"State",name:"state",sx:V,required:!0,defaultValue:u!=null?u:"",children:[e(F,{value:"",disabled:!0,children:"Select State"}),v.map((h,d)=>e(F,{value:h.name,children:h.name},d))]}):e(x,{control:c,name:"state",label:"State",placeholder:"State",required:!0,sx:A})}),e(b,{children:e(x,{control:c,name:"city",label:"City",placeholder:"City",required:!0,sx:A})}),e(b,{children:e(x,{control:c,name:"pin_code",label:"Pincode",placeholder:"Pincode",required:!0,sx:A})}),e(b,{children:e(x,{control:c,name:"gst_number",label:"GST Number",placeholder:"GST Number",sx:A})}),e(b,{children:e(x,{control:c,name:"pan_number",label:"PAN Number",placeholder:"PAN Number",sx:A})}),e(Q,{type:"submit",children:"Verify & Pay"})]})})]})]})},yt=({currency:r,grandTotal:i,billingDetail:o,udf2:p,description:B})=>{const[v,C]=t.exports.useState(!0);return t.exports.useEffect(()=>{const f=document.createElement("script");f.src="https://checkout.razorpay.com/v1/checkout.js",f.async=!0,document.body.appendChild(f)},[]),e(Ve,{type:"button",variant:"contained",className:"mt-5 ms-0 pay-btn",onClick:async()=>{var _,I;C(!0);const f=await qe.createOrder({amount:parseFloat(i.toFixed(2)),notes:{businessId:localStorage.getItem("businessId"),plans:p==null?void 0:p.join(","),gst:o.gst_number,pan:o.pan_number}}),N={key:"rzp_test_RRNQ95mWTINe0J",name:"Easy Social",description:B,order_id:f.payload.order.id,prefill:{name:o.company_name,email:o.email,contact:o.number},notes:{billing_name:o.company_name,billing_address:o.address,billing_city:o.city,billing_state:o.state,billing_zip:(_=o.pin_code)==null?void 0:_.toString(),billing_country:o.country,billing_tel:(I=o.number)==null?void 0:I.toString(),billing_email:o.email},theme:{color:"#686CFD"},modal:{confirm_close:!0,ondismiss:function(){C(!1)}},callback_url:`https://stg-api.e-so.in${f.payload.url}`,redirect:!0,handler:function(){C(!1)}},c=window;new c.Razorpay(N).open()},showLoader:v,children:`Pay ${r}${$(i)}`})};class me{}re(me,"validatePromoCode",async i=>await _e("/promocode/validate","POST",{data:i}));const ft=({plans:r,setPlans:i})=>{const[o,p]=t.exports.useState(""),[B,v]=t.exports.useState(!1),C=()=>{v(!1)},[y,f]=t.exports.useState(),[N,c]=t.exports.useState([!1,!1]),L=P=>{const S=N.map((u,l)=>l===P?N[l]=!0:N[l]=!1);c(S)},_=()=>{v(!0)},I=async()=>{const P=r.filter(S=>S.id!==y);localStorage.setItem("selectedPlan",JSON.stringify(P)),i(P)};return s(t.exports.Fragment,{children:[e("div",{className:we(n.PlanDetailWrapper,"col-10 col-sm-6 col-md-12"),children:s("div",{className:n.BillingWrapper,children:[e("div",{className:n.Billingheader,children:e("h5",{children:"Plan Detail"})}),r&&r.map((P,S)=>{const u=$(P.amount);return s("div",{children:[s("div",{className:n.Billingheader,children:[s("div",{className:n.Info,children:[e("h6",{children:P.title}),e("small",{className:"price",children:`${o}${u}/Month`})]}),s("div",{className:n.ActionBtn,children:[r.length>1&&e("button",{type:"button",onClick:()=>{f(P.id),_()},children:"Remove"}),s("button",{onClick:()=>L(S),type:"button",children:["Details ",N[S]?e(Re,{}):e(ze,{})]})]})]}),e(Ie,{in:N[S],className:"data",children:e("div",{className:n.PlanDetail,children:Le(P.plan_detail)})})]},`${S}`)})]})}),e(Oe,{title:"Delete",open:B,setOpen:v,onConfirm:async()=>{await I(),C()},positiveLabel:"Delete",negativeLabel:"Cancel",children:"Are you sure you want to delete?"})]})},St=oe(new Date).format("Do MMM"),xt=({billingDetail:r})=>{const{setErrorMessage:i}=j(),{isMobile:o,isTablet:p}=O(),{setStep:B,setLeftText:v,setLeftImg:C}=R(),[y,f]=t.exports.useState([]),[,N]=t.exports.useState(0),[c,L]=t.exports.useState(""),[_,I]=t.exports.useState(""),[P,S]=t.exports.useState(0),[u,l]=t.exports.useState(0),[T,z]=t.exports.useState(0),[M,h]=t.exports.useState(0),[d,a]=t.exports.useState(""),[g,H]=t.exports.useState(""),[pe,he]=t.exports.useState([]),[ge,be]=t.exports.useState();t.exports.useEffect(()=>{C("/static/images/svg/order_summary.svg"),v({firstLine:"",secongLine:""})},[]),t.exports.useEffect(()=>{const m=[],k=localStorage.getItem("selectedPlan");if(k){const w=JSON.parse(k),D=new Date;let E=D.setDate(D.getDate()+w[0].validity-1);E=oe(E).format("Do MMM"),be(E),f(w),a(w[0].currency==="INR"?"\u20B9":"$"),H(w[0].currency);let se=0;const xe=0;for(let W=0;W<w.length;W++)se+=w[W].has_discount?w[W].discount_amount:w[W].amount,m.push(w[W].slug);Z(se,xe,w[0].currency),he(m)}},[]);const Z=async(m,k,w)=>{let D=m-k;D<1&&(D=0);const E=w==="INR"?D*.18:0;l(E),S(D),h(m),z(D+E)},ye=()=>{N(0),I(""),L(""),Z(M,0,g)},fe=()=>{B(4)},Se=async()=>{const m=c,k=await me.validatePromoCode({promocode:m,total_amount:M,currency:g});if(!k.success)i(k.message);else{const w=k.payload.promo_discount;N(w),I(m),Z(M,w,g)}};return s(t.exports.Fragment,{children:[o&&e(te,{title:"Order Summary"}),s(X,{className:n.Form,children:[p&&e("div",{className:n.BusiSetupTitle,children:"Order Summary"}),e(U,{children:e(J,{children:s("div",{className:n.OrderSummary,children:[s("div",{className:n.Head,children:[e("h5",{className:n.Heading,children:"Details"}),e("small",{className:n.Duration,children:`${St} to ${ge}`})]}),s("div",{className:n.Particulars,children:[y&&y.map((m,k)=>s("div",{className:n.Particular,children:[s("p",{className:n.Title,children:[`${m.category} - ${m.name} - ${m.validity} Days `,m.has_discount&&s("s",{children:[d,m.amount]})]}),s("p",{children:[d,$(m.has_discount?m.discount_amount:m.amount)]})]},`${k}`)),s("div",{className:n.Particular,children:[e("p",{children:"Discount Promo"}),e("div",{children:_===""?s(t.exports.Fragment,{children:[e("input",{type:"text",placeholder:"Enter Code",name:"discount",className:n.DiscountInput,onChange:m=>L(m.target.value)}),e("button",{className:n.CheckPromoBtn,onClick:Se,children:"Check"})]}):e("span",{className:"discount-value",children:" "})})]}),e("div",{className:n.Particular,children:_!==""&&s("div",{className:n.DiscountCard,children:[e("small",{children:String(_).toUpperCase()}),e("button",{type:"button",onClick:ye,children:e("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"//www.w3.org/2000/svg",children:s("g",{opacity:"0.7",children:[e("path",{d:"M1 1L9.5 9.5",stroke:"#24272C"}),e("path",{d:"M9.5 1L1 9.5",stroke:"#24272C"})]})})})]})}),g==="INR"&&s(t.exports.Fragment,{children:[s("div",{className:n.Particular,children:[e("p",{className:"title",children:"Taxable Amount"}),e("p",{className:"amount",children:`${d}${$(P)}`})]}),s("div",{className:n.Particular,children:[e("p",{className:"title",children:"GST Amount"}),e("p",{className:"amount",children:`${d}${$(u)}`})]}),s("div",{className:n.Particular,children:[e("p",{className:"title",children:"GST No."}),e("p",{className:"number",children:r.gst_number})]})]}),e(Ge,{style:{margin:"10px 0"}}),s("div",{className:n.Particular,children:[e("p",{className:n.Title,children:e("strong",{children:"Total Payable Amount"})}),e("p",{className:"amount",children:e("strong",{children:`${d}${$(T)}`})})]})]}),e("div",{className:"col-10 col-sm-6 col-md-12",children:s("div",{className:n.BillingWrapper,children:[s("div",{className:n.Billingheader,children:[e("h5",{children:r.company_name}),e("button",{type:"button",onClick:()=>fe(),children:"Edit Billing Address"})]}),e("div",{className:n.BillingAddress,children:`${r.address}, ${r.city}, ${r.state}-${r.pin_code}`})]})}),e(ft,{plans:y,setPlans:m=>f(m)}),T&&e(yt,{currency:d,grandTotal:T,billingDetail:r,udf2:pe,description:y[0].name})]})})})]})]})},vt=()=>{const r=Te(),{navigate:i,isMobile:o}=O(),{step:p}=ee(),{setStep:B}=R(),[v,C]=t.exports.useState("");if(p===3&&i("/choose-plan"),r.state){const{name:y}=r.state&&r.state;y==="redirectBusi"&&(i("/business-setup",{replace:!0}),p!==4&&B(4))}return e(t.exports.Fragment,{children:(()=>{switch(p){case 1:return e(mt,{});case 2:return e(gt,{});case 4:return e(bt,{setBillingDetail:y=>C(y)});case 5:return e(xt,{billingDetail:v})}})()})},Ct="ighc",Nt="onBD",Pt="a-wS",Bt="Ty1D",_t="_6yu3",G={OuterWrapper:Ct,InnerWrapper:Nt,LeftWrapper:Pt,LeftFixed:Bt,RightWrapper:_t},ps=()=>{const{isTablet:r}=O();return s(t.exports.Fragment,{children:[e(Ae,{children:e("title",{children:"Business Setup"})}),e(Fe,{children:e(ke,{children:s(He,{children:[e(De,{}),e("div",{className:G.OuterWrapper,children:s("div",{className:G.InnerWrapper,children:[r&&e("div",{className:G.LeftWrapper,children:e("div",{className:G.LeftFixed,children:e(je,{})})}),e("div",{className:G.RightWrapper,children:e(vt,{})})]})})]})})})]})};export{ps as default};
