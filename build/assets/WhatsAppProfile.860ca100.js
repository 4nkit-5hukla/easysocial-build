import{u as U,aj as D,aG as R,aH as N,aI as X,r as o,aJ as f,j as e,an as z,a as n,V as J,L as O,W as q}from"./index.286d7f97.js";import{u as K,F as l}from"./FormTextField.9310df81.js";import{F as Q,s as Y}from"./FormFileField.026ec680.js";import{L as Z}from"./LeftArrow.c067a303.js";import $ from"./LinkPlatForm.20cd80a8.js";import{d as ee,a as d,F as C}from"./Style.ced39dc3.js";import{c as te,H as re,d as se,e as ae}from"./Wrappers.aa57e128.js";import{F as c,A as ie,a as oe}from"./Form.bf7ae0d3.js";import{C as w,a as ne,h as le}from"./Card.6f5b1270.js";import{C as ce,F as m,G as p,S as me,a as pe,H as S}from"./Grid.43b92e73.js";import{p as de}from"./Position.module.ff7b7fa6.js";import{M as P}from"./MenuItem.25444359.js";import"./TextField.3f547d15.js";import"./Select.a628664b.js";import"./useFormControl.14cf7bab.js";import"./isMuiElement.1e9ba36c.js";import"./Menu.beea8aa9.js";import"./List.12557ecb.js";import"./useControlled.6e207072.js";import"./Styles.3864ecd6.js";import"./Tags.e07c1ecf.js";import"./toConsumableArray.52b4c8e6.js";import"./ListItem.d5cef95a.js";import"./listItemButtonClasses.9fc53cf6.js";import"./styled.e7b57bd4.js";import"./CommonComponents.e038aedb.js";import"./ArrowRight.7576e371.js";import"./Styles.c059562f.js";import"./Card.24e39f91.js";import"./CardContent.23caf9fc.js";import"./listItemTextClasses.cda4af54.js";import"./dividerClasses.7e07a65e.js";const he=()=>{const{isMobile:W,isTablet:ue,navigate:L}=U(),{setErrorMessage:h,setSuccessMessage:y}=D(),{allowedVerticals:B,chatbotNumber:E}=R(),{platformExist:s}=N(),{setChatBotNumber:V}=X(),[v,g]=o.exports.useState(!0),[H,I]=o.exports.useState("Submit"),{control:a,handleSubmit:_,watch:k,reset:b,setValue:x}=K({defaultValues:{address:"",about:"",description:"",email:"",file:void 0,profile_picture_url:"",websites:[],messaging_product:"",vertical:""}}),j=k(),{profile_picture_url:G,vertical:u}=j,M=({target:{files:t}})=>{if(t&&t.length>0){const[r]=t;x("file",r),x("profile_picture_url",URL.createObjectURL(r))}},T=async t=>{try{const r=Y.serialize(t),i=await f.saveWAProfile(r);if(i.errors)throw Error(i.errors.pop().message);if(!i.success&&i.message)throw Error(i.message);y(i.message),L(0)}catch(r){h(r.message)}},F=o.exports.useCallback(async()=>{try{if(typeof s=="boolean"&&s){const t=await f.getWAProfile();if(!t.success)throw Error(t.message);I("Update"),b(t.payload)}}catch(t){h(t.message)}finally{g(!1)}},[s,b]),A=o.exports.useCallback(async()=>{try{if(typeof s=="boolean"&&s&&E===void 0){const t=await f.getWAChatBots();if(!t.success)throw Error(t.message);const[r]=t.payload;r&&V(r.id)}}catch(t){h(t.message)}finally{g(!1)}},[s]);return o.exports.useEffect(()=>{A()},[A]),o.exports.useEffect(()=>{F()},[F]),v?e(w,{className:de.AbsCenter,children:e(z,{height:72,width:72})}):n(o.exports.Fragment,{children:[W&&n(te,{children:[e(J,{component:O,to:"/business-settings",sx:{width:32,height:32},children:e(Z,{})}),e(re,{children:"WhatsApp Profile"})]}),e(se,{children:typeof s=="boolean"&&s===!1?e(ce,{children:e($,{})}):n(ae,{onSubmit:_(T),children:[e(w,{elevation:0,children:n(ne,{children:[e(le,{children:"Business Information"}),n(m,{children:[e(p,{children:e(c,{sx:{mb:0,height:"100%"},children:e(l,{control:a,name:"description",label:"Business Description",rows:5,sx:ee,inputProps:{maxLength:256},multiline:!0})})}),e(me,{children:e(Q,{control:a,name:"file",defaultValue:G,onChange:M,previewAlt:"Profile Image",label:"Upload Profile Image"})})]}),e(m,{sx:{mt:3.75},children:e(p,{children:e(c,{children:n(l,{select:!0,control:a,label:"Business Vertical",name:"vertical",sx:d,defaultValue:u!=null?u:"",children:[e(P,{value:"",disabled:!0,children:"Select Vertical"}),B.map(({label:t,value:r},i)=>e(P,{value:r,children:t},i))]})})})}),e(m,{children:e(p,{children:e(c,{children:e(l,{control:a,label:"About",name:"about",inputProps:{maxLength:256},sx:d})})})}),e(m,{children:e(p,{children:e(c,{children:e(l,{control:a,label:"Business Address",name:"address",inputProps:{maxLength:256},sx:d})})})}),e(m,{children:e(p,{children:e(c,{children:e(l,{control:a,label:"Email",name:"email",inputProps:{maxLength:256},sx:d})})})}),n(pe,{children:[e(S,{children:e(c,{children:e(l,{control:a,name:"websites[0]",label:"Website 1",placeholder:"Website 1",inputProps:{maxLength:256},sx:C})})}),e(S,{children:e(c,{children:e(l,{control:a,name:"websites[1]",label:"Website 2",placeholder:"Website 2",inputProps:{maxLength:256},sx:C})})})]}),e(ie,{children:e(oe,{type:"submit",children:H})})]})}),!1]})})]})},Oe=()=>n(o.exports.Fragment,{children:[e(q,{children:e("title",{children:"WhatsApp Profile"})}),e(he,{})]});export{Oe as default};
