import{r as t,j as r,m as v,as as D,a as k,B as K,Q as E,$ as F}from"./index.f4b1475f.js";import{L as T}from"./List.fc9de2b8.js";import{L as z}from"./ListItem.214d79ed.js";import{L as J}from"./ListItemText.b4b9fe4e.js";import{S as U}from"./Search.1d91e5aa.js";import{d as W}from"./Select.be951174.js";import{d as w}from"./index.f3d48750.js";import"./listItemButtonClasses.f6719ad5.js";import"./isMuiElement.62abf40c.js";import"./listItemTextClasses.5c126781.js";import"./useFormControl.75866ec7.js";import"./Menu.0fd5621c.js";import"./useControlled.82bc185c.js";function Y(){const e=t.exports.useRef(!1);return t.exports.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.exports.useCallback(()=>e.current,[])}const q="GgRS",H="jPPX",Q="_5-J2",V="UTL7",X="DlNT",L={List:q,ListItem:H,secondary:Q,Active:V,CustomButton:X},Z=({predictions:e,google:u,onChange:c,recenterMap:n,isOpen:i,closeList:C})=>{const[S,m]=t.exports.useState(null),b=({place:a,main_text:d,secondary_text:o})=>{new u.maps.Geocoder().geocode({placeId:a.place_id},(l,h)=>{if(h!=="OK"&&l)return;const g=l[0].geometry.location,{lat:B,lng:_}=g;c({lng:_(),lat:B(),address:o,name:d}),m(null),C()})},f=({place:a})=>{new u.maps.Geocoder().geocode({placeId:a.place_id},(o,x)=>{if(x!=="OK"&&o)return;const l=o[0].geometry.location,{lat:h,lng:g}=l;n({lat:h(),lng:g()}),m(o[0].place_id)})};return r(T,{sx:{display:i&&e&&e.length>0?"block":"none"},classes:{root:L.List},children:e.map((a,d)=>{const{structured_formatting:o}=a;return r(z,{button:!0,classes:{root:v(L.ListItem,S===a.place_id&&L.Active)},onClick:()=>{f({place:a}),b({place:a,main_text:o.main_text,secondary_text:o.secondary_text})},children:r(J,{classes:{root:v(L.root),secondary:v(L.secondary)},primary:o.main_text,secondary:o.secondary_text||""})},a.place_id)})})},ee="SAhR",te="n2Ln",oe="A48M",A={Search_Box:ee,Input_Container:te,InputField:oe};const se=({google:e,onChange:u,initialCenter:c})=>{var _;const n=Y(),[i,C]=t.exports.useState({lat:Number(c.lat)||20.5937,lng:Number(c.lng)||78.9629}),[S,m]=t.exports.useState(!1),b=t.exports.useRef(),f=t.exports.useRef(),[a,d]=t.exports.useState([{lat:Number(c.lat)||20.5937,lng:Number(c.lat)||78.9629}]),[o,x]=t.exports.useState([]),l=t.exports.useCallback(({lat:s,lng:p})=>{n()&&(d(()=>[{lat:s,lng:p}]),C({lat:s,lng:p}))},[n]);t.exports.useEffect(()=>{l(c)},[]);const h=t.exports.useCallback((s,p,{latLng:G})=>{const{lat:M,lng:P}=G,N=new e.maps.Geocoder,R={lat:M(),lng:P()},O=new e.maps.places.PlacesService(p);N.geocode({location:R}).then(I=>{if(I.results[0]){const $={placeId:I.results[0].place_id,fields:["name","formatted_address","place_id","geometry"]};O.getDetails($,(y,j)=>{j===e.maps.places.PlacesServiceStatus.OK&&y&&y.geometry&&y.geometry.location&&u({...R,name:y.name,address:y.formatted_address})})}}).catch(I=>window.alert("Geocoder failed due to: "+I)),n()&&d(()=>[{lat:M(),lng:P()}])},[n]),g=t.exports.useCallback(()=>{i&&new e.maps.places.SearchBox(f.current)},[i,e.maps]),B=function(s,p){return p!==e.maps.places.PlacesServiceStatus.OK||!s?n()&&x([]):n()&&x(s)};return i&&r(D,{children:k("div",{style:{width:"100%",position:"relative",height:"300px",display:"flex"},children:[r(K,{sx:{width:"100%",position:"relative",height:"100%","& div[aria-roledescription='map']":{cursor:"crosshair !important"}},children:r(w.Map,{ref:b,google:e,zoom:15,initialCenter:i,centerAroundCurrentLocation:!0,onClick:h,onBoundsChanged:g,center:i,panControl:!0,draggable:!0,mapTypeControl:!1,fullscreenControl:!1,zoomControl:!0,streetViewControl:!1,children:a.map(s=>r(w.Marker,{position:s},`${s.lat}-${s.lng}`))})}),r("div",{className:v(A.Search_Box),children:k("div",{className:A.Input_Container,children:[k(E,{sx:{p:"5px 10px",display:"flex",alignItems:"center",width:"95%",borderRadius:"8px",margin:"2% auto"},children:[r(F,{sx:{p:"10px"},"aria-label":"search",children:r(U,{})}),r(W,{onFocus:()=>m(!0),onInput:({target:s})=>{new e.maps.places.AutocompleteService().getPlacePredictions({input:s.value},B)},inputRef:f,sx:{ml:1,flex:1},placeholder:"Search your Location",inputProps:{"aria-label":"Search Your Location"}})]}),S&&r(Z,{isOpen:S&&((_=f.current)==null?void 0:_.value.length)>=1,recenterMap:l,google:e,predictions:o,onChange:u,closeList:()=>m(!1)})]})})]})})},ge=w.GoogleApiWrapper({apiKey:"AIzaSyDJfxykafBBE2rkeU5EHbkl7j2DmcGfNYA"})(se);export{ge as default};
