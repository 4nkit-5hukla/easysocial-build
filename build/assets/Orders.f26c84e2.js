import{bO as w,u as _,al as A,r as a,a as s,j as r,a$ as d,aq as E,c8 as S,c9 as P,W as B}from"./index.bfa623cc.js";import{B as k}from"./BizParticipantsProvider.b9765324.js";import{A as D}from"./AllPaymentsApi.c849c38c.js";import{c as t,M as F,D as H}from"./MobileFilter.a733573c.js";import{M as $}from"./MobileHeader.b6444648.js";import{S as I}from"./ServiceExpiryAlert.7bd8ee8b.js";import{C as R}from"./Card.abe49e25.js";import{C as j}from"./CardContent.949b1861.js";import{T as z,a as G,b as L,c as O,d as n,e as W}from"./TableRow.b1b1a371.js";import{L as q}from"./Link.7cc7e9aa.js";import"./Search.a44e7aff.js";import"./Clear.287039b4.js";import"./Divider.b047efe4.js";import"./dividerClasses.3c2fdfe8.js";import"./RangePopUp.0635fa08.js";import"./index.eb4aa1c1.js";import"./TextField.cbe65db4.js";import"./Select.97ce6d09.js";import"./useFormControl.ad463314.js";import"./isMuiElement.3b8cd457.js";import"./Menu.a16588c0.js";import"./List.75916aa4.js";import"./useControlled.1a2fa378.js";import"./usePickerState.2089f3d3.js";import"./Grid.77afb416.js";import"./InputAdornment.57a49ff0.js";import"./StaticDateRangePicker.b4441b08.js";import"./PickersToolbarButton.ff020289.js";import"./LeftArrow.61a8d5d2.js";import"./Wrappers.6c316bad.js";const U=()=>{const g=w(),{isMobile:h,isTablet:y}=_(),{showSnack:u}=A(),[p,T]=a.exports.useState([]),[f,b]=a.exports.useState(""),[x,v]=a.exports.useState(0),[c,C]=a.exports.useState(new Date(new Date().getFullYear(),0,1)),[l,N]=a.exports.useState(new Date(new Date().getFullYear(),11,31)),M=a.exports.useRef(async(e,o,m)=>{e&&e.setHours(0,0,0,0),o&&o.setHours(23,59,59,999);const i=await D.getAllOrders(e,o,m);if(!i.success)return u(i.message,"error");T(i.payload)});a.exports.useEffect(()=>{M.current(c,l,f)},[c,l,f]);const Y=a.exports.useRef(async()=>{const e=await D.getExpiryBusinessCount();if(!e.success)return u(e.message,"error");v(e.payload)});return a.exports.useEffect(()=>{Y.current()},[]),s(a.exports.Fragment,{children:[h&&r($,{title:"Orders"}),r("div",{className:t.ContentInner,children:s("div",{className:t.InnerWrapper,children:[h&&r(F,{placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>N(e)}),x>0&&r(I,{noOfBusi:x}),s(R,{elevation:0,className:t.Card,children:[y&&r(H,{title:"Orders",placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>N(e)}),r(j,{className:t.CardContent,children:p.length>0?r("div",{className:t.TableOuter,children:r(z,{className:t.TableContainer,children:s(G,{children:[r(L,{children:s(O,{className:t.TableHead,children:[r(n,{component:"th",children:"Date"}),r(n,{component:"th",children:"Particulars"}),r(n,{component:"th",children:"Order No."}),r(n,{component:"th",children:"Amount"}),r(n,{component:"th",children:"Inv No."})]})}),r(W,{children:p&&p.map(e=>{var i;let o="",m="";return e.order_type==="plan"&&(o=`${d(e.start_date).format("D")} - ${d(e.expiry_date).format("D MMM YYYY")}`,m=` Plan Code: ${(i=e.plan)==null?void 0:i.slug}`),r(E,{children:s(O,{children:[r(n,{className:t.OrderDate,children:d(e.created_at).format("D MMM YYYY")}),s(n,{className:t.Particulars,children:[r("p",{children:e.business.business_name}),s("span",{children:[e.particulars.charAt(0).toUpperCase()+e.particulars.slice(1)," -"," ",e.short_desc&&e.short_desc]}),r("br",{}),r("span",{children:o}),r("label",{children:m})]}),r(n,{className:t.OrderNumber,children:r(q,{onClick:()=>{g(`${e.id}`)},children:S(e.id)})}),s(n,{className:t.OrderDate,children:[e.currency==="INR"?"\u20B9":"$",P(e.paid_amount)]}),r(n,{children:S(e.invoice_number)})]})})})})]})})}):s("div",{className:t.NoData,children:["There is no order to show for this duration.",r("br",{}),"Try to select a different date range."]})})]})]})})]})},ye=()=>s(a.exports.Fragment,{children:[r(B,{children:r("title",{children:"Orders"})}),r(k,{children:r(U,{})})]});export{ye as default};
