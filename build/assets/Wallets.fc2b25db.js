import{r as n,R as M,b as w,j as a,a as r,B as b,c9 as S,u as B,al as E,aq as R,a_ as z,W as v}from"./index.538d2f9a.js";import{B as P}from"./BizParticipantsProvider.48bc3435.js";import{A as Y}from"./AllPaymentsApi.97d7c6b6.js";import{M as H,c as i,a as O,D as $}from"./MobileFilter.3b6ad6b3.js";import{u as L,F as j}from"./FormTextField.bc721fef.js";import{I as x}from"./Inr.696ce15f.js";import{W as G}from"./Wallet.59704505.js";import{R as q}from"./RazorPayApi.d80e8fe6.js";import{g as Q}from"./Styles.c059562f.js";import{C as k}from"./Card.196455a2.js";import{C as N}from"./CardContent.92b7395c.js";import{D as V}from"./Divider.d0dcaa48.js";import{I as X}from"./InputAdornment.a2203299.js";import{T as J,a as Z,b as K,c as T,d as c,e as U}from"./TableRow.923e6847.js";import"./Search.3b45fe8d.js";import"./Clear.e1da9733.js";import"./LeftArrow.41efc6ac.js";import"./Wrappers.703b744c.js";import"./RangePopUp.6d4ad164.js";import"./index.eb4aa1c1.js";import"./TextField.97fa0105.js";import"./Select.73eb3e52.js";import"./useFormControl.607b6878.js";import"./isMuiElement.ae78b690.js";import"./Menu.0eef51cd.js";import"./List.80eed540.js";import"./useControlled.a7d9109e.js";import"./usePickerState.300664d3.js";import"./Grid.433b623f.js";import"./StaticDateRangePicker.74b29e27.js";import"./PickersToolbarButton.b23ea7e1.js";import"./Link.af1c69c3.js";import"./dividerClasses.9b2c4cf4.js";var I=(l=>(l.CREDIT="Credit",l.DEBIT="Debit",l))(I||{});const tt="Gapp",at="z5Cn",et="WX7L",rt="nGYI",nt="RLQH",ot="ZT7M",lt="LxNd",m={WalletBalance:tt,WalletAmount:at,AddAmountBlock:et,AmountBlock:rt,AmountIncrement:nt,AddMoneyBtnWrapper:ot,AddMoneyBtn:lt},it=({balance:l})=>{const[,p]=n.exports.useState(!0),{fetchDefaultBusiness:_}=M(),{selectedBusiness:t}=w();n.exports.useEffect(()=>{!t&&_.current()},[t]);const{control:W,watch:f,setValue:g}=L({defaultValues:{amount:100}}),{amount:u}=f(),h=async o=>{g("amount",o+u)};n.exports.useEffect(()=>{const o=document.createElement("script");o.src="https://checkout.razorpay.com/v1/checkout.js",o.async=!0,document.body.appendChild(o)},[]);const d=async()=>{p(!0);const o=u*.18,s=await q.createOrder({amount:parseFloat(o)+parseFloat(u.toFixed(2)),notes:{plans:"wallet",gstAmt:o,businessId:localStorage.getItem("businessId")}}),A={key:"rzp_test_RRNQ95mWTINe0J",name:"Easy Social",description:"Wallet Recharge",order_id:s.payload.order.id,prefill:{name:t==null?void 0:t.billing_detail.company_name,email:t==null?void 0:t.billing_detail.email,contact:t==null?void 0:t.billing_detail.number},notes:{billing_name:t==null?void 0:t.billing_detail.company_name,billing_address:t==null?void 0:t.billing_detail.address,billing_city:t==null?void 0:t.billing_detail.city,billing_state:t==null?void 0:t.billing_detail.state,billing_zip:t==null?void 0:t.billing_detail.pin_code,billing_country:t==null?void 0:t.billing_detail.country,billing_tel:t==null?void 0:t.billing_detail.number,billing_email:t==null?void 0:t.billing_detail.email},theme:{color:"#686CFD"},modal:{confirm_close:!0,ondismiss:function(){p(!1)}},callback_url:`https://api.easysocial.in${s.payload.url}`,redirect:!0,handler:function(){p(!1)}},D=window;new D.Razorpay(A).open()};return a(k,{elevation:0,children:r(N,{className:m.WalletBalance,children:[r(b,{className:m.WalletAmount,children:[a(G,{})," ",a("span",{children:"Wallet Balance"}),a("br",{}),r("p",{children:["\u20B9 ",S(l)]})]}),a(V,{sx:{height:"auto",borderLeftWidth:1,marginY:{xs:"20px",md:0}}}),r(b,{className:m.AddAmountBlock,children:[r(b,{className:m.AmountBlock,children:[a(j,{control:W,name:"amount",required:!0,type:"number",InputProps:{startAdornment:a(X,{position:"start",children:a(x,{sx:{fontSize:12,color:"#7B8AA2"}})})},variant:"standard",sx:{...Q,px:1.25,input:{color:"#7B8AA2",fontWeight:700,fontSize:"24px",textAlign:{xs:"left",md:"right"}}}}),a("p",{children:"Increment Amount by"}),r(b,{className:m.AmountIncrement,children:[r("button",{onClick:()=>h(100),children:[a(x,{}),"100"]}),r("button",{onClick:()=>h(500),children:[a(x,{}),"500"]}),r("button",{onClick:()=>h(1e3),children:[a(x,{}),"1000"]})]})]}),a(b,{className:m.AddMoneyBtnWrapper,children:a("button",{className:m.AddMoneyBtn,onClick:d,children:"Add Money"})})]})]})})},ct=()=>{const{isMobile:l,isTablet:p}=B(),{showSnack:_}=E(),[t,W]=n.exports.useState([]),[f,g]=n.exports.useState(""),[u,h]=n.exports.useState(0),[d,o]=n.exports.useState(new Date(new Date().getFullYear(),0,1)),[s,A]=n.exports.useState(new Date(new Date().getFullYear(),11,31)),D=n.exports.useRef(async(e,C,F)=>{e&&e.setHours(0,0,0,0),C&&C.setHours(23,59,59,999);const y=await Y.getWalletOrders(e,C,F);if(!y.success)return _(y.message,"error");W(y.payload.waTransactions),h(y.payload.balance)});return n.exports.useEffect(()=>{D.current(d,s,f)},[d,s,f]),r(n.exports.Fragment,{children:[l&&a(H,{title:"Wallet"}),a("div",{className:i.ContentInner,children:r("div",{className:i.InnerWrapper,children:[a(it,{balance:u}),l&&a(O,{placeholder:"Search Particular",setSearch:e=>g(e),from:d,to:s,setStartDate:e=>o(e),setEndDate:e=>A(e)}),a(k,{elevation:0,className:i.Card,children:r(N,{className:i.CardContent,children:[p&&a($,{title:"Wallet Transactions",placeholder:"Search Particular",setSearch:e=>g(e),from:d,to:s,setStartDate:e=>o(e),setEndDate:e=>A(e)}),a("div",{className:i.TableOuter,children:a(J,{className:i.TableContainer,children:r(Z,{children:[a(K,{children:r(T,{className:i.TableHead,children:[a(c,{component:"th",children:"Date"}),a(c,{component:"th",children:"Particulars"}),a(c,{component:"th",children:"Debit"}),a(c,{component:"th",children:"Credit"})]})}),a(U,{children:t&&t.map(e=>a(R,{children:r(T,{children:[a(c,{className:i.OrderDate,children:z(e.created_at).format("D MMM YYYY")}),a(c,{children:e.particular}),a(c,{style:{color:"rgba(200, 91, 112, 0.7)",fontWeight:400},children:e.type===I.DEBIT&&`\u20B9${S(e.amount)}`}),a(c,{style:{color:"rgba(21, 132, 92, 0.7)",fontWeight:400},children:e.type===I.CREDIT&&`\u20B9${S(e.amount)}`})]})}))})]})})})]})})]})})]})},$t=()=>r(n.exports.Fragment,{children:[a(v,{children:a("title",{children:"Wallets"})}),a(P,{children:a(ct,{})})]});export{$t as default};
