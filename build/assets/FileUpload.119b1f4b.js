import{a as i,j as e,U as P,m as f,I as S,r as A,al as C,B as D}from"./index.ece9aff6.js";import{F as N,a as R,A as B}from"./FileType.118a3b25.js";import{A as w}from"./AssetsApi.35f09072.js";import{I as j,u as I}from"./index.5f648102.js";const k="Ipel",E="Y-hb",_={File_Added:k,PreFile:E,"input-text":"KpUj"},O={display:"flex",justifyContent:"center",alignItems:"center",flex:1,padding:"20px",height:"100%",width:"100%",cursor:"pointer",textAlign:"center",borderRadius:"8px",borderColor:"#B8BAC2",borderStyle:"dashed",backgroundColor:" #F2F3F7",color:"#000000",opacity:"0.5",outline:"none",transition:"border .24s ease-in-out",boxSizing:"border-box"},z={borderColor:"#2196f3"},G={borderColor:"#00e676"},U={borderColor:"#ff1744"},Z="DVrJ",M="AoLB",K="_-0O0",H="Z2UP",a={Upload_Overlay:Z,image_preview:M,File_Preview:K,RemoveButton:H},J=({removeFile:t,fileUrl:o})=>i("div",{className:"d-flex justify-content-center",children:[e("div",{className:a.Upload_Overlay,children:e(P,{className:f("mt-1",a.RemoveButton),onClick:t,children:"Remove"})}),e(S,{src:o,alt:"preview"})]}),T=({removeFile:t,fileUrl:o})=>i("div",{className:"d-flex justify-content-center",children:[e("div",{className:a.Upload_Overlay,children:e(P,{className:f("mt-1",a.RemoveButton),onClick:t,children:"Remove"})}),e("video",{className:f(a.image_preview,"w-100"),src:o,controls:!0,autoPlay:!0,muted:!0,loop:!0})]}),L=({fileUrl:t,removeFile:o,fileName:n})=>e("div",{className:"d-flex justify-content-center",style:{height:"100%"},children:i("div",{className:a.File_Preview,children:[i("div",{className:"d-flex align-items-center",children:[e(j,{fontSize:"large"})," ",e("p",{children:n!==""?n:t==null?void 0:t.split("/").pop()})]}),e(P,{className:f("mt-1",a.RemoveButton),onClick:o,children:"Remove"})]})}),b={image:{label:"PNG / JPG",value:{"image/*":[]},component:({removeFile:t,fileUrl:o})=>e(J,{removeFile:t,fileUrl:o})},video:{label:"MP4 / 3GP / 4K",value:{"video/*":[]},component:({removeFile:t,fileUrl:o})=>e(T,{removeFile:t,fileUrl:o})},file:{label:"DOC / XLS / PDF / ZIP",value:{"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-powerpoint":[".ppt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"application/vnd.ms-excel":[],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"text/plain":[],"application/pdf":[],"application/x-zip-compressed":[]},component:({fileUrl:t,removeFile:o,fileName:n})=>e(L,{fileUrl:t,removeFile:o,fileName:n})}},X=({onChange:t,fileType:o,removeFile:n,fileUrl:x,fileName:l,label:p})=>{var y;const{getRootProps:d,getInputProps:m,isDragActive:c,isDragAccept:v,isDragReject:g,open:h}=I({maxFiles:1,maxSize:9e6,accept:b[o].value,noClick:!0,noKeyboard:!0,onDrop:t}),F=A.exports.useMemo(()=>({...O,...c?z:{},...v?G:{},...g?U:{}}),[c,v,g]);return e(A.exports.Fragment,{children:x===""?e("div",{className:_.PreFile,onClick:h,children:i("div",{...d({style:F}),children:[e("input",{...m()}),i("div",{className:_["input-text"],children:[e("h1",{children:p}),e("p",{children:(y=b[o])==null?void 0:y.label})]})]})}):e("div",{className:_.File_Added,children:b[o].component({removeFile:n,fileUrl:x,fileName:l})})})},ee=({control:t,fileTypes:o=N.IMAGE,setValue:n,label:x="Upload Image",defaultFieldName:l,fileURL:p,fileNameField:d,width:m,height:c})=>{const{setErrorMessage:v}=C(),[g,h]=A.exports.useState(""),F=async(s,Y,$)=>{try{if(s.length>0){const r=new FormData;r.append("file",s[0]),r.append("max_size","10000"),r.append("allowed_ext",R[o]);const u=await w.fileUpload(B.ENGAGE_ASSETS,r);if(!u.success)throw Error(u.message);h(u.payload.file_name),n(l,u.payload.url),d&&d!==""&&n(d,u.payload.file_name)}}catch(r){console.error(r),v(r.message)}},y=async()=>{try{if(p!==""){const s=await w.fileRemoveByURL(p);if(!s.success)throw Error(s.message);n(l,"")}}catch(s){n(l,""),console.error(s),v(s.message)}};return e(D,{sx:{transition:"all 0.2s ease-in-out",width:{xs:m!=null?m:157,lg:180,xl:200},height:{xs:c!=null?c:157,lg:180,xl:200},margin:"auto"},children:e(X,{label:x,fileType:o,removeFile:y,fileUrl:p,fileName:g,onChange:F})})};export{ee as F};
