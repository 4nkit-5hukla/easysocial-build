import{a as c,j as e,V as P,p as y,r as w,b as S,B as C}from"./index.d8add93f.js";import{I as R,u as D,F as N,a as B,A,b as j}from"./index.f0e59535.js";import{I}from"./Img.1609cefe.js";const k="_File_Added_8oy84_1",E="_PreFile_8oy84_10",F={File_Added:k,PreFile:E,"input-text":"_input-text_8oy84_15"},O={display:"flex",justifyContent:"center",alignItems:"center",flex:1,padding:"20px",height:"100%",width:"100%",cursor:"pointer",textAlign:"center",borderRadius:"8px",borderColor:"#B8BAC2",borderStyle:"dashed",backgroundColor:" #F2F3F7",color:"#000000",opacity:"0.5",outline:"none",transition:"border .24s ease-in-out",boxSizing:"border-box"},z={borderColor:"#2196f3"},G={borderColor:"#00e676"},Z={borderColor:"#ff1744"},M="_Upload_Overlay_svx5g_1",U="_image_preview_svx5g_26",H="_File_Preview_svx5g_33",K="_RemoveButton_svx5g_58",a={Upload_Overlay:M,image_preview:U,File_Preview:H,RemoveButton:K},T=({removeFile:t,fileUrl:o})=>c("div",{className:"d-flex justify-content-center",children:[e("div",{className:a.Upload_Overlay,children:e(P,{className:y("mt-1",a.RemoveButton),onClick:t,children:"Remove"})}),e(I,{src:o,alt:"preview"})]}),J=({removeFile:t,fileUrl:o})=>c("div",{className:"d-flex justify-content-center",children:[e("div",{className:a.Upload_Overlay,children:e(P,{className:y("mt-1",a.RemoveButton),onClick:t,children:"Remove"})}),e("video",{className:y(a.image_preview,"w-100"),src:o,controls:!0,autoPlay:!0,muted:!0,loop:!0})]}),X=({fileUrl:t,removeFile:o,fileName:n})=>e("div",{className:"d-flex justify-content-center",style:{height:"100%"},children:c("div",{className:a.File_Preview,children:[c("div",{className:"d-flex align-items-center",children:[e(R,{fontSize:"large"})," ",e("p",{children:n!==""?n:t==null?void 0:t.split("/").pop()})]}),e(P,{className:y("mt-1",a.RemoveButton),onClick:o,children:"Remove"})]})}),b={image:{label:"PNG / JPG",value:{"image/*":[]},component:({removeFile:t,fileUrl:o})=>e(T,{removeFile:t,fileUrl:o})},video:{label:"MP4 / 3GP / 4K",value:{"video/*":[]},component:({removeFile:t,fileUrl:o})=>e(J,{removeFile:t,fileUrl:o})},file:{label:"DOC / XLS / PDF / ZIP",value:{"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-powerpoint":[".ppt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"application/vnd.ms-excel":[],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"text/plain":[],"application/pdf":[],"application/x-zip-compressed":[]},component:({fileUrl:t,removeFile:o,fileName:n})=>e(X,{fileUrl:t,removeFile:o,fileName:n})}},$=({onChange:t,fileType:o,removeFile:n,fileUrl:x,fileName:l,label:p})=>{var g;const{getRootProps:d,getInputProps:m,isDragActive:i,isDragAccept:v,isDragReject:_,open:f}=D({maxFiles:1,maxSize:9e6,accept:b[o].value,noClick:!0,noKeyboard:!0,onDrop:t}),h=w.exports.useMemo(()=>({...O,...i?z:{},...v?G:{},..._?Z:{}}),[i,v,_]);return e(w.exports.Fragment,{children:x===""?e("div",{className:F.PreFile,onClick:f,children:c("div",{...d({style:h}),children:[e("input",{...m()}),c("div",{className:F["input-text"],children:[e("h1",{children:p}),e("p",{children:(g=b[o])==null?void 0:g.label})]})]})}):e("div",{className:F.File_Added,children:b[o].component({removeFile:n,fileUrl:x,fileName:l})})})},V=({control:t,fileTypes:o=N.IMAGE,setValue:n,label:x="Upload Image",defaultFieldName:l,fileURL:p,fileNameField:d,width:m,height:i})=>{const{setErrorMessage:v}=S(),[_,f]=w.exports.useState(""),h=async(s,q,L)=>{try{if(s.length>0){const r=new FormData;r.append("file",s[0]),r.append("max_size","10000"),r.append("allowed_ext",B[o]);const u=await A.fileUpload(j.ENGAGE_ASSETS,r);if(!u.success)throw Error(u.message);f(u.payload.file_name),n(l,u.payload.url),d&&d!==""&&n(d,u.payload.file_name)}}catch(r){console.error(r),v(r.message)}},g=async()=>{try{if(p!==""){const s=await A.fileRemoveByURL(p);if(!s.success)throw Error(s.message);n(l,"")}}catch(s){n(l,""),console.error(s),v(s.message)}};return e(C,{sx:{transition:"all 0.2s ease-in-out",width:{xs:m!=null?m:157,lg:180,xl:200},height:{xs:i!=null?i:157,lg:180,xl:200},margin:"auto"},children:e($,{label:x,fileType:o,removeFile:g,fileUrl:p,fileName:_,onChange:h})})};export{V as F};
