import{j as e,I as E,bP as N,u as v,ai as _,r as d,a,A,W as q}from"./index.1216e28e.js";import{u as D}from"./index.esm.7a23e4a0.js";import{g as I}from"./mui-tel-input.es.507f79dc.js";import{u as L,a as M,R as j,A as k}from"./AuthProvider.c18f3248.js";import{A as X}from"./ArrowRight.7030d8f5.js";import{P as f}from"./Auth.bb306ec0.js";import{F as $,G as B}from"./Grid.b54de443.js";import{F as l}from"./Form.cbd8321b.js";import{a as z,F,A as U}from"./Style.57c2f24e.js";import{F as h}from"./FormTextField.a2d50268.js";import{C as H}from"./Card.9aa5f189.js";import{L as J}from"./LoadingButton.33756ffe.js";import"./ListItemIcon.50311155.js";import"./listItemTextClasses.477e07f5.js";import"./List.8f8744c2.js";import"./ListItemText.d3103614.js";import"./TextField.5384ccb5.js";import"./Select.4cd0be1e.js";import"./useFormControl.4dcd90d2.js";import"./isMuiElement.3e2de034.js";import"./Menu.b5c2af2b.js";import"./useControlled.9518d4c9.js";import"./InputAdornment.9191edfb.js";import"./MenuItem.51acc6a3.js";import"./dividerClasses.24ea718d.js";import"./tslib.es6.61e9e735.js";import"./CircularProgress.046bdea8.js";const K="x7At",Q="ytye",Y="v26W",Z="ft6O",p={ForgotGfx:K,ForgotForm:Q,ForgotFormCard:Y,ForgotTitle:Z},ee=()=>e("div",{className:p.ForgotGfx,children:e(E,{src:"/static/images/svg/forgot-password.svg",alt:"Login Graphics",width:455,height:478})}),se=()=>{const u=N(),{country:T}=v(),{setSuccessMessage:b,setErrorMessage:o}=_(),{auth:y,isOTPSent:i,otpVerified:r}=L(),{sendOTP:w,otpVerification:C,setOTPSent:te,setOtpVerified:ae}=M(),[P,c]=d.exports.useState(!1),{control:g,handleSubmit:O,watch:W,setValue:V}=D({defaultValues:{mobile_number:"",otp:"",password:"",confirm_password:""}}),{mobile_number:n,otp:x,password:ie}=W(),S=window,G=async m=>{if(!n)return o("Enter mobile number");const t=await A.validateMobileNumber(n);if(!t.success)return o(t.messages?t.messages.errors[0].message:t.message);if(c(!0),!i&&!r){const s=await w(n);s.success?(b(s.message),c(!1)):o(s.message)}if(i&&!r){if(!x)return o("Enter OTP");const s=await C(x);!s.success&&o(s.message),c(!1)}if(r){const s=await A.passwordReset(m);s.success?(b(s.message),setTimeout(()=>{u("/login")},5e3)):o(s.messages?s.messages.errors[0].message:s.message),c(!1)}},R=()=>{S.recaptchaVerifier=new j("captcha-container",{size:"invisible",callback:async function(){const m=await w(n);S.confirmationResult=m},"expired-callback":function(){alert("try again!")}},y)};return d.exports.useEffect(()=>{R()},[]),a("div",{className:p.ForgotForm,children:[a(H,{component:"form",className:p.ForgotFormCard,onSubmit:O(G),children:[e("h1",{className:p.ForgotTitle,children:"Forgot Password "}),e($,{children:a(B,{children:[e(l,{children:e(I,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:T,value:n,onChange:(m,t)=>{V("mobile_number",t.numberValue)},inputProps:{required:!0},variant:"filled",sx:z,autoFocus:!0})}),e(l,{children:e(h,{control:g,name:"otp",label:"Enter OTP",type:f.PASSWORD,required:i,disabled:!i,sx:F})}),r&&a(d.exports.Fragment,{children:[e(l,{children:e(h,{control:g,name:"password",label:"Enter Password",type:f.PASSWORD,required:r,sx:F})}),e(l,{children:e(h,{control:g,name:"confirm_password",label:"Confirm Password",type:f.PASSWORD,required:r,sx:F})})]}),e(J,{type:"submit",loading:P,variant:"contained",loadingPosition:"end",endIcon:e(X,{}),sx:U,children:i?"Continue":P?"Please Wait":r?"Update":"Get OTP"})]})})]}),e("div",{id:"captcha-container"})]})},re="Wd5c",oe={ForgotWrapper:re},Ne=()=>{const{isTablet:u}=v();return a(d.exports.Fragment,{children:[e(q,{children:e("title",{children:"Forgot Password"})}),e(k,{children:a("div",{className:oe.ForgotWrapper,children:[u&&e(ee,{}),e(se,{})]})})]})};export{Ne as default};
