import{B as v,u as D,a as X,b as N}from"./BizParticipantsApi.6eecae4b.js";import{b as w,j as e,am as O,a as t,$ as h,r as m,an as V,ao as j,ap as q,aq as G,V as S,u as U,W as K,L as _}from"./index.38d3e2dd.js";import{A as J,b as I}from"./CommonComponents.4b14a98c.js";import{L}from"./LeftArrow.79d13e8d.js";import{S as y}from"./Search.eb7289a1.js";import{D as Y,b as E,H,o as $,F as Q,G as Z,j as M,k,m as ee,T as re,p as te,q as ae,r as oe,s as ie,t as ne,u as z,v as W,w as A,x as se,c as le,y as ce,I as de,z as me,f as he,g as pe,A as ue,B as be,E as ge,J as xe,K as fe}from"./LayoutComponents.281bca3c.js";import{u as Ce,F}from"./FormTextField.3be4b1b3.js";import{A as Ie}from"./mui-tel-input.es.f3ba5d40.js";import{D as Te}from"./Drawer.44479df8.js";import{C as P}from"./Clear.22c6fb00.js";import{L as ye}from"./ListItem.5c80c32b.js";import{a as Me,L as ve}from"./ListItemText.b12da6d0.js";import{M as we}from"./MoreVert.6092d02d.js";import{M as Se}from"./Menu.e94f9734.js";import{M as B}from"./MenuItem.e4a73d64.js";import{C as ke,a as Fe}from"./CardContent.840d963f.js";import{D as Be}from"./Divider.6dae6579.js";import"./styled.9bec237d.js";import"./TextField.23840b04.js";import"./Select.68c58a58.js";import"./useFormControl.318bb611.js";import"./isMuiElement.7c1115e8.js";import"./InputAdornment.d3f5d9a0.js";import"./List.7ef95385.js";import"./listItemButtonClasses.50a58ae2.js";import"./listItemTextClasses.a01ad07e.js";const De=({open:i,closeDrawer:o})=>{const{setErrorMessage:b,setSuccessMessage:p}=w(),{control:n,handleSubmit:s,watch:g,setValue:l}=Ce({defaultValues:{name:"",number:"",email:"",plan_category:["engage"]}}),{number:f}=g();return e(Te,{anchor:"right",open:i,onClose:(c,a)=>!O(a)&&o(),sx:{zIndex:"modal"},children:t(Y,{sx:{width:{xs:"100vw",md:360}},children:[t(E,{children:[e(h,{onClick:o,sx:{width:32,height:32},children:e(L,{})}),e(H,{children:"Invite a Team Member"})]}),t($,{onSubmit:s(async c=>{try{const a=await v.sendUserInvite(c);if(!a.success)throw Error(a.message);p(a.message),setTimeout(()=>window.location.reload(),1e3)}catch(a){b(a.message)}finally{o()}}),children:[e(Q,{children:t(Z,{children:[e(M,{children:e(F,{control:n,name:"name",label:"Name",placeholder:"Name",required:!0,sx:k})}),e(M,{children:e(F,{control:n,name:"email",label:"Email",placeholder:"Email",required:!0,sx:k})}),e(M,{children:e(Ie,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:"IN",value:f,onChange:(c,a)=>{var u;l("number",(u=a.numberValue)!=null?u:c),console.log(a.numberValue)},variant:"filled",sx:ee})})]})}),t(J,{children:[e(I,{disableIcon:!0,color:"secondary",onClick:o,children:"Cancel"}),e(I,{type:"submit",children:"Send Invite"})]})]})]})})},Le=({isSearchActive:i,setSearchActive:o})=>{const{setShowInviteForm:b,setInvitedMemberFilter:p}=D();return t(re,{children:[e(te,{children:e(I,{disableIcon:!0,type:"button",onClick:()=>b(!0),sx:{py:0,px:.625,height:36,mt:0},children:"Invite Team Member"})}),t(ae,{children:[!i&&e(oe,{children:e(ie,{children:"Team Members"})}),t(ne,{children:[i&&e(z,{children:t(W,{children:[e(h,{disableTouchRipple:!0,disableFocusRipple:!0,disableRipple:!0,sx:{position:"absolute"},children:e(y,{})}),e(A,{onChange:({target:{value:n}})=>p(n),placeholder:"Search People"}),e(h,{onClick:()=>{p(""),o(!i)},sx:{position:"absolute",right:0,top:0},children:e(P,{})})]})}),!i&&e(h,{onClick:()=>o(n=>!n),children:e(y,{})})]})]})]})},Ee=i=>{const{setErrorMessage:o,setSuccessMessage:b}=w(),{title:p,description:n,invitationId:s,status:g}=i,[l,f]=m.exports.useState(null),[C,c]=m.exports.useState(!1),a=()=>{c(!0)},u=()=>{c(!1)},T=d=>{f(d.currentTarget)},r=()=>{f(null)},x=async()=>{try{const d=await v.deleteUserInvite(s);if(!d.success)throw Error(d.message);b(d.payload.message),setTimeout(()=>window.location.reload(),1e3)}catch(d){o(d.message)}finally{u()}};return t(m.exports.Fragment,{children:[t(ye,{component:"div",sx:{px:{xs:0,md:2}},children:[e(Me,{primary:e("div",{className:"primary-block",children:e("h2",{className:"list-title",children:p})}),secondary:n,sx:{"& .primary-block":{alignItems:"center",display:"flex",flexWrap:"wrap",gap:10,marginBottom:.75,"& .list-title":{color:"text.secondary",fontSize:15,fontWeight:500,lineHeight:"18px"}},"& .MuiListItemText-secondary":{color:"#767676b3",fontSize:10,maxWidth:290,fontWeight:400,lineHeight:"15px",textTransform:"capitalize"}}}),e(ve,{children:e(h,{onClick:T,children:e(we,{})})})]}),Boolean(l)&&t(Se,{anchorEl:l,open:Boolean(l),onClose:r,keepMounted:!0,MenuListProps:{"aria-labelledby":"Options"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{minWidth:120}},children:[e(B,{onClick:()=>{a(),r()},children:"Delete"}),!g&&e(B,{onClick:()=>{r()},children:"Resend"})]}),t(V,{open:C,"aria-labelledby":"responsive-dialog-title",children:[e(j,{id:"responsive-dialog-title",children:"Delete"}),e(q,{children:"Are you sure you want to delete?"}),t(G,{children:[e(S,{color:"secondary",onClick:()=>{u()},children:"Cancel"}),e(S,{onClick:async()=>{await x()},autoFocus:!0,children:"Delete"})]})]})]})},He=()=>{const{isMobile:i,isTablet:o}=U(),{setErrorMessage:b}=w(),[p,n]=m.exports.useState(!0),[s,g]=m.exports.useState(!1),{invitedMembers:l,showInviteForm:f,invitedMemberFilter:C}=X(),{setInvitedMembers:c,setShowInviteForm:a,setInvitedMemberFilter:u}=D(),T=m.exports.useCallback(async()=>{try{const r=await v.getUserInvites();if(!r.success)throw Error(r.message);c(r.payload.data),n(!1)}catch(r){b(r.message)}},[]);return m.exports.useEffect(()=>{T()},[T]),t(m.exports.Fragment,{children:[e(K,{children:e("title",{children:"Team Members"})}),i&&t(E,{sx:se,children:[!s&&e(h,{component:_,to:"/business-settings",sx:{width:32,height:32},children:e(L,{})}),!s&&e(H,{children:"Team Members"}),s&&e(z,{children:t(W,{children:[e(h,{disableTouchRipple:!0,disableFocusRipple:!0,disableRipple:!0,sx:{position:"absolute"},children:e(y,{})}),e(A,{onChange:({target:{value:r}})=>u(r),placeholder:"Search People"}),e(h,{onClick:()=>{u(""),g(!s)},sx:{position:"absolute",right:0,top:0},children:e(P,{})})]})}),!s&&l.length>0&&e(h,{onClick:()=>g(r=>!r),children:e(y,{})})]}),e(le,{sx:ce,children:e(de,{sx:me,children:!p&&e(ke,{elevation:0,sx:he,children:e(Fe,{sx:pe,children:l.length===0?t(ue,{children:[e(be,{children:e(I,{disableIcon:!0,onClick:()=>a(!0),sx:{borderRadius:2,boxShadow:"0px 8px 8px rgba(50, 197, 255, 0.1)",fontSize:16,fontWeight:700,height:36,lineHeight:"19px",margin:"auto",textTransform:"capitalize"},children:"Invite Team Member"})}),e(ge,{children:e(xe,{children:"You don\u2019t have any team members yet. Invite a team member and start working in collaboration."})})]}):t(m.exports.Fragment,{children:[o&&e(Le,{isSearchActive:s,setSearchActive:g}),o&&e(Be,{}),l.filter(r=>{var x;return(x=r==null?void 0:r.name)==null?void 0:x.toLowerCase().includes(C==null?void 0:C.toLowerCase())}).map(({name:r,status:x,id:d},R)=>e(Ee,{title:r,description:x,invitationId:d,status:x},R))]})})})})}),i&&l.length>0&&e(fe,{children:e(I,{onClick:()=>a(!0),variant:"outlined",color:"primary",disableIcon:!0,children:"Invite Team Member"})}),e(De,{open:f,closeDrawer:()=>a(!1)})]})},nr=()=>e(N,{children:e(He,{})});export{nr as default};
