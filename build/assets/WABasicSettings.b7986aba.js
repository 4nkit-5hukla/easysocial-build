import{u as Z,$ as q,aD as O,aE as J,aF as K,r as n,aG as f,a as t,j as e,W as A,ar as Q,a0 as Y,L as B,aH as W,T as ee,Z as se}from"./index.d8509de2.js";import{u as te,F as l}from"./FormTextField.fa87aa86.js";import{F as ae,s as ie}from"./FormFileField.5f34107f.js";import{A as re,H as y,a as v,b as oe,c as L}from"./CommonComponents.a7807441.js";import{L as ne}from"./LeftArrow.96e9bff7.js";import{L as le}from"./LinkPlatForm.57caa6f5.js";import{m as ce,H as de,n as me,$ as he,a0 as pe,o as ue,p as fe,q as ge,r as xe,s as be,F as d,t as X,G as m,u as c,a1 as Se,y as Ce,w as g,z as Fe,v as E,a2 as we,a3 as Ae,a4 as Be,a5 as We,a6 as ye}from"./Tags.fe94347c.js";import{C as x}from"./Card.fe0c2ee5.js";import{C as ve}from"./CardContent.830cea70.js";import{M as H}from"./MenuItem.0dcd0486.js";import"./TextField.0cafa418.js";import"./Select.505b272c.js";import"./isMuiElement.4250991d.js";import"./Menu.0980ca8d.js";import"./List.5253a284.js";import"./useControlled.d0617c6d.js";import"./withStyles.05cc64b2.js";import"./ListItem.8d178587.js";import"./listItemButtonClasses.075faa5b.js";import"./listItemTextClasses.c5594ca2.js";const Le=()=>{const{isMobile:I,isTablet:P,navigate:V}=Z(),{setErrorMessage:h,setSuccessMessage:k}=q(),{allowedVerticals:M,chatbotNumber:p}=O(),{platformExist:i}=J(),{setChatBotNumber:R}=K(),[T,b]=n.exports.useState(!0),[_,U]=n.exports.useState("Submit"),{control:o,handleSubmit:j,watch:D,reset:S,setValue:C}=te({defaultValues:{address:"",description:"",email:"",file:void 0,profile_picture_url:"",websites:[],messaging_product:"",vertical:""}}),G=D(),{profile_picture_url:z,vertical:u}=G,$=({target:{files:s}})=>{if(s&&s.length>0){const[a]=s;C("file",a),C("profile_picture_url",URL.createObjectURL(a))}},N=async s=>{try{const a=ie.serialize(s),r=await f.saveWAProfile(a);if(r.errors)throw Error(r.errors.pop().message);if(!r.success&&r.message)throw Error(r.message);k(r.message),V(0)}catch(a){h(a.message)}},F=n.exports.useCallback(async()=>{try{if(typeof i=="boolean"&&i){const s=await f.getWAProfile();if(!s.success)throw Error(s.message);U("Update Business Information"),S(s.payload)}}catch(s){h(s.message)}finally{b(!1)}},[i,S]),w=n.exports.useCallback(async()=>{try{if(typeof i=="boolean"&&i&&p===void 0){const s=await f.getWAChatBots();if(!s.success)throw Error(s.message);const[a]=s.payload;a&&R(a.id)}}catch(s){h(s.message)}finally{b(!1)}},[i]);return n.exports.useEffect(()=>{w()},[w]),n.exports.useEffect(()=>{F()},[F]),T?t(x,{elevation:0,sx:re,children:[e(A,{children:e("title",{children:"Loading..."})}),e(Q,{height:72,width:72})]}):t(n.exports.Fragment,{children:[e(A,{children:e("title",{children:"WhatsApp Profile"})}),I&&t(ce,{children:[e(Y,{component:B,to:"/business-settings",sx:{width:32,height:32},children:e(ne,{})}),e(de,{children:"WhatsApp Profile"})]}),e(me,{children:typeof i=="boolean"&&i===!1?e(he,{sx:pe,children:e(le,{})}):t(ue,{onSubmit:j(N),sx:fe,children:[e(x,{elevation:0,sx:ge,children:t(ve,{sx:xe,children:[e(be,{children:"Business Information"}),t(d,{sx:X,children:[e(m,{children:e(c,{sx:{mb:0,height:"100%"},children:e(l,{control:o,name:"description",label:"Business Description",rows:5,sx:Se,multiline:!0})})}),e(Ce,{children:e(ae,{control:o,name:"file",defaultValue:z,onChange:$,previewAlt:"Profile Image",label:"Upload Profile Image"})})]}),e(d,{sx:{...X,mt:3.75},children:e(m,{children:e(c,{children:t(l,{select:!0,control:o,label:"Business Vertical",name:"vertical",sx:g,defaultValue:u!=null?u:"",children:[e(H,{value:"",disabled:!0,children:"Select Vertical"}),M.map(({label:s,value:a},r)=>e(H,{value:a,children:s},r))]})})})}),e(d,{children:e(m,{children:e(c,{children:e(l,{control:o,label:"Business Address",name:"address",sx:g})})})}),e(d,{children:e(m,{children:e(c,{children:e(l,{control:o,label:"Email",name:"email",sx:g})})})}),t(d,{sx:Fe,children:[e(y,{sx:v,children:e(c,{children:e(l,{control:o,name:"websites[0]",label:"Website 1",placeholder:"Website 1",sx:E})})}),e(y,{sx:v,children:e(c,{children:e(l,{control:o,name:"websites[1]",label:"Website 2",placeholder:"Website 2",sx:E})})})]}),e(oe,{children:e(L,{type:"submit",children:_})})]})}),p&&t(x,{elevation:0,sx:we,children:[e(W,{component:"img",image:"/static/images/svg/bot.svg",alt:"bot",sx:{display:"flex",flexShrink:1,height:"auto",maxWidth:196,width:{xs:194,md:"calc(100% - 200px)"}}}),t(Ae,{sx:{maxWidth:420},children:[t(ee,{component:"h3",sx:{color:"#FFFFFF",fontSize:14,fontWeight:400,lineHeight:"18px"},children:["Start building your WhatsApp Chatbot in seconds. Use the advanced ",e("strong",{children:"Chatflow"})," tool by EasySocial, and build complex conversations in a jiffy."]}),t(Be,{sx:We,children:[t(L,{component:B,to:`/chat-flow/${p}`,sx:ye,disableIcon:!0,children:[e("span",{children:"Build Chatbot"}),e(se,{viewBox:"0 0 14 10",fill:"none",sx:{width:14,height:10},children:e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3692 4.19223L8.28352 1.00205L9.25275 0L14 4.90798L9.43077 10L8.46154 8.99796L11.3692 5.62372H0V4.19223H11.3692Z",fill:"#12B0EE"})})]}),P&&e(W,{component:"img",image:"/static/images/svg/messages.svg",alt:"messages",sx:{width:"auto"}})]})]})]})]})})]})},Oe=()=>e(Le,{});export{Oe as default};
