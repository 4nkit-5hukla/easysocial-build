var G=Object.defineProperty;var R=(s,t,o)=>t in s?G(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o;var l=(s,t,o)=>(R(s,typeof t!="symbol"?t+"":t,o),o);import{a as h,j as r,ap as m,aT as V,B as S,r as T,aK as M,aQ as b,U as w}from"./index.3120fd12.js";import{a as x}from"./WhatsApp.0df87c02.js";import{P as D,a as X}from"./Play.b64d5d7f.js";import{W as E,M as H,f as v}from"./Styles.c059562f.js";import{L as N}from"./Link.5156ec46.js";const j=()=>h("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"//www.w3.org/2000/svg",children:[r("path",{d:"M10.5378 1.11084H7.60995C7.35479 1.11084 7.14798 1.31765 7.14798 1.57281C7.14798 1.82797 7.35479 2.03478 7.60995 2.03478H9.42251L4.99274 6.46455C4.81232 6.64498 4.81232 6.93746 4.99274 7.11788C5.08298 7.20807 5.20119 7.25319 5.3194 7.25319C5.43762 7.25319 5.55583 7.20807 5.64607 7.11788L10.0758 2.68811V4.50072C10.0758 4.75588 10.2826 4.96269 10.5378 4.96269C10.793 4.96269 10.9998 4.75588 10.9998 4.50072V1.57286C10.9998 1.31765 10.793 1.11084 10.5378 1.11084Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"}),r("path",{d:"M8.64816 6.53803C8.393 6.53803 8.18619 6.74484 8.18619 7V9.965H1.92394V3.70275H5.5C5.75516 3.70275 5.96197 3.49594 5.96197 3.24078C5.96197 2.98562 5.75516 2.77881 5.5 2.77881L1.46197 2.77881C1.20681 2.77881 1 2.98562 1 3.24078V10.427C1 10.6821 1.20681 10.8889 1.46197 10.8889H8.64816C8.90333 10.8889 9.11013 10.6821 9.11013 10.427V7C9.11013 6.74484 8.90333 6.53803 8.64816 6.53803Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"})]});class d{}l(d,"getWaTemplateMessages",async()=>await m("/wa-templates","GET")),l(d,"getWaTemplateMessage",async t=>await m(`/wa-templates/${t}`,"GET")),l(d,"syncWaTemplateMessage",async()=>await m("/wa-templates/sync-templates","GET")),l(d,"createWaTemplateMessage",async t=>await m("/wa-templates/create-template","POST",{data:t})),l(d,"getTemplateJSON",async t=>await m(`/wa-templates/example-content?id=${t}`,"GET")),l(d,"getTemplateSampleFile",async t=>await V("/sheet/create-xlsx","POST",{data:t})),l(d,"updateWaTemplateMessage",async(t,o)=>await m(`/wa-templates/update-template-form/${t}`,"PUT",{data:o})),l(d,"uploadTemplateFile",async t=>await m("/wa-templates/upload-template-file","POST",{data:t})),l(d,"updateWaTemplateComponents",async(t,o)=>await m(`/wa-templates/update/${t}`,"PUT",{data:o})),l(d,"deleteWaTemplateMessage",async t=>await m(`/wa-templates/delete/${t}`,"DELETE"));const K="n-79",Q="Pyy5",q="_7T6-",Y="Whrl",Z="KXAG",z="c6D9",J="uQG8",A="rN3N",u={WaTPreviewCard:K,WaTHeaderImgWrap:Q,WaTHeaderCardMedia:q,WaTHeaderText:Y,WaTBodyText:Z,WaTFooterText:z,WaTPreviewAction:J,WhatsAppButton:A},ee=({children:s})=>r("div",{className:u.WaTPreviewCard,children:s}),te=({children:s})=>r("div",{className:u.WaTHeaderImgWrap,children:s}),ae=({children:s})=>r("div",{className:u.WaTHeaderText,children:s}),re=({children:s})=>r("div",{className:u.WaTBodyText,children:s}),se=({children:s})=>r("div",{className:u.WaTFooterText,children:s}),ne=({children:s,...t})=>r(S,{className:u.WaTPreviewAction,...t,children:s}),me=({components:s})=>{const t=structuredClone(s),o=T.exports.useRef(null),[f,B]=T.exports.useState(!1),[$,F]=T.exports.useState(!1),[P,W]=T.exports.useState(""),i=t.find(({type:e})=>e===x.HEADER),g=t.find(({type:e})=>e===x.BODY),y=t.find(({type:e})=>e===x.FOOTER),C=t.find(({type:e})=>e===x.BUTTONS),O=(e=>{if(e){const{example:n}=e;if(n){const{header_text:a}=n;return a||[]}else return[]}else return[]})(i),p=(e=>{if(e){const{example:n}=e;if(n){const{header_handle:a}=n;if(a&&a.length>0){const[c]=a;return c}else return""}else return""}else return""})(i),L=(e=>{if(e){const{example:n}=e;if(n){const{header_files:a}=n;if(a&&a.length>0){const[c]=a;return c}else return""}else return""}else return""})(i),_=(e=>{if(e){const{example:n}=e;if(n){const{body_text:a}=n;return a?a.length===1&&Array.isArray(a[0])?a.pop():a:[]}else return[]}else return[]})(g),k=(e=>i?e.reduce((n,a,c)=>a&&a!==""?n.replace(`{{${c+1}}}`,a):n,i.text):"")(O),U=(e=>g?e.reduce((n,a,c)=>a&&a!==""?n.replace(`{{${c+1}}}`,a):n,g.text):"")(_);return T.exports.useEffect(()=>{o.current&&(o.current.addEventListener("playing",()=>{W("playing")}),o.current.addEventListener("pause",()=>{W("")}),o.current.addEventListener("ended",()=>{W("")}),f?o.current.play():o.current.pause())},[f]),h(ee,{children:[i&&i.format==="IMAGE"&&r(te,{children:p&&p!==""&&r(M,{component:"img",alt:"header-img",image:p,sx:E})}),i&&i.format==="VIDEO"&&h(N,{underline:"none",component:"button",type:"button",onClick:()=>B(!f),onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),sx:H,children:[r(M,{component:"video",ref:o,className:"video",disablePictureInPicture:!0,sx:{...E,height:130},children:p&&p!==""&&r("source",{src:p,type:"video/mp4"})}),h(S,{position:"absolute",display:"flex",children:[P===""&&r(D,{}),$&&P==="playing"&&r(X,{})]})]}),i&&i.format==="DOCUMENT"&&r(N,{underline:"none",className:"media-wrapper doc",href:p,target:"_blank",sx:{...H,backgroundColor:"#F5F5F5",color:"#A1AEB4",fontSize:90,fontWeight:900,lineHeight:"96px"},children:p&&p!==""?L.split(".").pop().slice(0,4).toUpperCase():""}),i&&i.format==="TEXT"&&r(ae,{children:k}),r(re,{children:b(U)}),y&&y.text!==""&&r(se,{children:y.text}),C&&C.buttons.length>0&&r(ne,{children:C.buttons.map((e,n)=>r(T.exports.Fragment,{children:e.type==="QUICK_REPLY"?r(w,{variant:"outlined",type:"button",sx:{...v,color:"#767676",minWidth:"calc(50% - 8px)"},children:e.text}):e.type==="PHONE_NUMBER"?r(w,{href:`tel:${e.phone_number}`,variant:"outlined",sx:{...v,color:"#32C5FF",minWidth:"100%"},children:e.text}):h(w,{href:e.example?e.example.reduce((a,c,I)=>c&&c!==""?a.replace(`{{${I+1}}}`,c):a,e.url):"",variant:"outlined",target:"_blank",rel:"noreferrer",sx:{...v,color:"#32C5FF",minWidth:"100%"},children:[r(j,{}),e.text]})},n))})]})};export{d as W,me as a};
