import{u as _,al as v,r as s,a as n,j as r,a$ as m,aq as w,c8 as N,c9 as A,W as E}from"./index.fd4ae6d6.js";import{B as P}from"./BizParticipantsProvider.2cf7f9ec.js";import{A as D}from"./AllPaymentsApi.4db865d6.js";import{M as B,c as t,a as F,D as H}from"./MobileFilter.6b9e1c45.js";import{S as $}from"./ServiceExpiryAlert.c2bd7a33.js";import{C as k}from"./Card.e09e37ac.js";import{C as I}from"./CardContent.f0d0982c.js";import{T as R,a as j,b as z,c as O,d as a,e as G}from"./TableRow.341d482f.js";import"./Search.fff4ba2f.js";import"./Clear.c355970a.js";import"./LeftArrow.5ec3afba.js";import"./Wrappers.39eb0e5b.js";import"./RangePopUp.0f2fd6b3.js";import"./index.eb4aa1c1.js";import"./TextField.fa193343.js";import"./Select.96b8ae4e.js";import"./useFormControl.13400fe7.js";import"./isMuiElement.8b92655b.js";import"./Menu.c4bc1234.js";import"./List.bc505dcb.js";import"./useControlled.9f1cf0dd.js";import"./usePickerState.d9e8de5d.js";import"./Grid.d62f6b2b.js";import"./InputAdornment.57d392ca.js";import"./StaticDateRangePicker.e23446e4.js";import"./PickersToolbarButton.42ba6889.js";import"./Link.a6e40fc7.js";const W=()=>{const{isMobile:d,isTablet:y}=_(),{showSnack:h}=v(),[u,g]=s.exports.useState([]),[f,b]=s.exports.useState(""),[x,T]=s.exports.useState(0),[c,C]=s.exports.useState(new Date(new Date().getFullYear(),0,1)),[l,S]=s.exports.useState(new Date(new Date().getFullYear(),11,31)),M=s.exports.useRef(async(e,o,p)=>{e&&e.setHours(0,0,0,0),o&&o.setHours(23,59,59,999);const i=await D.getAllOrders(e,o,p);if(!i.success)return h(i.message,"error");g(i.payload)});s.exports.useEffect(()=>{M.current(c,l,f)},[c,l,f]);const Y=s.exports.useRef(async()=>{const e=await D.getExpiryBusinessCount();if(!e.success)return h(e.message,"error");T(e.payload)});return s.exports.useEffect(()=>{Y.current()},[]),n(s.exports.Fragment,{children:[d&&r(B,{title:"Orders"}),r("div",{className:t.ContentInner,children:n("div",{className:t.InnerWrapper,children:[d&&r(F,{placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>S(e)}),x>0&&r($,{noOfBusi:x}),r(k,{elevation:0,className:t.Card,children:n(I,{className:t.CardContent,children:[y&&r(H,{title:"Orders",placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>S(e)}),r("div",{className:t.TableOuter,children:r(R,{className:t.TableContainer,children:n(j,{children:[r(z,{children:n(O,{className:t.TableHead,children:[r(a,{component:"th",children:"Date"}),r(a,{component:"th",children:"Particulars"}),r(a,{component:"th",children:"Order No."}),r(a,{component:"th",children:"Amount"}),r(a,{component:"th",children:"Inv No."})]})}),r(G,{children:u&&u.map(e=>{var i;let o="",p="";return e.order_type==="plan"&&(o=`${m(e.start_date).format("D")} - ${m(e.expiry_date).format("D MMM YYYY")}`,p=` Plan Code: ${(i=e.plan)==null?void 0:i.slug}`),r(w,{children:n(O,{children:[r(a,{className:t.OrderDate,children:m(e.created_at).format("D MMM YYYY")}),n(a,{className:t.Particulars,children:[r("p",{children:e.business.business_name}),n("span",{children:[e.particulars.charAt(0).toUpperCase()+e.particulars.slice(1)," -"," ",e.short_desc&&e.short_desc]}),r("br",{}),r("span",{children:o}),r("label",{children:p})]}),r(a,{className:t.OrderNumber,children:N(e.id)}),n(a,{className:t.OrderDate,children:[e.currency==="INR"?"\u20B9":"$",A(e.paid_amount)]}),r(a,{children:N(e.invoice_number)})]})})})})]})})})]})})]})})]})},Ce=()=>n(s.exports.Fragment,{children:[r(E,{children:r("title",{children:"Orders"})}),r(P,{children:r(W,{})})]});export{Ce as default};
