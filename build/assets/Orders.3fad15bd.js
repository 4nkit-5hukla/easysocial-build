import{bO as w,u as _,al as A,r as a,a as s,j as r,a$ as d,aq as E,c8 as S,c9 as P,W as B}from"./index.ece9aff6.js";import{B as k}from"./BizParticipantsProvider.3e611df5.js";import{A as D}from"./AllPaymentsApi.6cb98a67.js";import{c as t,M as F,D as H}from"./MobileFilter.2c6b5099.js";import{M as $}from"./MobileHeader.52114ba3.js";import{S as I}from"./ServiceExpiryAlert.00666696.js";import{C as R}from"./Card.f4c87cf9.js";import{C as j}from"./CardContent.0f5272a0.js";import{T as z,a as G,b as L,c as O,d as o,e as W}from"./TableRow.f43f61b2.js";import{L as q}from"./Link.5f576aff.js";import"./Search.81b477b2.js";import"./Clear.aebe021f.js";import"./Divider.5e9a60f5.js";import"./dividerClasses.be26840c.js";import"./RangePopUp.aea74439.js";import"./index.eb4aa1c1.js";import"./TextField.a574cfa5.js";import"./Select.03464598.js";import"./useFormControl.d2abdcc0.js";import"./isMuiElement.80cc5cad.js";import"./Menu.41d358f2.js";import"./List.c81063c5.js";import"./useControlled.1f67ff79.js";import"./usePickerState.fb9075d4.js";import"./Grid.2edd9a40.js";import"./InputAdornment.6310bdb0.js";import"./StaticDateRangePicker.5c31ae7c.js";import"./PickersToolbarButton.82dc0411.js";import"./LeftArrow.be0f8108.js";import"./Wrappers.be76913d.js";import"./Wrappers.module.1d569f64.js";const U=()=>{const g=w(),{isMobile:h,isTablet:y}=_(),{showSnack:u}=A(),[p,T]=a.exports.useState([]),[f,b]=a.exports.useState(""),[x,v]=a.exports.useState(0),[c,C]=a.exports.useState(new Date(new Date().getFullYear(),0,1)),[l,N]=a.exports.useState(new Date(new Date().getFullYear(),11,31)),M=a.exports.useRef(async(e,n,m)=>{e&&e.setHours(0,0,0,0),n&&n.setHours(23,59,59,999);const i=await D.getAllOrders(e,n,m);if(!i.success)return u(i.message,"error");T(i.payload)});a.exports.useEffect(()=>{M.current(c,l,f)},[c,l,f]);const Y=a.exports.useRef(async()=>{const e=await D.getExpiryBusinessCount();if(!e.success)return u(e.message,"error");v(e.payload)});return a.exports.useEffect(()=>{Y.current()},[]),s(a.exports.Fragment,{children:[h&&r($,{title:"Orders"}),r("div",{className:t.ContentInner,children:s("div",{className:t.InnerWrapper,children:[h&&r(F,{placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>N(e)}),x>0&&r(I,{noOfBusi:x}),s(R,{elevation:0,className:t.Card,children:[y&&r(H,{title:"Orders",placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>N(e)}),r(j,{className:t.CardContent,children:p.length>0?r("div",{className:t.TableOuter,children:r(z,{className:t.TableContainer,children:s(G,{children:[r(L,{children:s(O,{className:t.TableHead,children:[r(o,{component:"th",children:"Date"}),r(o,{component:"th",children:"Particulars"}),r(o,{component:"th",children:"Order No."}),r(o,{component:"th",children:"Amount"}),r(o,{component:"th",children:"Inv No."})]})}),r(W,{children:p&&p.map(e=>{var i;let n="",m="";return e.order_type==="plan"&&(n=`${d(e.start_date).format("D")} - ${d(e.expiry_date).format("D MMM YYYY")}`,m=` Plan Code: ${(i=e.plan)==null?void 0:i.slug}`),r(E,{children:s(O,{children:[r(o,{className:t.OrderDate,children:d(e.created_at).format("D MMM YYYY")}),s(o,{className:t.Particulars,children:[r("p",{children:e.business.business_name}),s("span",{children:[e.particulars.charAt(0).toUpperCase()+e.particulars.slice(1)," -"," ",e.short_desc&&e.short_desc]}),r("br",{}),r("span",{children:n}),r("label",{children:m})]}),r(o,{className:t.OrderNumber,children:r(q,{onClick:()=>{g(`${e.id}`)},children:S(e.id)})}),s(o,{className:t.OrderDate,children:[e.currency==="INR"?"\u20B9":"$",P(e.paid_amount)]}),r(o,{children:S(e.invoice_number)})]})})})})]})})}):s("div",{className:t.NoData,children:["There is no order to show for this duration.",r("br",{}),"Try to select a different date range."]})})]})]})})]})},Te=()=>s(a.exports.Fragment,{children:[r(B,{children:r("title",{children:"Orders"})}),r(k,{children:r(U,{})})]});export{Te as default};
