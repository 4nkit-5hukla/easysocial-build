var b=Object.defineProperty;var G=(s,t,o)=>t in s?b(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o;var d=(s,t,o)=>(G(s,typeof t!="symbol"?t+"":t,o),o);import{a as h,j as r,ai as m,a$ as R,B,r as T,aI as M,b0 as V,e as w}from"./index.c29906d9.js";import{d as x}from"./WhatsApp.00540be5.js";import{P as D,a as X}from"./Play.af81fde7.js";import{W as E,M as H,i as v}from"./Styles.5fa2ae96.js";import{L as N}from"./Link.276d7e69.js";const j=()=>h("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"//www.w3.org/2000/svg",children:[r("path",{d:"M10.5378 1.11084H7.60995C7.35479 1.11084 7.14798 1.31765 7.14798 1.57281C7.14798 1.82797 7.35479 2.03478 7.60995 2.03478H9.42251L4.99274 6.46455C4.81232 6.64498 4.81232 6.93746 4.99274 7.11788C5.08298 7.20807 5.20119 7.25319 5.3194 7.25319C5.43762 7.25319 5.55583 7.20807 5.64607 7.11788L10.0758 2.68811V4.50072C10.0758 4.75588 10.2826 4.96269 10.5378 4.96269C10.793 4.96269 10.9998 4.75588 10.9998 4.50072V1.57286C10.9998 1.31765 10.793 1.11084 10.5378 1.11084Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"}),r("path",{d:"M8.64816 6.53803C8.393 6.53803 8.18619 6.74484 8.18619 7V9.965H1.92394V3.70275H5.5C5.75516 3.70275 5.96197 3.49594 5.96197 3.24078C5.96197 2.98562 5.75516 2.77881 5.5 2.77881L1.46197 2.77881C1.20681 2.77881 1 2.98562 1 3.24078V10.427C1 10.6821 1.20681 10.8889 1.46197 10.8889H8.64816C8.90333 10.8889 9.11013 10.6821 9.11013 10.427V7C9.11013 6.74484 8.90333 6.53803 8.64816 6.53803Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"})]});class p{}d(p,"getWaTemplateMessages",async()=>await m("/wa-templates","GET")),d(p,"getWaTemplateMessage",async t=>await m(`/wa-templates/${t}`,"GET")),d(p,"syncWaTemplateMessage",async()=>await m("/wa-templates/sync-templates","GET")),d(p,"createWaTemplateMessage",async t=>await m("/wa-templates/create-template","POST",{data:t})),d(p,"getTemplateJSON",async t=>await m(`/wa-templates/example-content?id=${t}`,"GET")),d(p,"getTemplateSampleFile",async t=>await R("/sheet/create-xlsx","POST",{data:t})),d(p,"updateWaTemplateMessage",async(t,o)=>await m(`/wa-templates/update-template-form/${t}`,"PUT",{data:o})),d(p,"updateWaTemplateComponents",async(t,o)=>await m(`/wa-templates/update/${t}`,"PUT",{data:o})),d(p,"deleteWaTemplateMessage",async t=>await m(`/wa-templates/delete/${t}`,"DELETE"));const q="n-79",K="Pyy5",Q="_7T6-",Y="Whrl",Z="KXAG",z="c6D9",J="uQG8",A="rN3N",u={WaTPreviewCard:q,WaTHeaderImgWrap:K,WaTHeaderCardMedia:Q,WaTHeaderText:Y,WaTBodyText:Z,WaTFooterText:z,WaTPreviewAction:J,WhatsAppButton:A},ee=({children:s})=>r("div",{className:u.WaTPreviewCard,children:s}),te=({children:s})=>r("div",{className:u.WaTHeaderImgWrap,children:s}),ae=({children:s})=>r("div",{className:u.WaTHeaderText,children:s}),re=({children:s})=>r("div",{className:u.WaTBodyText,children:s}),se=({children:s})=>r("div",{className:u.WaTFooterText,children:s}),ne=({children:s,...t})=>r(B,{className:u.WaTPreviewAction,...t,children:s}),me=({components:s})=>{const t=structuredClone(s),o=T.exports.useRef(null),[f,S]=T.exports.useState(!1),[$,F]=T.exports.useState(!1),[P,W]=T.exports.useState(""),i=t.find(({type:e})=>e===x.HEADER),g=t.find(({type:e})=>e===x.BODY),C=t.find(({type:e})=>e===x.FOOTER),y=t.find(({type:e})=>e===x.BUTTONS),O=(e=>{if(e){const{example:n}=e;if(n){const{header_text:a}=n;return a||[]}else return[]}else return[]})(i),l=(e=>{if(e){const{example:n}=e;if(n){const{header_handle:a}=n;if(a&&a.length>0){const[c]=a;return c}else return""}else return""}else return""})(i),L=(e=>{if(e){const{example:n}=e;if(n){const{header_files:a}=n;if(a&&a.length>0){const[c]=a;return c}else return""}else return""}else return""})(i),_=(e=>{if(e){const{example:n}=e;if(n){const{body_text:a}=n;return a?a.length===1&&Array.isArray(a[0])?a.pop():a:[]}else return[]}else return[]})(g),k=(e=>i?e.reduce((n,a,c)=>a&&a!==""?n.replace(`{{${c+1}}}`,a):n,i.text):"")(O),I=(e=>g?e.reduce((n,a,c)=>a&&a!==""?n.replace(`{{${c+1}}}`,a):n,g.text):"")(_);return T.exports.useEffect(()=>{o.current&&(o.current.addEventListener("playing",()=>{W("playing")}),o.current.addEventListener("pause",()=>{W("")}),o.current.addEventListener("ended",()=>{W("")}),f?o.current.play():o.current.pause())},[f]),h(ee,{children:[i&&i.format==="IMAGE"&&r(te,{children:l&&l!==""&&r(M,{component:"img",alt:"header-img",image:l,sx:E})}),i&&i.format==="VIDEO"&&h(N,{underline:"none",component:"button",type:"button",onClick:()=>S(!f),onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),sx:H,children:[r(M,{component:"video",ref:o,className:"video",disablePictureInPicture:!0,sx:{...E,height:130},children:l&&l!==""&&r("source",{src:l,type:"video/mp4"})}),h(B,{position:"absolute",display:"flex",children:[P===""&&r(D,{}),$&&P==="playing"&&r(X,{})]})]}),i&&i.format==="DOCUMENT"&&r(N,{underline:"none",className:"media-wrapper doc",href:l,target:"_blank",sx:{...H,backgroundColor:"#F5F5F5",color:"#A1AEB4",fontSize:90,fontWeight:900,lineHeight:"96px"},children:l&&l!==""?L.split(".").pop().slice(0,4).toUpperCase():""}),i&&i.format==="TEXT"&&r(ae,{children:k}),r(re,{children:V(I)}),C&&C.text!==""&&r(se,{children:C.text}),y&&y.buttons.length>0&&r(ne,{children:y.buttons.map((e,n)=>r(T.exports.Fragment,{children:e.type==="QUICK_REPLY"?r(w,{variant:"outlined",type:"button",sx:{...v,color:"#767676",minWidth:"calc(50% - 8px)"},children:e.text}):e.type==="PHONE_NUMBER"?r(w,{href:`tel:${e.phone_number}`,variant:"outlined",sx:{...v,color:"#32C5FF",minWidth:"100%"},children:e.text}):h(w,{href:e.example?e.example.reduce((a,c,U)=>c&&c!==""?a.replace(`{{${U+1}}}`,c):a,e.url):"",variant:"outlined",target:"_blank",rel:"noreferrer",sx:{...v,color:"#32C5FF",minWidth:"100%"},children:[r(j,{}),e.text]})},n))})]})};export{p as W,me as a};
