var ss=Object.defineProperty;var ls=(e,t,n)=>t in e?ss(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ue=(e,t,n)=>(ls(e,typeof t!="symbol"?t+"":t,n),n);import{r as E,e as cs,c as us,j as B,_ as Gr,g as ds,a as ce,F as Ge,d as rn,D as fs}from"./index.ca4653e7.js";import{u as gs}from"./SnackProvider.08a64b2a.js";import{g as hs}from"./index.7866a838.js";import{D as ps,a as vs,b as ms}from"./DialogContent.1c77d0ec.js";import{D as ys}from"./DialogTitle.d9211877.js";import{g as bs,a as ws,s as Ss,r as xs,c as Cs}from"./styled.0e1c85d3.js";import{T as Es}from"./Typography.a45e4cf2.js";import{B as zo}from"./Button.2aa5cafc.js";import{A as Nn}from"./Axios.d864dcf9.js";import{L as Os}from"./LeadDataFieldsApi.3e9ced86.js";function Ns(e){return bs("MuiDialogContentText",e)}ws("MuiDialogContentText",["root"]);const Ps=["children","className"],_s=e=>{const{classes:t}=e,o=Cs({root:["root"]},Ns,t);return Gr({},t,o)},Ms=Ss(Es,{shouldForwardProp:e=>xs(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ds=E.exports.forwardRef(function(t,n){const o=cs({props:t,name:"MuiDialogContentText"}),{className:r}=o,i=us(o,Ps),a=_s(i);return B(Ms,Gr({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:i,className:ds(a.root,r)},o,{classes:a}))}),ks=Ds;function Ts(e){let t;const n=new Set,o=(u,c)=>{const f=typeof u=="function"?u(t):u;if(f!==t){const d=t;t=c?f:Object.assign({},t,f),n.forEach(h=>h(t,d))}},r=()=>t,i=(u,c=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(t);function h(){const p=c(t);if(!f(d,p)){const x=d;u(d=p,x)}}return n.add(h),()=>n.delete(h)},l={setState:o,getState:r,subscribe:(u,c,f)=>c||f?i(u,c,f):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return t=e(o,r,l),l}const Is=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Bo=Is?E.exports.useEffect:E.exports.useLayoutEffect;function As(e){const t=typeof e=="function"?Ts(e):e,n=(o=t.getState,r=Object.is)=>{const[,i]=E.exports.useReducer(S=>S+1,0),a=t.getState(),s=E.exports.useRef(a),l=E.exports.useRef(o),u=E.exports.useRef(r),c=E.exports.useRef(!1),f=E.exports.useRef();f.current===void 0&&(f.current=o(a));let d,h=!1;(s.current!==a||l.current!==o||u.current!==r||c.current)&&(d=o(a),h=!r(f.current,d)),Bo(()=>{h&&(f.current=d),s.current=a,l.current=o,u.current=r,c.current=!1});const p=E.exports.useRef(a);Bo(()=>{const S=()=>{try{const N=t.getState(),C=l.current(N);u.current(f.current,C)||(s.current=N,f.current=C,i())}catch{c.current=!0,i()}},m=t.subscribe(S);return t.getState()!==p.current&&S(),m},[]);const x=h?d:f.current;return E.exports.useDebugValue(x),x};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const o=[n,t];return{next(){const r=o.length<=0;return{value:o.shift(),done:r}}}},n}function Rs(){const e=E.exports.createContext(void 0);return{Provider:({initialStore:r,createStore:i,children:a})=>{const s=E.exports.useRef();return s.current||(r&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),i||(i=()=>r)),s.current=i()),E.exports.createElement(e.Provider,{value:s.current},a)},useStore:(r,i=Object.is)=>{const a=E.exports.useContext(e);if(!a)throw new Error("Seems like you have not used zustand provider as an ancestor.");return a(r,i)},useStoreApi:()=>{const r=E.exports.useContext(e);if(!r)throw new Error("Seems like you have not used zustand provider as an ancestor.");return E.exports.useMemo(()=>({getState:r.getState,setState:r.setState,subscribe:r.subscribe,destroy:r.destroy}),[r])}}}var $s={value:()=>{}};function vn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Jt(n)}function Jt(e){this._=e}function zs(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Jt.prototype=vn.prototype={constructor:Jt,on:function(e,t){var n=this._,o=zs(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=Bs(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=Ho(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Ho(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Jt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Bs(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Ho(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=$s,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Vn="http://www.w3.org/1999/xhtml";const Lo={svg:"http://www.w3.org/2000/svg",xhtml:Vn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Lo.hasOwnProperty(t)?{space:Lo[t],local:e}:e}function Hs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Vn&&t.documentElement.namespaceURI===Vn?t.createElement(e):t.createElementNS(n,e)}}function Ls(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function qr(e){var t=mn(e);return(t.local?Ls:Hs)(t)}function js(){}function co(e){return e==null?js:function(){return this.querySelector(e)}}function Ys(e){typeof e!="function"&&(e=co(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=new Array(a),l,u,c=0;c<a;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new pe(o,this._parents)}function Us(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Xs(){return[]}function Qr(e){return e==null?Xs:function(){return this.querySelectorAll(e)}}function Vs(e){return function(){return Us(e.apply(this,arguments))}}function Fs(e){typeof e=="function"?e=Vs(e):e=Qr(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(o.push(e.call(l,l.__data__,u,a)),r.push(l));return new pe(o,r)}function Jr(e){return function(){return this.matches(e)}}function ei(e){return function(t){return t.matches(e)}}var Zs=Array.prototype.find;function Ks(e){return function(){return Zs.call(this.children,e)}}function Ws(){return this.firstElementChild}function Gs(e){return this.select(e==null?Ws:Ks(typeof e=="function"?e:ei(e)))}var qs=Array.prototype.filter;function Qs(){return Array.from(this.children)}function Js(e){return function(){return qs.call(this.children,e)}}function el(e){return this.selectAll(e==null?Qs:Js(typeof e=="function"?e:ei(e)))}function tl(e){typeof e!="function"&&(e=Jr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new pe(o,this._parents)}function ti(e){return new Array(e.length)}function nl(){return new pe(this._enter||this._groups.map(ti),this._parents)}function an(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}an.prototype={constructor:an,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ol(e){return function(){return e}}function rl(e,t,n,o,r,i){for(var a=0,s,l=t.length,u=i.length;a<u;++a)(s=t[a])?(s.__data__=i[a],o[a]=s):n[a]=new an(e,i[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function il(e,t,n,o,r,i,a){var s,l,u=new Map,c=t.length,f=i.length,d=new Array(c),h;for(s=0;s<c;++s)(l=t[s])&&(d[s]=h=a.call(l,l.__data__,s,t)+"",u.has(h)?r[s]=l:u.set(h,l));for(s=0;s<f;++s)h=a.call(e,i[s],s,i)+"",(l=u.get(h))?(o[s]=l,l.__data__=i[s],u.delete(h)):n[s]=new an(e,i[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(d[s])===l&&(r[s]=l)}function al(e){return e.__data__}function sl(e,t){if(!arguments.length)return Array.from(this,al);var n=t?il:rl,o=this._parents,r=this._groups;typeof e!="function"&&(e=ol(e));for(var i=r.length,a=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],f=r[u],d=f.length,h=ll(e.call(c,c&&c.__data__,u,o)),p=h.length,x=s[u]=new Array(p),S=a[u]=new Array(p),m=l[u]=new Array(d);n(c,f,x,S,m,h,t);for(var N=0,C=0,v,b;N<p;++N)if(v=x[N]){for(N>=C&&(C=N+1);!(b=S[C])&&++C<p;);v._next=b||null}}return a=new pe(a,o),a._enter=s,a._exit=l,a}function ll(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cl(){return new pe(this._exit||this._groups.map(ti),this._parents)}function ul(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function dl(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var u=n[l],c=o[l],f=u.length,d=s[l]=new Array(f),h,p=0;p<f;++p)(h=u[p]||c[p])&&(d[p]=h);for(;l<r;++l)s[l]=n[l];return new pe(s,this._parents)}function fl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function gl(e){e||(e=hl);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],s=a.length,l=r[i]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new pe(r,this._parents).order()}function hl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function pl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vl(){return Array.from(this)}function ml(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function yl(){let e=0;for(const t of this)++e;return e}function bl(){return!this.node()}function wl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,s;i<a;++i)(s=r[i])&&e.call(s,s.__data__,i,r);return this}function Sl(e){return function(){this.removeAttribute(e)}}function xl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cl(e,t){return function(){this.setAttribute(e,t)}}function El(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ol(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Nl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Pl(e,t){var n=mn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?xl:Sl:typeof t=="function"?n.local?Nl:Ol:n.local?El:Cl)(n,t))}function ni(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _l(e){return function(){this.style.removeProperty(e)}}function Ml(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Dl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function kl(e,t,n){return arguments.length>1?this.each((t==null?_l:typeof t=="function"?Dl:Ml)(e,t,n==null?"":n)):gt(this.node(),e)}function gt(e,t){return e.style.getPropertyValue(t)||ni(e).getComputedStyle(e,null).getPropertyValue(t)}function Tl(e){return function(){delete this[e]}}function Il(e,t){return function(){this[e]=t}}function Al(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Rl(e,t){return arguments.length>1?this.each((t==null?Tl:typeof t=="function"?Al:Il)(e,t)):this.node()[e]}function oi(e){return e.trim().split(/^|\s+/)}function uo(e){return e.classList||new ri(e)}function ri(e){this._node=e,this._names=oi(e.getAttribute("class")||"")}ri.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ii(e,t){for(var n=uo(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function ai(e,t){for(var n=uo(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function $l(e){return function(){ii(this,e)}}function zl(e){return function(){ai(this,e)}}function Bl(e,t){return function(){(t.apply(this,arguments)?ii:ai)(this,e)}}function Hl(e,t){var n=oi(e+"");if(arguments.length<2){for(var o=uo(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Bl:t?$l:zl)(n,t))}function Ll(){this.textContent=""}function jl(e){return function(){this.textContent=e}}function Yl(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Ul(e){return arguments.length?this.each(e==null?Ll:(typeof e=="function"?Yl:jl)(e)):this.node().textContent}function Xl(){this.innerHTML=""}function Vl(e){return function(){this.innerHTML=e}}function Fl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Zl(e){return arguments.length?this.each(e==null?Xl:(typeof e=="function"?Fl:Vl)(e)):this.node().innerHTML}function Kl(){this.nextSibling&&this.parentNode.appendChild(this)}function Wl(){return this.each(Kl)}function Gl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ql(){return this.each(Gl)}function Ql(e){var t=typeof e=="function"?e:qr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Jl(){return null}function ec(e,t){var n=typeof e=="function"?e:qr(e),o=t==null?Jl:typeof t=="function"?t:co(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function tc(){var e=this.parentNode;e&&e.removeChild(this)}function nc(){return this.each(tc)}function oc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ic(e){return this.select(e?rc:oc)}function ac(e){return arguments.length?this.property("__data__",e):this.node().__data__}function sc(e){return function(t){e.call(this,t,this.__data__)}}function lc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function cc(e){return function(){var t=this.__on;if(!!t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function uc(e,t,n){return function(){var o=this.__on,r,i=sc(t);if(o){for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function dc(e,t,n){var o=lc(e+""),r,i=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(r=0,c=s[l];r<i;++r)if((a=o[r]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?uc:cc,r=0;r<i;++r)this.each(s(o[r],t,n));return this}function si(e,t,n){var o=ni(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function fc(e,t){return function(){return si(this,e,t)}}function gc(e,t){return function(){return si(this,e,t.apply(this,arguments))}}function hc(e,t){return this.each((typeof t=="function"?gc:fc)(e,t))}function*pc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var li=[null];function pe(e,t){this._groups=e,this._parents=t}function It(){return new pe([[document.documentElement]],li)}function vc(){return this}pe.prototype=It.prototype={constructor:pe,select:Ys,selectAll:Fs,selectChild:Gs,selectChildren:el,filter:tl,data:sl,enter:nl,exit:cl,join:ul,merge:dl,selection:vc,order:fl,sort:gl,call:pl,nodes:vl,node:ml,size:yl,empty:bl,each:wl,attr:Pl,style:kl,property:Rl,classed:Hl,text:Ul,html:Zl,raise:Wl,lower:ql,append:Ql,insert:ec,remove:nc,clone:ic,datum:ac,on:dc,dispatch:hc,[Symbol.iterator]:pc};function ye(e){return typeof e=="string"?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],li)}function mc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ee(e,t){if(e=mc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const yc={passive:!1},Pt={capture:!0,passive:!1};function Pn(e){e.stopImmediatePropagation()}function ct(e){e.preventDefault(),e.stopImmediatePropagation()}function ci(e){var t=e.document.documentElement,n=ye(e).on("dragstart.drag",ct,Pt);"onselectstart"in t?n.on("selectstart.drag",ct,Pt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ui(e,t){var n=e.document.documentElement,o=ye(e).on("dragstart.drag",null);t&&(o.on("click.drag",ct,Pt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const jt=e=>()=>e;function Fn(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Fn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function bc(e){return!e.ctrlKey&&!e.button}function wc(){return this.parentNode}function Sc(e,t){return t==null?{x:e.x,y:e.y}:t}function xc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cc(){var e=bc,t=wc,n=Sc,o=xc,r={},i=vn("start","drag","end"),a=0,s,l,u,c,f=0;function d(v){v.on("mousedown.drag",h).filter(o).on("touchstart.drag",S).on("touchmove.drag",m,yc).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,b){if(!(c||!e.call(this,v,b))){var O=C(this,t.call(this,v,b),v,b,"mouse");!O||(ye(v.view).on("mousemove.drag",p,Pt).on("mouseup.drag",x,Pt),ci(v.view),Pn(v),u=!1,s=v.clientX,l=v.clientY,O("start",v))}}function p(v){if(ct(v),!u){var b=v.clientX-s,O=v.clientY-l;u=b*b+O*O>f}r.mouse("drag",v)}function x(v){ye(v.view).on("mousemove.drag mouseup.drag",null),ui(v.view,u),ct(v),r.mouse("end",v)}function S(v,b){if(!!e.call(this,v,b)){var O=v.changedTouches,D=t.call(this,v,b),_=O.length,$,Y;for($=0;$<_;++$)(Y=C(this,D,v,b,O[$].identifier,O[$]))&&(Pn(v),Y("start",v,O[$]))}}function m(v){var b=v.changedTouches,O=b.length,D,_;for(D=0;D<O;++D)(_=r[b[D].identifier])&&(ct(v),_("drag",v,b[D]))}function N(v){var b=v.changedTouches,O=b.length,D,_;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),D=0;D<O;++D)(_=r[b[D].identifier])&&(Pn(v),_("end",v,b[D]))}function C(v,b,O,D,_,$){var Y=i.copy(),z=Ee($||O,b),H,P,g;if((g=n.call(v,new Fn("beforestart",{sourceEvent:O,target:d,identifier:_,active:a,x:z[0],y:z[1],dx:0,dy:0,dispatch:Y}),D))!=null)return H=g.x-z[0]||0,P=g.y-z[1]||0,function w(y,M,I){var T=z,A;switch(y){case"start":r[_]=w,A=a++;break;case"end":delete r[_],--a;case"drag":z=Ee(I||M,b),A=a;break}Y.call(y,v,new Fn(y,{sourceEvent:M,subject:g,target:d,identifier:_,active:A,x:z[0]+H,y:z[1]+P,dx:z[0]-T[0],dy:z[1]-T[1],dispatch:Y}),D)}}return d.filter=function(v){return arguments.length?(e=typeof v=="function"?v:jt(!!v),d):e},d.container=function(v){return arguments.length?(t=typeof v=="function"?v:jt(v),d):t},d.subject=function(v){return arguments.length?(n=typeof v=="function"?v:jt(v),d):n},d.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:jt(!!v),d):o},d.on=function(){var v=i.on.apply(i,arguments);return v===i?d:v},d.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,d):Math.sqrt(f)},d}function fo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function di(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function At(){}var _t=.7,sn=1/_t,ut="\\s*([+-]?\\d+)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ec=/^#([0-9a-f]{3,8})$/,Oc=new RegExp(`^rgb\\(${ut},${ut},${ut}\\)$`),Nc=new RegExp(`^rgb\\(${Oe},${Oe},${Oe}\\)$`),Pc=new RegExp(`^rgba\\(${ut},${ut},${ut},${Mt}\\)$`),_c=new RegExp(`^rgba\\(${Oe},${Oe},${Oe},${Mt}\\)$`),Mc=new RegExp(`^hsl\\(${Mt},${Oe},${Oe}\\)$`),Dc=new RegExp(`^hsla\\(${Mt},${Oe},${Oe},${Mt}\\)$`),jo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fo(At,Dt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yo,formatHex:Yo,formatHex8:kc,formatHsl:Tc,formatRgb:Uo,toString:Uo});function Yo(){return this.rgb().formatHex()}function kc(){return this.rgb().formatHex8()}function Tc(){return fi(this).formatHsl()}function Uo(){return this.rgb().formatRgb()}function Dt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ec.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Xo(t):n===3?new ge(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Oc.exec(e))?new ge(t[1],t[2],t[3],1):(t=Nc.exec(e))?new ge(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Pc.exec(e))?Yt(t[1],t[2],t[3],t[4]):(t=_c.exec(e))?Yt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Mc.exec(e))?Zo(t[1],t[2]/100,t[3]/100,1):(t=Dc.exec(e))?Zo(t[1],t[2]/100,t[3]/100,t[4]):jo.hasOwnProperty(e)?Xo(jo[e]):e==="transparent"?new ge(NaN,NaN,NaN,0):null}function Xo(e){return new ge(e>>16&255,e>>8&255,e&255,1)}function Yt(e,t,n,o){return o<=0&&(e=t=n=NaN),new ge(e,t,n,o)}function Ic(e){return e instanceof At||(e=Dt(e)),e?(e=e.rgb(),new ge(e.r,e.g,e.b,e.opacity)):new ge}function Zn(e,t,n,o){return arguments.length===1?Ic(e):new ge(e,t,n,o==null?1:o)}function ge(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}fo(ge,Zn,di(At,{brighter(e){return e=e==null?sn:Math.pow(sn,e),new ge(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_t:Math.pow(_t,e),new ge(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ge(Ve(this.r),Ve(this.g),Ve(this.b),ln(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vo,formatHex:Vo,formatHex8:Ac,formatRgb:Fo,toString:Fo}));function Vo(){return`#${Xe(this.r)}${Xe(this.g)}${Xe(this.b)}`}function Ac(){return`#${Xe(this.r)}${Xe(this.g)}${Xe(this.b)}${Xe((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fo(){const e=ln(this.opacity);return`${e===1?"rgb(":"rgba("}${Ve(this.r)}, ${Ve(this.g)}, ${Ve(this.b)}${e===1?")":`, ${e})`}`}function ln(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ve(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xe(e){return e=Ve(e),(e<16?"0":"")+e.toString(16)}function Zo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new be(e,t,n,o)}function fi(e){if(e instanceof be)return new be(e.h,e.s,e.l,e.opacity);if(e instanceof At||(e=Dt(e)),!e)return new be;if(e instanceof be)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,l=(i+r)/2;return s?(t===i?a=(n-o)/s+(n<o)*6:n===i?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?i+r:2-i-r,a*=60):s=l>0&&l<1?0:a,new be(a,s,l,e.opacity)}function Rc(e,t,n,o){return arguments.length===1?fi(e):new be(e,t,n,o==null?1:o)}function be(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}fo(be,Rc,di(At,{brighter(e){return e=e==null?sn:Math.pow(sn,e),new be(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_t:Math.pow(_t,e),new be(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ge(_n(e>=240?e-240:e+120,r,o),_n(e,r,o),_n(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new be(Ko(this.h),Ut(this.s),Ut(this.l),ln(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ln(this.opacity);return`${e===1?"hsl(":"hsla("}${Ko(this.h)}, ${Ut(this.s)*100}%, ${Ut(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ko(e){return e=(e||0)%360,e<0?e+360:e}function Ut(e){return Math.max(0,Math.min(1,e||0))}function _n(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const gi=e=>()=>e;function $c(e,t){return function(n){return e+n*t}}function zc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Bc(e){return(e=+e)==1?hi:function(t,n){return n-t?zc(t,n,e):gi(isNaN(t)?n:t)}}function hi(e,t){var n=t-e;return n?$c(e,n):gi(isNaN(e)?t:e)}const Wo=function e(t){var n=Bc(t);function o(r,i){var a=n((r=Zn(r)).r,(i=Zn(i)).r),s=n(r.g,i.g),l=n(r.b,i.b),u=hi(r.opacity,i.opacity);return function(c){return r.r=a(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return o.gamma=e,o}(1);function $e(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Kn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mn=new RegExp(Kn.source,"g");function Hc(e){return function(){return e}}function Lc(e){return function(t){return e(t)+""}}function jc(e,t){var n=Kn.lastIndex=Mn.lastIndex=0,o,r,i,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=Kn.exec(e))&&(r=Mn.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(o=o[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:$e(o,r)})),n=Mn.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?Lc(l[0].x):Hc(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}var Go=180/Math.PI,Wn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pi(e,t,n,o,r,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Go,skewX:Math.atan(l)*Go,scaleX:a,scaleY:s}}var Xt;function Yc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Wn:pi(t.a,t.b,t.c,t.d,t.e,t.f)}function Uc(e){return e==null||(Xt||(Xt=document.createElementNS("http://www.w3.org/2000/svg","g")),Xt.setAttribute("transform",e),!(e=Xt.transform.baseVal.consolidate()))?Wn:(e=e.matrix,pi(e.a,e.b,e.c,e.d,e.e,e.f))}function vi(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,f,d,h,p){if(u!==f||c!==d){var x=h.push("translate(",null,t,null,n);p.push({i:x-4,x:$e(u,f)},{i:x-2,x:$e(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function a(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(r(f)+"rotate(",null,o)-2,x:$e(u,c)})):c&&f.push(r(f)+"rotate("+c+o)}function s(u,c,f,d){u!==c?d.push({i:f.push(r(f)+"skewX(",null,o)-2,x:$e(u,c)}):c&&f.push(r(f)+"skewX("+c+o)}function l(u,c,f,d,h,p){if(u!==f||c!==d){var x=h.push(r(h)+"scale(",null,",",null,")");p.push({i:x-4,x:$e(u,f)},{i:x-2,x:$e(c,d)})}else(f!==1||d!==1)&&h.push(r(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,f,d),a(u.rotate,c.rotate,f,d),s(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var p=-1,x=d.length,S;++p<x;)f[(S=d[p]).i]=S.x(h);return f.join("")}}}var Xc=vi(Yc,"px, ","px)","deg)"),Vc=vi(Uc,", ",")",")"),Fc=1e-12;function qo(e){return((e=Math.exp(e))+1/e)/2}function Zc(e){return((e=Math.exp(e))-1/e)/2}function Kc(e){return((e=Math.exp(2*e))-1)/(e+1)}const Wc=function e(t,n,o){function r(i,a){var s=i[0],l=i[1],u=i[2],c=a[0],f=a[1],d=a[2],h=c-s,p=f-l,x=h*h+p*p,S,m;if(x<Fc)m=Math.log(d/u)/t,S=function(D){return[s+D*h,l+D*p,u*Math.exp(t*D*m)]};else{var N=Math.sqrt(x),C=(d*d-u*u+o*x)/(2*u*n*N),v=(d*d-u*u-o*x)/(2*d*n*N),b=Math.log(Math.sqrt(C*C+1)-C),O=Math.log(Math.sqrt(v*v+1)-v);m=(O-b)/t,S=function(D){var _=D*m,$=qo(b),Y=u/(n*N)*($*Kc(t*_+b)-Zc(b));return[s+Y*h,l+Y*p,u*$/qo(t*_+b)]}}return S.duration=m*1e3*t/Math.SQRT2,S}return r.rho=function(i){var a=Math.max(.001,+i),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4);var ht=0,Ct=0,yt=0,mi=1e3,cn,Et,un=0,We=0,yn=0,kt=typeof performance=="object"&&performance.now?performance:Date,yi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function go(){return We||(yi(Gc),We=kt.now()+yn)}function Gc(){We=0}function dn(){this._call=this._time=this._next=null}dn.prototype=bi.prototype={constructor:dn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?go():+n)+(t==null?0:+t),!this._next&&Et!==this&&(Et?Et._next=this:cn=this,Et=this),this._call=e,this._time=n,Gn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gn())}};function bi(e,t,n){var o=new dn;return o.restart(e,t,n),o}function qc(){go(),++ht;for(var e=cn,t;e;)(t=We-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ht}function Qo(){We=(un=kt.now())+yn,ht=Ct=0;try{qc()}finally{ht=0,Jc(),We=0}}function Qc(){var e=kt.now(),t=e-un;t>mi&&(yn-=t,un=e)}function Jc(){for(var e,t=cn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:cn=n);Et=e,Gn(o)}function Gn(e){if(!ht){Ct&&(Ct=clearTimeout(Ct));var t=e-We;t>24?(e<1/0&&(Ct=setTimeout(Qo,e-kt.now()-yn)),yt&&(yt=clearInterval(yt))):(yt||(un=kt.now(),yt=setInterval(Qc,mi)),ht=1,yi(Qo))}}function Jo(e,t,n){var o=new dn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var eu=vn("start","end","cancel","interrupt"),tu=[],wi=0,er=1,qn=2,en=3,tr=4,Qn=5,tn=6;function bn(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;nu(e,n,{name:t,index:o,group:r,on:eu,tween:tu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:wi})}function ho(e,t){var n=we(e,t);if(n.state>wi)throw new Error("too late; already scheduled");return n}function Ne(e,t){var n=we(e,t);if(n.state>en)throw new Error("too late; already running");return n}function we(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function nu(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=bi(i,0,n.time);function i(u){n.state=er,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,f,d,h;if(n.state!==er)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===en)return Jo(a);h.state===tr?(h.state=tn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=tn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(Jo(function(){n.state===en&&(n.state=tr,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=qn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===qn){for(n.state=en,r=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Qn,1),f=-1,d=r.length;++f<d;)r[f].call(e,c);n.state===Qn&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=tn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function nn(e,t){var n=e.__transition,o,r,i=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>qn&&o.state<Qn,o.state=tn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function ou(e){return this.each(function(){nn(this,e)})}function ru(e,t){var n,o;return function(){var r=Ne(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function iu(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Ne(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=s;break}l===u&&r.push(s)}i.tween=r}}function au(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=we(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?ru:iu)(n,e,t))}function po(e,t,n){var o=e._id;return e.each(function(){var r=Ne(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return we(r,o).value[t]}}function Si(e,t){var n;return(typeof t=="number"?$e:t instanceof Dt?Wo:(n=Dt(t))?(t=n,Wo):jc)(e,t)}function su(e){return function(){this.removeAttribute(e)}}function lu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cu(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function uu(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function du(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function fu(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function gu(e,t){var n=mn(e),o=n==="transform"?Vc:Si;return this.attrTween(e,typeof t=="function"?(n.local?fu:du)(n,o,po(this,"attr."+e,t)):t==null?(n.local?lu:su)(n):(n.local?uu:cu)(n,o,t))}function hu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function pu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function vu(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&pu(e,i)),n}return r._value=t,r}function mu(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&hu(e,i)),n}return r._value=t,r}function yu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=mn(e);return this.tween(n,(o.local?vu:mu)(o,t))}function bu(e,t){return function(){ho(this,e).delay=+t.apply(this,arguments)}}function wu(e,t){return t=+t,function(){ho(this,e).delay=t}}function Su(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bu:wu)(t,e)):we(this.node(),t).delay}function xu(e,t){return function(){Ne(this,e).duration=+t.apply(this,arguments)}}function Cu(e,t){return t=+t,function(){Ne(this,e).duration=t}}function Eu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xu:Cu)(t,e)):we(this.node(),t).duration}function Ou(e,t){if(typeof t!="function")throw new Error;return function(){Ne(this,e).ease=t}}function Nu(e){var t=this._id;return arguments.length?this.each(Ou(t,e)):we(this.node(),t).ease}function Pu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ne(this,e).ease=n}}function _u(e){if(typeof e!="function")throw new Error;return this.each(Pu(this._id,e))}function Mu(e){typeof e!="function"&&(e=Jr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new De(o,this._parents,this._name,this._id)}function Du(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var l=t[s],u=n[s],c=l.length,f=a[s]=new Array(c),d,h=0;h<c;++h)(d=l[h]||u[h])&&(f[h]=d);for(;s<o;++s)a[s]=t[s];return new De(a,this._parents,this._name,this._id)}function ku(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Tu(e,t,n){var o,r,i=ku(t)?ho:Ne;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}function Iu(e,t){var n=this._id;return arguments.length<2?we(this.node(),n).on.on(e):this.each(Tu(n,e,t))}function Au(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ru(){return this.on("end.remove",Au(this._id))}function $u(e){var t=this._name,n=this._id;typeof e!="function"&&(e=co(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s=o[a],l=s.length,u=i[a]=new Array(l),c,f,d=0;d<l;++d)(c=s[d])&&(f=e.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,bn(u[d],t,n,d,u,we(c,n)));return new De(i,this._parents,t,n)}function zu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qr(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var l=o[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var d=e.call(c,c.__data__,f,l),h,p=we(c,n),x=0,S=d.length;x<S;++x)(h=d[x])&&bn(h,t,n,x,d,p);i.push(d),a.push(c)}return new De(i,a,t,n)}var Bu=It.prototype.constructor;function Hu(){return new Bu(this._groups,this._parents)}function Lu(e,t){var n,o,r;return function(){var i=gt(this,e),a=(this.style.removeProperty(e),gt(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function xi(e){return function(){this.style.removeProperty(e)}}function ju(e,t,n){var o,r=n+"",i;return function(){var a=gt(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function Yu(e,t,n){var o,r,i;return function(){var a=gt(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),gt(this,e))),a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s))}}function Uu(e,t){var n,o,r,i="style."+t,a="end."+i,s;return function(){var l=Ne(this,e),u=l.on,c=l.value[i]==null?s||(s=xi(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(a,r=c),l.on=o}}function Xu(e,t,n){var o=(e+="")=="transform"?Xc:Si;return t==null?this.styleTween(e,Lu(e,o)).on("end.style."+e,xi(e)):typeof t=="function"?this.styleTween(e,Yu(e,o,po(this,"style."+e,t))).each(Uu(this._id,e)):this.styleTween(e,ju(e,o,t),n).on("end.style."+e,null)}function Vu(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Fu(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&Vu(e,a,n)),o}return i._value=t,i}function Zu(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Fu(e,t,n==null?"":n))}function Ku(e){return function(){this.textContent=e}}function Wu(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Gu(e){return this.tween("text",typeof e=="function"?Wu(po(this,"text",e)):Ku(e==null?"":e+""))}function qu(e){return function(t){this.textContent=e.call(this,t)}}function Qu(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&qu(r)),t}return o._value=e,o}function Ju(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qu(e))}function ed(){for(var e=this._name,t=this._id,n=Ci(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=we(l,t);bn(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new De(o,this._parents,e,n)}function td(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){--r===0&&i()}};n.each(function(){var u=Ne(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),r===0&&i()})}var nd=0;function De(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ci(){return++nd}var _e=It.prototype;De.prototype={constructor:De,select:$u,selectAll:zu,selectChild:_e.selectChild,selectChildren:_e.selectChildren,filter:Mu,merge:Du,selection:Hu,transition:ed,call:_e.call,nodes:_e.nodes,node:_e.node,size:_e.size,empty:_e.empty,each:_e.each,on:Iu,attr:gu,attrTween:yu,style:Xu,styleTween:Zu,text:Gu,textTween:Ju,remove:Ru,tween:au,delay:Su,duration:Eu,ease:Nu,easeVarying:_u,end:td,[Symbol.iterator]:_e[Symbol.iterator]};function od(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var rd={time:null,delay:0,duration:250,ease:od};function id(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ad(e){var t,n;e instanceof De?(t=e._id,e=e._name):(t=Ci(),(n=rd).time=go(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&bn(l,e,t,u,a,n||id(l,t));return new De(o,this._parents,e,t)}It.prototype.interrupt=ou;It.prototype.transition=ad;const Vt=e=>()=>e;function sd(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Me(e,t,n){this.k=e,this.x=t,this.y=n}Me.prototype={constructor:Me,scale:function(e){return e===1?this:new Me(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Me(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Fe=new Me(1,0,0);Me.prototype;function Dn(e){e.stopImmediatePropagation()}function bt(e){e.preventDefault(),e.stopImmediatePropagation()}function ld(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function cd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function nr(){return this.__zoom||Fe}function ud(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function dd(){return navigator.maxTouchPoints||"ontouchstart"in this}function fd(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function gd(){var e=ld,t=cd,n=fd,o=ud,r=dd,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Wc,u=vn("start","zoom","end"),c,f,d,h=500,p=150,x=0,S=10;function m(g){g.property("__zoom",nr).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",Y).filter(r).on("touchstart.zoom",z).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(g,w,y,M){var I=g.selection?g.selection():g;I.property("__zoom",nr),g!==I?b(g,w,y,M):I.interrupt().each(function(){O(this,arguments).event(M).start().zoom(null,typeof w=="function"?w.apply(this,arguments):w).end()})},m.scaleBy=function(g,w,y,M){m.scaleTo(g,function(){var I=this.__zoom.k,T=typeof w=="function"?w.apply(this,arguments):w;return I*T},y,M)},m.scaleTo=function(g,w,y,M){m.transform(g,function(){var I=t.apply(this,arguments),T=this.__zoom,A=y==null?v(I):typeof y=="function"?y.apply(this,arguments):y,k=T.invert(A),X=typeof w=="function"?w.apply(this,arguments):w;return n(C(N(T,X),A,k),I,a)},y,M)},m.translateBy=function(g,w,y,M){m.transform(g,function(){return n(this.__zoom.translate(typeof w=="function"?w.apply(this,arguments):w,typeof y=="function"?y.apply(this,arguments):y),t.apply(this,arguments),a)},null,M)},m.translateTo=function(g,w,y,M,I){m.transform(g,function(){var T=t.apply(this,arguments),A=this.__zoom,k=M==null?v(T):typeof M=="function"?M.apply(this,arguments):M;return n(Fe.translate(k[0],k[1]).scale(A.k).translate(typeof w=="function"?-w.apply(this,arguments):-w,typeof y=="function"?-y.apply(this,arguments):-y),T,a)},M,I)};function N(g,w){return w=Math.max(i[0],Math.min(i[1],w)),w===g.k?g:new Me(w,g.x,g.y)}function C(g,w,y){var M=w[0]-y[0]*g.k,I=w[1]-y[1]*g.k;return M===g.x&&I===g.y?g:new Me(g.k,M,I)}function v(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function b(g,w,y,M){g.on("start.zoom",function(){O(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(M).end()}).tween("zoom",function(){var I=this,T=arguments,A=O(I,T).event(M),k=t.apply(I,T),X=y==null?v(k):typeof y=="function"?y.apply(I,T):y,L=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),U=I.__zoom,j=typeof w=="function"?w.apply(I,T):w,K=l(U.invert(X).concat(L/U.k),j.invert(X).concat(L/j.k));return function(R){if(R===1)R=j;else{var Z=K(R),W=L/Z[2];R=new Me(W,X[0]-Z[0]*W,X[1]-Z[1]*W)}A.zoom(null,R)}})}function O(g,w,y){return!y&&g.__zooming||new D(g,w)}function D(g,w){this.that=g,this.args=w,this.active=0,this.sourceEvent=null,this.extent=t.apply(g,w),this.taps=0}D.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,w){return this.mouse&&g!=="mouse"&&(this.mouse[1]=w.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=w.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=w.invert(this.touch1[0])),this.that.__zoom=w,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var w=ye(this.that).datum();u.call(g,this.that,new sd(g,{sourceEvent:this.sourceEvent,target:m,type:g,transform:this.that.__zoom,dispatch:u}),w)}};function _(g,...w){if(!e.apply(this,arguments))return;var y=O(this,w).event(g),M=this.__zoom,I=Math.max(i[0],Math.min(i[1],M.k*Math.pow(2,o.apply(this,arguments)))),T=Ee(g);if(y.wheel)(y.mouse[0][0]!==T[0]||y.mouse[0][1]!==T[1])&&(y.mouse[1]=M.invert(y.mouse[0]=T)),clearTimeout(y.wheel);else{if(M.k===I)return;y.mouse=[T,M.invert(T)],nn(this),y.start()}bt(g),y.wheel=setTimeout(A,p),y.zoom("mouse",n(C(N(M,I),y.mouse[0],y.mouse[1]),y.extent,a));function A(){y.wheel=null,y.end()}}function $(g,...w){if(d||!e.apply(this,arguments))return;var y=g.currentTarget,M=O(this,w,!0).event(g),I=ye(g.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",L,!0),T=Ee(g,y),A=g.clientX,k=g.clientY;ci(g.view),Dn(g),M.mouse=[T,this.__zoom.invert(T)],nn(this),M.start();function X(U){if(bt(U),!M.moved){var j=U.clientX-A,K=U.clientY-k;M.moved=j*j+K*K>x}M.event(U).zoom("mouse",n(C(M.that.__zoom,M.mouse[0]=Ee(U,y),M.mouse[1]),M.extent,a))}function L(U){I.on("mousemove.zoom mouseup.zoom",null),ui(U.view,M.moved),bt(U),M.event(U).end()}}function Y(g,...w){if(!!e.apply(this,arguments)){var y=this.__zoom,M=Ee(g.changedTouches?g.changedTouches[0]:g,this),I=y.invert(M),T=y.k*(g.shiftKey?.5:2),A=n(C(N(y,T),M,I),t.apply(this,w),a);bt(g),s>0?ye(this).transition().duration(s).call(b,A,M,g):ye(this).call(m.transform,A,M,g)}}function z(g,...w){if(!!e.apply(this,arguments)){var y=g.touches,M=y.length,I=O(this,w,g.changedTouches.length===M).event(g),T,A,k,X;for(Dn(g),A=0;A<M;++A)k=y[A],X=Ee(k,this),X=[X,this.__zoom.invert(X),k.identifier],I.touch0?!I.touch1&&I.touch0[2]!==X[2]&&(I.touch1=X,I.taps=0):(I.touch0=X,T=!0,I.taps=1+!!c);c&&(c=clearTimeout(c)),T&&(I.taps<2&&(f=X[0],c=setTimeout(function(){c=null},h)),nn(this),I.start())}}function H(g,...w){if(!!this.__zooming){var y=O(this,w).event(g),M=g.changedTouches,I=M.length,T,A,k,X;for(bt(g),T=0;T<I;++T)A=M[T],k=Ee(A,this),y.touch0&&y.touch0[2]===A.identifier?y.touch0[0]=k:y.touch1&&y.touch1[2]===A.identifier&&(y.touch1[0]=k);if(A=y.that.__zoom,y.touch1){var L=y.touch0[0],U=y.touch0[1],j=y.touch1[0],K=y.touch1[1],R=(R=j[0]-L[0])*R+(R=j[1]-L[1])*R,Z=(Z=K[0]-U[0])*Z+(Z=K[1]-U[1])*Z;A=N(A,Math.sqrt(R/Z)),k=[(L[0]+j[0])/2,(L[1]+j[1])/2],X=[(U[0]+K[0])/2,(U[1]+K[1])/2]}else if(y.touch0)k=y.touch0[0],X=y.touch0[1];else return;y.zoom("touch",n(C(A,k,X),y.extent,a))}}function P(g,...w){if(!!this.__zooming){var y=O(this,w).event(g),M=g.changedTouches,I=M.length,T,A;for(Dn(g),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),T=0;T<I;++T)A=M[T],y.touch0&&y.touch0[2]===A.identifier?delete y.touch0:y.touch1&&y.touch1[2]===A.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(A=Ee(A,this),Math.hypot(f[0]-A[0],f[1]-A[1])<S)){var k=ye(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return m.wheelDelta=function(g){return arguments.length?(o=typeof g=="function"?g:Vt(+g),m):o},m.filter=function(g){return arguments.length?(e=typeof g=="function"?g:Vt(!!g),m):e},m.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Vt(!!g),m):r},m.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Vt([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),m):t},m.scaleExtent=function(g){return arguments.length?(i[0]=+g[0],i[1]=+g[1],m):[i[0],i[1]]},m.translateExtent=function(g){return arguments.length?(a[0][0]=+g[0][0],a[1][0]=+g[1][0],a[0][1]=+g[0][1],a[1][1]=+g[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(g){return arguments.length?(n=g,m):n},m.duration=function(g){return arguments.length?(s=+g,m):s},m.interpolate=function(g){return arguments.length?(l=g,m):l},m.on=function(){var g=u.on.apply(u,arguments);return g===u?m:g},m.clickDistance=function(g){return arguments.length?(x=(g=+g)*g,m):Math.sqrt(x)},m.tapDistance=function(g){return arguments.length?(S=+g,m):S},m}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Ei(e,t){if(!!e){if(typeof e=="string")return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(e,t)}}function hd(e){if(Array.isArray(e))return e}function pd(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,i=!1,a,s;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(o.push(a.value),!(t&&o.length===t));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&n.return!=null&&n.return()}finally{if(i)throw s}}return o}}function vd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(e,t){return hd(e)||pd(e,t)||Ei(e,t)||vd()}var pt;(function(e){e.Strict="strict",e.Loose="loose"})(pt||(pt={}));var or;(function(e){e.Lines="lines",e.Dots="dots"})(or||(or={}));var dt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(dt||(dt={}));var Be;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Be||(Be={}));var fn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(fn||(fn={}));var V;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(V||(V={}));var vo=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},ft=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),o)},Oi=function(t,n){return{x:ft(t.x,n[0][0],n[1][0]),y:ft(t.y,n[0][1],n[1][1])}},Ni=function(t){var n,o;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((o=window)===null||o===void 0?void 0:o.document)},Pi=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},vt=function(t){var n=t.x,o=t.y,r=t.width,i=t.height;return{x:n,y:o,x2:n+r,y2:o+i}},_i=function(t){var n=t.x,o=t.y,r=t.x2,i=t.y2;return{x:n,y:o,width:r-n,height:i-o}},$g=function(t,n){return _i(Pi(vt(t),vt(n)))},Mi=function(t){return!isNaN(t)&&isFinite(t)},se=Symbol("internals");function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function ir(e,t){var n=e.find(function(u){return u.id===t.parentNode});if(n){var o=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(o>0||r>0||t.position.x<0||t.position.y<0){var i,a;if(n.style=Ot({},n.style)||{},n.style.width=(i=n.style.width)!==null&&i!==void 0?i:n.width,n.style.height=(a=n.style.height)!==null&&a!==void 0?a:n.height,o>0&&(n.style.width+=o),r>0&&(n.style.height+=r),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var l=Math.abs(t.position.y);n.position.y=n.position.y-l,n.style.height+=l,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Di(e,t){if(e.some(function(o){return o.type==="reset"}))return e.filter(function(o){return o.type==="reset"}).map(function(o){return o.item});var n=e.filter(function(o){return o.type==="add"}).map(function(o){return o.item});return t.reduce(function(o,r){var i=e.find(function(l){return l.id===r.id});if(i)switch(i.type){case"select":return o.push(Ot(Ot({},r),{},{selected:i.selected})),o;case"position":{var a=Ot({},r);return typeof i.position<"u"&&(a.position=i.position),typeof i.positionAbsolute<"u"&&(a.positionAbsolute=i.positionAbsolute),typeof i.dragging<"u"&&(a.dragging=i.dragging),a.expandParent&&ir(o,a),o.push(a),o}case"dimensions":{var s=Ot({},r);return typeof i.dimensions<"u"&&(s.width=i.dimensions.width,s.height=i.dimensions.height),s.expandParent&&ir(o,s),o.push(s),o}case"remove":return o}return o.push(r),o},n)}function md(e,t){return Di(e,t)}function yd(e,t){return Di(e,t)}var ze=function(t,n){return{id:t,type:"select",selected:n}};function st(e,t){return e.reduce(function(n,o){var r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(ze(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(ze(o.id,!1))),n},[])}function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ki(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ar(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var sr=function(t,n,o){var r=n.querySelectorAll(t);if(!r||!r.length)return null;var i=Array.from(r),a=n.getBoundingClientRect();return i.map(function(s){var l=s.getBoundingClientRect();return ki({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-a.left)/o,y:(l.top-a.top)/o},vo(s))})};function wt(e,t,n){return n===void 0?n:function(o){var r=t().nodeInternals.get(e);n(o,ki({},r))}}function Ti(e){var t=e.id,n=e.store,o=n.getState(),r=o.addSelectedNodes,i=o.unselectNodesAndEdges,a=o.multiSelectionActive,s=o.nodeInternals,l=s.get(t);n.setState({nodesSelectionActive:!1}),l.selected?l.selected&&a&&i({nodes:[l]}):r([t])}function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var bd=function(t){return"id"in t&&"source"in t&&"target"in t},Ii=function(t){var n=t.source,o=t.sourceHandle,r=t.target,i=t.targetHandle;return"reactflow__edge-".concat(n).concat(o||"","-").concat(r).concat(i||"")},eo=function(t,n){if(typeof t>"u")return"";if(typeof t=="string")return t;var o=n?"".concat(n,"__"):"";return"".concat(o).concat(Object.keys(t).sort().map(function(r){return"".concat(r,"=").concat(t[r])}).join("&"))},wd=function(t,n){return n.some(function(o){return o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)})},Re=function(t,n){if(!t.source||!t.target)return n;var o;return bd(t)?o=Ze({},t):o=Ze(Ze({},t),{},{id:Ii(t)}),wd(o,n)?n:n.concat(o)},Sd=function(t,n,o){if(!n.source||!n.target)return o;var r=o.find(function(a){return a.id===t.id});if(!r)return o;var i=Ze(Ze({},t),{},{id:Ii(n),source:n.source,target:n.target,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle});return o.filter(function(a){return a.id!==t.id}).concat(i)},Ai=function(t,n,o,r){var i=t.x,a=t.y,s=G(n,3),l=s[0],u=s[1],c=s[2],f=G(r,2),d=f[0],h=f[1],p={x:(i-l)/c,y:(a-u)/c};return o?{x:d*Math.round(p.x/d),y:h*Math.round(p.y/h)}:p},mo=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(o,r){var i=r.positionAbsolute,a=r.position,s=r.width,l=r.height;return Pi(o,vt({x:i?i.x:a.x,y:i?i.y:a.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _i(n)},Ri=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],r=G(o,3),i=r[0],a=r[1],s=r[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=vt({x:(n.x-i)/s,y:(n.y-a)/s,width:n.width/s,height:n.height/s}),f=[];return t.forEach(function(d){var h=d.positionAbsolute,p=d.width,x=d.height,S=d.selectable,m=S===void 0?!0:S;if(u&&!m)return!1;var N=vt(Ze(Ze({},h),{},{width:p||0,height:x||0})),C=Math.max(0,Math.min(c.x2,N.x2)-Math.max(c.x,N.x)),v=Math.max(0,Math.min(c.y2,N.y2)-Math.max(c.y,N.y)),b=Math.ceil(C*v),O=typeof p>"u"||typeof x>"u"||p===null||x===null,D=l&&b>0,_=(p||0)*(x||0),$=O||D||b>=_;$&&f.push(d)}),f},$i=function(t,n){var o=t.map(function(r){return r.id});return n.filter(function(r){return o.includes(r.source)||o.includes(r.target)})},zi=function(t,n,o,r,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+a)),l=o/(t.height*(1+a)),u=Math.min(s,l),c=ft(u,r,i),f=t.x+t.width/2,d=t.y+t.height/2,h=n/2-f*c,p=o/2-d*c;return[h,p,c]},Ue=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Bi(e,t,n,o){var r,i,a,s,l,u,c,f,d,h,p,x;if(!e.parentNode)return o;var S=t.get(e.parentNode);return Bi(S,t,n,{x:((r=o.x)!==null&&r!==void 0?r:0)+((i=(a=S.position)===null||a===void 0?void 0:a.x)!==null&&i!==void 0?i:0),y:((s=o.y)!==null&&s!==void 0?s:0)+((l=(u=S.position)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0),z:((c=(f=S[se])===null||f===void 0?void 0:f.z)!==null&&c!==void 0?c:0)>((d=o.z)!==null&&d!==void 0?d:0)?(h=(p=S[se])===null||p===void 0?void 0:p.z)!==null&&h!==void 0?h:0:(x=o.z)!==null&&x!==void 0?x:0})}function kn(e,t){var n=new Map,o={};return e.forEach(function(r){var i,a=Mi(r.zIndex)?r.zIndex:r.selected?1e3:0,s=t.get(r.id),l=lt(lt({width:s==null?void 0:s.width,height:s==null?void 0:s.height},r),{},{positionAbsolute:{x:r.position.x,y:r.position.y}});r.parentNode&&(l.parentNode=r.parentNode,o[r.parentNode]=!0),Object.defineProperty(l,se,{enumerable:!1,value:{handleBounds:s==null||(i=s[se])===null||i===void 0?void 0:i.handleBounds,z:a}}),n.set(r.id,l)}),n.forEach(function(r){if(r.parentNode&&!n.has(r.parentNode))throw new Error("Parent node ".concat(r.parentNode," not found"));if(r.parentNode||o[r.id]){var i,a,s=Bi(r,n,o,lt(lt({},r.position),{},{z:(i=(a=r[se])===null||a===void 0?void 0:a.z)!==null&&i!==void 0?i:0})),l=s.x,u=s.y,c=s.z;r.positionAbsolute={x:l,y:u},r[se].z=c,o[r.id]&&(r[se].isParent=!0)}}),n}function Hi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),o=n.nodeInternals,r=n.width,i=n.height,a=n.minZoom,s=n.maxZoom,l=n.d3Zoom,u=n.d3Selection,c=n.fitViewOnInitDone,f=n.fitViewOnInit;if((t.initial&&!c&&f||!t.initial)&&l&&u){var d=Array.from(o.values()).filter(function(_){return t.includeHiddenNodes?_.width&&_.height:!_.hidden}),h=d.every(function(_){return _.width&&_.height});if(d.length>0&&h){var p,x,S,m=mo(d),N=zi(m,r,i,(p=t.minZoom)!==null&&p!==void 0?p:a,(x=t.maxZoom)!==null&&x!==void 0?x:s,(S=t.padding)!==null&&S!==void 0?S:.1),C=G(N,3),v=C[0],b=C[1],O=C[2],D=Fe.translate(v,b).scale(O);return typeof t.duration=="number"&&t.duration>0?l.transform(Ue(u,t.duration),D):l.transform(u,D),!0}}return!1}function xd(e,t){return e.forEach(function(n){var o=t.get(n.id);if(o){var r;t.set(o.id,lt(lt({},o),{},(r={},J(r,se,o[se]),J(r,"selected",n.selected),r)))}}),new Map(t)}function Cd(e,t){return t.map(function(n){var o=e.find(function(r){return r.id===n.id});return o&&(n.selected=o.selected),n})}function Ft(e){var t=e.changedNodes,n=e.changedEdges,o=e.get,r=e.set,i=o(),a=i.nodeInternals,s=i.edges,l=i.onNodesChange,u=i.onEdgesChange,c=i.hasDefaultNodes,f=i.hasDefaultEdges;t!=null&&t.length&&(c&&r({nodeInternals:xd(t,a)}),l==null||l(t)),n!=null&&n.length&&(f&&r({edges:Cd(n,s)}),u==null||u(n))}var to=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ur={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:to,nodeExtent:to,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:pt.Strict,domNode:null,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.17",connectionStartHandle:null,connectOnClick:!0};function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var yo=Rs(),Li=yo.Provider,ie=yo.useStore,de=yo.useStoreApi,ji=function(){return As(function(t,n){return Ce(Ce({},ur),{},{setNodes:function(r){t({nodeInternals:kn(r,n().nodeInternals)})},setEdges:function(r){var i=n(),a=i.defaultEdgeOptions,s=a===void 0?{}:a;t({edges:r.map(function(l){return Ce(Ce({},s),l)})})},setDefaultNodesAndEdges:function(r,i){var a=typeof r<"u",s=typeof i<"u",l=a?kn(r,new Map):new Map,u=s?i:[];t({nodeInternals:l,edges:u,hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:function(r){var i=n(),a=i.onNodesChange,s=i.nodeInternals,l=i.fitViewOnInit,u=i.fitViewOnInitDone,c=i.fitViewOnInitOptions,f=i.domNode,d=f==null?void 0:f.querySelector(".react-flow__viewport");if(!!d){var h=window.getComputedStyle(d),p=new window.DOMMatrixReadOnly(h.transform),x=p.m22,S=r.reduce(function(N,C){var v=s.get(C.id);if(v){var b=vo(C.nodeElement),O=!!(b.width&&b.height&&(v.width!==b.width||v.height!==b.height||C.forceUpdate));O&&(s.set(v.id,Ce(Ce({},v),{},J({},se,Ce(Ce({},v[se]),{},{handleBounds:{source:sr(".source",C.nodeElement,x),target:sr(".target",C.nodeElement,x)}})),b)),N.push({id:v.id,type:"dimensions",dimensions:b}))}return N},[]),m=u||l&&!u&&Hi(n,Ce({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:m}),(S==null?void 0:S.length)>0&&(a==null||a(S))}},updateNodePositions:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),l=s.onNodesChange,u=s.nodeInternals,c=s.hasDefaultNodes;if(c||l){var f=r.map(function(p){var x={id:p.id,type:"position",dragging:a};return i&&(x.positionAbsolute=p.positionAbsolute,x.position=p.position),x});if(f!=null&&f.length){if(c){var d=md(f,Array.from(u.values())),h=kn(d,u);t({nodeInternals:h})}l==null||l(f)}}},addSelectedNodes:function(r){var i=n(),a=i.multiSelectionActive,s=i.nodeInternals,l=i.edges,u,c=null;a?u=r.map(function(f){return ze(f,!0)}):(u=st(Array.from(s.values()),r),c=st(l,[])),Ft({changedNodes:u,changedEdges:c,get:n,set:t})},addSelectedEdges:function(r){var i=n(),a=i.multiSelectionActive,s=i.edges,l=i.nodeInternals,u,c=null;a?u=r.map(function(f){return ze(f,!0)}):(u=st(s,r),c=st(Array.from(l.values()),[])),Ft({changedNodes:c,changedEdges:u,get:n,set:t})},unselectNodesAndEdges:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.nodes,a=r.edges,s=n(),l=s.nodeInternals,u=s.edges,c=i||Array.from(l.values()),f=a||u,d=c.map(function(p){return p.selected=!1,ze(p.id,!1)}),h=f.map(function(p){return ze(p.id,!1)});Ft({changedNodes:d,changedEdges:h,get:n,set:t})},setMinZoom:function(r){var i=n(),a=i.d3Zoom,s=i.maxZoom;a==null||a.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:function(r){var i=n(),a=i.d3Zoom,s=i.minZoom;a==null||a.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:function(r){var i=n(),a=i.d3Zoom;a==null||a.translateExtent(r),t({translateExtent:r})},resetSelectedElements:function(){var r=n(),i=r.nodeInternals,a=r.edges,s=Array.from(i.values()),l=s.filter(function(c){return c.selected}).map(function(c){return ze(c.id,!1)}),u=a.filter(function(c){return c.selected}).map(function(c){return ze(c.id,!1)});Ft({changedNodes:l,changedEdges:u,get:n,set:t})},setNodeExtent:function(r){var i=n(),a=i.nodeInternals;a.forEach(function(s){s.positionAbsolute=Oi(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(a)})},reset:function(){return t(Ce({},ur))}})})};function me(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=me(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function ve(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!Object.is(e[n[o]],t[n[o]]))return!1;return!0}function Ed(e){if(Array.isArray(e))return Jn(e)}function Od(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ke(e){return Ed(e)||Od(e)||Ei(e)||Nd()}var Pd={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},viewportInitialized:!1},_d=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},Md=function(){var t=de(),n=ie(_d,ve),o=n.d3Zoom,r=n.d3Selection,i=E.exports.useMemo(function(){return r&&o?{zoomIn:function(s){return o.scaleBy(Ue(r,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return o.scaleBy(Ue(r,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return o.scaleTo(Ue(r,l==null?void 0:l.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,l){var u,c,f,d=G(t.getState().transform,3),h=d[0],p=d[1],x=d[2],S=Fe.translate((u=s.x)!==null&&u!==void 0?u:h,(c=s.y)!==null&&c!==void 0?c:p).scale((f=s.zoom)!==null&&f!==void 0?f:x);o.transform(Ue(r,l==null?void 0:l.duration),S)},getViewport:function(){var s=G(t.getState().transform,3),l=s[0],u=s[1],c=s[2];return{x:l,y:u,zoom:c}},fitView:function(s){return Hi(t.getState,s)},setCenter:function(s,l,u){var c=t.getState(),f=c.width,d=c.height,h=c.maxZoom,p=typeof(u==null?void 0:u.zoom)<"u"?u.zoom:h,x=f/2-s*p,S=d/2-l*p,m=Fe.translate(x,S).scale(p);o.transform(Ue(r,u==null?void 0:u.duration),m)},fitBounds:function(s,l){var u,c=t.getState(),f=c.width,d=c.height,h=c.minZoom,p=c.maxZoom,x=zi(s,f,d,h,p,(u=l==null?void 0:l.padding)!==null&&u!==void 0?u:.1),S=G(x,3),m=S[0],N=S[1],C=S[2],v=Fe.translate(m,N).scale(C);o.transform(Ue(r,l==null?void 0:l.duration),v)},project:function(s){var l=t.getState(),u=l.transform,c=l.snapToGrid,f=l.snapGrid;return Ai(s,u,c,f)},viewportInitialized:!0}:Pd},[o,r]);return i};function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Yi(){var e=Md(),t=de(),n=E.exports.useCallback(function(){var f=t.getState(),d=f.nodeInternals,h=Array.from(d.values());return h.map(function(p){return rt({},p)})},[]),o=E.exports.useCallback(function(f){var d=t.getState(),h=d.nodeInternals;return h.get(f)},[]),r=E.exports.useCallback(function(){var f=t.getState(),d=f.edges,h=d===void 0?[]:d;return h.map(function(p){return rt({},p)})},[]),i=E.exports.useCallback(function(f){var d=t.getState(),h=d.edges,p=h===void 0?[]:h;return p.find(function(x){return x.id===f})},[]),a=E.exports.useCallback(function(f){var d=t.getState(),h=d.nodeInternals,p=d.setNodes,x=d.hasDefaultNodes,S=d.onNodesChange,m=Array.from(h.values()),N=typeof f=="function"?f(m):f;if(x)p(N);else if(S){var C=N.length===0?m.map(function(v){return{type:"remove",id:v.id}}):N.map(function(v){return{item:v,type:"reset"}});S(C)}},[]),s=E.exports.useCallback(function(f){var d=t.getState(),h=d.edges,p=h===void 0?[]:h,x=d.setEdges,S=d.hasDefaultEdges,m=d.onEdgesChange,N=typeof f=="function"?f(p):f;if(S)x(N);else if(m){var C=N.length===0?p.map(function(v){return{type:"remove",id:v.id}}):N.map(function(v){return{item:v,type:"reset"}});m(C)}},[]),l=E.exports.useCallback(function(f){var d=Array.isArray(f)?f:[f],h=t.getState(),p=h.nodeInternals,x=h.setNodes,S=h.hasDefaultNodes,m=h.onNodesChange;if(S){var N=Array.from(p.values()),C=[].concat(N,Ke(d));x(C)}else if(m){var v=d.map(function(b){return{item:b,type:"add"}});m(v)}},[]),u=E.exports.useCallback(function(f){var d=Array.isArray(f)?f:[f],h=t.getState(),p=h.edges,x=p===void 0?[]:p,S=h.setEdges,m=h.hasDefaultEdges,N=h.onEdgesChange;if(m)S([].concat(Ke(x),Ke(d)));else if(N){var C=d.map(function(v){return{item:v,type:"add"}});N(C)}},[]),c=E.exports.useCallback(function(){var f=t.getState(),d=f.nodeInternals,h=f.edges,p=h===void 0?[]:h,x=f.transform,S=Array.from(d.values()),m=G(x,3),N=m[0],C=m[1],v=m[2];return{nodes:S.map(function(b){return rt({},b)}),edges:p.map(function(b){return rt({},b)}),viewport:{x:N,y:C,zoom:v}}},[]);return E.exports.useMemo(function(){return rt(rt({},e),{},{getNodes:n,getNode:o,getEdges:r,getEdge:i,setNodes:a,setEdges:s,addNodes:l,addEdges:u,toObject:c})},[e,n,o,r,i,a,s,l,u,c])}function Dd(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,i;for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function wn(e,t){if(e==null)return{};var n=Dd(e,t),o,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(n[o]=e[o]))}return n}function kd(){return B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:B("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Td(){return B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:B("path",{d:"M0 0h32v4.2H0z"})})}function Id(){return B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:B("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Ad(){return B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:B("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Rd(){return B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:B("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}var $d=["children","className"];function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function zd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Zt=function(t){var n=t.children,o=t.className,r=wn(t,$d);return B("button",{...zd({type:"button",className:me(["react-flow__controls-button",o])},r),children:n})},Bd=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},Ui=function(t){var n=t.style,o=t.showZoom,r=o===void 0?!0:o,i=t.showFitView,a=i===void 0?!0:i,s=t.showInteractive,l=s===void 0?!0:s,u=t.fitViewOptions,c=t.onZoomIn,f=t.onZoomOut,d=t.onFitView,h=t.onInteractiveChange,p=t.className,x=t.children,S=de(),m=E.exports.useState(!1),N=G(m,2),C=N[0],v=N[1],b=ie(Bd),O=Yi(),D=O.zoomIn,_=O.zoomOut,$=O.fitView;if(E.exports.useEffect(function(){v(!0)},[]),!C)return null;var Y=function(){D==null||D(),c==null||c()},z=function(){_==null||_(),f==null||f()},H=function(){$==null||$(u),d==null||d()},P=function(){S.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),h==null||h(!b)};return ce("div",{className:me(["react-flow__controls",p]),style:n,children:[r&&ce(Ge,{children:[B(Zt,{onClick:Y,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:B(kd,{})}),B(Zt,{onClick:z,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:B(Td,{})})]}),a&&B(Zt,{className:"react-flow__controls-fitview",onClick:H,title:"fit view","aria-label":"fit view",children:B(Id,{})}),l&&B(Zt,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:b?B(Rd,{}):B(Ad,{})}),x]})};Ui.displayName="Controls";var zg=E.exports.memo(Ui),Hd=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function Ld(e){var t=e.proOptions,n=e.position,o=n===void 0?"bottom-right":n;if(t!=null&&t.account&&Hd.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var r="".concat(o).split("-");return B("div",{className:me(["react-flow__attribution"].concat(Ke(r))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing",children:B("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer",children:"React Flow"})})}var jd=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Ud=function(t){var n=t.x,o=t.y,r=t.label,i=t.labelStyle,a=i===void 0?{}:i,s=t.labelShowBg,l=s===void 0?!0:s,u=t.labelBgStyle,c=u===void 0?{}:u,f=t.labelBgPadding,d=f===void 0?[2,4]:f,h=t.labelBgBorderRadius,p=h===void 0?2:h,x=t.children,S=t.className,m=wn(t,jd),N=E.exports.useRef(null),C=E.exports.useState({x:0,y:0,width:0,height:0}),v=G(C,2),b=v[0],O=v[1],D=me(["react-flow__edge-textwrapper",S]);return E.exports.useEffect(function(){if(N.current){var _=N.current.getBBox();O({x:_.x,y:_.y,width:_.width,height:_.height})}},[r]),typeof r>"u"||!r?null:ce("g",{...Yd({transform:"translate(".concat(n-b.width/2," ").concat(o-b.height/2,")"),className:D},m),children:[l&&B("rect",{width:b.width+2*d[0],x:-d[0],y:-d[1],height:b.height+2*d[1],className:"react-flow__edge-textbg",style:c,rx:p,ry:p}),B("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:N,style:a,children:r}),x]})},Xd=E.exports.memo(Ud),Sn=function(e){var t=e.path,n=e.centerX,o=e.centerY,r=e.label,i=e.labelStyle,a=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,u=e.labelBgBorderRadius,c=e.style,f=e.markerEnd,d=e.markerStart,h=r?B(Xd,{x:n,y:o,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u}):null;return ce(Ge,{children:[B("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:f,markerStart:d}),h]})};function gn(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,i=e.y2,a,s;switch(t){case V.Left:case V.Right:a=.5*(n+r),s=o;break;case V.Top:case V.Bottom:a=n,s=.5*(o+i);break}return[a,s]}function Xi(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?V.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?V.Top:s,u=gn({pos:r,x1:t,y1:n,x2:i,y2:a}),c=G(u,2),f=c[0],d=c[1],h=gn({pos:l,x1:i,y1:a,x2:t,y2:n}),p=G(h,2),x=p[0],S=p[1];return"M".concat(t,",").concat(n," C").concat(f,",").concat(d," ").concat(x,",").concat(S," ").concat(i,",").concat(a)}function Vd(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?V.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?V.Top:s,u=gn({pos:r,x1:t,y1:n,x2:i,y2:a}),c=G(u,2),f=c[0],d=c[1],h=gn({pos:l,x1:i,y1:a,x2:t,y2:n}),p=G(h,2),x=p[0],S=p[1],m=t*.125+f*.375+x*.375+i*.125,N=n*.125+d*.375+S*.375+a*.125,C=Math.abs(m-t),v=Math.abs(N-n);return[m,N,C,v]}var Vi=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.sourcePosition,a=i===void 0?V.Bottom:i,s=e.targetPosition,l=s===void 0?V.Top:s,u=e.label,c=e.labelStyle,f=e.labelShowBg,d=e.labelBgStyle,h=e.labelBgPadding,p=e.labelBgBorderRadius,x=e.style,S=e.markerEnd,m=e.markerStart,N={sourceX:t,sourceY:n,sourcePosition:a,targetX:o,targetY:r,targetPosition:l},C=Xi(N),v=Vd(N),b=G(v,2),O=b[0],D=b[1];return B(Sn,{path:C,centerX:O,centerY:D,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:x,markerEnd:S,markerStart:m})});function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var vr=[V.Left,V.Right],Fi=function(t){var n=t.sourceX,o=t.sourceY,r=t.targetX,i=t.targetY,a=t.sourcePosition,s=a===void 0?V.Bottom:a,l=t.targetPosition,u=l===void 0?V.Top:l,c=vr.includes(s),f=vr.includes(u),d=c&&!f||f&&!c;if(d){var h=c?Math.abs(r-n):0,p=n>r?n-h:n+h,x=c?0:Math.abs(i-o),S=o<i?o+x:o-x;return[p,S,h,x]}var m=Math.abs(r-n)/2,N=r<n?r+m:r-m,C=Math.abs(i-o)/2,v=i<o?i+C:i-C;return[N,v,m,C]};function St(e,t,n){return n===void 0?n:function(o){var r=t().edges.find(function(i){return i.id===e});n(o,Fd({},r))}}var Tn=function(t,n,o){return"L ".concat(t,",").concat(n-o,"Q ").concat(t,",").concat(n," ").concat(t+o,",").concat(n)},In=function(t,n,o){return"L ".concat(t+o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-o)},An=function(t,n,o){return"L ".concat(t,",").concat(n-o,"Q ").concat(t,",").concat(n," ").concat(t-o,",").concat(n)},Rn=function(t,n,o){return"L ".concat(t-o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-o)},$n=function(t,n,o){return"L ".concat(t+o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+o)},zn=function(t,n,o){return"L ".concat(t,",").concat(n+o,"Q ").concat(t,",").concat(n," ").concat(t+o,",").concat(n)},Bn=function(t,n,o){return"L ".concat(t,",").concat(n+o,"Q ").concat(t,",").concat(n," ").concat(t-o,",").concat(n)},Hn=function(t,n,o){return"L ".concat(t-o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+o)};function no(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?V.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?V.Top:s,u=e.borderRadius,c=u===void 0?5:u,f=e.centerX,d=e.centerY,h=Fi({sourceX:t,sourceY:n,targetX:i,targetY:a}),p=G(h,4),x=p[0],S=p[1],m=p[2],N=p[3],C=Math.min(c,Math.abs(i-t)),v=Math.min(c,Math.abs(a-n)),b=Math.min(C,v,m,N),O=[V.Left,V.Right],D=typeof f<"u"?f:x,_=typeof d<"u"?d:S,$=null,Y=null;return t<=i?($=n<=a?Tn(t,_,b):zn(t,_,b),Y=n<=a?Hn(i,_,b):Rn(i,_,b)):($=n<a?An(t,_,b):Bn(t,_,b),Y=n<a?$n(i,_,b):In(i,_,b)),O.includes(r)&&O.includes(l)?t<=i?($=n<=a?Hn(D,n,b):Rn(D,n,b),Y=n<=a?Tn(D,a,b):zn(D,a,b)):(r===V.Right&&l===V.Left||r===V.Left&&l===V.Right||r===V.Left&&l===V.Left)&&($=n<=a?$n(D,n,b):In(D,n,b),Y=n<=a?An(D,a,b):Bn(D,a,b)):O.includes(r)&&!O.includes(l)?(t<=i?$=n<=a?Hn(i,n,b):Rn(i,n,b):$=n<=a?$n(i,n,b):In(i,n,b),Y=""):!O.includes(r)&&O.includes(l)&&(t<=i?$=n<=a?Tn(t,a,b):zn(t,a,b):$=n<=a?An(t,a,b):Bn(t,a,b),Y=""),"M ".concat(t,",").concat(n).concat($).concat(Y,"L ").concat(i,",").concat(a)}var bo=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.label,a=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,f=e.style,d=e.sourcePosition,h=d===void 0?V.Bottom:d,p=e.targetPosition,x=p===void 0?V.Top:p,S=e.markerEnd,m=e.markerStart,N=e.borderRadius,C=N===void 0?5:N,v=Fi({sourceX:t,sourceY:n,targetX:o,targetY:r,sourcePosition:h,targetPosition:x}),b=G(v,2),O=b[0],D=b[1],_=no({sourceX:t,sourceY:n,sourcePosition:h,targetX:o,targetY:r,targetPosition:x,borderRadius:C});return B(Sn,{path:_,centerX:O,centerY:D,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:S,markerStart:m})});function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Zi=E.exports.memo(function(e){return B(bo,{...yr(yr({},e),{},{borderRadius:0})})}),Ki=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.label,a=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,f=e.style,d=e.markerEnd,h=e.markerStart,p=Math.abs(r-n)/2,x=r<n?r+p:r-p,S=Math.abs(o-t)/2,m=o<t?o+S:o-S,N="M ".concat(t,",").concat(n,"L ").concat(o,",").concat(r);return B(Sn,{path:N,centerX:m,centerY:x,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:d,markerStart:h})});function Kt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function hn(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,i=e.y2,a=e.c,s,l;switch(t){case V.Left:s=n-Kt(n-r,a),l=o;break;case V.Right:s=n+Kt(r-n,a),l=o;break;case V.Top:s=n,l=o-Kt(o-i,a);break;case V.Bottom:s=n,l=o+Kt(i-o,a);break}return[s,l]}function Wi(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?V.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?V.Top:s,u=e.curvature,c=u===void 0?.25:u,f=hn({pos:r,x1:t,y1:n,x2:i,y2:a,c}),d=G(f,2),h=d[0],p=d[1],x=hn({pos:l,x1:i,y1:a,x2:t,y2:n,c}),S=G(x,2),m=S[0],N=S[1];return"M".concat(t,",").concat(n," C").concat(h,",").concat(p," ").concat(m,",").concat(N," ").concat(i,",").concat(a)}function Zd(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?V.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?V.Top:s,u=e.curvature,c=u===void 0?.25:u,f=hn({pos:r,x1:t,y1:n,x2:i,y2:a,c}),d=G(f,2),h=d[0],p=d[1],x=hn({pos:l,x1:i,y1:a,x2:t,y2:n,c}),S=G(x,2),m=S[0],N=S[1],C=t*.125+h*.375+m*.375+i*.125,v=n*.125+p*.375+N*.375+a*.125,b=Math.abs(C-t),O=Math.abs(v-n);return[C,v,b,O]}var oo=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.sourcePosition,a=i===void 0?V.Bottom:i,s=e.targetPosition,l=s===void 0?V.Top:s,u=e.label,c=e.labelStyle,f=e.labelShowBg,d=e.labelBgStyle,h=e.labelBgPadding,p=e.labelBgBorderRadius,x=e.style,S=e.markerEnd,m=e.markerStart,N=e.curvature,C={sourceX:t,sourceY:n,sourcePosition:a,targetX:o,targetY:r,targetPosition:l,curvature:N},v=Wi(C),b=Zd(C),O=G(b,2),D=O[0],_=O[1];return B(Sn,{path:v,centerX:D,centerY:_,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:x,markerEnd:S,markerStart:m})}),wo=E.exports.createContext(null),Kd=wo.Provider;wo.Consumer;function ro(e,t,n,o,r,i,a){var s=a.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,u=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||u)){c.isHoveringHandle=!0;var f=s.getAttribute("data-nodeid"),d=s.getAttribute("data-handleid"),h=n?{source:f,sourceHandle:d,target:o,targetHandle:r}:{source:o,sourceHandle:r,target:f,targetHandle:d};c.connection=h;var p=t===pt.Strict?n&&u||!n&&l:!0;p&&(c.isValid=i(h))}return c}function Ln(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Gi(e){var t=e.event,n=e.handleId,o=e.nodeId,r=e.onConnect,i=e.isTarget,a=e.getState,s=e.setState,l=e.isValidConnection,u=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,f=t.target.closest(".react-flow"),d=Ni(t.target);if(!d)return;var h=d.elementFromPoint(t.clientX,t.clientY),p=h==null?void 0:h.classList.contains("target"),x=h==null?void 0:h.classList.contains("source");if(!f||!p&&!x&&!u)return;var S=a(),m=S.onConnectStart,N=S.connectionMode,C=u||(p?"target":"source"),v=f.getBoundingClientRect(),b;s({connectionPosition:{x:t.clientX-v.left,y:t.clientY-v.top},connectionNodeId:o,connectionHandleId:n,connectionHandleType:C}),m==null||m(t,{nodeId:o,handleId:n,handleType:C});function O(_){s({connectionPosition:{x:_.clientX-v.left,y:_.clientY-v.top}});var $=ro(_,N,i,o,n,l,d),Y=$.connection,z=$.elementBelow,H=$.isValid,P=$.isHoveringHandle;if(!P)return Ln(b);Y.source!==Y.target&&z&&(Ln(b),b=z,z.classList.add("react-flow__handle-connecting"),z.classList.toggle("react-flow__handle-valid",H))}function D(_){var $=a(),Y=$.onConnectStop,z=$.onConnectEnd,H=ro(_,N,i,o,n,l,d),P=H.connection,g=H.isValid;Y==null||Y(_),g&&(r==null||r(P)),z==null||z(_),u&&c&&c(_),Ln(b),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),d.removeEventListener("mousemove",O),d.removeEventListener("mouseup",D)}d.addEventListener("mousemove",O),d.addEventListener("mouseup",D)}var Wd=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?br(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Gd=function(){return!0},qd=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},qi=E.exports.forwardRef(function(e,t){var n=e.type,o=n===void 0?"source":n,r=e.position,i=r===void 0?V.Top:r,a=e.isValidConnection,s=a===void 0?Gd:a,l=e.isConnectable,u=l===void 0?!0:l,c=e.id,f=e.onConnect,d=e.children,h=e.className,p=e.onMouseDown,x=wn(e,Wd),S=de(),m=E.exports.useContext(wo),N=ie(qd,ve),C=N.connectionStartHandle,v=N.connectOnClick,b=c||null,O=o==="target",D=function(z){var H=S.getState(),P=H.defaultEdgeOptions,g=H.onConnect,w=H.hasDefaultEdges,y=jn(jn({},P),z);if(w){var M=S.getState(),I=M.edges;S.setState({edges:Re(y,I)})}g==null||g(y),f==null||f(y)},_=function(z){z.button===0&&Gi({event:z,handleId:b,nodeId:m,onConnect:D,isTarget:O,getState:S.getState,setState:S.setState,isValidConnection:s}),p==null||p(z)},$=function(z){var H=S.getState(),P=H.onClickConnectStart,g=H.onClickConnectStop,w=H.onClickConnectEnd,y=H.connectionMode;if(!C){P==null||P(z,{nodeId:m,handleId:b,handleType:o}),S.setState({connectionStartHandle:{nodeId:m,type:o,handleId:b}});return}var M=Ni(z.target),I=ro(z,y,C.type==="target",C.nodeId,C.handleId||null,s,M),T=I.connection,A=I.isValid;g==null||g(z),A&&D(T),w==null||w(z),S.setState({connectionStartHandle:null})};return B("div",{...jn({"data-handleid":b,"data-nodeid":m,"data-handlepos":i,className:me(["react-flow__handle","react-flow__handle-".concat(i),"nodrag",h,{source:!O,target:O,connectable:u,connecting:(C==null?void 0:C.nodeId)===m&&(C==null?void 0:C.handleId)===b&&(C==null?void 0:C.type)===o}]),onMouseDown:_,onClick:v?$:void 0,ref:t},x),children:d})});qi.displayName="Handle";var pn=E.exports.memo(qi),Qi=function(t){var n=t.data,o=t.isConnectable,r=t.targetPosition,i=r===void 0?V.Top:r,a=t.sourcePosition,s=a===void 0?V.Bottom:a;return ce(Ge,{children:[B(pn,{type:"target",position:i,isConnectable:o}),n==null?void 0:n.label,B(pn,{type:"source",position:s,isConnectable:o})]})};Qi.displayName="DefaultNode";var io=E.exports.memo(Qi),Ji=function(t){var n=t.data,o=t.isConnectable,r=t.sourcePosition,i=r===void 0?V.Bottom:r;return ce(Ge,{children:[n==null?void 0:n.label,B(pn,{type:"source",position:i,isConnectable:o})]})};Ji.displayName="InputNode";var ea=E.exports.memo(Ji),ta=function(t){var n=t.data,o=t.isConnectable,r=t.targetPosition,i=r===void 0?V.Top:r;return ce(Ge,{children:[B(pn,{type:"target",position:i,isConnectable:o}),n==null?void 0:n.label]})};ta.displayName="OutputNode";var na=E.exports.memo(ta),Qd=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},Jd=function(t,n){var o=t.selectedNodes.map(function(s){return s.id}),r=n.selectedNodes.map(function(s){return s.id}),i=t.selectedEdges.map(function(s){return s.id}),a=n.selectedEdges.map(function(s){return s.id});return ve(o,r)&&ve(i,a)};function ef(e){var t=e.onSelectionChange,n=ie(Qd,Jd),o=n.selectedNodes,r=n.selectedEdges;return E.exports.useEffect(function(){t({nodes:o,edges:r})},[o,r]),null}var tf=E.exports.memo(ef),nf=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function Ae(e,t){E.exports.useEffect(function(){typeof e<"u"&&t(e)},[e])}function te(e,t,n){E.exports.useEffect(function(){typeof t<"u"&&n(J({},e,t))},[t])}var of=function(t){var n=t.nodes,o=t.edges,r=t.defaultNodes,i=t.defaultEdges,a=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,u=t.onConnectEnd,c=t.onClickConnectStart,f=t.onClickConnectStop,d=t.onClickConnectEnd,h=t.nodesDraggable,p=t.nodesConnectable,x=t.minZoom,S=t.maxZoom,m=t.nodeExtent,N=t.onNodesChange,C=t.onEdgesChange,v=t.elementsSelectable,b=t.connectionMode,O=t.snapGrid,D=t.snapToGrid,_=t.translateExtent,$=t.connectOnClick,Y=t.defaultEdgeOptions,z=t.fitView,H=t.fitViewOptions,P=t.onNodesDelete,g=t.onEdgesDelete,w=t.onNodeDrag,y=t.onNodeDragStart,M=t.onNodeDragStop,I=t.onSelectionDrag,T=t.onSelectionDragStart,A=t.onSelectionDragStop,k=ie(nf,ve),X=k.setNodes,L=k.setEdges,U=k.setDefaultNodesAndEdges,j=k.setMinZoom,K=k.setMaxZoom,R=k.setTranslateExtent,Z=k.setNodeExtent,W=k.reset,F=de();return E.exports.useEffect(function(){return U(r,i),function(){W()}},[]),te("defaultEdgeOptions",Y,F.setState),te("connectionMode",b,F.setState),te("onConnect",a,F.setState),te("onConnectStart",s,F.setState),te("onConnectStop",l,F.setState),te("onConnectEnd",u,F.setState),te("onClickConnectStart",c,F.setState),te("onClickConnectStop",f,F.setState),te("onClickConnectEnd",d,F.setState),te("nodesDraggable",h,F.setState),te("nodesConnectable",p,F.setState),te("elementsSelectable",v,F.setState),te("snapToGrid",D,F.setState),te("snapGrid",O,F.setState),te("onNodesChange",N,F.setState),te("onEdgesChange",C,F.setState),te("connectOnClick",$,F.setState),te("fitViewOnInit",z,F.setState),te("fitViewOnInitOptions",H,F.setState),te("onNodesDelete",P,F.setState),te("onEdgesDelete",g,F.setState),te("onNodeDrag",w,F.setState),te("onNodeDragStart",y,F.setState),te("onNodeDragStop",M,F.setState),te("onSelectionDrag",I,F.setState),te("onSelectionDragStart",T,F.setState),te("onSelectionDragStop",A,F.setState),Ae(n,X),Ae(o,L),Ae(r,X),Ae(i,L),Ae(x,j),Ae(S,K),Ae(_,R),Ae(m,Z),null},rf=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",af=rf,sf=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",lf=sf,cf=function(t,n,o){return o===V.Left?t-n:o===V.Right?t+n:t},uf=function(t,n,o){return o===V.Top?t-n:o===V.Bottom?t+n:t},wr=function(t){var n=t.className,o=t.position,r=t.centerX,i=t.centerY,a=t.radius,s=a===void 0?10:a;return B("circle",{className:me(["react-flow__edgeupdater",n]),cx:cf(r,s,o),cy:uf(i,s,o),r:s,stroke:"transparent",fill:"transparent"})},it=function(e){var t=function(o){var r=o.id,i=o.className,a=o.type,s=o.data,l=o.onClick,u=o.onEdgeDoubleClick,c=o.selected,f=o.animated,d=o.label,h=o.labelStyle,p=o.labelShowBg,x=o.labelBgStyle,S=o.labelBgPadding,m=o.labelBgBorderRadius,N=o.style,C=o.source,v=o.target,b=o.sourceX,O=o.sourceY,D=o.targetX,_=o.targetY,$=o.sourcePosition,Y=o.targetPosition,z=o.elementsSelectable,H=o.hidden,P=o.sourceHandleId,g=o.targetHandleId,w=o.onContextMenu,y=o.onMouseEnter,M=o.onMouseMove,I=o.onMouseLeave,T=o.edgeUpdaterRadius,A=o.onEdgeUpdate,k=o.onEdgeUpdateStart,X=o.onEdgeUpdateEnd,L=o.markerEnd,U=o.markerStart,j=o.rfId,K=E.exports.useState(!1),R=G(K,2),Z=R[0],W=R[1],F=de(),re=function(Se){var xe=F.getState(),et=xe.edges,tt=xe.addSelectedEdges,Te=et.find(function(nt){return nt.id===r});z&&(F.setState({nodesSelectionActive:!1}),tt([r])),l==null||l(Se,Te)},oe=St(r,F.getState,u),Pe=St(r,F.getState,w),ke=St(r,F.getState,y),mt=St(r,F.getState,M),qe=St(r,F.getState,I),He=function(Se,xe){var et=xe?v:C,tt=(xe?g:P)||null,Te=xe?"target":"source",nt=function(){return!0},En=xe,ot=F.getState().edges.find(function(Ie){return Ie.id===r});k==null||k(Se,ot,Te);var On=X?function(Ie){return X(Ie,ot,Te)}:void 0,Bt=function(Ht){return A==null?void 0:A(ot,Ht)};Gi({event:Se,handleId:tt,nodeId:et,onConnect:Bt,isTarget:En,getState:F.getState,setState:F.setState,isValidConnection:nt,elementEdgeUpdaterType:Te,onEdgeUpdateEnd:On})},Qe=function(Se){return He(Se,!0)},Le=function(Se){return He(Se,!1)},je=function(){return W(!0)},Je=function(){return W(!1)},Rt=E.exports.useMemo(function(){return"url(#".concat(eo(U,j),")")},[U,j]),xn=E.exports.useMemo(function(){return"url(#".concat(eo(L,j),")")},[L,j]);if(H)return null;var $t=!z&&!l,zt=typeof A<"u",Cn=me(["react-flow__edge","react-flow__edge-".concat(a),i,{selected:c,animated:f,inactive:$t,updating:Z}]);return ce("g",{className:Cn,onClick:re,onDoubleClick:oe,onContextMenu:Pe,onMouseEnter:ke,onMouseMove:mt,onMouseLeave:qe,children:[B(e,{id:r,source:C,target:v,selected:c,animated:f,label:d,labelStyle:h,labelShowBg:p,labelBgStyle:x,labelBgPadding:S,labelBgBorderRadius:m,data:s,style:N,sourceX:b,sourceY:O,targetX:D,targetY:_,sourcePosition:$,targetPosition:Y,sourceHandleId:P,targetHandleId:g,markerStart:Rt,markerEnd:xn,"data-testid":"rf__edge-".concat(r)}),zt&&B("g",{onMouseDown:Qe,onMouseEnter:je,onMouseOut:Je,children:B(wr,{position:$,centerX:b,centerY:O,radius:T})}),zt&&B("g",{onMouseDown:Le,onMouseEnter:je,onMouseOut:Je,children:B(wr,{position:Y,centerX:D,centerY:_,radius:T})})]})};return t.displayName="EdgeWrapper",E.exports.memo(t)};function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function df(e){var t={default:it(e.default||oo),straight:it(e.bezier||Ki),step:it(e.step||Zi),smoothstep:it(e.step||bo),simplebezier:it(e.simplebezier||Vi)},n={},o=Object.keys(e).filter(function(r){return!["default","bezier"].includes(r)}).reduce(function(r,i){return r[i]=it(e[i]||oo),r},n);return xr(xr({},t),o)}function Cr(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,a=(n==null?void 0:n.height)||t.height;switch(e){case V.Top:return{x:o+i/2,y:r};case V.Right:return{x:o+i,y:r+a/2};case V.Bottom:return{x:o+i/2,y:r+a};case V.Left:return{x:o,y:r+a/2}}}function Er(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(o){return o.id===t})),typeof n>"u"?null:n}var ff=function(t,n,o,r,i,a){var s=Cr(o,t,n),l=Cr(a,r,i);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function gf(e){var t=e.sourcePos,n=e.targetPos,o=e.sourceWidth,r=e.sourceHeight,i=e.targetWidth,a=e.targetHeight,s=e.width,l=e.height,u=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+o,n.x+i),y2:Math.max(t.y+r,n.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var f=vt({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),d=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),h=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y)),p=Math.ceil(d*h);return p>0}function Or(e,t){var n,o,r,i,a,s=e.get(t),l=(s==null||(n=s[se])===null||n===void 0?void 0:n.handleBounds)||null,u=!s||!l||!s.width||!s.height||typeof((o=s.positionAbsolute)===null||o===void 0?void 0:o.x)>"u"||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.y)>"u";return[{x:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.x)||0,y:(s==null||(a=s.positionAbsolute)===null||a===void 0?void 0:a.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},l,!u]}var hf=typeof document<"u"?document:null,Tt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:hf},n=E.exports.useState(!1),o=G(n,2),r=o[0],i=o[1],a=E.exports.useRef(new Set([])),s=E.exports.useMemo(function(){if(e!==null){var f=Array.isArray(e)?e:[e],d=f.filter(function(p){return typeof p=="string"}).map(function(p){return p.split("+")}),h=d.reduce(function(p,x){return p.concat.apply(p,Ke(x))},[]);return[d,h]}return[[],[]]},[e]),l=G(s,2),u=l[0],c=l[1];return E.exports.useEffect(function(){if(e!==null){var f,d,h=function(m){if(_r(m))return!1;var N=Pr(m.code,c);a.current.add(m[N]),Nr(u,a.current,!1)&&(m.preventDefault(),i(!0))},p=function(m){if(_r(m))return!1;var N=Pr(m.code,c);Nr(u,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(m[N])},x=function(){a.current.clear(),i(!1)};return t==null||(f=t.target)===null||f===void 0||f.addEventListener("keydown",h),t==null||(d=t.target)===null||d===void 0||d.addEventListener("keyup",p),window.addEventListener("blur",x),function(){var S,m;t==null||(S=t.target)===null||S===void 0||S.removeEventListener("keydown",h),t==null||(m=t.target)===null||m===void 0||m.removeEventListener("keyup",p),window.removeEventListener("blur",x)}}},[e,i]),r};function Nr(e,t,n){return e.filter(function(o){return n||o.length===t.size}).some(function(o){return o.every(function(r){return t.has(r)})})}function Pr(e,t){return t.includes(e)?"code":"key"}function _r(e){var t,n=((t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))}var pf=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},vf=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,o=de(),r=ie(pf,ve),i=r.onNodesChange,a=r.onEdgesChange,s=Tt(t),l=Tt(n);E.exports.useEffect(function(){var u=o.getState(),c=u.nodeInternals,f=u.edges,d=u.hasDefaultNodes,h=u.hasDefaultEdges,p=u.onNodesDelete,x=u.onEdgesDelete,S=Array.from(c.values()),m=S.reduce(function(_,$){return(!$.selected&&$.parentNode&&_.find(function(Y){return Y.id===$.parentNode})||$.selected)&&_.push($),_},[]),N=f.filter(function(_){return _.selected});if(s&&(m||N)){var C=$i(m,f),v=[].concat(Ke(N),Ke(C)),b=v.reduce(function(_,$){return _.includes($.id)||_.push($.id),_},[]);if((h||d)&&(h&&o.setState({edges:f.filter(function(_){return!b.includes(_.id)})}),d&&(m.forEach(function(_){c.delete(_.id)}),o.setState({nodeInternals:new Map(c)}))),b.length>0&&(x==null||x(v),a)){var O=b.map(function(_){return{id:_,type:"remove"}});a(O)}if(m.length>0&&(p==null||p(m),i)){var D=m.map(function(_){return{id:_.id,type:"remove"}});i(D)}o.setState({nodesSelectionActive:!1})}},[s,i,a]),E.exports.useEffect(function(){o.setState({multiSelectionActive:l})},[l])};function mf(e){var t=de();E.exports.useEffect(function(){var n,o=function(){if(!!e.current){var i=vo(e.current);t.setState({width:i.width||500,height:i.height||500})}};return o(),window.onresize=o,e.current&&(n=new ResizeObserver(function(){return o()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var yf=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},Yn=function(t){return{x:t.x,y:t.y,zoom:t.k}},Wt=function(t,n){return t.target.closest(".".concat(n))},bf=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},wf=function(t){var n=t.onMove,o=t.onMoveStart,r=t.onMoveEnd,i=t.zoomOnScroll,a=i===void 0?!0:i,s=t.zoomOnPinch,l=s===void 0?!0:s,u=t.panOnScroll,c=u===void 0?!1:u,f=t.panOnScrollSpeed,d=f===void 0?.5:f,h=t.panOnScrollMode,p=h===void 0?dt.Free:h,x=t.zoomOnDoubleClick,S=x===void 0?!0:x,m=t.selectionKeyPressed,N=t.elementsSelectable,C=t.panOnDrag,v=C===void 0?!0:C,b=t.translateExtent,O=t.minZoom,D=t.maxZoom,_=t.defaultZoom,$=_===void 0?1:_,Y=t.defaultPosition,z=Y===void 0?[0,0]:Y,H=t.zoomActivationKeyCode,P=t.preventScrolling,g=P===void 0?!0:P,w=t.children,y=t.noWheelClassName,M=t.noPanClassName,I=de(),T=E.exports.useRef(!1),A=E.exports.useRef(null),k=E.exports.useRef({x:0,y:0,zoom:0}),X=ie(bf,ve),L=X.d3Zoom,U=X.d3Selection,j=X.d3ZoomHandler,K=Tt(H);return mf(A),E.exports.useEffect(function(){if(A.current){var R,Z=gd().scaleExtent([O,D]).translateExtent(b),W=ye(A.current).call(Z),F=ft(z[0],b[0][0],b[1][0]),re=ft(z[1],b[0][1],b[1][1]),oe=ft($,O,D),Pe=Fe.translate(F,re).scale(oe);Z.transform(W,Pe),I.setState({d3Zoom:Z,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[F,re,oe],domNode:(R=W.node())===null||R===void 0?void 0:R.closest(".react-flow")})}},[]),E.exports.useEffect(function(){U&&L&&(c&&!K?U.on("wheel",function(R){if(Wt(R,y))return!1;R.preventDefault(),R.stopImmediatePropagation();var Z=U.property("__zoom").k||1;if(R.ctrlKey&&l){var W=Ee(R),F=-R.deltaY*(R.deltaMode===1?.05:R.deltaMode?1:.002)*10,re=Z*Math.pow(2,F);L.scaleTo(U,re,W);return}var oe=R.deltaMode===1?20:1,Pe=p===dt.Vertical?0:R.deltaX*oe,ke=p===dt.Horizontal?0:R.deltaY*oe;L.translateBy(U,-(Pe/Z)*d,-(ke/Z)*d)}).on("wheel.zoom",null):typeof j<"u"&&U.on("wheel",function(R){if(!g||Wt(R,y))return null;R.preventDefault()}).on("wheel.zoom",j))},[c,p,U,L,j,K,l,g,y]),E.exports.useEffect(function(){L&&(m&&!T.current?L.on("zoom",null):m||L.on("zoom",function(R){if(I.setState({transform:[R.transform.x,R.transform.y,R.transform.k]}),n){var Z=Yn(R.transform);n(R.sourceEvent,Z)}}))},[m,L,n]),E.exports.useEffect(function(){L&&L.on("start",function(R){if(T.current=!0,o){var Z=Yn(R.transform);k.current=Z,o(R.sourceEvent,Z)}})},[L,o]),E.exports.useEffect(function(){L&&L.on("end",function(R){if(T.current=!1,r&&yf(k.current,R.transform)){var Z=Yn(R.transform);k.current=Z,r(R.sourceEvent,Z)}})},[L,r]),E.exports.useEffect(function(){L&&L.filter(function(R){var Z=K||a,W=l&&R.ctrlKey;return!v&&!Z&&!c&&!S&&!l||m||!S&&R.type==="dblclick"||Wt(R,y)&&R.type==="wheel"||Wt(R,M)&&R.type!=="wheel"||!l&&R.ctrlKey&&R.type==="wheel"||!Z&&!c&&!W&&R.type==="wheel"||!v&&(R.type==="mousedown"||R.type==="touchstart")?!1:(!R.ctrlKey||R.type==="wheel")&&!R.button})},[L,a,l,c,S,v,m,N,K]),B("div",{className:"react-flow__renderer react-flow__container",ref:A,children:w})};function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function kr(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var Sf=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},Tr={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},xf=E.exports.memo(function(e){var t=e.selectionKeyPressed,n=de(),o=E.exports.useRef(0),r=E.exports.useRef(0),i=E.exports.useRef(),a=E.exports.useState(Tr),s=G(a,2),l=s[0],u=s[1],c=ie(Sf,ve),f=c.userSelectionActive,d=c.elementsSelectable,h=f||t;if(!d||!h)return null;var p=function(){u(Tr),n.setState({userSelectionActive:!1}),o.current=0,r.current=0},x=function(v){var b=v.target.closest(".react-flow");i.current=b.getBoundingClientRect();var O=kr(v,i.current);u({width:0,height:0,startX:O.x,startY:O.y,x:O.x,y:O.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},S=function(v){var b,O;if(!(!t||!l.draw||!i.current)){var D=kr(v,i.current),_=(b=l.startX)!==null&&b!==void 0?b:0,$=(O=l.startY)!==null&&O!==void 0?O:0,Y=Dr(Dr({},l),{},{x:D.x<_?D.x:_,y:D.y<$?D.y:$,width:Math.abs(D.x-_),height:Math.abs(D.y-$)}),z=n.getState(),H=z.nodeInternals,P=z.edges,g=z.transform,w=z.onNodesChange,y=z.onEdgesChange,M=Array.from(H.values()),I=Ri(H,Y,g,!1,!0),T=$i(I,P).map(function(L){return L.id}),A=I.map(function(L){return L.id});if(o.current!==A.length){o.current=A.length;var k=st(M,A);k.length&&(w==null||w(k))}if(r.current!==T.length){r.current=T.length;var X=st(P,T);X.length&&(y==null||y(X))}u(Y)}},m=function(){n.setState({nodesSelectionActive:o.current>0}),p()},N=function(){n.setState({nodesSelectionActive:!1}),p()};return B("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:x,onMouseMove:S,onMouseUp:m,onMouseLeave:N,children:l.draw&&B("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}})})});function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ir(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function oa(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:oa(n,t):!1}function Rr(e,t,n){var o=e;do{var r;if((r=o)!==null&&r!==void 0&&r.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Cf(e,t,n){return Array.from(e.values()).filter(function(o){return(o.selected||o.id===n)&&(!o.parentNode||!oa(o,e))}).map(function(o){var r,i,a,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:t.x-((r=(i=o.positionAbsolute)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0),y:t.y-((a=(s=o.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode,width:o.width,height:o.height}})}function Ef(e,t,n,o,r,i){var a=G(o,2),s=a[0],l=a[1],u=e.extent||i,c={x:t.x-e.distance.x,y:t.y-e.distance.y};if(n&&(c.x=s*Math.round(c.x/s),c.y=l*Math.round(c.y/l)),e.extent==="parent")if(e.parentNode&&e.width&&e.height){var f=r.get(e.parentNode);u=f!=null&&f.positionAbsolute&&f!==null&&f!==void 0&&f.width&&f!==null&&f!==void 0&&f.height?[[f.positionAbsolute.x,f.positionAbsolute.y],[f.positionAbsolute.x+f.width-e.width,f.positionAbsolute.y+f.height-e.height]]:u}else u=i;else if(e.extent&&e.parentNode){var d,h,p,x,S=r.get(e.parentNode),m=(d=S==null||(h=S.positionAbsolute)===null||h===void 0?void 0:h.x)!==null&&d!==void 0?d:0,N=(p=S==null||(x=S.positionAbsolute)===null||x===void 0?void 0:x.y)!==null&&p!==void 0?p:0;u=[[e.extent[0][0]+m,e.extent[0][1]+N],[e.extent[1][0]+m,e.extent[1][1]+N]]}var C={x:0,y:0};if(e.parentNode){var v,b,O,D,_=r.get(e.parentNode);C={x:(v=_==null||(b=_.positionAbsolute)===null||b===void 0?void 0:b.x)!==null&&v!==void 0?v:0,y:(O=_==null||(D=_.positionAbsolute)===null||D===void 0?void 0:D.y)!==null&&O!==void 0?O:0}}return e.positionAbsolute=u?Oi(c,u):c,e.position={x:e.positionAbsolute.x-C.x,y:e.positionAbsolute.y-C.y},e}function Un(e){var t=e.nodeId,n=e.dragItems,o=e.nodeInternals,r=n.map(function(i){var a=o.get(i.id);return Ar(Ar({},a),{},{position:i.position,positionAbsolute:i.positionAbsolute})});return[t?r.find(function(i){return i.id===t}):r[0],r]}function Xn(e){return function(t,n,o){return e==null?void 0:e(t,o)}}function ra(e){var t=e.nodeRef,n=e.disabled,o=n===void 0?!1:n,r=e.noDragClassName,i=e.handleSelector,a=e.nodeId,s=e.isSelectable,l=e.selectNodesOnDrag,u=E.exports.useState(!1),c=G(u,2),f=c[0],d=c[1],h=de(),p=E.exports.useRef(),x=E.exports.useRef({x:null,y:null}),S=E.exports.useCallback(function(m){var N=m.sourceEvent,C=h.getState(),v=C.transform,b=C.snapGrid,O=C.snapToGrid,D=N.touches?N.touches[0].clientX:N.clientX,_=N.touches?N.touches[0].clientY:N.clientY,$=Ai({x:D,y:_},v,O,b);return $},[]);return E.exports.useEffect(function(){if(t!=null&&t.current){var m=ye(t.current);if(o)m.on(".drag",null);else{var N=Cc().on("start",function(C){var v=h.getState(),b=v.nodeInternals,O=v.multiSelectionActive,D=v.unselectNodesAndEdges,_=v.onNodeDragStart,$=v.onSelectionDragStart,Y=a?_:Xn($);if(!l&&!O&&a){var z;(z=b.get(a))!==null&&z!==void 0&&z.selected||D()}a&&s&&l&&Ti({id:a,store:h});var H=S(C);if(x.current=H,p.current=Cf(b,H,a),Y&&p.current){var P=Un({nodeId:a,dragItems:p.current,nodeInternals:b}),g=G(P,2),w=g[0],y=g[1];Y(C.sourceEvent,w,y)}}).on("drag",function(C){var v=h.getState(),b=v.updateNodePositions,O=v.snapToGrid,D=v.snapGrid,_=v.nodeInternals,$=v.nodeExtent,Y=v.onNodeDrag,z=v.onSelectionDrag,H=S(C);if((x.current.x!==H.x||x.current.y!==H.y)&&p.current){x.current=H,p.current=p.current.map(function(I){return Ef(I,H,O,D,_,$)});var P=a?Y:Xn(z);if(b(p.current,!0,!0),d(!0),P){var g=Un({nodeId:a,dragItems:p.current,nodeInternals:_}),w=G(g,2),y=w[0],M=w[1];P(C.sourceEvent,y,M)}}C.on("end",function(I){if(d(!1),p.current){var T=h.getState(),A=T.updateNodePositions,k=T.nodeInternals,X=T.onNodeDragStop,L=T.onSelectionDragStop,U=a?X:Xn(L);if(A(p.current,!1,!1),U){var j=Un({nodeId:a,dragItems:p.current,nodeInternals:k}),K=G(j,2),R=K[0],Z=K[1];U(I.sourceEvent,R,Z)}}})}).filter(function(C){var v=C.target,b=!C.button&&(!r||!Rr(v,".".concat(r),t))&&(!i||Rr(v,i,t));return b});return m.call(N),function(){m.on(".drag",null)}}}},[t,o,r,i,s,h,a,l,S]),f}function $r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$r(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Nf=function(t){return Of({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},mo(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},Pf=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(o){return o.selected});return mo(n)};function _f(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,o=de(),r=ie(Nf,ve),i=r.transformString,a=r.userSelectionActive,s=ie(Pf,ve),l=s.width,u=s.height,c=s.x,f=s.y,d=E.exports.useRef(null);if(ra({nodeRef:d}),a||!l||!u)return null;var h=t?function(p){var x=Array.from(o.getState().nodeInternals.values()).filter(function(S){return S.selected});t(p,x)}:void 0;return B("div",{className:me(["react-flow__nodesselection","react-flow__container",n]),style:{transform:i},children:B("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,style:{width:l,height:u,top:f,left:c}})})}var Mf=E.exports.memo(_f),Df=function(t){return t.nodesSelectionActive},ia=function(t){var n=t.children,o=t.onPaneClick,r=t.onPaneContextMenu,i=t.onPaneScroll,a=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,u=t.onMoveEnd,c=t.selectionKeyCode,f=t.multiSelectionKeyCode,d=t.zoomActivationKeyCode,h=t.elementsSelectable,p=t.zoomOnScroll,x=t.zoomOnPinch,S=t.panOnScroll,m=t.panOnScrollSpeed,N=t.panOnScrollMode,C=t.zoomOnDoubleClick,v=t.panOnDrag,b=t.translateExtent,O=t.minZoom,D=t.maxZoom,_=t.defaultZoom,$=t.defaultPosition,Y=t.preventScrolling,z=t.onSelectionContextMenu,H=t.noWheelClassName,P=t.noPanClassName,g=de(),w=ie(Df),y=Tt(c);vf({deleteKeyCode:a,multiSelectionKeyCode:f});var M=function(k){o==null||o(k),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},I=r?function(A){return r(A)}:void 0,T=i?function(A){return i(A)}:void 0;return ce(wf,{onMove:s,onMoveStart:l,onMoveEnd:u,selectionKeyPressed:y,elementsSelectable:h,zoomOnScroll:p,zoomOnPinch:x,panOnScroll:S,panOnScrollSpeed:m,panOnScrollMode:N,zoomOnDoubleClick:C,panOnDrag:v,translateExtent:b,minZoom:O,maxZoom:D,defaultZoom:_,defaultPosition:$,zoomActivationKeyCode:d,preventScrolling:Y,noWheelClassName:H,noPanClassName:P,children:[n,B(xf,{selectionKeyPressed:y}),w&&B(Mf,{onSelectionContextMenu:z,noPanClassName:P}),B("div",{className:"react-flow__pane react-flow__container",onClick:M,onContextMenu:I,onWheel:T})]})};ia.displayName="FlowRenderer";var kf=E.exports.memo(ia);function Tf(e){var t=ie(E.exports.useCallback(function(n){return e?Ri(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var If=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},aa=function(t){var n=ie(If,ve),o=n.nodesDraggable,r=n.nodesConnectable,i=n.elementsSelectable,a=n.updateNodeDimensions,s=Tf(t.onlyRenderVisibleElements),l=E.exports.useRef(),u=E.exports.useMemo(function(){if(typeof ResizeObserver>"u")return null;var c=new ResizeObserver(function(f){var d=f.map(function(h){return{id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}});a(d)});return l.current=c,c},[]);return E.exports.useEffect(function(){return function(){var c;l==null||(c=l.current)===null||c===void 0||c.disconnect()}},[]),B("div",{className:"react-flow__nodes react-flow__container",children:s.map(function(c){var f,d,h,p,x,S,m,N=c.type||"default";t.nodeTypes[N]||(N="default");var C=t.nodeTypes[N]||t.nodeTypes.default,v=!!(c.draggable||o&&typeof c.draggable>"u"),b=!!(c.selectable||i&&typeof c.selectable>"u"),O=!!(c.connectable||r&&typeof c.connectable>"u");return B(C,{id:c.id,className:c.className,style:c.style,type:N,data:c.data,sourcePosition:c.sourcePosition||V.Bottom,targetPosition:c.targetPosition||V.Top,hidden:c.hidden,xPos:(f=(d=c.positionAbsolute)===null||d===void 0?void 0:d.x)!==null&&f!==void 0?f:0,yPos:(h=(p=c.positionAbsolute)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:v,isSelectable:b,isConnectable:O,resizeObserver:u,dragHandle:c.dragHandle,zIndex:(x=(S=c[se])===null||S===void 0?void 0:S.z)!==null&&x!==void 0?x:0,isParent:!!((m=c[se])!==null&&m!==void 0&&m.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height},c.id)})})};aa.displayName="NodeRenderer";var Af=E.exports.memo(aa),at;function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Rf=(at={},J(at,V.Left,V.Right),J(at,V.Right,V.Left),J(at,V.Top,V.Bottom),J(at,V.Bottom,V.Top),at),$f=function(e){var t,n,o,r,i,a=e.connectionNodeId,s=e.connectionHandleType,l=e.connectionLineStyle,u=e.connectionLineType,c=u===void 0?Be.Bezier:u,f=e.isConnectable,d=e.CustomConnectionLineComponent,h=ie(E.exports.useCallback(function(T){return{fromNode:T.nodeInternals.get(a),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2]}},[a]),ve),p=h.fromNode,x=h.handleId,S=h.toX,m=h.toY,N=p==null||(t=p[se])===null||t===void 0?void 0:t.handleBounds;if(!p||!f||!(N!=null&&N[s]))return null;var C=N[s],v=x?C.find(function(T){return T.id===x}):C[0],b=v?v.x+v.width/2:((n=p==null?void 0:p.width)!==null&&n!==void 0?n:0)/2,O=v?v.y+v.height/2:(o=p==null?void 0:p.height)!==null&&o!==void 0?o:0,D=((p==null||(r=p.positionAbsolute)===null||r===void 0?void 0:r.x)||0)+b,_=((p==null||(i=p.positionAbsolute)===null||i===void 0?void 0:i.y)||0)+O,$=v==null?void 0:v.position;if(!$)return null;var Y=Rf[$],z,H,P,g,w,y;switch(s){case"source":z=D,H=_,P=$,g=S,w=m,y=Y;break;case"target":z=S,H=m,P=Y,g=D,w=_,y=$;break}if(d)return B("g",{className:"react-flow__connection",children:B(d,{connectionLineType:c,connectionLineStyle:l,fromNode:p,fromHandle:v,fromX:D,fromY:_,toX:S,toY:m,fromPosition:$,toPosition:Y,sourcePosition:P,targetPosition:y,sourceNode:p,sourceHandle:v,targetX:g,targetY:w,sourceX:z,sourceY:H})});var M="",I={sourceX:z,sourceY:H,sourcePosition:P,targetX:g,targetY:w,targetPosition:y};return c===Be.Bezier?M=Wi(I):c===Be.Step?M=no(Br(Br({},I),{},{borderRadius:0})):c===Be.SmoothStep?M=no(I):c===Be.SimpleBezier?M=Xi(I):M="M".concat(z,",").concat(H," ").concat(g,",").concat(w),B("g",{className:"react-flow__connection",children:B("path",{d:M,className:"react-flow__connection-path",style:l})})};function ao(e){return ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ao(e)}var Gt,zf=function(t){var n=t.color,o=n===void 0?"none":n,r=t.strokeWidth,i=r===void 0?1:r;return B("polyline",{stroke:o,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:i,fill:"none",points:"-5,-4 0,0 -5,4"})},Bf=function(t){var n=t.color,o=n===void 0?"none":n,r=t.strokeWidth,i=r===void 0?1:r;return B("polyline",{stroke:o,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:i,fill:o,points:"-5,-4 0,0 -5,4 -5,-4"})},Hr=(Gt={},J(Gt,fn.Arrow,zf),J(Gt,fn.ArrowClosed,Bf),Gt);function Hf(e){var t=E.exports.useMemo(function(){var n=Hr.hasOwnProperty(e);return n?Hr[e]:function(){return null}},[e]);return t}function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Lf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var jf=function(t){var n=t.id,o=t.type,r=t.color,i=t.width,a=i===void 0?12.5:i,s=t.height,l=s===void 0?12.5:s,u=t.markerUnits,c=u===void 0?"strokeWidth":u,f=t.strokeWidth,d=t.orient,h=d===void 0?"auto":d,p=Hf(o);return rn.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(a),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:h,refX:"0",refY:"0"},rn.createElement(p,{color:r,strokeWidth:f}))},Yf=function(t){var n=t.defaultColor,o=t.rfId;return function(r){var i=[];return r.edges.reduce(function(a,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&ao(l)==="object"){var u=eo(l,o);i.includes(u)||(a.push(Lf({id:u,color:l.color||n},l)),i.push(u))}}),a},[]).sort(function(a,s){return a.id.localeCompare(s.id)})}},sa=function(t){var n=t.defaultColor,o=t.rfId,r=ie(E.exports.useCallback(Yf({defaultColor:n,rfId:o}),[n,o]),function(i,a){return!(i.length!==a.length||i.some(function(s,l){return s.id!==a[l].id}))});return B("defs",{children:r.map(function(i){return B(jf,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id)})})};sa.displayName="MarkerDefinitions";var Uf=E.exports.memo(sa),Xf=[{level:0,isMaxLevel:!0,edges:[]}];function Vf(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=-1,r=e.reduce(function(a,s){var l=Mi(s.zIndex),u=l?s.zIndex:0;if(n){var c,f,d,h;u=l?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(f=c[se])===null||f===void 0?void 0:f.z)||0,((d=t.get(s.target))===null||d===void 0||(h=d[se])===null||h===void 0?void 0:h.z)||0)}return a[u]?a[u].push(s):a[u]=[s],o=u>o?u:o,a},{}),i=Object.entries(r).map(function(a){var s=G(a,2),l=s[0],u=s[1],c=+l;return{edges:u,level:c,isMaxLevel:c===o}});return i.length===0?Xf:i}function Ff(e,t,n){var o=ie(E.exports.useCallback(function(r){return e?r.edges.filter(function(i){var a=t.get(i.source),s=t.get(i.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&gf({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:s.width,targetHeight:s.height,width:r.width,height:r.height,transform:r.transform})}):r.edges},[e,t]));return Vf(o,t,n)}var Zf=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},la=function(t){var n=ie(Zf,ve),o=n.connectionNodeId,r=n.connectionHandleType,i=n.nodesConnectable,a=n.elementsSelectable,s=n.width,l=n.height,u=n.connectionMode,c=n.nodeInternals,f=Ff(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var d=t.connectionLineType,h=t.defaultMarkerColor,p=t.connectionLineStyle,x=t.connectionLineComponent,S=t.connectionLineContainerStyle,m=o&&r;return ce(Ge,{children:[f.map(function(N){var C=N.level,v=N.edges,b=N.isMaxLevel;return ce("svg",{style:{zIndex:C},width:s,height:l,className:"react-flow__edges react-flow__container",children:[b&&B(Uf,{defaultColor:h,rfId:t.rfId}),B("g",{children:v.map(function(O){var D=Or(c,O.source),_=G(D,3),$=_[0],Y=_[1],z=_[2],H=Or(c,O.target),P=G(H,3),g=P[0],w=P[1],y=P[2];if(!z||!y)return null;var M=O.type||"default";t.edgeTypes[M]||(console.warn('[React Flow]: Edge type "'.concat(M,'" not found. Using fallback type "default". Help: https://reactflow.dev/error#300')),M="default");var I=t.edgeTypes[M]||t.edgeTypes.default,T=u===pt.Strict?w.target:w.target||w.source,A=Er(Y.source,O.sourceHandle||null),k=Er(T,O.targetHandle||null),X=(A==null?void 0:A.position)||V.Bottom,L=(k==null?void 0:k.position)||V.Top;if(!A||!k)return null;var U=ff($,A,X,g,k,L),j=U.sourceX,K=U.sourceY,R=U.targetX,Z=U.targetY;return B(I,{id:O.id,className:me([O.className,t.noPanClassName]),type:M,data:O.data,selected:!!O.selected,animated:!!O.animated,hidden:!!O.hidden,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,style:O.style,source:O.source,target:O.target,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerEnd:O.markerEnd,markerStart:O.markerStart,sourceX:j,sourceY:K,targetX:R,targetY:Z,sourcePosition:X,targetPosition:L,elementsSelectable:a,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId},O.id)})})]},C)}),m&&B("svg",{style:S,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:B($f,{connectionNodeId:o,connectionHandleType:r,connectionLineStyle:p,connectionLineType:d,isConnectable:i,CustomConnectionLineComponent:x})})]})};la.displayName="EdgeRenderer";var Kf=E.exports.memo(la),Wf=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function Gf(e){var t=e.children,n=ie(Wf);return B("div",{className:"react-flow__viewport react-flow__container",style:{transform:n},children:t})}function qf(e){var t=Yi(),n=E.exports.useRef(!1);E.exports.useEffect(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var ca=function(t){var n=t.nodeTypes,o=t.edgeTypes,r=t.onMove,i=t.onMoveStart,a=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,u=t.onEdgeClick,c=t.onNodeDoubleClick,f=t.onEdgeDoubleClick,d=t.onNodeMouseEnter,h=t.onNodeMouseMove,p=t.onNodeMouseLeave,x=t.onNodeContextMenu,S=t.onSelectionContextMenu,m=t.connectionLineType,N=t.connectionLineStyle,C=t.connectionLineComponent,v=t.connectionLineContainerStyle,b=t.selectionKeyCode,O=t.multiSelectionKeyCode,D=t.zoomActivationKeyCode,_=t.deleteKeyCode,$=t.onlyRenderVisibleElements,Y=t.elementsSelectable,z=t.selectNodesOnDrag,H=t.translateExtent,P=t.minZoom,g=t.maxZoom,w=t.defaultZoom,y=t.defaultPosition,M=t.preventScrolling,I=t.defaultMarkerColor,T=t.zoomOnScroll,A=t.zoomOnPinch,k=t.panOnScroll,X=t.panOnScrollSpeed,L=t.panOnScrollMode,U=t.zoomOnDoubleClick,j=t.panOnDrag,K=t.onPaneClick,R=t.onPaneScroll,Z=t.onPaneContextMenu,W=t.onEdgeUpdate,F=t.onEdgeContextMenu,re=t.onEdgeMouseEnter,oe=t.onEdgeMouseMove,Pe=t.onEdgeMouseLeave,ke=t.edgeUpdaterRadius,mt=t.onEdgeUpdateStart,qe=t.onEdgeUpdateEnd,He=t.noDragClassName,Qe=t.noWheelClassName,Le=t.noPanClassName,je=t.elevateEdgesOnSelect,Je=t.id;return qf(s),B(kf,{onPaneClick:K,onPaneContextMenu:Z,onPaneScroll:R,deleteKeyCode:_,selectionKeyCode:b,multiSelectionKeyCode:O,zoomActivationKeyCode:D,elementsSelectable:Y,onMove:r,onMoveStart:i,onMoveEnd:a,zoomOnScroll:T,zoomOnPinch:A,zoomOnDoubleClick:U,panOnScroll:k,panOnScrollSpeed:X,panOnScrollMode:L,panOnDrag:j,translateExtent:H,minZoom:P,maxZoom:g,defaultZoom:w,defaultPosition:y,onSelectionContextMenu:S,preventScrolling:M,noDragClassName:He,noWheelClassName:Qe,noPanClassName:Le,children:ce(Gf,{children:[B(Kf,{edgeTypes:o,onEdgeClick:u,onEdgeDoubleClick:f,connectionLineType:m,connectionLineStyle:N,connectionLineComponent:C,connectionLineContainerStyle:v,onEdgeUpdate:W,onlyRenderVisibleElements:$,onEdgeContextMenu:F,onEdgeMouseEnter:re,onEdgeMouseMove:oe,onEdgeMouseLeave:Pe,onEdgeUpdateStart:mt,onEdgeUpdateEnd:qe,edgeUpdaterRadius:ke,defaultMarkerColor:I,noPanClassName:Le,elevateEdgesOnSelect:!!je,rfId:Je}),B(Af,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:x,selectNodesOnDrag:z,onlyRenderVisibleElements:$,noPanClassName:Le,noDragClassName:He})]})})};ca.displayName="GraphView";var Qf=E.exports.memo(ca),ua=function(){return null};ua.displayName="GroupNode";function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var xt=function(e){var t=function(o){var r=o.id,i=o.type,a=o.data,s=o.xPos,l=o.yPos,u=o.selected,c=o.onClick,f=o.onMouseEnter,d=o.onMouseMove,h=o.onMouseLeave,p=o.onContextMenu,x=o.onDoubleClick,S=o.style,m=o.className,N=o.isDraggable,C=o.isSelectable,v=o.isConnectable,b=o.selectNodesOnDrag,O=o.sourcePosition,D=o.targetPosition,_=o.hidden,$=o.resizeObserver,Y=o.dragHandle,z=o.zIndex,H=o.isParent,P=o.noPanClassName,g=o.noDragClassName,w=o.initialized,y=de(),M=E.exports.useRef(null),I=E.exports.useRef(O),T=E.exports.useRef(D),A=E.exports.useRef(i),k=C||N||c||f||d||h,X=wt(r,y.getState,f),L=wt(r,y.getState,d),U=wt(r,y.getState,h),j=wt(r,y.getState,p),K=wt(r,y.getState,x),R=function(F){if(C&&(!b||!N)&&Ti({id:r,store:y}),c){var re=y.getState().nodeInternals.get(r);c(F,Yr({},re))}};E.exports.useEffect(function(){if(M.current&&!_){var W=M.current;return $==null||$.observe(W),function(){return $==null?void 0:$.unobserve(W)}}},[_]),E.exports.useEffect(function(){var W=A.current!==i,F=I.current!==O,re=T.current!==D;M.current&&(W||F||re)&&(W&&(A.current=i),F&&(I.current=O),re&&(T.current=D),y.getState().updateNodeDimensions([{id:r,nodeElement:M.current,forceUpdate:!0}]))},[r,i,O,D]);var Z=ra({nodeRef:M,disabled:_||!N,noDragClassName:g,handleSelector:Y,nodeId:r,isSelectable:C,selectNodesOnDrag:b});return _?null:B("div",{className:me(["react-flow__node","react-flow__node-".concat(i),P,m,{selected:u,selectable:C,parent:H}]),ref:M,style:Yr({zIndex:z,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:k?"all":"none",visibility:w?"visible":"hidden"},S),onMouseEnter:X,onMouseMove:L,onMouseLeave:U,onContextMenu:j,onClick:R,onDoubleClick:K,"data-testid":"rf__node-".concat(r),"data-id":r,children:B(Kd,{value:r,children:B(e,{id:r,data:a,type:i,xPos:s,yPos:l,selected:u,isConnectable:v,sourcePosition:O,targetPosition:D,dragging:Z,dragHandle:Y,zIndex:z})})})};return t.displayName="NodeWrapper",E.exports.memo(t)};function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ur(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Jf(e){var t={input:xt(e.input||ea),default:xt(e.default||io),output:xt(e.output||na),group:xt(e.group||ua)},n={},o=Object.keys(e).filter(function(r){return!["input","default","output","group"].includes(r)}).reduce(function(r,i){return r[i]=xt(e[i]||io),r},n);return Xr(Xr({},t),o)}function Vr(e,t){E.exports.useRef(null);var n=E.exports.useMemo(function(){return t(e)},[e]);return n}function Fr(e){if(!(!e||typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var da=function(t){var n=t.children,o=!0;try{de()}catch{o=!1}return o?B(Ge,{children:n}):B(Li,{createStore:ji,children:n})};da.displayName="ReactFlowWrapper";var eg=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function Zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zr(Object(n),!0).forEach(function(o){J(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}Fr(af),Fr(lf);var tg={input:ea,default:io,output:na},ng={default:oo,straight:Ki,step:Zi,smoothstep:bo,simplebezier:Vi},og=[15,15],rg=[0,0],ig=E.exports.forwardRef(function(e,t){var n=e.nodes,o=e.edges,r=e.defaultNodes,i=e.defaultEdges,a=e.className,s=e.nodeTypes,l=s===void 0?tg:s,u=e.edgeTypes,c=u===void 0?ng:u,f=e.onNodeClick,d=e.onEdgeClick,h=e.onInit,p=e.onMove,x=e.onMoveStart,S=e.onMoveEnd,m=e.onConnect,N=e.onConnectStart,C=e.onConnectStop,v=e.onConnectEnd,b=e.onClickConnectStart,O=e.onClickConnectStop,D=e.onClickConnectEnd,_=e.onNodeMouseEnter,$=e.onNodeMouseMove,Y=e.onNodeMouseLeave,z=e.onNodeContextMenu,H=e.onNodeDoubleClick,P=e.onNodeDragStart,g=e.onNodeDrag,w=e.onNodeDragStop,y=e.onNodesDelete,M=e.onEdgesDelete,I=e.onSelectionChange,T=e.onSelectionDragStart,A=e.onSelectionDrag,k=e.onSelectionDragStop,X=e.onSelectionContextMenu,L=e.connectionMode,U=L===void 0?pt.Strict:L,j=e.connectionLineType,K=j===void 0?Be.Bezier:j,R=e.connectionLineStyle,Z=e.connectionLineComponent,W=e.connectionLineContainerStyle,F=e.deleteKeyCode,re=F===void 0?"Backspace":F,oe=e.selectionKeyCode,Pe=oe===void 0?"Shift":oe,ke=e.multiSelectionKeyCode,mt=ke===void 0?"Meta":ke,qe=e.zoomActivationKeyCode,He=qe===void 0?"Meta":qe,Qe=e.snapToGrid,Le=Qe===void 0?!1:Qe,je=e.snapGrid,Je=je===void 0?og:je,Rt=e.onlyRenderVisibleElements,xn=Rt===void 0?!1:Rt,$t=e.selectNodesOnDrag,zt=$t===void 0?!0:$t,Cn=e.nodesDraggable,Ye=e.nodesConnectable,Se=e.elementsSelectable,xe=e.minZoom,et=xe===void 0?.5:xe,tt=e.maxZoom,Te=tt===void 0?2:tt,nt=e.defaultZoom,En=nt===void 0?1:nt,ot=e.defaultPosition,On=ot===void 0?rg:ot,Bt=e.translateExtent,Ie=Bt===void 0?to:Bt,Ht=e.preventScrolling,Ea=Ht===void 0?!0:Ht,Oa=e.nodeExtent,xo=e.defaultMarkerColor,Na=xo===void 0?"#b1b1b7":xo,Co=e.zoomOnScroll,Pa=Co===void 0?!0:Co,Eo=e.zoomOnPinch,_a=Eo===void 0?!0:Eo,Oo=e.panOnScroll,Ma=Oo===void 0?!1:Oo,No=e.panOnScrollSpeed,Da=No===void 0?.5:No,Po=e.panOnScrollMode,ka=Po===void 0?dt.Free:Po,_o=e.zoomOnDoubleClick,Ta=_o===void 0?!0:_o,Mo=e.panOnDrag,Ia=Mo===void 0?!0:Mo,Aa=e.onPaneClick,Ra=e.onPaneScroll,$a=e.onPaneContextMenu,za=e.children,Ba=e.onEdgeUpdate,Ha=e.onEdgeContextMenu,La=e.onEdgeDoubleClick,ja=e.onEdgeMouseEnter,Ya=e.onEdgeMouseMove,Ua=e.onEdgeMouseLeave,Xa=e.onEdgeUpdateStart,Va=e.onEdgeUpdateEnd,Do=e.edgeUpdaterRadius,Fa=Do===void 0?10:Do,Za=e.onNodesChange,Ka=e.onEdgesChange,ko=e.noDragClassName,Wa=ko===void 0?"nodrag":ko,To=e.noWheelClassName,Ga=To===void 0?"nowheel":To,Io=e.noPanClassName,qa=Io===void 0?"nopan":Io,Ao=e.fitView,Qa=Ao===void 0?!1:Ao,Ja=e.fitViewOptions,Ro=e.connectOnClick,es=Ro===void 0?!0:Ro,ts=e.attributionPosition,ns=e.proOptions,os=e.defaultEdgeOptions,$o=e.elevateEdgesOnSelect,rs=$o===void 0?!1:$o,Lt=wn(e,eg),is=Vr(l,Jf),as=Vr(c,df);return B("div",{...Kr(Kr({},Lt),{},{ref:t,className:me(["react-flow",a])}),children:ce(da,{children:[B(Qf,{onInit:h,onMove:p,onMoveStart:x,onMoveEnd:S,onNodeClick:f,onEdgeClick:d,onNodeMouseEnter:_,onNodeMouseMove:$,onNodeMouseLeave:Y,onNodeContextMenu:z,onNodeDoubleClick:H,nodeTypes:is,edgeTypes:as,connectionLineType:K,connectionLineStyle:R,connectionLineComponent:Z,connectionLineContainerStyle:W,selectionKeyCode:Pe,deleteKeyCode:re,multiSelectionKeyCode:mt,zoomActivationKeyCode:He,onlyRenderVisibleElements:xn,selectNodesOnDrag:zt,translateExtent:Ie,minZoom:et,maxZoom:Te,defaultZoom:En,defaultPosition:On,preventScrolling:Ea,zoomOnScroll:Pa,zoomOnPinch:_a,zoomOnDoubleClick:Ta,panOnScroll:Ma,panOnScrollSpeed:Da,panOnScrollMode:ka,panOnDrag:Ia,onPaneClick:Aa,onPaneScroll:Ra,onPaneContextMenu:$a,onSelectionContextMenu:X,onEdgeUpdate:Ba,onEdgeContextMenu:Ha,onEdgeDoubleClick:La,onEdgeMouseEnter:ja,onEdgeMouseMove:Ya,onEdgeMouseLeave:Ua,onEdgeUpdateStart:Xa,onEdgeUpdateEnd:Va,edgeUpdaterRadius:Fa,defaultMarkerColor:Na,noDragClassName:Wa,noWheelClassName:Ga,noPanClassName:qa,elevateEdgesOnSelect:rs,id:Lt==null?void 0:Lt.id}),B(of,{nodes:n,edges:o,defaultNodes:r,defaultEdges:i,onConnect:m,onConnectStart:N,onConnectStop:C,onConnectEnd:v,onClickConnectStart:b,onClickConnectStop:O,onClickConnectEnd:D,nodesDraggable:Cn,nodesConnectable:Ye,elementsSelectable:Se,minZoom:et,maxZoom:Te,nodeExtent:Oa,onNodesChange:Za,onEdgesChange:Ka,snapToGrid:Le,snapGrid:Je,connectionMode:U,translateExtent:Ie,connectOnClick:es,defaultEdgeOptions:os,fitView:Qa,fitViewOptions:Ja,onNodesDelete:y,onEdgesDelete:M,onNodeDragStart:P,onNodeDrag:g,onNodeDragStop:w,onSelectionDrag:A,onSelectionDragStart:T,onSelectionDragStop:k}),I&&B(tf,{onSelectionChange:I}),za,B(Ld,{proOptions:ns,position:ts})]})})});ig.displayName="ReactFlow";var ag=function(t){var n=t.children;return B(Li,{createStore:ji,children:n})};ag.displayName="ReactFlowProvider";function sg(e){return function(t){var n=E.exports.useState(t),o=G(n,2),r=o[0],i=o[1],a=E.exports.useCallback(function(s){return i(function(l){return e(s,l)})},[]);return[r,i,a]}}var lg=sg(yd);const cg=()=>{const[e,t]=E.exports.useState([]),[n,o]=E.exports.useState(-1),r=c=>{t([...e.slice(0,n+1),c]),o(n+1)},i=()=>{t([]),o(-1)},a=E.exports.useMemo(()=>e.length>0&&n>0,[e,n]),s=E.exports.useMemo(()=>e.length>0&&n<e.length-1,[e,n]);return{history:e,setHistory:t,historyIndex:n,setHistoryIndex:o,resetHistory:i,saveHistory:r,canUndo:a,undo:()=>{!a||n!==0&&o(n-1)},canRedo:s,redo:()=>{!s||n!==e.length-1&&o(n+1)}}},fa=rn.createContext(void 0),So=()=>{let e=E.exports.useContext(fa);if(e===void 0)throw Error("Item must be used inside of a Object, otherwise it will not function correctly.");return e},Bg=({children:e})=>{const{history:t,setHistory:n,historyIndex:o,setHistoryIndex:r,resetHistory:i,saveHistory:a,canUndo:s,undo:l,canRedo:u,redo:c}=cg();return B(fa.Provider,{value:{history:t,setHistory:n,historyIndex:o,setHistoryIndex:r,resetHistory:i,saveHistory:a,canUndo:s,undo:l,canRedo:u,redo:c},children:e})},ga=E.exports.createContext(void 0),ug=()=>{let e=E.exports.useContext(ga);if(e===void 0)throw Error("Item must be used inside of a Object, otherwise it will not function correctly.");return e};var so=(e=>(e.MENU="MENU",e.NODE="NODE",e.SETTING="SETTING",e))(so||{});const Hg=({children:e})=>{const[t,n]=E.exports.useState(!0),[o,r]=E.exports.useState("MENU");return B(ga.Provider,{value:{isDrawerOpen:t,setDrawerOpen:n,currentDrawerMode:o,setCurrentDrawerMode:r},children:e})};class Nt{}ue(Nt,"getChatFlowData",async t=>await Nn(`/chatflow/${t}`,"GET")),ue(Nt,"putChatFlowSettings",async(t,n)=>await Nn(`/chatbots/${t}`,"PUT",{data:n})),ue(Nt,"putChatFlowData",async(t,n)=>await Nn(`/chatflow/save-data/${t}`,"PUT",{data:n}));const ha=E.exports.createContext(void 0),pa=()=>{const e=E.exports.useContext(ha);if(e===void 0)throw Error("Item must be used inside of FlowDataProvider, otherwise it will not function correctly.");return e},Lg=({children:e})=>{const{chatflow_id:t}=fs(),{setErrorMessage:n,setSuccessMessage:o}=gs(),{resetHistory:r,saveHistory:i}=So(),[a,s]=E.exports.useState(0),[l,u]=E.exports.useState(0),[c,f]=E.exports.useState([]),[d,h]=E.exports.useState(!1),[p,x]=E.exports.useState([]),[S,m,N]=lg([]),[C,v]=E.exports.useState([]),[b,O]=E.exports.useState(),[D,_]=E.exports.useState(),[$,Y]=E.exports.useState(!1),[z,H]=E.exports.useState({auto_reminder:{response:{default_message:"",languages:[]},status:!1,trigger_time:30,send_last_message:!1},disable_reply:!1,reset_session_in:12}),[P,g]=E.exports.useState(void 0),[w,y]=E.exports.useState(void 0),M=(j,K)=>{const R=C.concat(j);v(R),g(C.length),i({nodes:K,edges:S,chatMsgs:R})},I=()=>{g(void 0)},T=j=>{const K=C.findIndex(R=>R.id===j);K!==-1&&g(K)},A=(j,K)=>{const R=typeof K=="number",Z=typeof P=="number";if(R){const W=C;W[K]=j,v(W)}else if(Z){const W=C;W[P]=j,v(W)}},k=(j,K)=>{const R=C;R.splice(j,1),v(R),i({nodes:K,edges:S,chatMsgs:R}),I()},X=async()=>{try{if(t){const j=await Nt.putChatFlowData(t,{edges:S,nodes:p,msgs:C});if(!j.success)throw Error(j.message);o(j.message)}}catch(j){n(j.message)}},L=async()=>{try{if(t){const j=await Nt.getChatFlowData(t);if(!j.success)throw Error(j.message);r(),p.length<1&&x(j.payload.nodes),S.length<1&&m(j.payload.edges),C.length<1&&v(j.payload.msgs),j.payload.setting&&H(j.payload.setting),Y(!0),i({nodes:j.payload.nodes,edges:j.payload.edges,chatMsgs:j.payload.msgs})}}catch(j){n(j.message)}},U=async()=>{try{const j=await Os.getLeadDataFields();if(!j.success)throw Error(j.message);f(j.payload)}catch(j){console.error(j.message)}};return E.exports.useEffect(()=>{i({nodes:p,edges:S,chatMsgs:C})},[]),B(ha.Provider,{value:{chatMsgs:C,addChatMsg:M,clearSelectedMsg:I,onClickChatMsg:T,OnChatMsgUpdate:A,currentMsgIndex:P,currentChatMsg:typeof P=="number"?C[P]:void 0,flowSettings:z,setFlowSettings:H,flowSettingsLoaded:$,reloadDrawer:a,setReloadDrawer:s,refreshNode:l,setRefreshNode:u,onChatMsgDelete:k,setChatMsgs:v,currentNode:typeof w=="number"?p[w]:void 0,currentNodeIndex:w,edges:S,nodes:p,dataFields:c,onEdgesChange:N,setCurrentNodeIndex:y,setEdges:m,setNodes:x,setDataFields:f,saveChatFlowData:X,fetchChatFlowData:L,fetchAllDataFields:U,copiedNode:b,copiedChatMsgs:D,setCopiedNode:O,setCopiedChatMsgs:_,editingData:d,toggleEditingData:h},children:e})};var ee=(e=>(e.TOP="top",e.BOTTOM="bottom",e))(ee||{}),q=(e=>(e.TARGET="target",e.SOURCE="source",e))(q||{}),dg=(e=>(e.First="FIRST",e.Last="LAST",e))(dg||{});let qt;const fg=new Uint8Array(16);function gg(){if(!qt&&(qt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!qt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qt(fg)}const ae=[];for(let e=0;e<256;++e)ae.push((e+256).toString(16).slice(1));function hg(e,t=0){return(ae[e[t+0]]+ae[e[t+1]]+ae[e[t+2]]+ae[e[t+3]]+"-"+ae[e[t+4]]+ae[e[t+5]]+"-"+ae[e[t+6]]+ae[e[t+7]]+"-"+ae[e[t+8]]+ae[e[t+9]]+"-"+ae[e[t+10]]+ae[e[t+11]]+ae[e[t+12]]+ae[e[t+13]]+ae[e[t+14]]+ae[e[t+15]]).toLowerCase()}const pg=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wr={randomUUID:pg};function vg(e,t,n){if(Wr.randomUUID&&!t&&!e)return Wr.randomUUID();e=e||{};const o=e.random||(e.rng||gg)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){n=n||0;for(let r=0;r<16;++r)t[n+r]=o[r];return t}return hg(o)}class mg{constructor(t){this.value=t,this.value=t}equals(t){return t==null||!(t instanceof this.constructor)?!1:t.toValue()===this.value}toString(){return String(this.value)}toValue(){return this.value}}class Q extends mg{constructor(t){const o=vg().split("-").join("");super(t||o)}}var he=(e=>(e.OPTION="option",e.BUTTON="replyButton",e.CONDITION="condition",e.LIST_SECTION="listSection",e.LIST_SECTION_ITEM="listSectionItem",e))(he||{});const le=class{};let ne=le;ue(ne,"commonNewNode",(t,n,o=!0)=>({...t,id:n,data:{...t.data,nodeDataLabel:void 0,handles:o?t.data.handles.map(r=>({...r,id:new Q().toString()})):t.data.handles.filter(r=>r.type===q.TARGET)}})),ue(ne,"newSourceHandles",t=>t.data.handles.filter(n=>n.type===q.SOURCE)),ue(ne,"CommonCopy",(t,n,o)=>({newNode:le.commonNewNode(n,o),newChatMsg:{...t,id:o,trigger_id:void 0,msg_settings:{...t.msg_settings,is_first_msg:!1,is_last_msg:!1}}})),ue(ne,"Message100",(t,n,o)=>{var a;const r=le.commonNewNode(n,o),i=le.newSourceHandles(r);return{newNode:r,newChatMsg:{...t,id:o,trigger_id:void 0,options:(a=t.options)==null?void 0:a.map((s,l)=>({...s,id:i[l].id}))}}}),ue(ne,"Message101",(t,n,o)=>{var a;const r=le.commonNewNode(n,o),i=le.newSourceHandles(r);return{newNode:r,newChatMsg:{...t,id:o,options:(a=t.options)==null?void 0:a.map((s,l)=>({...s,id:i[l].id,trigger_id:void 0}))}}}),ue(ne,"Message108",(t,n,o)=>{var a;const r=le.commonNewNode(n,o),i=le.newSourceHandles(r);return{newNode:r,newChatMsg:{...t,id:o,...t.condition?{condition:{...t.condition,conditions:(a=t.condition.conditions)==null?void 0:a.map((s,l)=>({...s,id:i[l].id,trigger_id:void 0}))}}:{}}}}),ue(ne,"Message109",(t,n,o)=>{const r=le.commonNewNode(n,o),i=le.newSourceHandles(r);return{newNode:r,newChatMsg:{...t,id:o,...t.condition?{condition:{...t.condition,conditions:t.condition.conditions.map((a,s)=>({...a,id:i[s].id,trigger_id:void 0}))}}:{}}}}),ue(ne,"Message110",(t,n,o)=>{var a;const r=le.commonNewNode(n,o),i=le.newSourceHandles(r);return{newNode:r,newChatMsg:{...t,id:o,...t.action?{action:{buttons:(a=t.action.buttons)==null?void 0:a.map((s,l)=>({...s,button_id:i[l].id,trigger_id:void 0}))}}:{}}}}),ue(ne,"Message111",(t,n,o)=>({newNode:le.commonNewNode(n,o,!1),newChatMsg:{...t,id:o,action:{...t.action,sections:[]}}})),ue(ne,"Message112",(t,n,o)=>{const r=le.commonNewNode(n,o),i=le.newSourceHandles(r);return{newNode:r,newChatMsg:{...t,id:o,...t.condition?{condition:{...t.condition,conditions:t.condition.conditions.map((a,s)=>({...a,id:i[s].id,trigger_id:void 0}))}}:{}}}});var fe=(e=>(e[e.TYPE100=100]="TYPE100",e[e.TYPE101=101]="TYPE101",e[e.TYPE102=102]="TYPE102",e[e.TYPE103=103]="TYPE103",e[e.TYPE104=104]="TYPE104",e[e.TYPE105=105]="TYPE105",e[e.TYPE107=107]="TYPE107",e[e.TYPE108=108]="TYPE108",e[e.TYPE109=109]="TYPE109",e[e.TYPE110=110]="TYPE110",e[e.TYPE111=111]="TYPE111",e[e.TYPE112=112]="TYPE112",e[e.TYPE113=113]="TYPE113",e))(fe||{}),va=(e=>(e.TEXT="text",e.VIDEO="video",e.IMAGE="image",e.FILE="file",e))(va||{}),ma=(e=>(e.API="api",e.UPLOAD="upload",e))(ma||{}),ya=(e=>(e.DATA_FIELD="lead_data_field",e.USER_RESPONSE="user_response",e))(ya||{}),on=(e=>(e.IF_ELSE="if_else",e.TRUE_FALSE="true_false",e.API_VALIDATION="api_validation",e))(on||{}),lo=(e=>(e.SUCCESS="success",e.FAILURE="failure",e))(lo||{}),ba=(e=>(e.MAP="map",e.API="api",e.MANUAL="manual",e))(ba||{});const wa=E.exports.createContext(void 0),jg=()=>{let e=E.exports.useContext(wa);if(e===void 0)throw Error("Item must be used inside of a Object, otherwise it will not function correctly.");return e},yg=({children:e})=>{const{history:t,historyIndex:n,saveHistory:o}=So(),{currentMsgIndex:r,chatMsgs:i,setReloadDrawer:a,setRefreshNode:s,currentNodeIndex:l,currentNode:u,currentChatMsg:c,edges:f,nodes:d,setEdges:h,setNodes:p,setChatMsgs:x,copiedChatMsgs:S,copiedNode:m,setCopiedNode:N,setCopiedChatMsgs:C}=pa(),v=({type:z,index:H,makeHandle:P=!1})=>{var I,T,A,k,X;const g=typeof r=="number"&&i[r],w=typeof l=="number"?d[l]:void 0;if(!w||!g)return;const y=hs(),M=new Q().toString();switch(P&&(z===he.CONDITION?(I=w.data.handles)==null||I.unshift({type:q.SOURCE,id:M,position:ee.BOTTOM,style:{border:`1px solid ${y}`}}):(T=w.data.handles)==null||T.push({type:q.SOURCE,id:M,position:ee.BOTTOM,style:{border:`1px solid ${y}`}})),z){case he.OPTION:(A=g.options)==null||A.push({label:"",id:M,value:"",style:{border:`2px solid ${y}`}});break;case he.BUTTON:g.action&&((k=g.action.buttons)==null||k.push({button_id:M,title:"",type:"reply",style:{border:`2px solid ${y}`}}));break;case he.LIST_SECTION:g.action&&((X=g.action.sections)==null||X.push({id:M,title:"",rows:[]}));break;case he.LIST_SECTION_ITEM:g.action&&H!==void 0&&g.action.sections&&g.action.sections[H].rows.push({id:M,title:"",description:"",style:{borderLeft:`4px solid ${y}`}});break;case he.CONDITION:g.condition&&g.condition.conditions&&g.condition.conditions.unshift({id:M,values:"",removable:!0,style:{border:`2px solid ${y}`}});break}a(L=>L+=1),P&&s(L=>L+=1)},b=({type:z,removeHandle:H=!1,id:P,index:g})=>{var M,I,T,A,k,X,L,U,j,K;const w=typeof r=="number"&&i[r],y=typeof l=="number"?d[l]:void 0;if(!(!y||!w)){if(H){const R=y.data.handles.findIndex(Z=>Z.id===P);R!==-1&&y.data.handles.splice(R,1)}switch(z===he.LIST_SECTION&&w.action&&g!==void 0&&w.action.sections&&((M=w.action.sections[g].rows)==null||M.forEach(R=>{const Z=y.data.handles.findIndex(W=>W.id===R.id);Z!==-1&&y.data.handles.splice(Z,1)})),z){case he.OPTION:const R=(I=w.options)==null?void 0:I.findIndex(oe=>oe.id===P);typeof R=="number"&&((T=w.options)==null||T.splice(R,1));break;case he.BUTTON:const Z=w.action&&((A=w.action.buttons)==null?void 0:A.findIndex(oe=>oe.button_id===P));typeof Z=="number"&&w.action&&((k=w.action.buttons)==null||k.splice(Z,1));break;case he.LIST_SECTION:const W=w.action&&((X=w.action.sections)==null?void 0:X.findIndex(oe=>oe.id===P));typeof W=="number"&&w.action&&((L=w.action.sections)==null||L.splice(W,1));break;case he.LIST_SECTION_ITEM:const F=w.action&&g!==void 0&&w.action.sections&&w.action.sections[g].rows.findIndex(oe=>oe.id===P);typeof F=="number"&&w.action&&g!==void 0&&w.action.sections&&((U=w.action.sections[g].rows)==null||U.splice(F,1));break;case he.CONDITION:const re=w.condition&&((j=w.condition.conditions)==null?void 0:j.findIndex(oe=>oe.id===P));typeof re=="number"&&w.condition&&((K=w.condition.conditions)==null||K.splice(re,1));break}a(R=>R+=1),H&&s(R=>R+=1)}},O=(z,H)=>{if(!z||!H)return;const P=i.concat(H);x(P);const g=d.concat({...z,position:{x:z.position.x+50,y:z.position.y+50}});p(g),o({nodes:g,edges:f,chatMsgs:P})},D=(z,H,P,g)=>{switch(z){case fe.TYPE100:return ne.Message100(P,g,H);case fe.TYPE101:return ne.Message101(P,g,H);case fe.TYPE102:return ne.CommonCopy(P,g,H);case fe.TYPE103:return ne.CommonCopy(P,g,H);case fe.TYPE104:return ne.CommonCopy(P,g,H);case fe.TYPE105:return ne.CommonCopy(P,g,H);case fe.TYPE107:return ne.CommonCopy(P,g,H);case fe.TYPE108:return ne.Message108(P,g,H);case fe.TYPE109:return ne.Message109(P,g,H);case fe.TYPE110:return ne.Message110(P,g,H);case fe.TYPE111:return ne.Message111(P,g,H);case fe.TYPE112:return ne.Message112(P,g,H);case fe.TYPE113:return ne.CommonCopy(P,g,H)}},_=()=>{c&&u&&(N(u),C(c))},$=()=>{if(S&&m){const z=S.type,H=new Q().toString(),{newNode:P,newChatMsg:g}=D(z,H,S,m);P&&g&&O(P,g)}},Y=()=>{if(c&&u){const z=c.type,H=new Q().toString(),{newNode:P,newChatMsg:g}=D(z,H,c,u);P&&g&&O(P,g)}};return E.exports.useEffect(()=>{t[n]&&(p(t[n].nodes),h(t[n].edges),x(t[n].chatMsgs))},[n]),B(wa.Provider,{value:{addOption:v,removeOption:b,copyNode:_,pasteNode:$,duplicateNode:Y},children:e})},Yg=E.exports.memo(yg),bg="_DialogContentTextRoot_1v0s0_1",wg="_DialogActions_1v0s0_8",Sg="_Reset_1v0s0_13",xg="_Save_1v0s0_16",Qt={DialogContentTextRoot:bg,DialogActions:wg,Reset:Sg,Save:xg},Cg=({show:e,appearance:t,header:n,message:o,onClose:r,onConfirm:i})=>ce(ps,{maxWidth:"xs",open:e,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[B(ys,{id:"alert-dialog-title",children:n||"No Header"}),B(vs,{children:B(ks,{classes:{root:Qt.DialogContentTextRoot},id:"alert-dialog-description",children:o||""})}),ce(ms,{className:Qt.DialogActions,children:[t!=="alert"&&B(zo,{onClick:()=>{r()},className:Qt.Reset,children:"cancel"}),B(zo,{onClick:()=>{i&&i(),r()},className:Qt.Save,children:"Continue"})]})]}),Sa=rn.createContext(void 0),Ug=()=>{let e=E.exports.useContext(Sa);if(e===void 0)throw Error("Item must be used inside of a Object, otherwise it will not function correctly.");return e},Xg=({children:e})=>{const[t,n]=E.exports.useState({show:!1}),o=(a,s,l)=>n({type:"warning",header:s||"Warning",message:a,onConfirm:l,show:!0}),r=(a,s)=>n({type:"alert",header:s||"Action not permitted",message:a,show:!0}),i=()=>{n({...t,show:!1})};return ce(Sa.Provider,{value:{openAlertDialog:r,openWarningDialog:o},children:[B(Cg,{onConfirm:t.onConfirm,onClose:i,show:t.show,message:t.message,appearance:t.type,header:t.header}),e]})};class Eg{constructor(t,n,o,r,i,a){ue(this,"error_msg");this.id=t,this.type=n,this.position=o,this.label=r,this.className=i,this.title=a,this.error_msg=`\u26A0\uFE0F Please enter valid input!

\u{1F501} Reply 0\uFE0F\u20E3 to go back to main menu

\u{1F501} Reply #\uFE0F\u20E3 to go back`}get common_msg_settings(){return{assign_rules:!1,resend_on_error:!0,is_first_msg:!1,is_last_msg:!1,data_field:"",disable_auto_reminder:!1,jump:!1,response_type:"",save_input:!1,skip_on_back:!1}}get common_chat_msg(){return{id:this.id,type:this.type,title:this.title||"",msg_settings:this.common_msg_settings}}get common_node(){return{id:this.id,type:"customDefault",position:this.position,className:this.className||"parent"}}get Type100Msg(){const t={...this.common_chat_msg,title:"Interactive Text Response",primary_msg:"",error_msg:this.error_msg,options:[]},n={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP},{type:q.SOURCE,id:new Q().toString(),position:ee.BOTTOM}]}};return{flow_msg:t,flow_node:n}}get Type101Msg(){const t={...this.common_chat_msg,title:"Interactive Text Response - Branched",primary_msg:"",error_msg:this.error_msg,options:[]},n={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP}]}};return{flow_msg:t,flow_node:n}}get Type102Msg(){const t={...this.common_chat_msg,title:"Basic Message",primary_msg:"",error_msg:this.error_msg,options:[]},n={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP},{type:q.SOURCE,id:new Q().toString(),position:ee.BOTTOM}]}};return{flow_msg:t,flow_node:n}}get Type103Msg(){const t={...this.common_chat_msg,title:"Geo Location",location_msg:{type:ba.MAP},error_msg:this.error_msg,options:[]},n={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP},{type:q.SOURCE,id:new Q().toString(),position:ee.BOTTOM}]}};return{flow_msg:t,flow_node:n}}get Type104Msg(){const t={...this.common_chat_msg,title:"Document",header:{media_provider:ma.UPLOAD,type:va.FILE,uploaded_files:[],api_url:"",filename:""},primary_msg:"",error_msg:this.error_msg,options:[]},n={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP},{type:q.SOURCE,id:new Q().toString(),position:ee.BOTTOM}]}};return{flow_msg:t,flow_node:n}}get Type105Msg(){const t={...this.common_chat_msg,title:"API Basic Message",api_url:"",pre_msg:"",post_msg:"",error_msg:this.error_msg},n={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP},{type:q.SOURCE,id:new Q().toString(),position:ee.BOTTOM}]}};return{flow_msg:t,flow_node:n}}get Type107Msg(){const t={...this.common_chat_msg,title:"API Interactive Messages",api_url:"",pre_msg:"",post_msg:"",error_msg:this.error_msg},n={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP},{type:q.SOURCE,id:new Q().toString(),position:ee.BOTTOM}]}};return{flow_msg:t,flow_node:n}}get Type108Msg(){const t=new Q().toString(),n=new Q().toString(),o={...this.common_chat_msg,title:"True or False Condition",condition:{type:on.TRUE_FALSE,conditions:[{id:t,style:{border:"1px solid #00c02a"},removable:!0,data_field:""},{id:n,style:{border:"1px solid #AC5BC8"},removable:!1}]}},r={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP},{type:q.SOURCE,id:t,position:ee.BOTTOM,style:{border:"1px solid #00c02a"}},{type:q.SOURCE,id:n,position:ee.BOTTOM,style:{border:"1px solid #AC5BC8"}}]}};return{flow_msg:o,flow_node:r}}get Type109Msg(){const t=new Q().toString(),n={...this.common_chat_msg,title:"If and Else Condition",condition:{type:on.IF_ELSE,if_else_param_type:ya.USER_RESPONSE,evaluate_data_field:"",conditions:[{id:t,style:{border:"1px solid #00c02a"},removable:!1}]}},o={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP},{type:q.SOURCE,id:t,position:ee.BOTTOM,style:{border:"1px solid #00c02a"}}]}};return{flow_msg:n,flow_node:o}}get Type110Msg(){const t={...this.common_chat_msg,title:"Interactive Button Response",primary_msg:"",error_msg:this.error_msg,action:{buttons:[]}},n={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP}]}};return{flow_msg:t,flow_node:n}}get Type111Msg(){const t={...this.common_chat_msg,title:"Interactive List Response",primary_msg:"",error_msg:this.error_msg,action:{button:"",sections:[]}},n={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP}]}};return{flow_msg:t,flow_node:n}}get Type112Msg(){const t=new Q().toString(),n=new Q().toString(),o={...this.common_chat_msg,title:"API True or False",api_url:"",condition:{type:on.TRUE_FALSE,conditions:[{id:t,style:{border:"1px solid #00c02a"},removable:!1,validation_type:lo.SUCCESS},{id:n,style:{border:"1px solid #c85b5b"},removable:!1,validation_type:lo.FAILURE}]}},r={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP},{type:q.SOURCE,id:t,position:ee.BOTTOM,style:{border:"1px solid #00c02a"}},{type:q.SOURCE,id:n,position:ee.BOTTOM,style:{border:"1px solid #c85b5b"}}]}};return{flow_msg:o,flow_node:r}}get Type113Msg(){const t={...this.common_chat_msg,title:"API Interactive List Response",primary_msg:"",api_url:"",error_msg:this.error_msg},n={...this.common_node,data:{label:this.label,type:this.type,handles:[{type:q.TARGET,id:new Q().toString(),position:ee.TOP},{type:q.SOURCE,id:new Q().toString(),position:ee.BOTTOM,style:{border:"1px solid #00c02a"}}]}};return{flow_msg:t,flow_node:n}}get_node_data(){switch(this.type){case 100:return this.Type100Msg;case 101:return this.Type101Msg;case 102:return this.Type102Msg;case 103:return this.Type103Msg;case 104:return this.Type104Msg;case 105:return this.Type105Msg;case 107:return this.Type107Msg;case 108:return this.Type108Msg;case 109:return this.Type109Msg;case 110:return this.Type110Msg;case 111:return this.Type111Msg;case 112:return this.Type112Msg;case 113:return this.Type113Msg;default:return this.Type100Msg}}}var xa=(e=>(e.BEZIER="bezier",e.STRAIGHT="straight",e.STEP="step",e.SMOOTHSTEP="smoothstep",e))(xa||{});const Ca=E.exports.createContext(void 0),Vg=()=>{let e=E.exports.useContext(Ca);if(e===void 0)throw Error("Item must be used inside of a Object, otherwise it will not function correctly.");return e},Fg=({children:e})=>{const{saveHistory:t}=So(),{setCurrentDrawerMode:n}=ug(),{addChatMsg:o,onClickChatMsg:r,clearSelectedMsg:i,currentChatMsg:a,chatMsgs:s,setReloadDrawer:l,onChatMsgDelete:u,edges:c,setEdges:f,nodes:d,setNodes:h,setCurrentNodeIndex:p,currentNodeIndex:x,setRefreshNode:S,currentNode:m}=pa(),N=Tt("Space"),C=E.exports.useCallback(P=>{P.preventDefault(),P.dataTransfer.dropEffect="move"},[]),v=P=>{var M,I,T,A,k;const g=xa.SMOOTHSTEP;if(P.source===P.target)return;const w=s.find(X=>X.id===P.source);if(!w)return;const y={strokeWidth:3};switch(w.type){case 101:for(const L of w.options||[]){if(L.id!==P.sourceHandle)continue;L.trigger_id=P.target;const U=Re({...P,type:g,style:y},c);f(U),t({nodes:d,edges:U,chatMsgs:s});break}break;case 108:for(const L of((M=w.condition)==null?void 0:M.conditions)||[]){if(L.id!==P.sourceHandle)continue;L.trigger_id=P.target;const U=Re({...P,type:g,style:y},c);f(U),t({nodes:d,edges:U,chatMsgs:s});break}break;case 109:for(const L of((I=w.condition)==null?void 0:I.conditions)||[]){if(L.id!==P.sourceHandle)continue;L.trigger_id=P.target;const U=Re({...P,type:g,style:y},c);f(U),t({nodes:d,edges:U,chatMsgs:s});break}break;case 110:for(const L of((T=w.action)==null?void 0:T.buttons)||[]){if(L.button_id!==P.sourceHandle)continue;L.trigger_id=P.target;const U=Re({...P,type:g,style:y},c);f(U),t({nodes:d,edges:U,chatMsgs:s});break}break;case 111:for(const L of((A=w.action)==null?void 0:A.sections)||[])for(const U of L.rows){if(U.id!==P.sourceHandle)continue;U.trigger_id=P.target;const j=Re({...P,type:g,style:y},c);f(j),t({nodes:d,edges:j,chatMsgs:s});break}break;case 112:for(const L of((k=w.condition)==null?void 0:k.conditions)||[]){if(L.id!==P.sourceHandle)continue;L.trigger_id=P.target;const U=Re({...P,type:g,style:y},c);f(U),t({nodes:d,edges:U,chatMsgs:s});break}break;default:w.trigger_id=P.target;const X=Re({...P,type:g,style:y},c);f(X),t({nodes:d,edges:X,chatMsgs:s});break}},b=(P,g)=>{var y,M,I,T;const w=s.find(A=>A.id===g.source);if(!(!w||!g.target))switch(w.type){case 101:for(const k of w.options||[])if(k.id===P.sourceHandle){k.trigger_id=g.target;break}break;case 108:for(const k of((y=w.condition)==null?void 0:y.conditions)||[])if(k.id===P.sourceHandle){k.trigger_id=g.target;break}break;case 109:for(const k of((M=w.condition)==null?void 0:M.conditions)||[])if(k.id===P.sourceHandle){k.trigger_id=g.target;break}break;case 110:if(w.action){for(const k of w.action.buttons||[])if(k.button_id===P.sourceHandle){k.trigger_id=g.target;break}}break;case 111:for(const k of((I=w.action)==null?void 0:I.sections)||[])for(const X of k.rows)if(X.id===P.sourceHandle){X.trigger_id=g.target;break}break;case 112:for(const k of((T=w.condition)==null?void 0:T.conditions)||[])if(k.id===P.sourceHandle){k.trigger_id=g.target;break}break;default:w.trigger_id=g.target;const A=Sd(P,g,c);f(A),t({nodes:d,edges:A,chatMsgs:s});break}},O=P=>{var g,w,y,M,I;for(const T of P){const A=s.find(k=>k.id===T.source);if(!A)return;switch(A.type){case 101:for(const k of A.options||[])if(k.id===T.sourceHandle){k.trigger_id=void 0;break}break;case 108:for(const k of((g=A.condition)==null?void 0:g.conditions)||[])if(k.id===T.sourceHandle){k.trigger_id=void 0;break}break;case 109:for(const k of((w=A.condition)==null?void 0:w.conditions)||[])if(k.id===T.sourceHandle){k.trigger_id=void 0;break}break;case 110:for(const k of((y=A.action)==null?void 0:y.buttons)||[])if(k.button_id===T.sourceHandle){k.trigger_id=void 0;break}break;case 111:for(const k of((M=A.action)==null?void 0:M.sections)||[])for(const X of k.rows)if(X.id===T.sourceHandle){X.trigger_id=void 0;break}break;case 112:for(const k of((I=A.condition)==null?void 0:I.conditions)||[])if(k.id===T.sourceHandle){k.trigger_id=void 0;break}break;default:A.trigger_id=void 0;break}t({nodes:d,edges:P,chatMsgs:s})}},D=P=>{for(const g of P){const w=s.findIndex(I=>I.id===g.id),y=d.findIndex(I=>I.id===g.id);if(w===-1||y===-1)continue;const M=d;M.splice(y,1),h(M),u(w,M)}},_=(P,g,w)=>{const y=new Q,I=new Eg(y.toString(),P,w,B("p",{children:g})).get_node_data(),T=d.concat([I.flow_node]);h(T),p(d.length),o(I.flow_msg,T)},$=P=>{const g=d.findIndex(({id:w})=>w===P.id);d[g]={...d[g],position:P.position},t({nodes:d,edges:c,chatMsgs:s})},Y=(P,g)=>{if(n(so.NODE),g.id!==(a==null?void 0:a.id)){const w=d.findIndex(y=>y.id===g.id);if(w===-1)return;p(w),r(g.id),l(y=>y+=1)}},z=()=>{p(void 0),n(so.MENU),i()},H=P=>{typeof x=="number"&&(m&&(m.data.nodeDataLabel=P),S(g=>g+=1))};return B(Ca.Provider,{value:{dragOverFlow:C,onConnect:v,spacePressed:N,addFlowNode:_,onNodeClick:Y,deselectNode:z,updateNodeLabel:H,onEdgeUpdate:b,onEdgesDelete:O,onNodesDelete:D,onNodeDragEnd:$},children:e})};export{or as B,so as C,Xg as D,Bg as F,pn as H,ya as I,ba as L,ma as M,dg as N,he as O,ag as R,lo as V,J as _,Hg as a,Lg as b,Fg as c,Yg as d,mo as e,me as f,$g as g,G as h,pa as i,So as j,ug as k,jg as l,Vg as m,Yi as n,ig as o,zg as p,va as q,Ug as r,ve as s,Nt as t,ie as u};
