import{a as i,j as e,U as D,m as R,I as q,r as p,aj as U,B as H,ak as E,al as O,am as X,u as K,V,L as W,an as $,W as J}from"./index.073e8519.js";import{F as x,u as Y}from"./FormTextField.647df67e.js";import{S as L}from"./SettingsApi.374da98d.js";import{L as Q}from"./LeftArrow.235889a2.js";import{c as ee,H as te,d as re,e as se}from"./Wrappers.02633da0.js";import{C as G,a as Z}from"./Card.4c2ddd0d.js";import{F as g,A as ne,a as oe}from"./Form.9ae76886.js";import{p as ae}from"./Position.module.ff7b7fa6.js";import{g as ie}from"./mui-tel-input.es.561e28da.js";import{F as le,a as ce,A as de}from"./FileType.118a3b25.js";import{A as k}from"./AssetsApi.faaa77a5.js";import{I as me,u as ue}from"./index.f18b772a.js";import{C as M}from"./Tags.f971b212.js";import{F as T,G as j,S as pe,a as z,H as P}from"./Grid.1c4b00b4.js";import{F as A,a as N,b as he}from"./Style.8807be1a.js";import{M as S}from"./MenuItem.b94cf611.js";import{C as fe,a as ge}from"./Styles.3864ecd6.js";import{F as be}from"./Styles.c059562f.js";import{C as ve}from"./Card.8e7b8d20.js";import{C as xe}from"./CardContent.e16f8b10.js";import"./TextField.0a86a659.js";import"./Select.34c8d5fc.js";import"./useFormControl.888bcf17.js";import"./isMuiElement.425f7666.js";import"./Menu.0d419ddd.js";import"./List.f98f8b01.js";import"./useControlled.5350d55d.js";import"./ArrowRight.02d10553.js";import"./ListItemText.e51bd2bd.js";import"./listItemTextClasses.6cf4fbe2.js";import"./InputAdornment.461247ee.js";import"./tslib.es6.61e9e735.js";import"./toConsumableArray.52b4c8e6.js";import"./ListItem.715cd520.js";import"./listItemButtonClasses.0c3200c1.js";import"./styled.856237f2.js";import"./dividerClasses.4f58093b.js";const ye="Ipel",Se="Y-hb",B={File_Added:ye,PreFile:Se,"input-text":"KpUj"},Ce={display:"flex",justifyContent:"center",alignItems:"center",flex:1,padding:"20px",height:"100%",width:"100%",cursor:"pointer",textAlign:"center",borderRadius:"8px",borderColor:"#B8BAC2",borderStyle:"dashed",backgroundColor:" #F2F3F7",color:"#000000",opacity:"0.5",outline:"none",transition:"border .24s ease-in-out",boxSizing:"border-box"},Fe={borderColor:"#2196f3"},_e={borderColor:"#00e676"},Ae={borderColor:"#ff1744"},we="DVrJ",Pe="AoLB",Re="_-0O0",Be="Z2UP",C={Upload_Overlay:we,image_preview:Pe,File_Preview:Re,RemoveButton:Be},Ie=({removeFile:t,fileUrl:r})=>i("div",{className:"d-flex justify-content-center",children:[e("div",{className:C.Upload_Overlay,children:e(D,{className:R("mt-1",C.RemoveButton),onClick:t,children:"Remove"})}),e(q,{src:r,alt:"preview"})]}),Le=({removeFile:t,fileUrl:r})=>i("div",{className:"d-flex justify-content-center",children:[e("div",{className:C.Upload_Overlay,children:e(D,{className:R("mt-1",C.RemoveButton),onClick:t,children:"Remove"})}),e("video",{className:R(C.image_preview,"w-100"),src:r,controls:!0,autoPlay:!0,muted:!0,loop:!0})]}),Ne=({fileUrl:t,removeFile:r,fileName:s})=>e("div",{className:"d-flex justify-content-center",style:{height:"100%"},children:i("div",{className:C.File_Preview,children:[i("div",{className:"d-flex align-items-center",children:[e(me,{fontSize:"large"})," ",e("p",{children:s!==""?s:t==null?void 0:t.split("/").pop()})]}),e(D,{className:R("mt-1",C.RemoveButton),onClick:r,children:"Remove"})]})}),I={image:{label:"PNG / JPG",value:{"image/*":[]},component:({removeFile:t,fileUrl:r})=>e(Ie,{removeFile:t,fileUrl:r})},video:{label:"MP4 / 3GP / 4K",value:{"video/*":[]},component:({removeFile:t,fileUrl:r})=>e(Le,{removeFile:t,fileUrl:r})},file:{label:"DOC / XLS / PDF / ZIP",value:{"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-powerpoint":[".ppt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"application/vnd.ms-excel":[],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"text/plain":[],"application/pdf":[],"application/x-zip-compressed":[]},component:({fileUrl:t,removeFile:r,fileName:s})=>e(Ne,{fileUrl:t,removeFile:r,fileName:s})}},De=({onChange:t,fileType:r,removeFile:s,fileUrl:u,fileName:c,label:n})=>{var _;const{getRootProps:a,getInputProps:d,isDragActive:l,isDragAccept:m,isDragReject:o,open:b}=ue({maxFiles:1,maxSize:9e6,accept:I[r].value,noClick:!0,noKeyboard:!0,onDrop:t}),F=p.exports.useMemo(()=>({...Ce,...l?Fe:{},...m?_e:{},...o?Ae:{}}),[l,m,o]);return e(p.exports.Fragment,{children:u===""?e("button",{type:"button",className:B.PreFile,onClick:b,children:i("div",{...a({style:F}),children:[e("input",{...d()}),i("div",{className:B["input-text"],children:[e("h1",{children:n}),e("p",{children:(_=I[r])==null?void 0:_.label})]})]})}):e("div",{className:B.File_Added,children:I[r].component({removeFile:s,fileUrl:u,fileName:c})})})},Ee=({control:t,fileTypes:r=le.IMAGE,setValue:s,label:u="Upload Image",defaultFieldName:c,fileURL:n,fileNameField:a,width:d,height:l})=>{const{setErrorMessage:m}=U(),[o,b]=p.exports.useState(""),F=async(v,f,w)=>{try{if(v.length>0){const y=new FormData;y.append("file",v[0]),y.append("max_size","10000"),y.append("allowed_ext",ce[r]);const h=await k.fileUpload(de.ENGAGE_ASSETS,y);if(!h.success)throw Error(h.message);b(h.payload.file_name),s(c,h.payload.url),a&&a!==""&&s(a,h.payload.file_name)}}catch(y){console.error(y),m(y.message)}},_=async()=>{try{if(n!==""){const v=await k.fileRemoveByURL(n);if(!v.success)throw Error(v.message);s(c,"")}}catch(v){s(c,""),console.error(v),m(v.message)}};return e(H,{sx:{transition:"all 0.2s ease-in-out",width:{xs:d!=null?d:157,lg:180,xl:200},height:{xs:l!=null?l:157,lg:180,xl:200},margin:"auto"},children:e(De,{label:u,fileType:r,removeFile:_,fileUrl:n,fileName:o,onChange:F})})},Ge=({control:t,setValue:r,watch:s})=>{const{industryList:u}=E(),{logo:c,industry:n,mobile_number:a}=s();return e(G,{elevation:0,children:i(Z,{children:[e(M,{children:"Business Details"}),i(T,{children:[i(j,{children:[e(g,{children:e(x,{control:t,name:"business_name",label:"Business Name",placeholder:"Business Name",required:!0,sx:A})}),e(g,{children:i(x,{select:!0,control:t,label:"Industry",name:"industry",sx:N,required:!0,defaultValue:n!=null?n:"",children:[e(S,{value:"",disabled:!0,children:"Select Industry"}),u.map((d,l)=>e(S,{value:d,children:d},l))]})}),e(g,{children:e(x,{control:t,name:"website",label:"Website URL",placeholder:"Website URL",sx:A})}),e(g,{children:e(ie,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:"IN",value:a,onChange:d=>{r("mobile_number",d)},variant:"filled",sx:he})})]}),e(pe,{children:e(Ee,{setValue:r,control:t,label:"Upload Logo Image",defaultFieldName:"logo",fileURL:c!=null?c:""})})]})]})})},Me=({control:t,watch:r})=>{const{countriesList:s,provinces:u}=E(),{setProvinces:c}=O(),{country:n,state:a}=r(),d=p.exports.useRef(async()=>{const l=await L.getCountryProvinces(n);c(l)});return p.exports.useEffect(()=>{n&&d.current()},[n]),e(G,{elevation:0,children:i(Z,{children:[e(M,{children:"Business Address"}),e(T,{children:e(j,{children:e(g,{children:e(x,{control:t,name:"address",label:"Address",placeholder:"Address",required:!0,sx:A})})})}),i(z,{children:[e(P,{children:e(g,{children:i(x,{select:!0,control:t,label:"Country",name:"country",sx:N,required:!0,defaultValue:n!=null?n:"",children:[e(S,{value:"",disabled:!0,children:"Select Country"}),Array.isArray(s)&&s.map((l,m)=>e(S,{value:l.name,children:l.name},m))]})})}),e(P,{children:e(g,{children:u.length>0?i(x,{select:!0,control:t,label:"State",name:"state",sx:N,required:!0,defaultValue:a!=null?a:"",children:[e(S,{value:"",disabled:!0,children:"Select State"}),Array.isArray(u)&&u.map((l,m)=>e(S,{value:l.name,children:l.name},m))]}):e(x,{control:t,name:"state",label:"State",placeholder:"State",required:!0,sx:A})})})]}),i(z,{children:[e(P,{children:e(g,{children:e(x,{control:t,name:"city",label:"City",placeholder:"City",required:!0,sx:A})})}),e(P,{children:e(g,{children:e(x,{control:t,name:"pin_code",label:"Pincode",placeholder:"Pincode",required:!0,sx:A})})})]})]})})},Te=p.exports.lazy(()=>X(()=>import("./MapContainer.24949af1.js"),["assets/MapContainer.24949af1.js","assets/index.073e8519.js","assets/index.c86861cb.css","assets/index.f3d48750.js","assets/List.f98f8b01.js","assets/ListItem.715cd520.js","assets/listItemButtonClasses.0c3200c1.js","assets/isMuiElement.425f7666.js","assets/ListItemText.e51bd2bd.js","assets/listItemTextClasses.6cf4fbe2.js","assets/Search.d25c323a.js","assets/Select.34c8d5fc.js","assets/useFormControl.888bcf17.js","assets/Menu.0d419ddd.js","assets/useControlled.5350d55d.js","assets/MapContainer.270eacac.css"])),je=({control:t,watch:r,setValue:s})=>{var m;const{timeZoneList:u}=E(),{latitude:c,longitude:n,timezone:a}=r(),d=o=>{s("address",typeof o.address=="function"?o.address():o.address),s("latitude",typeof o.lat=="function"?o.lat():o.lat),s("longitude",typeof o.lng=="function"?o.lng():o.lng)},l=p.exports.useRef(async()=>{const[o]=u.filter(({label:b})=>b===a.label);o&&s("timezone.value",parseFloat(o.value))});return p.exports.useEffect(()=>{a.value&&l.current()},[a.value]),console.log(c,n,a),e(ve,{elevation:0,sx:fe,children:i(xe,{sx:ge,children:[e(M,{children:"Location Tagging & Timezone"}),e(p.exports.Suspense,{fallback:null,children:e(g,{children:e(Te,{onChange:d,initialCenter:{lat:c!=null?c:20.5937,lng:n!=null?n:78.9629}})})}),e(T,{children:e(j,{children:e(g,{children:i(x,{select:!0,control:t,label:"Time Zone",name:"timezone.label",sx:be,required:!0,defaultValue:(m=a==null?void 0:a.label)!=null?m:"",children:[e(S,{value:"",disabled:!0,children:"Select Time Zone"}),u.map((o,b)=>e(S,{value:o.label,children:o.label},b))]})})})})]})})},ke=()=>{const{isMobile:t}=K(),{setErrorMessage:r,setSuccessMessage:s}=U(),[u,c]=p.exports.useState(!0),[n,a]=p.exports.useState(Math.random()),{control:d,handleSubmit:l,watch:m,reset:o,setValue:b}=Y({defaultValues:{business_name:"",mobile_number:"",industry:"",website:"",logo:"",address:"",city:"",state:"",country:"",pin_code:"",latitude:20.5937,longitude:78.9629,timezone:{label:"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi",value:5.5}}}),{timezone:F}=m(),_=async f=>{try{const{id:w,mobile_number:y}=f,h=await L.putGeneralSettings(w,{...f,number:y,timezoneLabel:F.label,timezoneValue:F.value});if(h.errors)throw Error(h.errors.pop().message);if(!h.success&&h.message)throw Error(h.message);s(h.message),a(Math.random())}catch(w){r(w.message)}},v=p.exports.useRef(async()=>{try{const f=await L.getGeneralSettings();if(f.errors)throw Error(f.errors.pop().message);if(!f.success)throw Error(f.message);o(f.payload),c(!1)}catch(f){r(f.message)}});return p.exports.useEffect(()=>{v.current()},[n]),i(p.exports.Fragment,{children:[t&&i(ee,{children:[e(V,{component:W,to:"/business-settings",className:"icon-md-button",children:e(Q,{})}),e(te,{children:"General Settings"})]}),u?e(G,{className:ae.AbsCenter,children:e($,{height:72,width:72})}):e(re,{children:i(se,{onSubmit:l(_),children:[e(Ge,{control:d,watch:m,setValue:b}),e(Me,{control:d,watch:m}),e(je,{control:d,watch:m,setValue:b}),e(ne,{children:e(oe,{type:"submit",children:"Save"})})]})})]})},Ft=()=>i(p.exports.Fragment,{children:[e(J,{children:e("title",{children:"General Settings"})}),e(ke,{})]});export{Ft as default};
