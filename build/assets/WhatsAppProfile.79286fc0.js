import{u as j,am as D,aG as R,aH as N,aI as X,r as i,aJ as u,j as e,an as z,a as o,V as J,L as O,W as q}from"./index.cec7120b.js";import{u as K,F as l}from"./FormTextField.019c4658.js";import{F as Q,s as Y}from"./FormFileField.73b8cb3f.js";import{L as Z}from"./LeftArrow.6eedcb3f.js";import $ from"./LinkPlatForm.f6de4b11.js";import{d as ee,a as f,F as A}from"./Style.ced39dc3.js";import{c as te,H as se,d as re,e as ae}from"./Wrappers.abfff74b.js";import{F as c,A as ie,a as oe}from"./Form.eda6b8a2.js";import{C as w,a as ne,h as le}from"./Card.7d81a84a.js";import{C as ce,F as m,G as p,S as me,a as pe,H as S}from"./Grid.4237a7b2.js";import{p as de}from"./Position.module.ff7b7fa6.js";import{M as W}from"./MenuItem.d46dccf0.js";import"./TextField.9a0b3901.js";import"./Select.ed33f368.js";import"./useFormControl.2e215265.js";import"./isMuiElement.d9d5f399.js";import"./Menu.ad604829.js";import"./List.f61e1c40.js";import"./useControlled.5f64f480.js";import"./Styles.3864ecd6.js";import"./Tags.ee0d55e5.js";import"./toConsumableArray.52b4c8e6.js";import"./ListItem.50acb701.js";import"./listItemButtonClasses.bb70bebf.js";import"./styled.d7c606db.js";import"./CommonComponents.cbef5ad1.js";import"./ArrowRight.1466b508.js";import"./Styles.c059562f.js";import"./Card.f238ca4f.js";import"./CardContent.cf5d0c9f.js";import"./listItemTextClasses.1b518b65.js";import"./dividerClasses.25d8e604.js";const he=()=>{const{isMobile:P,isTablet:ue,navigate:L}=j(),{setErrorMessage:d,setSuccessMessage:y}=D(),{allowedVerticals:B,chatbotNumber:E}=R(),{platformExist:r}=N(),{setChatBotNumber:V}=X(),[v,g]=i.exports.useState(!0),[H,I]=i.exports.useState("Submit"),{control:n,handleSubmit:_,watch:k,reset:b,setValue:x}=K({defaultValues:{address:"",description:"",email:"",file:void 0,profile_picture_url:"",websites:[],messaging_product:"",vertical:""}}),G=k(),{profile_picture_url:M,vertical:h}=G,T=({target:{files:t}})=>{if(t&&t.length>0){const[s]=t;x("file",s),x("profile_picture_url",URL.createObjectURL(s))}},U=async t=>{try{const s=Y.serialize(t),a=await u.saveWAProfile(s);if(a.errors)throw Error(a.errors.pop().message);if(!a.success&&a.message)throw Error(a.message);y(a.message),L(0)}catch(s){d(s.message)}},F=i.exports.useCallback(async()=>{try{if(typeof r=="boolean"&&r){const t=await u.getWAProfile();if(!t.success)throw Error(t.message);I("Update"),b(t.payload)}}catch(t){d(t.message)}finally{g(!1)}},[r,b]),C=i.exports.useCallback(async()=>{try{if(typeof r=="boolean"&&r&&E===void 0){const t=await u.getWAChatBots();if(!t.success)throw Error(t.message);const[s]=t.payload;s&&V(s.id)}}catch(t){d(t.message)}finally{g(!1)}},[r]);return i.exports.useEffect(()=>{C()},[C]),i.exports.useEffect(()=>{F()},[F]),v?e(w,{className:de.AbsCenter,children:e(z,{height:72,width:72})}):o(i.exports.Fragment,{children:[P&&o(te,{children:[e(J,{component:O,to:"/business-settings",sx:{width:32,height:32},children:e(Z,{})}),e(se,{children:"WhatsApp Profile"})]}),e(re,{children:typeof r=="boolean"&&r===!1?e(ce,{children:e($,{})}):o(ae,{onSubmit:_(U),children:[e(w,{elevation:0,children:o(ne,{children:[e(le,{children:"Business Information"}),o(m,{children:[e(p,{children:e(c,{sx:{mb:0,height:"100%"},children:e(l,{control:n,name:"description",label:"Business Description",rows:5,sx:ee,inputProps:{maxLength:256},multiline:!0})})}),e(me,{children:e(Q,{control:n,name:"file",defaultValue:M,onChange:T,previewAlt:"Profile Image",label:"Upload Profile Image"})})]}),e(m,{sx:{mt:3.75},children:e(p,{children:e(c,{children:o(l,{select:!0,control:n,label:"Business Vertical",name:"vertical",sx:f,defaultValue:h!=null?h:"",children:[e(W,{value:"",disabled:!0,children:"Select Vertical"}),B.map(({label:t,value:s},a)=>e(W,{value:s,children:t},a))]})})})}),e(m,{children:e(p,{children:e(c,{children:e(l,{control:n,label:"Business Address",name:"address",inputProps:{maxLength:256},sx:f})})})}),e(m,{children:e(p,{children:e(c,{children:e(l,{control:n,label:"Email",name:"email",inputProps:{maxLength:256},sx:f})})})}),o(pe,{children:[e(S,{children:e(c,{children:e(l,{control:n,name:"websites[0]",label:"Website 1",placeholder:"Website 1",inputProps:{maxLength:256},sx:A})})}),e(S,{children:e(c,{children:e(l,{control:n,name:"websites[1]",label:"Website 2",placeholder:"Website 2",inputProps:{maxLength:256},sx:A})})})]}),e(ie,{children:e(oe,{type:"submit",children:H})})]})}),!1]})})]})},Oe=()=>o(i.exports.Fragment,{children:[e(q,{children:e("title",{children:"WhatsApp Profile"})}),e(he,{})]});export{Oe as default};
