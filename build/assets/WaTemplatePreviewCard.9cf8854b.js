var X=Object.defineProperty;var K=(s,e,n)=>e in s?X(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var l=(s,e,n)=>(K(s,typeof e!="symbol"?e+"":e,n),n);import{a as T,j as t,ap as u,aT as j,u as Q,ax as E,ab as N,ac as H,ad as S,U as h,aa as Y,B as L,r as x,aK as $,aQ as q}from"./index.02460f2f.js";import{D as Z}from"./Drawer.bb693379.js";import{a as w}from"./WhatsApp.0df87c02.js";import{P as z,a as J}from"./Play.042fdf4a.js";import{W as k,M as D,f as M}from"./Styles.c059562f.js";import{L as _}from"./Link.2b9bf4d7.js";const A=()=>T("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"//www.w3.org/2000/svg",children:[t("path",{d:"M10.5378 1.11084H7.60995C7.35479 1.11084 7.14798 1.31765 7.14798 1.57281C7.14798 1.82797 7.35479 2.03478 7.60995 2.03478H9.42251L4.99274 6.46455C4.81232 6.64498 4.81232 6.93746 4.99274 7.11788C5.08298 7.20807 5.20119 7.25319 5.3194 7.25319C5.43762 7.25319 5.55583 7.20807 5.64607 7.11788L10.0758 2.68811V4.50072C10.0758 4.75588 10.2826 4.96269 10.5378 4.96269C10.793 4.96269 10.9998 4.75588 10.9998 4.50072V1.57286C10.9998 1.31765 10.793 1.11084 10.5378 1.11084Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"}),t("path",{d:"M8.64816 6.53803C8.393 6.53803 8.18619 6.74484 8.18619 7V9.965H1.92394V3.70275H5.5C5.75516 3.70275 5.96197 3.49594 5.96197 3.24078C5.96197 2.98562 5.75516 2.77881 5.5 2.77881L1.46197 2.77881C1.20681 2.77881 1 2.98562 1 3.24078V10.427C1 10.6821 1.20681 10.8889 1.46197 10.8889H8.64816C8.90333 10.8889 9.11013 10.6821 9.11013 10.427V7C9.11013 6.74484 8.90333 6.53803 8.64816 6.53803Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"})]});class p{}l(p,"getWaTemplateMessages",async()=>await u("/wa-templates","GET")),l(p,"getWaTemplateMessage",async e=>await u(`/wa-templates/${e}`,"GET")),l(p,"syncWaTemplateMessage",async()=>await u("/wa-templates/sync-templates","GET")),l(p,"createWaTemplateMessage",async e=>await u("/wa-templates/create-template","POST",{data:e})),l(p,"getTemplateJSON",async e=>await u(`/wa-templates/example-content?id=${e}`,"GET")),l(p,"getTemplateSampleFile",async e=>await j("/sheet/create-xlsx","POST",{data:e})),l(p,"updateWaTemplateMessage",async(e,n)=>await u(`/wa-templates/update-template-form/${e}`,"PUT",{data:n})),l(p,"uploadTemplateFile",async e=>await u("/wa-templates/upload-template-file","POST",{data:e})),l(p,"updateWaTemplateComponents",async(e,n)=>await u(`/wa-templates/update/${e}`,"PUT",{data:n})),l(p,"deleteWaTemplateMessage",async e=>await u(`/wa-templates/delete/${e}`,"DELETE"));const ee="a6tA",ae="Ef8H",O={ConfirmBox:ee,PromptBox:ae},we=({title:s="Please Confirm",children:e,open:n,setOpen:d,onConfirm:f,positiveLabel:g="Yes",negativeLabel:W="No"})=>{const{isMobile:v}=Q();return v?T(Z,{open:n,onClose:(y,i)=>!E(i)&&d(!1),className:O.ConfirmBox,anchor:"bottom",children:[t(N,{children:s}),t(H,{children:e}),T(S,{children:[t(h,{variant:"contained",onClick:()=>{d(!1),f&&f()},color:"primary",autoFocus:!0,children:g}),t(h,{variant:"contained",onClick:()=>d(!1),color:"secondary",children:W})]})]}):T(Y,{open:n,onClose:(y,i)=>!E(i)&&d(!1),className:O.ConfirmBox,children:[t(N,{children:s}),t(H,{children:e}),T(S,{children:[t(h,{variant:"contained",onClick:()=>{d(!1),f&&f()},color:"primary",autoFocus:!0,children:g}),t(h,{variant:"contained",onClick:()=>d(!1),color:"secondary",children:W})]})]})},te="n-79",re="Pyy5",se="_7T6-",ne="Whrl",oe="KXAG",ie="c6D9",ce="uQG8",le="rN3N",C={WaTPreviewCard:te,WaTHeaderImgWrap:re,WaTHeaderCardMedia:se,WaTHeaderText:ne,WaTBodyText:oe,WaTFooterText:ie,WaTPreviewAction:ce,WhatsAppButton:le},de=({children:s})=>t("div",{className:C.WaTPreviewCard,children:s}),pe=({children:s})=>t("div",{className:C.WaTHeaderImgWrap,children:s}),me=({children:s})=>t("div",{className:C.WaTHeaderText,children:s}),ue=({children:s})=>t("div",{className:C.WaTBodyText,children:s}),Te=({children:s})=>t("div",{className:C.WaTFooterText,children:s}),he=({children:s,...e})=>t(L,{className:C.WaTPreviewAction,...e,children:s}),Fe=({components:s})=>{const e=structuredClone(s),n=x.exports.useRef(null),[d,f]=x.exports.useState(!1),[g,W]=x.exports.useState(!1),[v,y]=x.exports.useState(""),i=e.find(({type:a})=>a===w.HEADER),F=e.find(({type:a})=>a===w.BODY),P=e.find(({type:a})=>a===w.FOOTER),B=e.find(({type:a})=>a===w.BUTTONS),U=(a=>{if(a){const{example:o}=a;if(o){const{header_text:r}=o;return r||[]}else return[]}else return[]})(i),m=(a=>{if(a){const{example:o}=a;if(o){const{header_handle:r}=o;if(r&&r.length>0){const[c]=r;return c}else return""}else return""}else return""})(i),b=(a=>{if(a){const{example:o}=a;if(o){const{header_files:r}=o;if(r&&r.length>0){const[c]=r;return c}else return""}else return""}else return""})(i),G=(a=>{if(a){const{example:o}=a;if(o){const{body_text:r}=o;return r?r.length===1&&Array.isArray(r[0])?r.pop():r:[]}else return[]}else return[]})(F),I=(a=>i?a.reduce((o,r,c)=>r&&r!==""?o.replace(`{{${c+1}}}`,r):o,i.text):"")(U),R=(a=>F?a.reduce((o,r,c)=>r&&r!==""?o.replace(`{{${c+1}}}`,r):o,F.text):"")(G);return x.exports.useEffect(()=>{n.current&&(n.current.addEventListener("playing",()=>{y("playing")}),n.current.addEventListener("pause",()=>{y("")}),n.current.addEventListener("ended",()=>{y("")}),d?n.current.play():n.current.pause())},[d]),T(de,{children:[i&&i.format==="IMAGE"&&t(pe,{children:m&&m!==""&&t($,{component:"img",alt:"header-img",image:m,sx:k})}),i&&i.format==="VIDEO"&&T(_,{underline:"none",component:"button",type:"button",onClick:()=>f(!d),onMouseEnter:()=>W(!0),onMouseLeave:()=>W(!1),sx:D,children:[t($,{component:"video",ref:n,className:"video",disablePictureInPicture:!0,sx:{...k,height:130},children:m&&m!==""&&t("source",{src:m,type:"video/mp4"})}),T(L,{position:"absolute",display:"flex",children:[v===""&&t(z,{}),g&&v==="playing"&&t(J,{})]})]}),i&&i.format==="DOCUMENT"&&t(_,{underline:"none",className:"media-wrapper doc",href:m,target:"_blank",sx:{...D,backgroundColor:"#F5F5F5",color:"#A1AEB4",fontSize:90,fontWeight:900,lineHeight:"96px"},children:m&&m!==""?b.split(".").pop().slice(0,4).toUpperCase():""}),i&&i.format==="TEXT"&&t(me,{children:I}),t(ue,{children:q(R)}),P&&P.text!==""&&t(Te,{children:P.text}),B&&B.buttons.length>0&&t(he,{children:B.buttons.map((a,o)=>t(x.exports.Fragment,{children:a.type==="QUICK_REPLY"?t(h,{variant:"outlined",type:"button",sx:{...M,color:"#767676",minWidth:"calc(50% - 8px)"},children:a.text}):a.type==="PHONE_NUMBER"?t(h,{href:`tel:${a.phone_number}`,variant:"outlined",sx:{...M,color:"#32C5FF",minWidth:"100%"},children:a.text}):T(h,{href:a.example?a.example.reduce((r,c,V)=>c&&c!==""?r.replace(`{{${V+1}}}`,c):r,a.url):"",variant:"outlined",target:"_blank",rel:"noreferrer",sx:{...M,color:"#32C5FF",minWidth:"100%"},children:[t(A,{}),a.text]})},o))})]})};export{we as C,p as W,Fe as a};
