import{u as z,$ as O,aD as Z,aE as $,r as o,a as t,j as e,W as K,a0 as Q,ar as F,aF as B,T as q,Z as J}from"./index.be9654c3.js";import{u as Y,F as n}from"./FormTextField.1b6766b0.js";import{F as ee,s as se}from"./FormFileField.3f67ce77.js";import{W as u}from"./WASettingsApi.f07a18b6.js";import{H as w,a as A,A as te,b as W}from"./CommonComponents.e402a32f.js";import{L as ae}from"./LeftArrow.7303e2ae.js";import{b as ie,H as re,c as oe,d as ne,e as le,f as ce,g as de,h as me,F as c,i as v,G as d,j as l,K as he,S as pe,l as f,n as ue,k as y,M as fe,N as ge,O as xe,P as be,Q as Se}from"./Tags.2f8b9de5.js";import{C as L}from"./Card.575c8934.js";import{C as Ce}from"./CardContent.9878e4e7.js";import{M as E}from"./MenuItem.7db6cbfc.js";import"./TextField.a295446e.js";import"./Select.e4773e53.js";import"./isMuiElement.c36edbd6.js";import"./Menu.df47d1c7.js";import"./List.338bfb98.js";import"./listItemTextClasses.a29033a6.js";const Fe=()=>{const{isMobile:X,isTablet:H,navigate:I}=z(),{setErrorMessage:m,setSuccessMessage:V}=O(),{allowedVerticals:M,chatbotNumber:h}=Z(),{setChatBotNumber:k}=$(),[P,g]=o.exports.useState(!0),[R,T]=o.exports.useState("Submit"),{control:r,handleSubmit:_,watch:j,reset:x,setValue:b}=Y({defaultValues:{address:"",description:"",email:"",file:void 0,profile_picture_url:"",websites:[],messaging_product:"",vertical:""}}),U=j(),{profile_picture_url:G,vertical:p}=U,D=({target:{files:s}})=>{if(s&&s.length>0){const[a]=s;b("file",a),b("profile_picture_url",URL.createObjectURL(a))}},N=async s=>{try{const a=se.serialize(s),i=await u.saveWABasicSettings(a);if(i.errors)throw Error(i.errors.pop().message);if(!i.success&&i.message)throw Error(i.message);V(i.message),I(0)}catch(a){m(a.message)}},S=o.exports.useCallback(async()=>{try{const s=await u.getWABasicSettings();if(!s.success)throw Error(s.message);T("Update Business Information"),x(s.payload)}catch(s){m(s.message)}finally{g(!1)}},[x]),C=o.exports.useCallback(async()=>{try{if(h===void 0){const s=await u.getWAChatBots();if(!s.success)throw Error(s.message);const[a]=s.payload;a&&k(a.id)}}catch(s){m(s.message)}finally{g(!1)}},[]);return o.exports.useEffect(()=>{C()},[C]),o.exports.useEffect(()=>{S()},[S]),t(o.exports.Fragment,{children:[e(K,{children:e("title",{children:"WhatsApp Profile"})}),X&&t(ie,{children:[e(Q,{component:F,to:"/business-settings",sx:{width:32,height:32},children:e(ae,{})}),e(re,{children:"WhatsApp Profile"})]}),e(oe,{children:t(ne,{onSubmit:_(N),sx:le,children:[e(L,{elevation:0,sx:ce,children:t(Ce,{sx:de,children:[e(me,{children:"Business Information"}),t(c,{sx:v,children:[e(d,{children:e(l,{sx:{mb:0,height:"100%"},children:e(n,{control:r,name:"description",label:"Business Description",rows:5,sx:he,multiline:!0})})}),e(pe,{children:e(ee,{control:r,name:"file",defaultValue:G,onChange:D,previewAlt:"Profile Image",label:"Upload Profile Image"})})]}),e(c,{sx:{...v,mt:3.75},children:e(d,{children:e(l,{children:t(n,{select:!0,control:r,label:"Business Vertical",name:"vertical",sx:f,defaultValue:p!=null?p:"",children:[e(E,{value:"",disabled:!0,children:"Select Vertical"}),M.map(({label:s,value:a},i)=>e(E,{value:a,children:s},i))]})})})}),e(c,{children:e(d,{children:e(l,{children:e(n,{control:r,label:"Business Address",name:"address",sx:f})})})}),e(c,{children:e(d,{children:e(l,{children:e(n,{control:r,label:"Email",name:"email",sx:f})})})}),t(c,{sx:ue,children:[e(w,{sx:A,children:e(l,{children:e(n,{control:r,name:"websites[0]",label:"Website 1",placeholder:"Website 1",sx:y})})}),e(w,{sx:A,children:e(l,{children:e(n,{control:r,name:"websites[1]",label:"Website 2",placeholder:"Website 2",sx:y})})})]}),e(te,{children:!P&&e(W,{type:"submit",children:R})})]})}),h&&t(L,{elevation:0,sx:fe,children:[e(B,{component:"img",image:"/static/images/svg/bot.svg",alt:"bot",sx:{display:"flex",flexShrink:1,height:"auto",maxWidth:196,width:{xs:194,md:"calc(100% - 200px)"}}}),t(ge,{sx:{maxWidth:420},children:[t(q,{component:"h3",sx:{color:"#FFFFFF",fontSize:14,fontWeight:400,lineHeight:"18px"},children:["Start building your WhatsApp Chatbot in seconds. Use the advanced ",e("strong",{children:"Chatflow"})," tool by EasySocial, and build complex conversations in a jiffy."]}),t(xe,{sx:be,children:[t(W,{component:F,to:`/chat-flow/${h}`,sx:Se,disableIcon:!0,children:[e("span",{children:"Build Chatbot"}),e(J,{viewBox:"0 0 14 10",fill:"none",sx:{width:14,height:10},children:e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3692 4.19223L8.28352 1.00205L9.25275 0L14 4.90798L9.43077 10L8.46154 8.99796L11.3692 5.62372H0V4.19223H11.3692Z",fill:"#12B0EE"})})]}),H&&e(B,{component:"img",image:"/static/images/svg/messages.svg",alt:"messages",sx:{width:"auto"}})]})]})]})]})})]})},Te=()=>e(Fe,{});export{Te as default};
