import{bO as w,u as _,al as A,r as a,a as s,j as r,a$ as d,aq as E,c8 as S,c9 as P,W as B}from"./index.cad60e08.js";import{B as k}from"./BizParticipantsProvider.f7cd0f2b.js";import{A as D}from"./AllPaymentsApi.a6e7ef38.js";import{c as t,M as F,D as H}from"./MobileFilter.7d031739.js";import{M as $}from"./MobileHeader.78abc9dd.js";import{S as I}from"./ServiceExpiryAlert.58463c1a.js";import{C as R}from"./Card.3f1d897a.js";import{C as j}from"./CardContent.6d902907.js";import{T as z,a as G,b as L,c as O,d as n,e as W}from"./TableRow.b10e1c1d.js";import{L as q}from"./Link.fcc3aab5.js";import"./Search.f9240aa1.js";import"./Clear.231e894c.js";import"./Divider.f4cede0c.js";import"./dividerClasses.c1bb2bd9.js";import"./RangePopUp.33c0be38.js";import"./index.eb4aa1c1.js";import"./TextField.cc36efb4.js";import"./Select.b8b6b3cf.js";import"./useFormControl.de7f2220.js";import"./isMuiElement.281b9e72.js";import"./Menu.1f1f7d6f.js";import"./List.0c445adb.js";import"./useControlled.d5dc6300.js";import"./usePickerState.2f53a509.js";import"./Grid.e1364b9a.js";import"./InputAdornment.fa40757e.js";import"./StaticDateRangePicker.1799aa82.js";import"./PickersToolbarButton.90dc094d.js";import"./LeftArrow.00445c20.js";import"./Wrappers.a904deca.js";const U=()=>{const g=w(),{isMobile:h,isTablet:y}=_(),{showSnack:u}=A(),[p,T]=a.exports.useState([]),[f,b]=a.exports.useState(""),[x,v]=a.exports.useState(0),[c,C]=a.exports.useState(new Date(new Date().getFullYear(),0,1)),[l,N]=a.exports.useState(new Date(new Date().getFullYear(),11,31)),M=a.exports.useRef(async(e,o,m)=>{e&&e.setHours(0,0,0,0),o&&o.setHours(23,59,59,999);const i=await D.getAllOrders(e,o,m);if(!i.success)return u(i.message,"error");T(i.payload)});a.exports.useEffect(()=>{M.current(c,l,f)},[c,l,f]);const Y=a.exports.useRef(async()=>{const e=await D.getExpiryBusinessCount();if(!e.success)return u(e.message,"error");v(e.payload)});return a.exports.useEffect(()=>{Y.current()},[]),s(a.exports.Fragment,{children:[h&&r($,{title:"Orders"}),r("div",{className:t.ContentInner,children:s("div",{className:t.InnerWrapper,children:[h&&r(F,{placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>N(e)}),x>0&&r(I,{noOfBusi:x}),s(R,{elevation:0,className:t.Card,children:[y&&r(H,{title:"Orders",placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>N(e)}),r(j,{className:t.CardContent,children:p.length>0?r("div",{className:t.TableOuter,children:r(z,{className:t.TableContainer,children:s(G,{children:[r(L,{children:s(O,{className:t.TableHead,children:[r(n,{component:"th",children:"Date"}),r(n,{component:"th",children:"Particulars"}),r(n,{component:"th",children:"Order No."}),r(n,{component:"th",children:"Amount"}),r(n,{component:"th",children:"Inv No."})]})}),r(W,{children:p&&p.map(e=>{var i;let o="",m="";return e.order_type==="plan"&&(o=`${d(e.start_date).format("D")} - ${d(e.expiry_date).format("D MMM YYYY")}`,m=` Plan Code: ${(i=e.plan)==null?void 0:i.slug}`),r(E,{children:s(O,{children:[r(n,{className:t.OrderDate,children:d(e.created_at).format("D MMM YYYY")}),s(n,{className:t.Particulars,children:[r("p",{children:e.business.business_name}),s("span",{children:[e.particulars.charAt(0).toUpperCase()+e.particulars.slice(1)," -"," ",e.short_desc&&e.short_desc]}),r("br",{}),r("span",{children:o}),r("label",{children:m})]}),r(n,{className:t.OrderNumber,children:r(q,{onClick:()=>{g(`${e.id}`)},children:S(e.id)})}),s(n,{className:t.OrderDate,children:[e.currency==="INR"?"\u20B9":"$",P(e.paid_amount)]}),r(n,{children:S(e.invoice_number)})]})})})})]})})}):s("div",{className:t.NoData,children:["There is no order to show for this duration.",r("br",{}),"Try to select a different date range."]})})]})]})})]})},ye=()=>s(a.exports.Fragment,{children:[r(B,{children:r("title",{children:"Orders"})}),r(k,{children:r(U,{})})]});export{ye as default};
