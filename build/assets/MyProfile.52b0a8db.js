import{b as E,u as P,ai as L,r as a,A as u,a as o,j as e,$ as D,L as p,aj as M,W as k}from"./index.0fc63d4e.js";import{u as N}from"./index.esm.614544dc.js";import{g as U}from"./mui-tel-input.es.48583808.js";import{C as h,g as j}from"./Card.7dabd84d.js";import{c as v,H as B,d as H,e as T}from"./Wrappers.1ebcf3af.js";import{F as m,A as G,a as I}from"./Form.b9fdde4d.js";import{F as _,G as q}from"./Grid.c09f2429.js";import{F as f}from"./FormTextField.b738d457.js";import{h as R}from"./Tags.10a34bb4.js";import{F as g,a as V}from"./Style.57c2f24e.js";import{p as W}from"./Position.module.ff7b7fa6.js";import{L as X}from"./LeftArrow.6537b7c2.js";import"./ListItemIcon.5dad063c.js";import"./listItemTextClasses.69e23c5a.js";import"./List.d46fa225.js";import"./ListItemText.81c0cd5e.js";import"./TextField.dfa21b7c.js";import"./Select.7c32bfe7.js";import"./useFormControl.777b9f12.js";import"./isMuiElement.eba0df62.js";import"./Menu.e1eaa76e.js";import"./useControlled.8b48121e.js";import"./InputAdornment.f981dc0b.js";import"./MenuItem.1da1e3f8.js";import"./dividerClasses.e6a19444.js";import"./Card.8962761a.js";import"./CardContent.b2f0281d.js";import"./ArrowRight.2c02d15e.js";import"./withStyles.54d4ccd0.js";import"./ListItem.6d0b39ca.js";import"./listItemButtonClasses.9bb2654b.js";import"./styled.9b77f846.js";const Y="hCD5",$={ChangePasswordLink:Y},z=()=>{const{selectedBusiness:n}=E(),{isMobile:c}=P(),{setErrorMessage:b,setSuccessMessage:w}=L(),{control:d,watch:C,setValue:i,handleSubmit:F,reset:x}=N({defaultValues:{name:"",number:"",email:""}}),{number:y}=C(),S=a.exports.useRef(async()=>{try{const r=await u.authUserDetails();if(r.errors)throw Error(r.errors.pop().message);if(!r.success&&r.message)throw Error(r.message);const{name:t,mobile_number:l,email:s}=r.payload;i("name",t),i("number",l),i("email",s)}catch(r){console.log(r)}}),A=async r=>{try{const{name:t,email:l}=r,s=await u.updateUserDetails({name:t,email:l});if(s.errors)throw Error(s.errors.pop().message);if(!s.success&&s.message)throw Error(s.message);console.log(s),s.status===200?(w("User details updated successfully"),x(r)):b("Something went wrong")}catch(t){console.log(t)}};return a.exports.useEffect(()=>{S.current()},[]),o(a.exports.Fragment,{children:[c&&o(v,{children:[e(D,{component:p,to:n&&n.default_url?n.default_url:"/engage/chat",className:"icon-md-button",children:e(X,{})}),e(B,{children:"My Profile"})]}),o(a.exports.Suspense,{fallback:e(h,{className:W.AbsCenter,children:e(M,{height:72,width:72})}),children:[e(H,{children:e(T,{onSubmit:F(A),children:e(h,{elevation:0,children:o(j,{children:[e(R,{children:"Personal Details"}),e(_,{children:o(q,{children:[e(m,{children:e(f,{control:d,name:"name",label:"Name",placeholder:"Name",required:!0,sx:g})}),e(m,{children:e(U,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:"IN",value:y,onChange:r=>{i("number",r)},variant:"filled",sx:V,disabled:!0})}),e(m,{children:e(f,{control:d,name:"email",label:"Email",placeholder:"Email",required:!0,sx:g})})]})}),e(G,{children:e(I,{type:"submit",children:"Save"})})]})})})}),c&&o(p,{className:$.ChangePasswordLink,to:"/user/change-password",children:["Change Your Password >"," "]})]})]})},Le=()=>o(a.exports.Fragment,{children:[e(k,{children:e("title",{children:"My Profile"})}),e(z,{})]});export{Le as default};
