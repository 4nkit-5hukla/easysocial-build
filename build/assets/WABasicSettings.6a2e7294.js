import{r as n,a as s,j as e,W as A,T as q,L as B}from"./index.ca4653e7.js";import{u as O,F as l}from"./FormTextField.dd7b3262.js";import{F as Z,s as J}from"./FormFileField.ddeef8c5.js";import{u as K,c as Q,d as Y,e as u}from"./WASettingsProvider.61f81f4c.js";import{a as ee}from"./Global.54008107.js";import{u as te}from"./SnackProvider.08a64b2a.js";import{A as se,H as W,a as y,b as ae,c as v}from"./CommonComponents.19f64604.js";import{L as re}from"./LeftArrow.877c7df6.js";import{L as ie}from"./LinkPlatForm.f7cc7494.js";import{m as oe,H as ne,n as le,$ as ce,a0 as de,o as me,p as he,q as pe,r as fe,s as ue,F as d,t as L,G as m,u as c,a1 as ge,y as xe,w as g,z as be,v as X,a2 as Se,a3 as Ce,a4 as Fe,a5 as we,a6 as Ae}from"./Tags.2f698106.js";import{C as x}from"./Card.7631fdd5.js";import{I as Be,S as We}from"./IconButton.e7dfb1ec.js";import{C as ye}from"./CardContent.0479a1ff.js";import{M as E}from"./MenuItem.95488629.js";import{C as I}from"./Img.54634c73.js";import{T as ve}from"./Typography.a45e4cf2.js";import"./TextField.ce1d40b7.js";import"./styled.0e1c85d3.js";import"./Select.a7103252.js";import"./isMuiElement.c37f6e76.js";import"./Menu.8fd80eea.js";import"./Modal.658ef5c2.js";import"./ButtonBase.4773acc8.js";import"./useEnhancedEffect.b8f5feb9.js";import"./List.c558af58.js";import"./useId.cda5bee3.js";import"./Axios.d864dcf9.js";import"./styled.5343f2d4.js";import"./Button.2aa5cafc.js";import"./ListItem.16c41429.js";import"./listItemButtonClasses.39d1e949.js";const Le=()=>{const{isMobile:H,isTablet:P,navigate:V}=ee(),{setErrorMessage:h,setSuccessMessage:T}=te(),{allowedVerticals:k,chatbotNumber:p}=K(),{platformExist:r}=Q(),{setChatBotNumber:M}=Y(),[R,b]=n.exports.useState(!0),[_,U]=n.exports.useState("Submit"),{control:o,handleSubmit:j,watch:D,reset:S,setValue:C}=O({defaultValues:{address:"",description:"",email:"",file:void 0,profile_picture_url:"",websites:[],messaging_product:"",vertical:""}}),G=D(),{profile_picture_url:z,vertical:f}=G,N=({target:{files:t}})=>{if(t&&t.length>0){const[a]=t;C("file",a),C("profile_picture_url",URL.createObjectURL(a))}},$=async t=>{try{const a=J.serialize(t),i=await u.saveWAProfile(a);if(i.errors)throw Error(i.errors.pop().message);if(!i.success&&i.message)throw Error(i.message);T(i.message),V(0)}catch(a){h(a.message)}},F=n.exports.useCallback(async()=>{try{if(typeof r=="boolean"&&r){const t=await u.getWAProfile();if(!t.success)throw Error(t.message);U("Update Business Information"),S(t.payload)}}catch(t){h(t.message)}finally{b(!1)}},[r,S]),w=n.exports.useCallback(async()=>{try{if(typeof r=="boolean"&&r&&p===void 0){const t=await u.getWAChatBots();if(!t.success)throw Error(t.message);const[a]=t.payload;a&&M(a.id)}}catch(t){h(t.message)}finally{b(!1)}},[r]);return n.exports.useEffect(()=>{w()},[w]),n.exports.useEffect(()=>{F()},[F]),R?s(x,{elevation:0,sx:se,children:[e(A,{children:e("title",{children:"Loading..."})}),e(q,{height:72,width:72})]}):s(n.exports.Fragment,{children:[e(A,{children:e("title",{children:"WhatsApp Profile"})}),H&&s(oe,{children:[e(Be,{component:B,to:"/business-settings",sx:{width:32,height:32},children:e(re,{})}),e(ne,{children:"WhatsApp Profile"})]}),e(le,{children:typeof r=="boolean"&&r===!1?e(ce,{sx:de,children:e(ie,{})}):s(me,{onSubmit:j($),sx:he,children:[e(x,{elevation:0,sx:pe,children:s(ye,{sx:fe,children:[e(ue,{children:"Business Information"}),s(d,{sx:L,children:[e(m,{children:e(c,{sx:{mb:0,height:"100%"},children:e(l,{control:o,name:"description",label:"Business Description",rows:5,sx:ge,multiline:!0})})}),e(xe,{children:e(Z,{control:o,name:"file",defaultValue:z,onChange:N,previewAlt:"Profile Image",label:"Upload Profile Image"})})]}),e(d,{sx:{...L,mt:3.75},children:e(m,{children:e(c,{children:s(l,{select:!0,control:o,label:"Business Vertical",name:"vertical",sx:g,defaultValue:f!=null?f:"",children:[e(E,{value:"",disabled:!0,children:"Select Vertical"}),k.map(({label:t,value:a},i)=>e(E,{value:a,children:t},i))]})})})}),e(d,{children:e(m,{children:e(c,{children:e(l,{control:o,label:"Business Address",name:"address",sx:g})})})}),e(d,{children:e(m,{children:e(c,{children:e(l,{control:o,label:"Email",name:"email",sx:g})})})}),s(d,{sx:be,children:[e(W,{sx:y,children:e(c,{children:e(l,{control:o,name:"websites[0]",label:"Website 1",placeholder:"Website 1",sx:X})})}),e(W,{sx:y,children:e(c,{children:e(l,{control:o,name:"websites[1]",label:"Website 2",placeholder:"Website 2",sx:X})})})]}),e(ae,{children:e(v,{type:"submit",children:_})})]})}),p&&s(x,{elevation:0,sx:Se,children:[e(I,{component:"img",image:"/static/images/svg/bot.svg",alt:"bot",sx:{display:"flex",flexShrink:1,height:"auto",maxWidth:196,width:{xs:194,md:"calc(100% - 200px)"}}}),s(Ce,{sx:{maxWidth:420},children:[s(ve,{component:"h3",sx:{color:"#FFFFFF",fontSize:14,fontWeight:400,lineHeight:"18px"},children:["Start building your WhatsApp Chatbot in seconds. Use the advanced ",e("strong",{children:"Chatflow"})," tool by EasySocial, and build complex conversations in a jiffy."]}),s(Fe,{sx:we,children:[s(v,{component:B,to:`/chat-flow/${p}`,sx:Ae,disableIcon:!0,children:[e("span",{children:"Build Chatbot"}),e(We,{viewBox:"0 0 14 10",fill:"none",sx:{width:14,height:10},children:e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3692 4.19223L8.28352 1.00205L9.25275 0L14 4.90798L9.43077 10L8.46154 8.99796L11.3692 5.62372H0V4.19223H11.3692Z",fill:"#12B0EE"})})]}),P&&e(I,{component:"img",image:"/static/images/svg/messages.svg",alt:"messages",sx:{width:"auto"}})]})]})]})]})})]})},ot=()=>e(Le,{});export{ot as default};
