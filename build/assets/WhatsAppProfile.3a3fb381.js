import{u as j,al as D,aG as R,aH as N,aI as X,r as i,aJ as u,j as e,am as z,a as o,V as J,L as O,W as q}from"./index.ece9aff6.js";import{u as K,F as n}from"./FormTextField.5a9fbc13.js";import{F as Q,s as Y}from"./FormFileField.be3cfb8c.js";import{L as Z}from"./LeftArrow.be0f8108.js";import $ from"./LinkPlatForm.5bc4baa1.js";import{d as ee,a as f,F as A}from"./Style.ced39dc3.js";import{c as te,H as re,d as se,e as ae}from"./Wrappers.be76913d.js";import{F as c,A as ie,a as oe}from"./Form.16c5bf1c.js";import{C as w,a as le,h as ne}from"./Card.7c9ff246.js";import{C as ce,F as m,G as p,S as me,a as pe,H as S}from"./Grid.393e72af.js";import{p as de}from"./Position.module.ff7b7fa6.js";import{M as W}from"./MenuItem.137cbc08.js";import"./TextField.a574cfa5.js";import"./Select.03464598.js";import"./useFormControl.d2abdcc0.js";import"./isMuiElement.80cc5cad.js";import"./Menu.41d358f2.js";import"./List.c81063c5.js";import"./useControlled.1f67ff79.js";import"./Styles.3864ecd6.js";import"./Tags.8ada2413.js";import"./toConsumableArray.52b4c8e6.js";import"./ListItem.4d16eb6e.js";import"./listItemButtonClasses.8364a1bd.js";import"./styled.b7cc25cc.js";import"./CommonComponents.c8c3e0d5.js";import"./ArrowRight.50946729.js";import"./Styles.c059562f.js";import"./Card.f4c87cf9.js";import"./CardContent.0f5272a0.js";import"./Wrappers.module.1d569f64.js";import"./listItemTextClasses.ddeba4e1.js";import"./dividerClasses.be26840c.js";const he=()=>{const{isMobile:P,isTablet:ue,navigate:L}=j(),{setErrorMessage:d,setSuccessMessage:y}=D(),{allowedVerticals:B,chatbotNumber:E}=R(),{platformExist:s}=N(),{setChatBotNumber:V}=X(),[v,g]=i.exports.useState(!0),[H,I]=i.exports.useState("Submit"),{control:l,handleSubmit:_,watch:k,reset:b,setValue:x}=K({defaultValues:{address:"",description:"",email:"",file:void 0,profile_picture_url:"",websites:[],messaging_product:"",vertical:""}}),G=k(),{profile_picture_url:M,vertical:h}=G,T=({target:{files:t}})=>{if(t&&t.length>0){const[r]=t;x("file",r),x("profile_picture_url",URL.createObjectURL(r))}},U=async t=>{try{const r=Y.serialize(t),a=await u.saveWAProfile(r);if(a.errors)throw Error(a.errors.pop().message);if(!a.success&&a.message)throw Error(a.message);y(a.message),L(0)}catch(r){d(r.message)}},F=i.exports.useCallback(async()=>{try{if(typeof s=="boolean"&&s){const t=await u.getWAProfile();if(!t.success)throw Error(t.message);I("Update"),b(t.payload)}}catch(t){d(t.message)}finally{g(!1)}},[s,b]),C=i.exports.useCallback(async()=>{try{if(typeof s=="boolean"&&s&&E===void 0){const t=await u.getWAChatBots();if(!t.success)throw Error(t.message);const[r]=t.payload;r&&V(r.id)}}catch(t){d(t.message)}finally{g(!1)}},[s]);return i.exports.useEffect(()=>{C()},[C]),i.exports.useEffect(()=>{F()},[F]),v?e(w,{className:de.AbsCenter,children:e(z,{height:72,width:72})}):o(i.exports.Fragment,{children:[P&&o(te,{children:[e(J,{component:O,to:"/business-settings",sx:{width:32,height:32},children:e(Z,{})}),e(re,{children:"WhatsApp Profile"})]}),e(se,{children:typeof s=="boolean"&&s===!1?e(ce,{children:e($,{})}):o(ae,{onSubmit:_(U),children:[e(w,{elevation:0,children:o(le,{children:[e(ne,{children:"Business Information"}),o(m,{children:[e(p,{children:e(c,{sx:{mb:0,height:"100%"},children:e(n,{control:l,name:"description",label:"Business Description",rows:5,sx:ee,inputProps:{maxLength:256},multiline:!0})})}),e(me,{children:e(Q,{control:l,name:"file",defaultValue:M,onChange:T,previewAlt:"Profile Image",label:"Upload Profile Image"})})]}),e(m,{sx:{mt:3.75},children:e(p,{children:e(c,{children:o(n,{select:!0,control:l,label:"Business Vertical",name:"vertical",sx:f,defaultValue:h!=null?h:"",children:[e(W,{value:"",disabled:!0,children:"Select Vertical"}),B.map(({label:t,value:r},a)=>e(W,{value:r,children:t},a))]})})})}),e(m,{children:e(p,{children:e(c,{children:e(n,{control:l,label:"Business Address",name:"address",inputProps:{maxLength:256},sx:f})})})}),e(m,{children:e(p,{children:e(c,{children:e(n,{control:l,label:"Email",name:"email",inputProps:{maxLength:256},sx:f})})})}),o(pe,{children:[e(S,{children:e(c,{children:e(n,{control:l,name:"websites[0]",label:"Website 1",placeholder:"Website 1",inputProps:{maxLength:256},sx:A})})}),e(S,{children:e(c,{children:e(n,{control:l,name:"websites[1]",label:"Website 2",placeholder:"Website 2",inputProps:{maxLength:256},sx:A})})})]}),e(ie,{children:e(oe,{type:"submit",children:H})})]})}),!1]})})]})},qe=()=>o(i.exports.Fragment,{children:[e(q,{children:e("title",{children:"WhatsApp Profile"})}),e(he,{})]});export{qe as default};
