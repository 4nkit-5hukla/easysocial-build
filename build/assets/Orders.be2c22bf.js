import{u as _,al as v,r as s,a as n,j as r,a_ as m,aq as w,c8 as N,c9 as A,W as E}from"./index.538d2f9a.js";import{B as P}from"./BizParticipantsProvider.48bc3435.js";import{A as D}from"./AllPaymentsApi.97d7c6b6.js";import{M as B,c as t,a as F,D as H}from"./MobileFilter.3b6ad6b3.js";import{S as k}from"./ServiceExpiryAlert.43ff9237.js";import{C as I}from"./Card.196455a2.js";import{C as R}from"./CardContent.92b7395c.js";import{T as $,a as j,b as z,c as O,d as a,e as G}from"./TableRow.923e6847.js";import"./Search.3b45fe8d.js";import"./Clear.e1da9733.js";import"./LeftArrow.41efc6ac.js";import"./Wrappers.703b744c.js";import"./RangePopUp.6d4ad164.js";import"./index.eb4aa1c1.js";import"./TextField.97fa0105.js";import"./Select.73eb3e52.js";import"./useFormControl.607b6878.js";import"./isMuiElement.ae78b690.js";import"./Menu.0eef51cd.js";import"./List.80eed540.js";import"./useControlled.a7d9109e.js";import"./usePickerState.300664d3.js";import"./Grid.433b623f.js";import"./InputAdornment.a2203299.js";import"./StaticDateRangePicker.74b29e27.js";import"./PickersToolbarButton.b23ea7e1.js";import"./Link.af1c69c3.js";const W=()=>{const{isMobile:d,isTablet:y}=_(),{showSnack:h}=v(),[u,g]=s.exports.useState([]),[f,b]=s.exports.useState(""),[x,T]=s.exports.useState(0),[c,C]=s.exports.useState(new Date(new Date().getFullYear(),0,1)),[l,S]=s.exports.useState(new Date(new Date().getFullYear(),11,31)),M=s.exports.useRef(async(e,o,p)=>{e&&e.setHours(0,0,0,0),o&&o.setHours(23,59,59,999);const i=await D.getAllOrders(e,o,p);if(!i.success)return h(i.message,"error");g(i.payload)});s.exports.useEffect(()=>{M.current(c,l,f)},[c,l,f]);const Y=s.exports.useRef(async()=>{const e=await D.getExpiryBusinessCount();if(!e.success)return h(e.message,"error");T(e.payload)});return s.exports.useEffect(()=>{Y.current()},[]),n(s.exports.Fragment,{children:[d&&r(B,{title:"Orders"}),r("div",{className:t.ContentInner,children:n("div",{className:t.InnerWrapper,children:[d&&r(F,{placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>S(e)}),x>0&&r(k,{noOfBusi:x}),r(I,{elevation:0,className:t.Card,children:n(R,{className:t.CardContent,children:[y&&r(H,{title:"Orders",placeholder:"Search Order No.",setSearch:e=>b(e),from:c,to:l,setStartDate:e=>C(e),setEndDate:e=>S(e)}),r("div",{className:t.TableOuter,children:r($,{className:t.TableContainer,children:n(j,{children:[r(z,{children:n(O,{className:t.TableHead,children:[r(a,{component:"th",children:"Date"}),r(a,{component:"th",children:"Particulars"}),r(a,{component:"th",children:"Order No."}),r(a,{component:"th",children:"Amount"}),r(a,{component:"th",children:"Inv No."})]})}),r(G,{children:u&&u.map(e=>{var i;let o="",p="";return e.order_type==="plan"&&(o=`${m(e.start_date).format("D")} - ${m(e.expiry_date).format("D MMM YYYY")}`,p=` Plan Code: ${(i=e.plan)==null?void 0:i.slug}`),r(w,{children:n(O,{children:[r(a,{className:t.OrderDate,children:m(e.created_at).format("D MMM YYYY")}),n(a,{className:t.Particulars,children:[r("p",{children:e.business.business_name}),n("span",{children:[e.particulars.charAt(0).toUpperCase()+e.particulars.slice(1)," -"," ",e.short_desc&&e.short_desc]}),r("br",{}),r("span",{children:o}),r("label",{children:p})]}),r(a,{className:t.OrderNumber,children:N(e.id)}),n(a,{className:t.OrderDate,children:[e.currency==="INR"?"\u20B9":"$",A(e.paid_amount)]}),r(a,{children:N(e.invoice_number)})]})})})})]})})})]})})]})})]})},Ce=()=>n(s.exports.Fragment,{children:[r(E,{children:r("title",{children:"Orders"})}),r(P,{children:r(W,{})})]});export{Ce as default};
