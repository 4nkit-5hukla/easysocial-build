import{ak as m,j as pe}from"./index.38d3e2dd.js";import{T as ct}from"./TextField.23840b04.js";var Z=e=>e.type==="checkbox",G=e=>e instanceof Date,R=e=>e==null;const Ke=e=>typeof e=="object";var E=e=>!R(e)&&!Array.isArray(e)&&Ke(e)&&!G(e),Ge=e=>E(e)&&e.target?Z(e.target)?e.target.checked:e.target.value:e,ft=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ze=(e,s)=>e.has(ft(s)),ce=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,c=(e,s,t)=>{if(!s||!E(e))return t;const i=ce(s.split(/[,[\].]+?/)).reduce((n,o)=>R(n)?n:n[o],e);return k(i)||i===e?k(e[s])?t:e[s]:i};const ne={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},p={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},q={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},dt=m.createContext(null),De=()=>m.useContext(dt);var Je=(e,s,t,i=!0)=>{const n={};for(const o in e)Object.defineProperty(n,o,{get:()=>{const d=o;return s[d]!==p.all&&(s[d]=!i||p.all),t&&(t[d]=!0),e[d]}});return n},M=e=>E(e)&&!Object.keys(e).length,Qe=(e,s,t)=>{const{name:i,...n}=e;return M(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(o=>s[o]===(!t||p.all))},se=e=>Array.isArray(e)?e:[e],Xe=(e,s,t)=>t&&s?e===s:!e||!s||e===s||se(e).some(i=>i&&(i.startsWith(s)||s.startsWith(i)));function Se(e){const s=m.useRef(e);s.current=e,m.useEffect(()=>{const t=n=>{n&&n.unsubscribe()},i=!e.disabled&&s.current.subject.subscribe({next:s.current.callback});return()=>t(i)},[e.disabled])}function yt(e){const s=De(),{control:t=s.control,disabled:i,name:n,exact:o}=e||{},[d,v]=m.useState(t._formState),x=m.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),F=m.useRef(n),A=m.useRef(!0);F.current=n;const _=m.useCallback(g=>A.current&&Xe(F.current,g.name,o)&&Qe(g,x.current)&&v({...t._formState,...g}),[t,o]);return Se({disabled:i,callback:_,subject:t._subjects.state}),m.useEffect(()=>(A.current=!0,()=>{A.current=!1}),[]),Je(d,t._proxyFormState,x.current,!1)}var N=e=>typeof e=="string",Ye=(e,s,t,i)=>{const n=Array.isArray(e);return N(e)?(i&&s.watch.add(e),c(t,e)):n?e.map(o=>(i&&s.watch.add(o),c(t,o))):(i&&(s.watchAll=!0),t)},fe=e=>typeof e=="function",Ce=e=>{for(const s in e)if(fe(e[s]))return!0;return!1};function ht(e){const s=De(),{control:t=s.control,name:i,defaultValue:n,disabled:o,exact:d}=e||{},v=m.useRef(i);v.current=i;const x=m.useCallback(_=>{if(Xe(v.current,_.name,d)){const g=Ye(v.current,t._names,_.values||t._formValues);A(k(v.current)||E(g)&&!Ce(g)?{...g}:Array.isArray(g)?[...g]:k(g)?n:g)}},[t,d,n]);Se({disabled:o,subject:t._subjects.watch,callback:x});const[F,A]=m.useState(k(n)?t._getWatch(i):n);return m.useEffect(()=>{t._removeUnmounted()}),F}function gt(e){const s=De(),{name:t,control:i=s.control,shouldUnregister:n}=e,o=ze(i._names.array,t),d=ht({control:i,name:t,defaultValue:c(i._formValues,t,c(i._defaultValues,t,e.defaultValue)),exact:!0}),v=yt({control:i,name:t}),x=m.useRef(i.register(t,{...e.rules,value:d}));return m.useEffect(()=>{const F=(A,_)=>{const g=c(i._fields,A);g&&(g._f.mount=_)};return F(t,!0),()=>{const A=i._options.shouldUnregister||n;(o?A&&!i._stateFlags.action:A)?i.unregister(t):F(t,!1)}},[t,i,o,n]),{field:{name:t,value:d,onChange:m.useCallback(F=>{x.current.onChange({target:{value:Ge(F),name:t},type:ne.CHANGE})},[t]),onBlur:m.useCallback(()=>{x.current.onBlur({target:{value:c(i._formValues,t),name:t},type:ne.BLUR})},[t,i]),ref:m.useCallback(F=>{const A=c(i._fields,t);F&&A&&F.focus&&(A._f.ref={focus:()=>F.focus(),select:()=>F.select(),setCustomValidity:_=>F.setCustomValidity(_),reportValidity:()=>F.reportValidity()})},[t,i._fields])},formState:v,fieldState:Object.defineProperties({},{invalid:{get:()=>!!c(v.errors,t)},isDirty:{get:()=>!!c(v.dirtyFields,t)},isTouched:{get:()=>!!c(v.touchedFields,t)},error:{get:()=>c(v.errors,t)}})}}const vt=e=>e.render(gt(e));var bt=(e,s,t,i,n)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:n||!0}}:{},Ee=e=>/^\w*$/.test(e),Ze=e=>ce(e.replace(/["|']|\]/g,"").split(/\.|\[/));function w(e,s,t){let i=-1;const n=Ee(s)?[s]:Ze(s),o=n.length,d=o-1;for(;++i<o;){const v=n[i];let x=t;if(i!==d){const F=e[v];x=E(F)||Array.isArray(F)?F:isNaN(+n[i+1])?{}:[]}e[v]=x,e=e[v]}return e}const me=(e,s,t)=>{for(const i of t||Object.keys(e)){const n=c(e,i);if(n){const{_f:o,...d}=n;if(o&&s(o.name)){if(o.ref.focus&&k(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else E(d)&&me(d,s)}}};var Pe=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length)))),we=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $(e){let s;const t=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(we&&(e instanceof Blob||e instanceof FileList))&&(t||E(e))){s=t?[]:{};for(const i in e){if(fe(e[i])){s=e;break}s[i]=$(e[i])}}else return e;return s}function _t(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=k(e)?i++:e[s[i++]];return e}function T(e,s){const t=Ee(s)?[s]:Ze(s),i=t.length==1?e:_t(e,t),n=t[t.length-1];let o;i&&delete i[n];for(let d=0;d<t.slice(0,-1).length;d++){let v=-1,x;const F=t.slice(0,-(d+1)),A=F.length-1;for(d>0&&(o=e);++v<F.length;){const _=F[v];x=x?x[_]:e[_],A===v&&(E(x)&&M(x)||Array.isArray(x)&&!x.filter(g=>!k(g)).length)&&(o?delete o[_]:delete e[_]),o=x}}return e}function Fe(){let e=[];return{get observers(){return e},next:n=>{for(const o of e)o.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(o=>o!==n)}}),unsubscribe:()=>{e=[]}}}var le=e=>R(e)||!Ke(e);function z(e,s){if(le(e)||le(s))return e===s;if(G(e)&&G(s))return e.getTime()===s.getTime();const t=Object.keys(e),i=Object.keys(s);if(t.length!==i.length)return!1;for(const n of t){const o=e[n];if(!i.includes(n))return!1;if(n!=="ref"){const d=s[n];if(G(o)&&G(d)||E(o)&&E(d)||Array.isArray(o)&&Array.isArray(d)?!z(o,d):o!==d)return!1}}return!0}var Ne=e=>({isOnSubmit:!e||e===p.onSubmit,isOnBlur:e===p.onBlur,isOnChange:e===p.onChange,isOnAll:e===p.all,isOnTouch:e===p.onTouched}),ae=e=>typeof e=="boolean",Re=e=>e.type==="file",ke=e=>{const s=e?e.ownerDocument:0,t=s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement;return e instanceof t},et=e=>e.type==="select-multiple",Te=e=>e.type==="radio",Ft=e=>Te(e)||Z(e),Ve=e=>ke(e)&&e.isConnected;function ue(e,s={}){const t=Array.isArray(e);if(E(e)||t)for(const i in e)Array.isArray(e[i])||E(e[i])&&!Ce(e[i])?(s[i]=Array.isArray(e[i])?[]:{},ue(e[i],s[i])):R(e[i])||(s[i]=!0);return s}function tt(e,s,t){const i=Array.isArray(e);if(E(e)||i)for(const n in e)Array.isArray(e[n])||E(e[n])&&!Ce(e[n])?k(s)||le(t[n])?t[n]=Array.isArray(e[n])?ue(e[n],[]):{...ue(e[n])}:tt(e[n],R(s)?{}:s[n],t[n]):t[n]=!z(e[n],s[n]);return t}var xe=(e,s)=>tt(e,s,ue(s));const Ie={value:!1,isValid:!1},qe={value:!0,isValid:!0};var rt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?qe:{value:e[0].value,isValid:!0}:qe:Ie}return Ie},st=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>k(e)?e:s?e===""||R(e)?NaN:+e:t&&N(e)?new Date(e):i?i(e):e;const We={isValid:!1,value:null};var it=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,We):We;function Ae(e){const s=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):s.disabled))return Re(s)?s.files:Te(s)?it(e.refs).value:et(s)?[...s.selectedOptions].map(({value:t})=>t):Z(s)?rt(e.refs).value:st(k(s.value)?e.ref.value:s.value,e)}var Vt=(e,s,t,i)=>{const n={};for(const o of e){const d=c(s,o);d&&w(n,o,d._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:i}},oe=e=>e instanceof RegExp,Y=e=>k(e)?void 0:oe(e)?e.source:E(e)?oe(e.value)?e.value.source:e.value:e,xt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function je(e,s,t){const i=c(e,t);if(i||Ee(t))return{error:i,name:t};const n=t.split(".");for(;n.length;){const o=n.join("."),d=c(s,o),v=c(e,o);if(d&&!Array.isArray(d)&&t!==o)return{name:t};if(v&&v.type)return{name:o,error:v};n.pop()}return{name:t}}var At=(e,s,t,i,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(s||e):(t?i.isOnBlur:n.isOnBlur)?!e:(t?i.isOnChange:n.isOnChange)?e:!0,mt=(e,s)=>!ce(c(e,s)).length&&T(e,s),ie=e=>N(e)||m.isValidElement(e);function He(e,s,t="validate"){if(ie(e)||Array.isArray(e)&&e.every(ie)||ae(e)&&!e)return{type:t,message:ie(e)?e:"",ref:s}}var K=e=>E(e)&&!oe(e)?e:{value:e,message:""},$e=async(e,s,t,i)=>{const{ref:n,refs:o,required:d,maxLength:v,minLength:x,min:F,max:A,pattern:_,validate:g,name:B,valueAsNumber:de,mount:ee,disabled:ye}=e._f;if(!ee||ye)return{};const L=o?o[0]:n,I=V=>{i&&L.reportValidity&&(L.setCustomValidity(ae(V)?"":V||" "),L.reportValidity())},C={},J=Te(n),Q=Z(n),he=J||Q,P=(de||Re(n))&&!n.value||s===""||Array.isArray(s)&&!s.length,H=bt.bind(null,B,t,C),W=(V,b,S,O=q.maxLength,U=q.minLength)=>{const X=V?b:S;C[B]={type:V?O:U,message:X,ref:n,...H(V?O:U,X)}};if(d&&(!he&&(P||R(s))||ae(s)&&!s||Q&&!rt(o).isValid||J&&!it(o).isValid)){const{value:V,message:b}=ie(d)?{value:!!d,message:d}:K(d);if(V&&(C[B]={type:q.required,message:b,ref:L,...H(q.required,b)},!t))return I(b),C}if(!P&&(!R(F)||!R(A))){let V,b;const S=K(A),O=K(F);if(!R(s)&&!isNaN(s)){const U=n.valueAsNumber||+s;R(S.value)||(V=U>S.value),R(O.value)||(b=U<O.value)}else{const U=n.valueAsDate||new Date(s);N(S.value)&&(V=U>new Date(S.value)),N(O.value)&&(b=U<new Date(O.value))}if((V||b)&&(W(!!V,S.message,O.message,q.max,q.min),!t))return I(C[B].message),C}if((v||x)&&!P&&N(s)){const V=K(v),b=K(x),S=!R(V.value)&&s.length>V.value,O=!R(b.value)&&s.length<b.value;if((S||O)&&(W(S,V.message,b.message),!t))return I(C[B].message),C}if(_&&!P&&N(s)){const{value:V,message:b}=K(_);if(oe(V)&&!s.match(V)&&(C[B]={type:q.pattern,message:b,ref:n,...H(q.pattern,b)},!t))return I(b),C}if(g){if(fe(g)){const V=await g(s),b=He(V,L);if(b&&(C[B]={...b,...H(q.validate,b.message)},!t))return I(b.message),C}else if(E(g)){let V={};for(const b in g){if(!M(V)&&!t)break;const S=He(await g[b](s),L,b);S&&(V={...S,...H(b,S.message)},I(S.message),t&&(C[B]=V))}if(!M(V)&&(C[B]={ref:L,...V},!t))return C}}return I(!0),C};const wt={mode:p.onSubmit,reValidateMode:p.onChange,shouldFocusError:!0};function kt(e={}){let s={...wt,...e},t={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},i={},n=$(s.defaultValues)||{},o=s.shouldUnregister?{}:$(n),d={action:!1,mount:!1,watch:!1},v={mount:new Set,unMount:new Set,array:new Set,watch:new Set},x,F=0,A={};const _={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={watch:Fe(),array:Fe(),state:Fe()},B=Ne(s.mode),de=Ne(s.reValidateMode),ee=s.criteriaMode===p.all,ye=r=>l=>{clearTimeout(F),F=window.setTimeout(r,l)},L=async r=>{let l=!1;return _.isValid&&(l=s.resolver?M((await P()).errors):await W(i,!0),!r&&l!==t.isValid&&(t.isValid=l,g.state.next({isValid:l}))),l},I=(r,l=[],a,f,y=!0,u=!0)=>{if(f&&a){if(d.action=!0,u&&Array.isArray(c(i,r))){const h=a(c(i,r),f.argA,f.argB);y&&w(i,r,h)}if(_.errors&&u&&Array.isArray(c(t.errors,r))){const h=a(c(t.errors,r),f.argA,f.argB);y&&w(t.errors,r,h),mt(t.errors,r)}if(_.touchedFields&&u&&Array.isArray(c(t.touchedFields,r))){const h=a(c(t.touchedFields,r),f.argA,f.argB);y&&w(t.touchedFields,r,h)}_.dirtyFields&&(t.dirtyFields=xe(n,o)),g.state.next({isDirty:b(r,l),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else w(o,r,l)},C=(r,l)=>{w(t.errors,r,l),g.state.next({errors:t.errors})},J=(r,l,a,f)=>{const y=c(i,r);if(y){const u=c(o,r,k(a)?c(n,r):a);k(u)||f&&f.defaultChecked||l?w(o,r,l?u:Ae(y._f)):U(r,u),d.mount&&L()}},Q=(r,l,a,f,y)=>{let u=!1;const h={name:r},D=c(t.touchedFields,r);if(_.isDirty){const j=t.isDirty;t.isDirty=h.isDirty=b(),u=j!==h.isDirty}if(_.dirtyFields&&(!a||f)){const j=c(t.dirtyFields,r);z(c(n,r),l)?T(t.dirtyFields,r):w(t.dirtyFields,r,!0),h.dirtyFields=t.dirtyFields,u=u||j!==c(t.dirtyFields,r)}return a&&!D&&(w(t.touchedFields,r,a),h.touchedFields=t.touchedFields,u=u||_.touchedFields&&D!==a),u&&y&&g.state.next(h),u?h:{}},he=async(r,l,a,f)=>{const y=c(t.errors,r),u=_.isValid&&t.isValid!==l;if(e.delayError&&a?(x=ye(()=>C(r,a)),x(e.delayError)):(clearTimeout(F),x=null,a?w(t.errors,r,a):T(t.errors,r)),(a?!z(y,a):y)||!M(f)||u){const h={...f,...u?{isValid:l}:{},errors:t.errors,name:r};t={...t,...h},g.state.next(h)}A[r]--,_.isValidating&&!Object.values(A).some(h=>h)&&(g.state.next({isValidating:!1}),A={})},P=async r=>s.resolver?await s.resolver({...o},s.context,Vt(r||v.mount,i,s.criteriaMode,s.shouldUseNativeValidation)):{},H=async r=>{const{errors:l}=await P();if(r)for(const a of r){const f=c(l,a);f?w(t.errors,a,f):T(t.errors,a)}else t.errors=l;return l},W=async(r,l,a={valid:!0})=>{for(const f in r){const y=r[f];if(y){const{_f:u,...h}=y;if(u){const D=await $e(y,c(o,u.name),ee,s.shouldUseNativeValidation);if(D[u.name]&&(a.valid=!1,l))break;l||(D[u.name]?w(t.errors,u.name,D[u.name]):T(t.errors,u.name))}h&&await W(h,l,a)}}return a.valid},V=()=>{for(const r of v.unMount){const l=c(i,r);l&&(l._f.refs?l._f.refs.every(a=>!Ve(a)):!Ve(l._f.ref))&&ve(r)}v.unMount=new Set},b=(r,l)=>(r&&l&&w(o,r,l),!z(Oe(),n)),S=(r,l,a)=>{const f={...d.mount?o:k(l)?n:N(r)?{[r]:l}:l};return Ye(r,v,f,a)},O=r=>ce(c(d.mount?o:n,r,e.shouldUnregister?c(n,r,[]):[])),U=(r,l,a={})=>{const f=c(i,r);let y=l;if(f){const u=f._f;u&&(!u.disabled&&w(o,r,st(l,u)),y=we&&ke(u.ref)&&R(l)?"":l,et(u.ref)?[...u.ref.options].forEach(h=>h.selected=y.includes(h.value)):u.refs?Z(u.ref)?u.refs.length>1?u.refs.forEach(h=>!h.disabled&&(h.checked=Array.isArray(y)?!!y.find(D=>D===h.value):y===h.value)):u.refs[0]&&(u.refs[0].checked=!!y):u.refs.forEach(h=>h.checked=h.value===y):Re(u.ref)?u.ref.value="":(u.ref.value=y,u.ref.type||g.watch.next({name:r})))}(a.shouldDirty||a.shouldTouch)&&Q(r,y,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ge(r)},X=(r,l,a)=>{for(const f in l){const y=l[f],u=`${r}.${f}`,h=c(i,u);(v.array.has(r)||!le(y)||h&&!h._f)&&!G(y)?X(u,y,a):U(u,y,a)}},te=(r,l,a={})=>{const f=c(i,r),y=v.array.has(r),u=$(l);w(o,r,u),y?(g.array.next({name:r,values:o}),(_.isDirty||_.dirtyFields)&&a.shouldDirty&&(t.dirtyFields=xe(n,o),g.state.next({name:r,dirtyFields:t.dirtyFields,isDirty:b(r,u)}))):f&&!f._f&&!R(u)?X(r,u,a):U(r,u,a),Pe(r,v)&&g.state.next({}),g.watch.next({name:r})},Le=async r=>{const l=r.target;let a=l.name;const f=c(i,a);if(f){let y,u;const h=l.type?Ae(f._f):Ge(r),D=r.type===ne.BLUR||r.type===ne.FOCUS_OUT,j=!xt(f._f)&&!s.resolver&&!c(t.errors,a)&&!f._f.deps||At(D,c(t.touchedFields,a),t.isSubmitted,de,B),re=Pe(a,v,D);w(o,a,h),D?(f._f.onBlur&&f._f.onBlur(r),x&&x(0)):f._f.onChange&&f._f.onChange(r);const _e=Q(a,h,D,!1),ut=!M(_e)||re;if(!D&&g.watch.next({name:a,type:r.type}),j)return ut&&g.state.next({name:a,...re?{}:_e});if(!D&&re&&g.state.next({}),A[a]=(A[a],1),g.state.next({isValidating:!0}),s.resolver){const{errors:Me}=await P([a]),ot=je(t.errors,i,a),Be=je(Me,i,ot.name||a);y=Be.error,a=Be.name,u=M(Me)}else y=(await $e(f,c(o,a),ee,s.shouldUseNativeValidation))[a],u=await L(!0);f._f.deps&&ge(f._f.deps),he(a,u,y,_e)}},ge=async(r,l={})=>{let a,f;const y=se(r);if(g.state.next({isValidating:!0}),s.resolver){const u=await H(k(r)?r:y);a=M(u),f=r?!y.some(h=>c(u,h)):a}else r?(f=(await Promise.all(y.map(async u=>{const h=c(i,u);return await W(h&&h._f?{[u]:h}:h)}))).every(Boolean),!(!f&&!t.isValid)&&L()):f=a=await W(i);return g.state.next({...!N(r)||_.isValid&&a!==t.isValid?{}:{name:r},...s.resolver?{isValid:a}:{},errors:t.errors,isValidating:!1}),l.shouldFocus&&!f&&me(i,u=>c(t.errors,u),r?y:v.mount),f},Oe=r=>{const l={...n,...d.mount?o:{}};return k(r)?l:N(r)?c(l,r):r.map(a=>c(l,a))},Ue=(r,l)=>({invalid:!!c((l||t).errors,r),isDirty:!!c((l||t).dirtyFields,r),isTouched:!!c((l||t).touchedFields,r),error:c((l||t).errors,r)}),nt=r=>{r?se(r).forEach(l=>T(t.errors,l)):t.errors={},g.state.next({errors:t.errors})},lt=(r,l,a)=>{const f=(c(i,r,{_f:{}})._f||{}).ref;w(t.errors,r,{...l,ref:f}),g.state.next({name:r,errors:t.errors,isValid:!1}),a&&a.shouldFocus&&f&&f.focus&&f.focus()},at=(r,l)=>fe(r)?g.watch.subscribe({next:a=>r(S(void 0,l),a)}):S(r,l,!0),ve=(r,l={})=>{for(const a of r?se(r):v.mount)v.mount.delete(a),v.array.delete(a),c(i,a)&&(l.keepValue||(T(i,a),T(o,a)),!l.keepError&&T(t.errors,a),!l.keepDirty&&T(t.dirtyFields,a),!l.keepTouched&&T(t.touchedFields,a),!s.shouldUnregister&&!l.keepDefaultValue&&T(n,a));g.watch.next({}),g.state.next({...t,...l.keepDirty?{isDirty:b()}:{}}),!l.keepIsValid&&L()},be=(r,l={})=>{let a=c(i,r);const f=ae(l.disabled);return w(i,r,{_f:{...a&&a._f?a._f:{ref:{name:r}},name:r,mount:!0,...l}}),v.mount.add(r),a?f&&w(o,r,l.disabled?void 0:c(o,r,Ae(a._f))):J(r,!0,l.value),{...f?{disabled:l.disabled}:{},...s.shouldUseNativeValidation?{required:!!l.required,min:Y(l.min),max:Y(l.max),minLength:Y(l.minLength),maxLength:Y(l.maxLength),pattern:Y(l.pattern)}:{},name:r,onChange:Le,onBlur:Le,ref:y=>{if(y){be(r,l),a=c(i,r);const u=k(y.value)&&y.querySelectorAll&&y.querySelectorAll("input,select,textarea")[0]||y,h=Ft(u),D=a._f.refs||[];if(h?D.find(j=>j===u):u===a._f.ref)return;w(i,r,{_f:{...a._f,...h?{refs:[...D.filter(Ve),u,...Array.isArray(c(n,r))?[{}]:[]],ref:{type:u.type,name:r}}:{ref:u}}}),J(r,!1,void 0,u)}else a=c(i,r,{}),a._f&&(a._f.mount=!1),(s.shouldUnregister||l.shouldUnregister)&&!(ze(v.array,r)&&d.action)&&v.unMount.add(r)}}};return{control:{register:be,unregister:ve,getFieldState:Ue,_executeSchema:P,_getWatch:S,_getDirty:b,_updateValid:L,_removeUnmounted:V,_updateFieldArray:I,_getFieldArray:O,_subjects:g,_proxyFormState:_,get _fields(){return i},get _formValues(){return o},get _stateFlags(){return d},set _stateFlags(r){d=r},get _defaultValues(){return n},get _names(){return v},set _names(r){v=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:ge,register:be,handleSubmit:(r,l)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let f=!0,y=$(o);g.state.next({isSubmitting:!0});try{if(s.resolver){const{errors:u,values:h}=await P();t.errors=u,y=h}else await W(i);M(t.errors)?(g.state.next({errors:{},isSubmitting:!0}),await r(y,a)):(l&&await l({...t.errors},a),s.shouldFocusError&&me(i,u=>c(t.errors,u),v.mount))}catch(u){throw f=!1,u}finally{t.isSubmitted=!0,g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:M(t.errors)&&f,submitCount:t.submitCount+1,errors:t.errors})}},watch:at,setValue:te,getValues:Oe,reset:(r,l={})=>{const a=r||n,f=$(a),y=r&&!M(r)?f:n;if(l.keepDefaultValues||(n=a),!l.keepValues){if(l.keepDirtyValues)for(const u of v.mount)c(t.dirtyFields,u)?w(y,u,c(o,u)):te(u,c(y,u));else{if(we&&k(r))for(const u of v.mount){const h=c(i,u);if(h&&h._f){const D=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;try{ke(D)&&D.closest("form").reset();break}catch{}}}i={}}o=e.shouldUnregister?l.keepDefaultValues?$(n):{}:f,g.array.next({values:y}),g.watch.next({values:y})}v={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!_.isValid||!!l.keepIsValid,d.watch=!!e.shouldUnregister,g.state.next({submitCount:l.keepSubmitCount?t.submitCount:0,isDirty:l.keepDirty||l.keepDirtyValues?t.isDirty:!!(l.keepDefaultValues&&!z(r,n)),isSubmitted:l.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:l.keepDirty||l.keepDirtyValues?t.dirtyFields:l.keepDefaultValues&&r?xe(n,r):{},touchedFields:l.keepTouched?t.touchedFields:{},errors:l.keepErrors?t.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(r,l={})=>{c(i,r)&&(k(l.defaultValue)?te(r,c(n,r)):(te(r,l.defaultValue),w(n,r,l.defaultValue)),l.keepTouched||T(t.touchedFields,r),l.keepDirty||(T(t.dirtyFields,r),t.isDirty=l.defaultValue?b(r,c(n,r)):b()),l.keepError||(T(t.errors,r),_.isValid&&L()),g.state.next({...t}))},clearErrors:nt,unregister:ve,setError:lt,setFocus:(r,l={})=>{const a=c(i,r)._f,f=a.refs?a.refs[0]:a.ref;l.shouldSelect?f.select():f.focus()},getFieldState:Ue}}function Lt(e={}){const s=m.useRef(),[t,i]=m.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});s.current?s.current.control._options=e:s.current={...kt(e),formState:t};const n=s.current.control,o=m.useCallback(d=>{Qe(d,n._proxyFormState,!0)&&(n._formState={...n._formState,...d},i({...n._formState}))},[n]);return Se({subject:n._subjects.state,callback:o}),m.useEffect(()=>{n._stateFlags.mount||(n._proxyFormState.isValid&&n._updateValid(),n._stateFlags.mount=!0),n._stateFlags.watch&&(n._stateFlags.watch=!1,n._subjects.state.next({})),n._removeUnmounted()}),s.current.formState=Je(t,n._proxyFormState),s.current}const Ot=({control:e,rules:s,name:t,children:i,...n})=>pe(vt,{rules:s,control:e,name:t,render:({field:o})=>{var d;return pe(ct,{...n,value:(d=o.value)!=null?d:"",onChange:o.onChange,children:i})}});export{vt as C,Ot as F,gt as a,Lt as u};
