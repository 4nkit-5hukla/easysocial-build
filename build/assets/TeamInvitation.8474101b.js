var D=Object.defineProperty;var G=(s,t,r)=>t in s?D(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var f=(s,t,r)=>(G(s,typeof t!="symbol"?t+"":t,r),r);import{j as e,r as c,a,ae as W,I as x,ap as I,aj as P,u as O,V as X,bO as Y,c4 as H,W as L,c6 as U}from"./index.073e8519.js";import{u as N,a as C,A as z}from"./AuthProvider.5618803d.js";import{u as J,F as v}from"./FormTextField.647df67e.js";import{g as K}from"./mui-tel-input.es.561e28da.js";import{P as u}from"./Auth.bb306ec0.js";import{F as Z,G as Q}from"./Grid.1c4b00b4.js";import{F as g,a as R}from"./Form.9ae76886.js";import{b as ee,F as y}from"./Style.8807be1a.js";import{C as _}from"./Card.8e7b8d20.js";import{I as se}from"./InputAdornment.461247ee.js";import{V as te}from"./Visibility.7edd0101.js";import{V as re}from"./VisibilityOff.31e2c2c5.js";import"./tslib.es6.61e9e735.js";import"./TextField.0a86a659.js";import"./Select.34c8d5fc.js";import"./useFormControl.888bcf17.js";import"./isMuiElement.425f7666.js";import"./Menu.0d419ddd.js";import"./List.f98f8b01.js";import"./useControlled.5350d55d.js";import"./ListItemText.e51bd2bd.js";import"./listItemTextClasses.6cf4fbe2.js";import"./MenuItem.b94cf611.js";import"./dividerClasses.4f58093b.js";import"./ArrowRight.02d10553.js";const ae="Zrbq",ne={ImgWrapper:ae},ie=()=>{const{isLogged:s}=N();return e(c.exports.Fragment,{children:e("div",{className:ne.ImgWrapper,children:e("div",{style:{position:"fixed"},children:s?a(W,{children:[e("h1",{children:"Your team is waiting for you!"}),e(x,{src:"/static/images/svg/invitation_accept.svg",alt:"Signup"})]}):a(W,{children:[a("h1",{children:["You\u2019re Invited!",e("br",{})," Sign Up and start collaborating!"]}),e(x,{src:"/static/images/svg/team_sign_up.svg",alt:"Signup"})]})})})})};class l{}f(l,"getInvitation",async t=>await I(`/invitation/${t}`,"GET")),f(l,"Signup",async t=>await I("/auth/invited-sign-up","POST",{data:t})),f(l,"acceptTeamInvite",async t=>await I("/invitation/accept-invitation","POST",{data:t}));const oe="Hd2F",ce="VOpp",A={Form:oe,Title:ce},le=({invitationData:s})=>{const{setErrorMessage:t,setSuccessMessage:r}=P(),{country:m,countryName:i,setAccessToken:p,setUserId:o}=O(),{authCheck:d}=C(),[h,E]=c.exports.useState(u.PASSWORD),{control:b,handleSubmit:M,watch:V,setValue:k}=J({defaultValues:{name:s.name,mobile_number:s.number,email:s.email,country:i,password:"",confirm_password:""}}),{name:q,mobile_number:j}=V(),$=async S=>{const n=await l.Signup(S);if(!n.success)return t(n.messages?n.messages.errors[0].message:n.message);p(n.payload.token),o(n.payload.user_id),r(n.message),d()},B=()=>{E(h===u.PASSWORD?u.TEXT:u.PASSWORD)};return a(_,{component:"form",onSubmit:M($),className:A.Form,children:[e("div",{className:A.Title,children:"Register & Accept"}),e(Z,{children:a(Q,{children:[e(g,{children:e(K,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:m,value:j,onChange:(S,n)=>{var T;k("mobile_number",(T=n.numberValue)!=null?T:S)},variant:"filled",sx:ee,inputProps:{readOnly:!0}})}),e(g,{children:e(v,{control:b,name:"name",label:"Name",placeholder:"Name",value:q,required:!0,sx:y,inputProps:{readOnly:!0}})}),e(g,{children:e(v,{control:b,name:"email",label:"Email",placeholder:"Email",required:!0,sx:y,inputProps:{readOnly:!0}})}),e(g,{children:e(v,{control:b,name:"password",label:"Password",placeholder:"Password",type:h,required:!0,sx:y})}),e(g,{children:e(v,{control:b,name:"confirm_password",label:"Confirm Password",placeholder:"Confirm Password",type:h,required:!0,sx:y,InputProps:{endAdornment:e(se,{position:"end",children:e(X,{onClick:B,children:h===u.PASSWORD?e(te,{}):e(re,{})})})}})}),e(R,{type:"submit",children:"Register"})]})})]})},me="i5OF",pe="zxHM",de="wNLB",w={Wrapper:me,Title:pe,MiddlePara:de},ue=({invitationData:s})=>{const t=Y(),{setErrorMessage:r,setSuccessMessage:m}=P(),i=async()=>{const p={id:s.slug},o=await l.acceptTeamInvite(p);o.success?(m(o.message),setTimeout(()=>{t("/")},5e3)):r(o.message)};return a(_,{className:w.Wrapper,children:[e("div",{className:w.Title,children:"Accept Invitation"}),a("p",{children:["Dear ",s.name,","]}),a("p",{className:w.MiddlePara,children:["You have been invited by ",s.invited_by," to join ",e("strong",{children:s.business_name})," ","business profile on EasySocial. You are requested to join in and start contributing as a team member."]}),e("p",{children:"Follow the link below to accept the invitation."}),e(R,{type:"button",onClick:()=>i(),children:"Accept Invitation"})]})},ge=()=>{const{invitation_id:s}=H(),{setErrorMessage:t}=P(),{isLogged:r}=N(),{authCheck:m}=C(),[i,p]=c.exports.useState(),o=async()=>{const d=await l.getInvitation(s);d.success?p(d.payload):t(d.message)};return c.exports.useEffect(()=>{o()},[]),c.exports.useEffect(()=>{m()},[r]),e(c.exports.Fragment,{children:!r&&i?e(le,{invitationData:i}):i&&e(ue,{invitationData:i})})},he="oBgf",be="-KEX",fe="-MVJ",F={OuterWrapper:he,InnerWrapper:be,RightWrapper:fe},Xe=()=>{const{isTablet:s}=O();return a(c.exports.Fragment,{children:[e(L,{children:e("title",{children:"Signup"})}),e(U,{children:e(z,{children:e("div",{className:F.OuterWrapper,children:a("div",{className:F.InnerWrapper,children:[s&&e(ie,{}),e("div",{className:F.RightWrapper,children:e(ge,{})})]})})})})]})};export{Xe as default};
