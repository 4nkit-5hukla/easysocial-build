import{bO as v,u as A,aj as M,c9 as P,r as i,a,j as e,b0 as p,ae as S,ca as b,cb as _,W as F}from"./index.7f82941f.js";import{B as Y}from"./BizParticipantsProvider.5c0743ae.js";import{A as C}from"./AllPaymentsApi.9cf85212.js";import{c as t,M as B,D as E}from"./MobileFilter.c86cd5a2.js";import{M as k}from"./MobileHeader.7d1e818b.js";import{S as I}from"./ServiceExpiryAlert.21b4b258.js";import{C as w}from"./Card.273c3e06.js";import{C as $}from"./CardContent.f8f32f32.js";import{T as j,a as H,b as L,c as N,d as s,e as R}from"./TableRow.ccf6afd5.js";import{L as z}from"./Link.fbef9aee.js";import"./Search.21aa4e31.js";import"./Clear.6f7c24d8.js";import"./Divider.6de19a4b.js";import"./dividerClasses.ea04d24b.js";import"./CommonComponents.123cce4d.js";import"./ArrowRight.7cb9a070.js";import"./Styles.c059562f.js";import"./styled.00f71db4.js";import"./Stack.14a8c174.js";import"./index.esm.c1ac109e.js";import"./TextField.bc8832bf.js";import"./Select.460c2a9d.js";import"./useFormControl.95a504f2.js";import"./isMuiElement.ea3f4046.js";import"./Menu.22af6717.js";import"./List.771b1df1.js";import"./useControlled.15b67f87.js";import"./Check.eb9c5dde.js";import"./usePickerState.6c8ad4c5.js";import"./Grid.8af03d83.js";import"./InputAdornment.1fb89a13.js";import"./StaticDateRangePicker.1b0d65d6.js";import"./PickersToolbarButton.1e69d966.js";import"./LeftArrow.d8255c35.js";import"./Wrappers.c2aef7a9.js";const G=()=>{const x=v(),{isMobile:d,isTablet:O}=A(),{showSnack:h}=M(),{dateFilter:l,search:u}=P(),[m,y]=i.exports.useState([]),[f,g]=i.exports.useState(0),T=i.exports.useRef(async(r,n,c)=>{const o=await C.getAllOrders(r,n,c);if(!o.success)return h(o.message,"error");y(o.payload)}),D=i.exports.useRef(async()=>{const r=await C.getExpiryBusinessCount();if(!r.success)return h(r.message,"error");g(r.payload)});return i.exports.useEffect(()=>{T.current(l.from,l.to,u)},[u,l]),i.exports.useEffect(()=>{D.current()},[]),a(i.exports.Fragment,{children:[d&&e(k,{title:"Orders"}),e("div",{className:t.ContentInner,children:a("div",{className:t.InnerWrapper,children:[d&&e(B,{placeholder:"Search Order No."}),f>0&&e(I,{noOfBusi:f}),e(w,{elevation:0,className:t.Card,children:a($,{className:t.CardContent,children:[O&&e(E,{title:"Orders",placeholder:"Search Order No."}),m.length>0?e("div",{className:t.TableOuter,children:e(j,{className:t.TableContainer,children:a(H,{children:[e(L,{children:a(N,{className:t.TableHead,children:[e(s,{component:"th",children:"Date"}),e(s,{component:"th",children:"Particulars"}),e(s,{component:"th",children:"Order No."}),e(s,{component:"th",children:"Amount"}),e(s,{component:"th",children:"Inv No."})]})}),e(R,{children:m&&m.map(r=>{var o;let n="",c="";return r.order_type==="plan"&&(n=`${p(r.start_date).format("D")} - ${p(r.expiry_date).format("D MMM YYYY")}`,c=` Plan Code: ${(o=r.plan)==null?void 0:o.slug}`),e(S,{children:a(N,{children:[e(s,{className:t.OrderDate,children:p(r.created_at).format("D MMM YYYY")}),a(s,{className:t.Particulars,children:[e("p",{children:r.business.business_name}),a("span",{children:[r.particulars.charAt(0).toUpperCase()+r.particulars.slice(1)," -"," ",r.short_desc&&r.short_desc]}),e("br",{}),r.status!=="FAILED"&&a(i.exports.Fragment,{children:[e("span",{children:n}),e("label",{children:c})]})]}),e(s,{className:t.OrderNumber,children:e(z,{onClick:()=>{x(`${r.id}`)},children:b(r.id)})}),a(s,{className:t.OrderDate,children:[r.currency==="INR"?"\u20B9":"$",_(r.paid_amount)]}),e(s,{children:r.status!=="FAILED"&&b(r.invoice_number)})]})})})})]})})}):a("div",{className:t.NoData,children:["There is no order to show for this duration.",e("br",{}),"Try to select a different date range."]})]})})]})})]})},Ae=()=>a(i.exports.Fragment,{children:[e(F,{children:e("title",{children:"Orders"})}),e(Y,{children:e(G,{})})]});export{Ae as default};
