import{u as B,a as R,B as A}from"./BizParticipantsProvider.8e1aeb7a.js";import{$ as v,j as e,ar as N,a as t,a0 as h,r as m,as as X,at as O,au as V,av as U,e as S,u as j,W as q,L as G}from"./index.e3f0bed6.js";import{B as w}from"./BizParticipantsApi.8b1f7df6.js";import{D as K,d as Y,e as _,f as J,F as Q,G as $,g as y,b as Z,c as I}from"./CommonComponents.bdd24ec0.js";import{L}from"./LeftArrow.6b9df4e8.js";import{S as M}from"./Search.84059973.js";import{u as ee,F as k}from"./FormTextField.a6bf6d35.js";import{g as re}from"./mui-tel-input.es.d2b734df.js";import{v as F,x as te,T as ae,A as oe,D as ie,E as ne,I as se,J as le,K as H,L as E,M as z,m as ce,N as de,H as me,n as he,O as pe,P as ue,Q as ge,q as be,r as xe,R as fe,U as Ce,V as Ie,X as Te,Y as Me}from"./Tags.f65b3ae3.js";import{D as ye}from"./Drawer.83c2585d.js";import{C as W}from"./Clear.ee6db896.js";import{L as ve}from"./ListItem.7171109a.js";import{a as we,L as Se}from"./ListItemText.7368081e.js";import{M as ke}from"./MoreVert.82365302.js";import{M as Fe}from"./Menu.a9e9a192.js";import{M as D}from"./MenuItem.7658b5bd.js";import{C as De}from"./Card.d99ba1fd.js";import{C as Be}from"./CardContent.8e9c9589.js";import{D as Le}from"./Divider.ee3fd026.js";import"./TextField.05a88446.js";import"./Select.3aab61a2.js";import"./isMuiElement.60ad7b03.js";import"./useControlled.af948729.js";import"./InputAdornment.87ba5bb3.js";import"./withStyles.d25af336.js";import"./List.f7b67727.js";import"./listItemButtonClasses.567c0e0b.js";import"./listItemTextClasses.eb8a14b4.js";const He=({open:i,closeDrawer:o})=>{const{setErrorMessage:g,setSuccessMessage:p}=v(),{control:n,handleSubmit:s,watch:b,setValue:l}=ee({defaultValues:{name:"",number:"",email:"",plan_category:["engage"]}}),{number:f}=b();return e(ye,{anchor:"right",open:i,onClose:(c,a)=>!N(a)&&o(),sx:{zIndex:"modal"},children:t(K,{sx:{width:{xs:"100vw",md:360}},children:[t(Y,{children:[e(h,{onClick:o,className:"icon-md-button",children:e(L,{})}),e(_,{children:"Invite a Team Member"})]}),t(J,{onSubmit:s(async c=>{try{const a=await w.sendUserInvite(c);if(!a.success)throw Error(a.message);p(a.message),setTimeout(()=>window.location.reload(),1e3)}catch(a){g(a.message)}finally{o()}}),children:[e(Q,{children:t($,{children:[e(y,{children:e(k,{control:n,name:"name",label:"Name",placeholder:"Name",required:!0,sx:F})}),e(y,{children:e(k,{control:n,name:"email",label:"Email",placeholder:"Email",required:!0,sx:F})}),e(y,{children:e(re,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:"IN",value:f,onChange:(c,a)=>{var u;l("number",(u=a.numberValue)!=null?u:c),console.log(a.numberValue)},variant:"filled",sx:te})})]})}),t(Z,{children:[e(I,{disableIcon:!0,color:"secondary",onClick:o,children:"Cancel"}),e(I,{type:"submit",children:"Send Invite"})]})]})]})})},Ee=({isSearchActive:i,setSearchActive:o})=>{const{setShowInviteForm:g,setInvitedMemberFilter:p}=B();return t(ae,{children:[e(oe,{children:e(I,{disableIcon:!0,type:"button",onClick:()=>g(!0),sx:{py:0,px:.625,height:36,mt:0},children:"Invite Team Member"})}),t(ie,{children:[!i&&e(ne,{children:e(se,{children:"Team Members"})}),t(le,{children:[i&&e(H,{children:t(E,{children:[e(h,{disableTouchRipple:!0,disableFocusRipple:!0,disableRipple:!0,sx:{position:"absolute"},children:e(M,{})}),e(z,{onChange:({target:{value:n}})=>p(n),placeholder:"Search People"}),e(h,{onClick:()=>{p(""),o(!i)},sx:{position:"absolute",right:0,top:0},children:e(W,{})})]})}),!i&&e(h,{onClick:()=>o(n=>!n),children:e(M,{})})]})]})]})},ze=i=>{const{setErrorMessage:o,setSuccessMessage:g}=v(),{title:p,description:n,invitationId:s,status:b}=i,[l,f]=m.exports.useState(null),[C,c]=m.exports.useState(!1),a=()=>{c(!0)},u=()=>{c(!1)},T=d=>{f(d.currentTarget)},r=()=>{f(null)},x=async()=>{try{const d=await w.deleteUserInvite(s);if(!d.success)throw Error(d.message);g(d.payload.message),setTimeout(()=>window.location.reload(),1e3)}catch(d){o(d.message)}finally{u()}};return t(m.exports.Fragment,{children:[t(ve,{component:"div",sx:{px:{xs:0,md:2}},children:[e(we,{primary:e("div",{className:"primary-block",children:e("h2",{className:"list-title",children:p})}),secondary:n,sx:{"& .primary-block":{alignItems:"center",display:"flex",flexWrap:"wrap",gap:10,marginBottom:.75,"& .list-title":{color:"text.secondary",fontSize:15,fontWeight:500,lineHeight:"18px"}},"& .MuiListItemText-secondary":{color:"#767676b3",fontSize:10,maxWidth:290,fontWeight:400,lineHeight:"15px",textTransform:"capitalize"}}}),e(Se,{children:e(h,{onClick:T,children:e(ke,{})})})]}),Boolean(l)&&t(Fe,{anchorEl:l,open:Boolean(l),onClose:r,keepMounted:!0,MenuListProps:{"aria-labelledby":"Options"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{minWidth:120}},children:[e(D,{onClick:()=>{a(),r()},children:"Delete"}),!b&&e(D,{onClick:()=>{r()},children:"Resend"})]}),t(X,{open:C,"aria-labelledby":"responsive-dialog-title",children:[e(O,{id:"responsive-dialog-title",children:"Delete"}),e(V,{children:"Are you sure you want to delete?"}),t(U,{children:[e(S,{color:"secondary",onClick:()=>{u()},children:"Cancel"}),e(S,{onClick:async()=>{await x()},autoFocus:!0,children:"Delete"})]})]})]})},We=()=>{const{isMobile:i,isTablet:o}=j(),{setErrorMessage:g}=v(),[p,n]=m.exports.useState(!0),[s,b]=m.exports.useState(!1),{invitedMembers:l,showInviteForm:f,invitedMemberFilter:C}=R(),{setInvitedMembers:c,setShowInviteForm:a,setInvitedMemberFilter:u}=B(),T=m.exports.useCallback(async()=>{try{const r=await w.getUserInvites();if(!r.success)throw Error(r.message);c(r.payload.data),n(!1)}catch(r){g(r.message)}},[]);return m.exports.useEffect(()=>{T()},[T]),t(m.exports.Fragment,{children:[e(q,{children:e("title",{children:"Team Members"})}),i&&t(ce,{sx:de,children:[!s&&e(h,{component:G,to:"/business-settings",sx:{width:32,height:32},children:e(L,{})}),!s&&e(me,{children:"Team Members"}),s&&e(H,{children:t(E,{children:[e(h,{disableTouchRipple:!0,disableFocusRipple:!0,disableRipple:!0,sx:{position:"absolute"},children:e(M,{})}),e(z,{onChange:({target:{value:r}})=>u(r),placeholder:"Search People"}),e(h,{onClick:()=>{u(""),b(!s)},sx:{position:"absolute",right:0,top:0},children:e(W,{})})]})}),!s&&l.length>0&&e(h,{onClick:()=>b(r=>!r),children:e(M,{})})]}),e(he,{sx:pe,children:e(ue,{sx:ge,children:!p&&e(De,{elevation:0,sx:be,children:e(Be,{sx:xe,children:l.length===0?t(fe,{children:[e(Ce,{children:e(I,{disableIcon:!0,onClick:()=>a(!0),sx:{borderRadius:2,boxShadow:"0px 8px 8px rgba(50, 197, 255, 0.1)",fontSize:16,fontWeight:700,height:36,lineHeight:"19px",margin:"auto",textTransform:"capitalize"},children:"Invite Team Member"})}),e(Ie,{children:e(Te,{children:"You don\u2019t have any team members yet. Invite a team member and start working in collaboration."})})]}):t(m.exports.Fragment,{children:[o&&e(Ee,{isSearchActive:s,setSearchActive:b}),o&&e(Le,{}),l.filter(r=>{var x;return(x=r==null?void 0:r.name)==null?void 0:x.toLowerCase().includes(C==null?void 0:C.toLowerCase())}).map(({name:r,status:x,id:d},P)=>e(ze,{title:r,description:x,invitationId:d,status:x},P))]})})})})}),i&&l.length>0&&e(Me,{children:e(I,{onClick:()=>a(!0),variant:"outlined",color:"primary",disableIcon:!0,children:"Invite Team Member"})}),e(He,{open:f,closeDrawer:()=>a(!1)})]})},dr=()=>e(A,{children:e(We,{})});export{dr as default};
