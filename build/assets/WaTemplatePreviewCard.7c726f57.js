var U=Object.defineProperty;var G=(s,t,n)=>t in s?U(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var l=(s,t,n)=>(G(s,typeof t!="symbol"?t+"":t,n),n);import{a as x,j as r,ai as m,aM as R,ao as V,an as b,ap as X,aq as j,ar as q,$ as C,B as S,r as f,aF as E,aN as K}from"./index.a8b2df7b.js";import{a as y}from"./WhatsApp.0df87c02.js";import{P as Y,a as Q}from"./Play.646afd84.js";import{W as N,M as H,f as M}from"./Styles.ab1c376b.js";import{L as $}from"./Link.59aaed31.js";const Z=()=>x("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"//www.w3.org/2000/svg",children:[r("path",{d:"M10.5378 1.11084H7.60995C7.35479 1.11084 7.14798 1.31765 7.14798 1.57281C7.14798 1.82797 7.35479 2.03478 7.60995 2.03478H9.42251L4.99274 6.46455C4.81232 6.64498 4.81232 6.93746 4.99274 7.11788C5.08298 7.20807 5.20119 7.25319 5.3194 7.25319C5.43762 7.25319 5.55583 7.20807 5.64607 7.11788L10.0758 2.68811V4.50072C10.0758 4.75588 10.2826 4.96269 10.5378 4.96269C10.793 4.96269 10.9998 4.75588 10.9998 4.50072V1.57286C10.9998 1.31765 10.793 1.11084 10.5378 1.11084Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"}),r("path",{d:"M8.64816 6.53803C8.393 6.53803 8.18619 6.74484 8.18619 7V9.965H1.92394V3.70275H5.5C5.75516 3.70275 5.96197 3.49594 5.96197 3.24078C5.96197 2.98562 5.75516 2.77881 5.5 2.77881L1.46197 2.77881C1.20681 2.77881 1 2.98562 1 3.24078V10.427C1 10.6821 1.20681 10.8889 1.46197 10.8889H8.64816C8.90333 10.8889 9.11013 10.6821 9.11013 10.427V7C9.11013 6.74484 8.90333 6.53803 8.64816 6.53803Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"})]});class p{}l(p,"getWaTemplateMessages",async()=>await m("/wa-templates","GET")),l(p,"getWaTemplateMessage",async t=>await m(`/wa-templates/${t}`,"GET")),l(p,"syncWaTemplateMessage",async()=>await m("/wa-templates/sync-templates","GET")),l(p,"createWaTemplateMessage",async t=>await m("/wa-templates/create-template","POST",{data:t})),l(p,"getTemplateJSON",async t=>await m(`/wa-templates/example-content?id=${t}`,"GET")),l(p,"getTemplateSampleFile",async t=>await R("/sheet/create-xlsx","POST",{data:t})),l(p,"updateWaTemplateMessage",async(t,n)=>await m(`/wa-templates/update-template-form/${t}`,"PUT",{data:n})),l(p,"updateWaTemplateComponents",async(t,n)=>await m(`/wa-templates/update/${t}`,"PUT",{data:n})),l(p,"deleteWaTemplateMessage",async t=>await m(`/wa-templates/delete/${t}`,"DELETE"));const z="a6tA",J="Ef8H",A={ConfirmBox:z,PromptBox:J},ge=({title:s="Please Confirm",children:t,open:n,setOpen:T,onConfirm:W,positiveLabel:v="Yes",negativeLabel:g="No"})=>x(V,{open:n,onClose:(w,u)=>!b(u)&&T(!1),className:A.ConfirmBox,children:[r(X,{children:s}),r(j,{children:t}),x(q,{children:[r(C,{variant:"contained",onClick:()=>T(!1),color:"secondary",children:g}),r(C,{variant:"contained",onClick:()=>{T(!1),W&&W()},color:"primary",children:v})]})]}),ee="n-79",te="Pyy5",ae="_7T6-",re="Whrl",se="KXAG",ne="c6D9",oe="uQG8",ie="rN3N",h={WaTPreviewCard:ee,WaTHeaderImgWrap:te,WaTHeaderCardMedia:ae,WaTHeaderText:re,WaTBodyText:se,WaTFooterText:ne,WaTPreviewAction:oe,WhatsAppButton:ie},ce=({children:s})=>r("div",{className:h.WaTPreviewCard,children:s}),le=({children:s})=>r("div",{className:h.WaTHeaderImgWrap,children:s}),de=({children:s})=>r("div",{className:h.WaTHeaderText,children:s}),pe=({children:s})=>r("div",{className:h.WaTBodyText,children:s}),me=({children:s})=>r("div",{className:h.WaTFooterText,children:s}),Te=({children:s,...t})=>r(S,{className:h.WaTPreviewAction,...t,children:s}),ye=({components:s})=>{const t=structuredClone(s),n=f.exports.useRef(null),[T,W]=f.exports.useState(!1),[v,g]=f.exports.useState(!1),[w,u]=f.exports.useState(""),i=t.find(({type:e})=>e===y.HEADER),P=t.find(({type:e})=>e===y.BODY),F=t.find(({type:e})=>e===y.FOOTER),B=t.find(({type:e})=>e===y.BUTTONS),k=(e=>{if(e){const{example:o}=e;if(o){const{header_text:a}=o;return a||[]}else return[]}else return[]})(i),d=(e=>{if(e){const{example:o}=e;if(o){const{header_handle:a}=o;if(a&&a.length>0){const[c]=a;return c}else return""}else return""}else return""})(i),O=(e=>{if(e){const{example:o}=e;if(o){const{header_files:a}=o;if(a&&a.length>0){const[c]=a;return c}else return""}else return""}else return""})(i),L=(e=>{if(e){const{example:o}=e;if(o){const{body_text:a}=o;return a?a.length===1&&Array.isArray(a[0])?a.pop():a:[]}else return[]}else return[]})(P),_=(e=>i?e.reduce((o,a,c)=>a&&a!==""?o.replace(`{{${c+1}}}`,a):o,i.text):"")(k),D=(e=>P?e.reduce((o,a,c)=>a&&a!==""?o.replace(`{{${c+1}}}`,a):o,P.text):"")(L);return f.exports.useEffect(()=>{n.current&&(n.current.addEventListener("playing",()=>{u("playing")}),n.current.addEventListener("pause",()=>{u("")}),n.current.addEventListener("ended",()=>{u("")}),T?n.current.play():n.current.pause())},[T]),x(ce,{children:[i&&i.format==="IMAGE"&&r(le,{children:d&&d!==""&&r(E,{component:"img",alt:"header-img",image:d,sx:N})}),i&&i.format==="VIDEO"&&x($,{underline:"none",component:"button",type:"button",onClick:()=>W(!T),onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),sx:H,children:[r(E,{component:"video",ref:n,className:"video",disablePictureInPicture:!0,sx:{...N,height:130},children:d&&d!==""&&r("source",{src:d,type:"video/mp4"})}),x(S,{position:"absolute",display:"flex",children:[w===""&&r(Y,{}),v&&w==="playing"&&r(Q,{})]})]}),i&&i.format==="DOCUMENT"&&r($,{underline:"none",className:"media-wrapper doc",href:d,target:"_blank",sx:{...H,backgroundColor:"#F5F5F5",color:"#A1AEB4",fontSize:90,fontWeight:900,lineHeight:"96px"},children:d&&d!==""?O.split(".").pop().slice(0,4).toUpperCase():""}),i&&i.format==="TEXT"&&r(de,{children:_}),r(pe,{children:K(D)}),F&&F.text!==""&&r(me,{children:F.text}),B&&B.buttons.length>0&&r(Te,{children:B.buttons.map((e,o)=>r(f.exports.Fragment,{children:e.type==="QUICK_REPLY"?r(C,{variant:"outlined",type:"button",sx:{...M,color:"#767676",minWidth:"calc(50% - 8px)"},children:e.text}):e.type==="PHONE_NUMBER"?r(C,{href:`tel:${e.phone_number}`,variant:"outlined",sx:{...M,color:"#32C5FF",minWidth:"100%"},children:e.text}):x(C,{href:e.example?e.example.reduce((a,c,I)=>c&&c!==""?a.replace(`{{${I+1}}}`,c):a,e.url):"",variant:"outlined",target:"_blank",rel:"noreferrer",sx:{...M,color:"#32C5FF",minWidth:"100%"},children:[r(Z,{}),e.text]})},o))})]})};export{ge as C,p as W,ye as a};
