import{j as o,I as G,u as w,aj as V,r as l,a as t,V as W,c as F,A as M,W as $}from"./index.7f82941f.js";import{u as O,F as b}from"./FormTextField.05f4b970.js";import{g as _}from"./mui-tel-input.es.eb17df33.js";import{I as m,P as a}from"./Auth.bb306ec0.js";import{F as D,G as R}from"./Grid.a7877d24.js";import{F as I,a as j}from"./Form.51dca0ed.js";import{F as S,b as z}from"./Style.8807be1a.js";import{C as U}from"./Card.273c3e06.js";import{I as B}from"./InputAdornment.1fb89a13.js";import{V as X}from"./Visibility.49b2db7b.js";import{V as q}from"./VisibilityOff.16bbab4f.js";import"./TextField.bc8832bf.js";import"./Select.460c2a9d.js";import"./useFormControl.95a504f2.js";import"./isMuiElement.ea3f4046.js";import"./Menu.22af6717.js";import"./List.771b1df1.js";import"./useControlled.15b67f87.js";import"./ListItemText.e793f45c.js";import"./listItemTextClasses.9956a810.js";import"./MenuItem.50616e83.js";import"./dividerClasses.ea04d24b.js";import"./ArrowRight.7cb9a070.js";const H="_48mr",J="aEbD",K="NzPd",Q="-oSe",Y="HEnC",Z="Aeze",oo="poGz",eo="OC8M",s={LoginGfx:H,LoginForm:J,LoginFormCard:K,LoginTitle:Q,SignIn:Y,ForgotPassword:Z,LoginCaption:oo,LoginCaptionLink:eo},so=()=>o("div",{className:s.LoginGfx,children:o(G,{src:"/static/images/svg/login.svg",alt:"Login Graphics",width:455,height:478})}),ro=()=>{const{country:c,callingCode:d,setAccessToken:C,setUserId:P}=w(),{setErrorMessage:x}=V(),y=`+${d}`.length,[A,g]=l.exports.useState(m.EMAIL),u=6,[p,T]=l.exports.useState(a.PASSWORD),{control:h,handleSubmit:E,watch:v,setValue:n}=O({defaultValues:{email:"",password:""}}),{email:r,mobile_number:i}=v(),N=()=>{T(p===a.PASSWORD?a.TEXT:a.PASSWORD)},k=async L=>{const e=await M.doSignIn(L);if(!e.success){let f=e.message.includes("Password mis-match")?"It seems you entered a wrong user id or password, please try again.":e.message;return e.messages&&(f=e.messages.errors[0].message),x(f)}C(e.payload.token),P(e.payload.user_id)};return l.exports.useEffect(()=>{r&&r.length===u+1&&`${parseInt(r)}`.length===r.length&&(g(m.MOBILE),n("mobile_number",`+${d}${r}`),n("email",void 0))},[r]),l.exports.useEffect(()=>{i&&i.length===u+y&&(g(m.EMAIL),n("email",i.replace(`+${d}`,"")),n("mobile_number",void 0))},[i]),t("div",{className:s.LoginForm,children:[t(U,{component:"form",className:s.LoginFormCard,onSubmit:E(k),children:[o("h1",{className:s.LoginTitle,children:"Sign In, to get started!"}),o(D,{children:t(R,{children:[o(I,{children:A===m.EMAIL?o(b,{control:h,name:"email",label:"Email",placeholder:"Email",required:!0,sx:S,autoFocus:!0}):o(_,{label:"Mobile",placeholder:"Enter mobile no.",fullWidth:!0,defaultCountry:c,value:i,onChange:(L,e)=>{n("mobile_number",e.numberValue)},variant:"filled",sx:z,autoFocus:!0})}),o(I,{children:o(b,{control:h,name:"password",label:"Password",placeholder:"Password",type:p,required:!0,sx:S,InputLabelProps:{shrink:!0},InputProps:{endAdornment:o(B,{position:"end",children:o(W,{onClick:N,children:p===a.PASSWORD?o(X,{}):o(q,{})})})}})}),o(j,{type:"submit",className:s.SignIn,children:"Sign In"}),o(F,{to:"/forgot-password",className:s.ForgotPassword,children:"Forgot Password?"})]})})]}),t("div",{className:s.LoginCaption,children:["Don\u2019t have an account? ",o(F,{to:"/sign-up",className:s.LoginCaptionLink,children:"Sign Up"})]})]})},to="zdw2",no={LoginWrapper:to},vo=()=>{const{isTablet:c}=w();return t(l.exports.Fragment,{children:[o($,{children:o("title",{children:"Login"})}),t("div",{className:no.LoginWrapper,children:[c&&o(so,{}),o(ro,{})]})]})};export{vo as default};
