{"version":3,"sources":["api/Category/index.js","Container/CreateTemplate/CreateTemplate.module.css","Container/CreateTemplate/Components/Header/Header.module.css","Container/CreateTemplate/Components/Header/Header.js","Container/CreateTemplate/CreateTemplate.js"],"names":["getAllCategories","a","fetch","API","method","headers","Accept","localStorage","getItem","res","json","console","log","createCategory","data","body","JSON","stringify","createSubCategory","getAllElementCategories","createElementCategory","createElementSubCategory","module","exports","Header","props","className","classes","onClick","deselect","LeftArrow","goBack","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Header_Text","Title","title","Sub","sub","Next","disabled","onSubmit","id","window","location","href","CreateTemplate","useState","file","setFile","loading","setLoading","elements","setElements","setDisabled","base64","properties","setProperties","templateName","category","categoryName","SubCategory","SubCategoryName","value","setValue","error","setCategory","subCategory","setSubCategory","colors","setColors","colorOption","primary","secondary","tertiary","selectedColor","setSelectedColor","cb","createTemplate","then","catch","err","extractTranslateFromTransform","e","translateValue","style","getComputedStyle","matrix","WebKitCSSMatrix","transform","x","m41","y","m42","rotation","Math","round","asin","b","PI","extractStyleFromString","jsonStrig","items","split","j","length","current","substr","parse","capitalize","s","charAt","toUpperCase","slice","getRGB","str","sep","indexOf","map","Number","rgbToHex","r","g","toString","loadImgOnCanvas","url","folderName","imgName","image","Image","src","crossOrigin","el","document","getElementById","onload","canvas","appendChild","ownerDocument","importNode","createElement","getContext","drawImage","toBlob","blob","bucketName","storageRef","firebase","storage","ref","put","path","getDownloadURL","remove","type","loadSVG","svg","parentSVGTag","templateURL","pngurl","canvasWidth","baseVal","canvasHeight","arr","counter","groupIds","groupUrls","tx","ty","property","push","name","thumbnail","png","swatch","tag","subcategory","tagName","clipPath","key","groupElements","children","getBBox","groupChildren","dataset","element","k","i","attributes","undefined","nodeName","scaleX","scaleY","merged","Object","assign","translate","styles","entries","forEach","delete","alert","reload","transformValue","cx","cy","replace","text","smallest","textChildren","textElement","min","bold","fontWeight","italic","underline","displayValue","textContent","trim","fontSize","font","fontFamily","letterSpacing","alignment","textAlign","color","lineHeight","groupSVG","groupId","group","groupWidth","groupHeight","groupX","groupY","Blob","innerHTML","elementName","Date","getTime","includes","user_friendly_name","idIndex","findIndex","v","abs","tColor","filter","rgb","hex","Set","onSubmitFile","doc","DOMParser","parseFromString","documentElement","setAttribute","querySelector","render_xml","show","setShow","useEffect","message","categoryData","sub_category","tertiaryColors","Create_Template","BackDrop","Popup_Container","preventDefault","Resolution","htmlFor","required","onChange","target","defaultValue","Template_Name","placeholder","Category","selected","Category_name","Sub_Category","SubCategory_name","history","SVG_Container","Loader2","Upload_Btn","size","Upload_Handler","accept","files","Color_Container","Color_Box","backgroundColor","colorValue","option","prevState"],"mappings":"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","file":"static/js/93.61430594.chunk.js","sourcesContent":["import { API } from \"../../Backend\";\r\n\r\nexport const getAllCategories = async () => {\r\n  try {\r\n    const res = await fetch(`${API}/get/category`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"X-Auth-Token\": localStorage.getItem(\"token\"),\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n    return await res.json();\r\n  } catch (err) {\r\n    return console.log(err);\r\n  }\r\n};\r\n\r\nexport const createCategory = async (data) => {\r\n  try {\r\n    const res = await fetch(`${API}/create/category`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"X-Auth-Token\": localStorage.getItem(\"token\"),\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    return await res.json();\r\n  } catch (err) {\r\n    return console.log(err);\r\n  }\r\n};\r\n\r\nexport const createSubCategory = async (data) => {\r\n  try {\r\n    const res = await fetch(`${API}/create/sub-category`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"X-Auth-Token\": localStorage.getItem(\"token\"),\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    return await res.json();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const getAllElementCategories = async () => {\r\n  try {\r\n    const res = await fetch(`${API}/get/element-category`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"X-Auth-Token\": localStorage.getItem(\"token\"),\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n    return await res.json();\r\n  } catch (err) {\r\n    return console.log(err);\r\n  }\r\n};\r\n\r\nexport const createElementCategory = async (data) => {\r\n  try {\r\n    const res = await fetch(`${API}/create/element-category`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"X-Auth-Token\": localStorage.getItem(\"token\"),\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    return await res.json();\r\n  } catch (err) {\r\n    return console.log(err);\r\n  }\r\n};\r\n\r\nexport const createElementSubCategory = async (data) => {\r\n  try {\r\n    const res = await fetch(`${API}/create/element-sub-category`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"X-Auth-Token\": localStorage.getItem(\"token\"),\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    return await res.json();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Create_Template\":\"CreateTemplate_Create_Template__3fesO\",\"SVG_Container\":\"CreateTemplate_SVG_Container__30T6Q\",\"Upload_Handler\":\"CreateTemplate_Upload_Handler__J8cz0\",\"Upload_Btn\":\"CreateTemplate_Upload_Btn___g3VD\",\"BackDrop\":\"CreateTemplate_BackDrop__2p82m\",\"Popup_Container\":\"CreateTemplate_Popup_Container__29eLk\",\"Color_Container\":\"CreateTemplate_Color_Container__3N1YG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__GZEM_\",\"Header_Text\":\"Header_Header_Text__2dqKR\",\"Title\":\"Header_Title__ci4D4\",\"Sub\":\"Header_Sub__K-Lpz\",\"Next\":\"Header_Next__-p56w\",\"LeftArrow\":\"Header_LeftArrow__1atZb\"};","/** @format */\r\n\r\nimport React from \"react\";\r\nimport classes from \"./Header.module.css\";\r\nconst Header = (props) => {\r\n  return (\r\n    <header className={classes.Header} onClick={props.deselect}>\r\n      <div className={classes.LeftArrow} onClick={() => props.goBack()}>\r\n        <svg\r\n          width=\"9\"\r\n          height=\"14\"\r\n          viewBox=\"0 0 9 14\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <path\r\n            d=\"M8 1L1.8858 6.24074C1.42019 6.63984 1.42019 7.36016 1.8858 7.75926L8 13\"\r\n            stroke=\"white\"\r\n            strokeWidth=\"2\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"bevel\"\r\n          />\r\n        </svg>\r\n      </div>\r\n\r\n      <div className={classes.Header_Text}>\r\n        <div className={classes.Title}>\r\n          <h1>{props.title || \"Upload\"}</h1>\r\n        </div>\r\n        <div className={classes.Sub}>\r\n          <p>{props.sub}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* <div className={classes.Brighten}>\r\n        <a href=\"#filter\">\r\n          <img src={sun} alt=\"filters\" />\r\n        </a>\r\n      </div> */}\r\n\r\n      <div className={classes.Next}>\r\n        <button\r\n          disabled={props.disabled}\r\n          onClick={() =>\r\n            props.onSubmit(\r\n              (id) => (window.location.href = `/template/edit/${id}`)\r\n            )\r\n          }\r\n        >\r\n          Save{\" \"}\r\n          <svg\r\n            width=\"9\"\r\n            height=\"11\"\r\n            viewBox=\"0 0 9 14\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              d=\"M8 1L1.8858 6.24074C1.42019 6.63984 1.42019 7.36016 1.8858 7.75926L8 13\"\r\n              stroke=\"white\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"bevel\"\r\n            />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","/* eslint-disable no-loop-func */\r\n/* eslint-disable array-callback-return */\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { createTemplate } from \"../../api/Template\";\r\nimport firebase from \"../../firebase\";\r\nimport classes from \"./CreateTemplate.module.css\";\r\nimport Header from \"./Components/Header/Header\";\r\nimport Loader2 from \"../../Components/UI/Loader2/Loader2\";\r\nimport {\r\n  createCategory,\r\n  createSubCategory,\r\n  getAllCategories,\r\n} from \"../../api/Category\";\r\n\r\nconst CreateTemplate = (props) => {\r\n  const [file, setFile] = useState(null);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [elements, setElements] = useState([null]);\r\n\r\n  const [disabled, setDisabled] = useState(true);\r\n\r\n  const [properties, setProperties] = useState({\r\n    height: 1200,\r\n    width: 1200,\r\n    base64: null,\r\n  });\r\n\r\n  const [value, setValue] = useState({\r\n    templateName: \"\",\r\n    category: \"\",\r\n    categoryName: \"\",\r\n    SubCategory: \"\",\r\n    SubCategoryName: \"\",\r\n  });\r\n\r\n  const [category, setCategory] = useState({ error: false, category: null });\r\n\r\n  const [subCategory, setSubCategory] = useState({\r\n    error: false,\r\n    subCategory: null,\r\n  });\r\n\r\n  const [colors, setColors] = useState(null);\r\n\r\n  // [\"#fff\", \"#C84C09\", \"#436436\", \"#d6f599\", \"#420217\", \"#575d90\"];\r\n\r\n  const [colorOption] = useState([\"primary\", \"secondary\", \"tertiary\"]);\r\n\r\n  const [selectedColor, setSelectedColor] = useState({\r\n    primary: [],\r\n    secondary: [],\r\n    tertiary: [],\r\n  });\r\n\r\n  const onSubmit = async (cb) => {\r\n    await createTemplate(elements)\r\n      .then((data) => {\r\n        return cb(data.id);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const extractTranslateFromTransform = (e) => {\r\n    let translateValue = null;\r\n    let style = window.getComputedStyle(e);\r\n    let matrix = new window.WebKitCSSMatrix(style.transform);\r\n\r\n    translateValue = {};\r\n    translateValue.x = matrix.m41;\r\n    translateValue.y = matrix.m42;\r\n    translateValue.rotation = Math.round(Math.asin(matrix.b) * (180 / Math.PI));\r\n\r\n    return translateValue;\r\n  };\r\n\r\n  const extractStyleFromString = (style) => {\r\n    let jsonStrig = \"[{\";\r\n    const items = style.split(\";\");\r\n    for (let j = 0; j < items.length; j++) {\r\n      const current = items[j].split(\":\");\r\n      jsonStrig += '\"' + current[0] + '\":\"' + current[1] + '\",';\r\n    }\r\n    jsonStrig = jsonStrig.substr(0, jsonStrig.length - 1);\r\n    jsonStrig += \"}]\";\r\n    // alert(jsonStrig); //[{\"domain\":\"Abcd-E-Group\",\"domaintype\":\"com\",\"Submit1\":\"Search\"}]\r\n    let obj = null;\r\n    obj = JSON.parse(jsonStrig);\r\n    return obj[0];\r\n  };\r\n\r\n  const capitalize = (s) => {\r\n    if (typeof s !== \"string\") return \"\";\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n  };\r\n\r\n  const getRGB = (str) => {\r\n    let sep = str.indexOf(\",\") > -1 ? \",\" : \" \";\r\n    return str.substr(4).split(\")\")[0].split(sep).map(Number);\r\n  };\r\n\r\n  const rgbToHex = (r, g, b) => {\r\n    return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\r\n  };\r\n\r\n  const loadImgOnCanvas = async (\r\n    url,\r\n    id,\r\n    width,\r\n    height,\r\n    folderName,\r\n    imgName,\r\n    cb\r\n  ) => {\r\n    let image = new Image();\r\n    image.src = url;\r\n    image.crossOrigin = \"anonymous\";\r\n\r\n    var el = document.getElementById(id);\r\n\r\n    image.onload = function () {\r\n      var canvas = el.appendChild(\r\n        el.ownerDocument.importNode(document.createElement(\"canvas\"), true)\r\n      );\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n\r\n      var context = canvas.getContext(\"2d\");\r\n      context.drawImage(image, 0, 0);\r\n\r\n      canvas.toBlob(\r\n        async (blob) => {\r\n          let bucketName = folderName;\r\n          let storageRef = firebase\r\n            .storage()\r\n            .ref(`${bucketName}/${imgName}.png`);\r\n\r\n          await storageRef\r\n            .put(blob)\r\n            .then(async (path) => {\r\n              await storageRef\r\n                .getDownloadURL()\r\n                .then(async (url) => {\r\n                  await cb(url).then(() => canvas.remove());\r\n                })\r\n                .catch((err) => console.log(err));\r\n            })\r\n            .catch((err) => console.log(err));\r\n        },\r\n        { type: \"image/png\" },\r\n        1\r\n      );\r\n    };\r\n  };\r\n\r\n  const render_xml = (url, id) => {\r\n    window\r\n      .fetch(\r\n        url ||\r\n          \"https://firebasestorage.googleapis.com/v0/b/easy-social-react.appspot.com/o/template-svg%2FOrganic-Quote.svg_1604491041177?alt=media&token=afb84124-7453-4d9c-8b6c-35923033b161\",\r\n        { method: \"GET\" }\r\n      )\r\n      .then((data) => data.text())\r\n      .then((data) => {\r\n        setLoading(false);\r\n        var doc = new DOMParser().parseFromString(data, \"application/xml\");\r\n\r\n        var el = document.getElementById(id);\r\n\r\n        doc.documentElement.setAttribute(\"id\", \"svgIMG\");\r\n\r\n        el.querySelector(\"div\").innerHTML = null;\r\n\r\n        el.appendChild(el.ownerDocument.importNode(doc.documentElement, true));\r\n\r\n        const svg = el.querySelector(\"svg\").children;\r\n\r\n        const parentSVGTag = el.querySelector(\"svg\");\r\n\r\n        parentSVGTag.style.width = \"100%\";\r\n        // parentSVGTag.style.height = \"100%\";\r\n\r\n        const imgName = `${localStorage.getItem(\"userId\").substr(6)}_${\r\n          value.templateName\r\n        }`;\r\n\r\n        const canvasWidth = parentSVGTag.viewBox.baseVal.width;\r\n        const canvasHeight = parentSVGTag.viewBox.baseVal.height;\r\n\r\n        loadImgOnCanvas(\r\n          url,\r\n          \"canvas\",\r\n          canvasWidth,\r\n          canvasHeight,\r\n          \"template-png\",\r\n          imgName,\r\n          (pngurl) => loadSVG(svg, parentSVGTag, url, pngurl)\r\n        );\r\n      })\r\n      .catch(() => setLoading(false));\r\n  };\r\n\r\n  const loadSVG = async (svg, parentSVGTag, templateURL, pngurl) => {\r\n    const canvasWidth = parentSVGTag.viewBox.baseVal.width;\r\n    const canvasHeight = parentSVGTag.viewBox.baseVal.height;\r\n\r\n    let arr = [];\r\n\r\n    let property = [];\r\n\r\n    let counter = 0;\r\n\r\n    let groupIds = [];\r\n    let groupUrls = [];\r\n\r\n    let tx = null;\r\n    let ty = null;\r\n\r\n    property.push({\r\n      canvasWidth: properties.width,\r\n      canvasHeight: properties.height,\r\n      x: null,\r\n      y: null,\r\n      width: canvasWidth,\r\n      height: canvasHeight,\r\n      name: value.templateName,\r\n      thumbnail: {\r\n        svg: templateURL,\r\n        png: pngurl,\r\n      },\r\n      swatch: null,\r\n      tag: value.templateName,\r\n      category:\r\n        value.category === \"other\" ? value.categoryName : value.category,\r\n      subcategory:\r\n        value.SubCategory === \"other\"\r\n          ? value.SubCategoryName\r\n          : value.SubCategory,\r\n    });\r\n\r\n    for (const g in svg) {\r\n      if (svg[g].tagName === \"g\") {\r\n        if (svg[g].style.clipPath !== \"\") {\r\n          for (const key in svg[g].children) {\r\n            const groupElements = svg[g].children[key];\r\n\r\n            if (\r\n              groupElements.id === \"background\" ||\r\n              groupElements.id === \"Background\"\r\n            ) {\r\n              tx = groupElements.getBBox().x;\r\n              ty = groupElements.getBBox().y;\r\n\r\n              property[0].x = tx;\r\n              property[0].y = ty;\r\n\r\n              if (groupElements.tagName === \"g\") {\r\n                const groupChildren = groupElements.children;\r\n\r\n                console.log(groupElements.dataset);\r\n                let element = [];\r\n\r\n                if (groupChildren.length > 0) {\r\n                  for (let k = 0; k < groupChildren.length; k++) {\r\n                    if (groupChildren[k].tagName) {\r\n                      for (\r\n                        let i = 0;\r\n                        i <= groupChildren[k].attributes.length;\r\n                        i++\r\n                      ) {\r\n                        counter++;\r\n                        if (groupChildren[k].attributes[i] !== undefined) {\r\n                          element.push({\r\n                            [groupChildren[k].attributes[i].nodeName]:\r\n                              groupChildren[k].attributes[i].value,\r\n                          });\r\n                        }\r\n\r\n                        if (i === groupChildren[k].attributes.length) {\r\n                          element.push({\r\n                            id: counter,\r\n                            name: groupChildren[k].id\r\n                              ? `${groupChildren[k].id}_${counter}`\r\n                              : `${groupChildren[k].tagName}${counter}`,\r\n                            scaleX: 1,\r\n                            scaleY: 1,\r\n                            type: capitalize(groupChildren[k].tagName),\r\n                            rotation: 0,\r\n                          });\r\n\r\n                          const merged = Object.assign({}, ...element);\r\n\r\n                          if (merged.transform) {\r\n                            const translate = extractTranslateFromTransform(\r\n                              merged.transform\r\n                            );\r\n                            merged.x = translate.x - tx;\r\n                            merged.y = translate.y - ty;\r\n                            delete merged.transform;\r\n                          }\r\n\r\n                          if (merged.style) {\r\n                            let s = merged.style;\r\n\r\n                            const styles = extractStyleFromString(s);\r\n                            Object.entries(styles).forEach((style) => {\r\n                              merged[`${style[0]}`] = style[1];\r\n\r\n                              delete merged.style;\r\n                            });\r\n                          }\r\n\r\n                          if (merged.fill !== \"none\") {\r\n                            arr.push(merged);\r\n                            element = [];\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            if (Number(key) === svg[g].children.length - 1) {\r\n              if (tx === null && ty === null) {\r\n                // Create a reference to the file to delete\r\n                let storageRef = firebase.storage().ref(`svg/${file.name}`);\r\n\r\n                // Delete the file\r\n                storageRef\r\n                  .delete()\r\n                  .then(function () {\r\n                    // File deleted successfully\r\n                    alert(\"Please Upload Correct SVG\");\r\n                    window.location.reload();\r\n                  })\r\n                  .catch(function (error) {\r\n                    // Uh-oh, an error occurred!\r\n                    console.log(error);\r\n                    alert(\"Uh-oh, an error occurred!\");\r\n                    // window.location.reload();\r\n                  });\r\n              }\r\n            }\r\n\r\n            if (\r\n              groupElements.tagName !== \"g\" &&\r\n              groupElements.tagName !== \"text\"\r\n            ) {\r\n              if (groupElements.tagName) {\r\n                let element = [];\r\n\r\n                const e = groupElements;\r\n\r\n                for (let i = 0; i <= e.attributes.length; i++) {\r\n                  counter++;\r\n                  if (e.attributes[i] !== undefined) {\r\n                    element.push({\r\n                      [e.attributes[i].nodeName]: e.attributes[i].value,\r\n                    });\r\n                  }\r\n\r\n                  if (i === e.attributes.length) {\r\n                    element.push({\r\n                      id: counter,\r\n                      name: groupElements.id\r\n                        ? `${groupElements.id}_${counter}`\r\n                        : `${e.tagName}${counter}`,\r\n                      scaleX: 1,\r\n                      scaleY: 1,\r\n                      type: capitalize(e.tagName),\r\n                      rotation: 0,\r\n                    });\r\n\r\n                    const merged = Object.assign({}, ...element);\r\n\r\n                    if (merged.type === \"Rect\") {\r\n                      merged.x = merged.x - tx || 0;\r\n                      merged.y = merged.y - ty || 0;\r\n                    }\r\n\r\n                    if (merged.transform) {\r\n                      const transformValue = extractTranslateFromTransform(e);\r\n\r\n                      merged.x = transformValue.x - tx;\r\n                      merged.y = transformValue.y - ty;\r\n                      merged.rotation = transformValue.rotation;\r\n                      delete merged.transform;\r\n                    }\r\n\r\n                    if (merged.type === \"Circle\") {\r\n                      merged.cx = merged.cx - tx;\r\n                      merged.cy = merged.cy - ty;\r\n                    }\r\n\r\n                    if (merged.style) {\r\n                      let s = merged.style;\r\n\r\n                      const styles = extractStyleFromString(s);\r\n                      Object.entries(styles).forEach((style) => {\r\n                        merged[`${style[0]}`] = style[1];\r\n\r\n                        delete merged.style;\r\n                      });\r\n                    }\r\n\r\n                    if (merged[\"stroke-width\"]) {\r\n                      merged[\"stroke-width\"] =\r\n                        Number(merged[\"stroke-width\"].replace(\"px\", \"\")) ||\r\n                        merged[\"stroke-width\"];\r\n                    }\r\n\r\n                    if (merged.fill !== \"none\" || merged.type === \"Circle\") {\r\n                      arr.push(merged);\r\n                      element = [];\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            if (\r\n              groupElements.tagName === \"g\" &&\r\n              (groupElements.id !== \"background\" ||\r\n                groupElements.id !== \"Background\")\r\n            ) {\r\n              // Extracting Text from Group element\r\n              for (let text in groupElements.children) {\r\n                if (groupElements.children[text].tagName === \"text\") {\r\n                  counter++;\r\n                  let smallest = [];\r\n\r\n                  const textChildren = groupElements.children[text].children;\r\n\r\n                  const textElement = groupElements.children[text];\r\n\r\n                  if (textChildren.length > 0) {\r\n                    for (let i = 0; i <= textChildren.length; i++) {\r\n                      if (textChildren[i] !== undefined) {\r\n                        if (textChildren[i].attributes[\"x\"] !== undefined) {\r\n                          smallest.push(\r\n                            Number(textChildren[i].attributes[\"x\"].value)\r\n                          );\r\n                        }\r\n                      }\r\n\r\n                      if (i === textChildren.length) {\r\n                        smallest = Math.min(...smallest);\r\n\r\n                        const translate =\r\n                          extractTranslateFromTransform(textElement);\r\n\r\n                        counter++;\r\n\r\n                        let element = {\r\n                          id: counter,\r\n                          name: textElement.id\r\n                            ? `${textElement.id}_${counter}`\r\n                            : `text${counter}`,\r\n                          bold:\r\n                            textElement.style.fontWeight !== \"\" ? true : false,\r\n                          italic: false,\r\n                          underline: false,\r\n                          rotation: translate.rotation,\r\n                          width: textElement.getBBox().width * 1.3,\r\n                          height: textElement.getBBox().height,\r\n                          displayValue: textElement.textContent\r\n                            .replace(/\\s+/g, \" \")\r\n                            .trim(),\r\n                          value: textElement.textContent\r\n                            .replace(/\\s+/g, \" \")\r\n                            .trim(),\r\n                          x: translate.x - tx,\r\n                          y:\r\n                            translate.y -\r\n                            (Number(\r\n                              groupElements.style.fontSize.replace(\"px\", \"\")\r\n                            ) *\r\n                              74) /\r\n                              100 -\r\n                            ty,\r\n                          scaleX: 1,\r\n                          scaleY: 1,\r\n                          font:\r\n                            textElement.style.fontFamily !== \"\"\r\n                              ? textElement.style.fontFamily\r\n                              : \"Arial\",\r\n                          fontSize:\r\n                            textElement.style.fontSize !== \"\"\r\n                              ? Number(\r\n                                  textElement.style.fontSize.replace(\"px\", \"\")\r\n                                )\r\n                              : 16,\r\n                          letterSpacing:\r\n                            textElement.style.letterSpacing !== \"\"\r\n                              ? Number(\r\n                                  textElement.style.letterSpacing.replace(\r\n                                    \"em\",\r\n                                    \"\"\r\n                                  )\r\n                                )\r\n                              : null,\r\n                          alignment:\r\n                            textElement.style.textAlign !== \"\"\r\n                              ? textElement.style.textAlign\r\n                              : \"left\",\r\n                          fontWeight:\r\n                            textElement.style.fontWeight !== \"\"\r\n                              ? Number(textElement.style.fontWeight)\r\n                              : \"normal\",\r\n                          color:\r\n                            textElement.style.color !== \"\"\r\n                              ? textElement.style.color\r\n                              : textElement.style.fill !== \"\"\r\n                              ? textElement.style.fill\r\n                              : \"black\",\r\n                          type: \"Text\",\r\n                          lineHeight: 1.3,\r\n                        };\r\n\r\n                        arr.push(element);\r\n                      }\r\n                    }\r\n                  } else {\r\n                    const translate =\r\n                      extractTranslateFromTransform(textElement);\r\n\r\n                    counter++;\r\n\r\n                    let element = {\r\n                      id: counter,\r\n                      name: textElement.id\r\n                        ? `${textElement.id}_${counter}`\r\n                        : `text${counter}`,\r\n                      bold: textElement.style.fontWeight !== \"\" ? true : false,\r\n                      italic: false,\r\n                      underline: false,\r\n                      rotation: translate.rotation,\r\n                      width: textElement.getBBox().width * 1.3,\r\n                      height: textElement.getBBox().height,\r\n                      displayValue: textElement.textContent\r\n                        .replace(/\\s+/g, \" \")\r\n                        .trim(),\r\n                      value: textElement.textContent\r\n                        .replace(/\\s+/g, \" \")\r\n                        .trim(),\r\n                      x: translate.x - tx,\r\n                      y:\r\n                        translate.y -\r\n                        (Number(textElement.style.fontSize.replace(\"px\", \"\")) *\r\n                          74) /\r\n                          100 -\r\n                        ty,\r\n                      scaleX: 1,\r\n                      scaleY: 1,\r\n                      font:\r\n                        textElement.style.fontFamily !== \"\"\r\n                          ? textElement.style.fontFamily\r\n                          : \"Arial\",\r\n                      fontSize:\r\n                        textElement.style.fontSize !== \"\"\r\n                          ? Number(textElement.style.fontSize.replace(\"px\", \"\"))\r\n                          : 16,\r\n                      letterSpacing:\r\n                        textElement.style.letterSpacing !== \"\"\r\n                          ? Number(\r\n                              textElement.style.letterSpacing.replace(\"em\", \"\")\r\n                            )\r\n                          : null,\r\n                      alignment:\r\n                        textElement.style.textAlign !== \"\"\r\n                          ? textElement.style.textAlign\r\n                          : \"left\",\r\n                      fontWeight:\r\n                        textElement.style.fontWeight !== \"\"\r\n                          ? Number(textElement.style.fontWeight)\r\n                          : \"normal\",\r\n                      color:\r\n                        textElement.style.color !== \"\"\r\n                          ? textElement.style.color\r\n                          : textElement.style.fill !== \"\"\r\n                          ? textElement.style.fill\r\n                          : \"black\",\r\n                      type: \"Text\",\r\n                      lineHeight: 1.3,\r\n                    };\r\n\r\n                    arr.push(element);\r\n                  }\r\n                }\r\n              }\r\n\r\n              const groupSVG = groupElements.getBBox();\r\n\r\n              // const groupId = groupElements.id.replace(/[0-9]/g, \"\");\r\n              const groupId = groupElements.dataset.name;\r\n\r\n              const group = {\r\n                groupWidth: groupSVG.width,\r\n                groupHeight: groupSVG.height,\r\n                groupX: groupSVG.x,\r\n                groupY: groupSVG.y,\r\n              };\r\n\r\n              const file = new Blob(\r\n                [\r\n                  `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"${group.groupX} ${group.groupY} ${group.groupWidth} ${group.groupHeight}\"><g>${groupElements.innerHTML}</g></svg>`,\r\n                ],\r\n                {\r\n                  type: \"image/svg+xml\",\r\n                }\r\n              );\r\n\r\n              // This is the detail of photo which is being stored\r\n              let bucketName = \"element-svg\";\r\n\r\n              const elementName = `${localStorage\r\n                .getItem(\"userId\")\r\n                .substr(6)}_${new Date().getTime()}`;\r\n\r\n              if (!groupIds.includes(groupId)) {\r\n                groupIds.push(groupId);\r\n\r\n                let storageRef = firebase\r\n                  .storage()\r\n                  .ref(`${bucketName}/${elementName}.svg`);\r\n\r\n                await storageRef.put(file).then(async (path) => {\r\n                  await storageRef.getDownloadURL().then(async (url) => {\r\n                    counter++;\r\n                    groupUrls.push(url);\r\n\r\n                    arr.push({\r\n                      src: url,\r\n                      x: group.groupX - tx,\r\n                      y: group.groupY - ty,\r\n                      width: group.groupWidth,\r\n                      height: group.groupHeight,\r\n                      type: \"Image\",\r\n                      scaleX: 1,\r\n                      scaleY: 1,\r\n                      id: groupElements.id\r\n                        ? `${groupElements.id}_${counter}`\r\n                        : `Image${counter}`,\r\n                      name: groupElements.id\r\n                        ? `${groupElements.id}_${counter}`\r\n                        : `Image${counter}`,\r\n                      rotation: 0,\r\n                      element: \"group\",\r\n                      user_friendly_name: groupId || null,\r\n                    });\r\n                  });\r\n                  // });\r\n                });\r\n              } else {\r\n                counter++;\r\n                const idIndex = groupIds.findIndex(\r\n                  (group) => group === groupId\r\n                );\r\n\r\n                arr.push({\r\n                  src: groupUrls[idIndex],\r\n                  x: group.groupX - tx,\r\n                  y: group.groupY - ty,\r\n                  width: group.groupWidth,\r\n                  height: group.groupHeight,\r\n                  type: \"Image\",\r\n                  scaleX: 1,\r\n                  scaleY: 1,\r\n                  id: groupElements.id\r\n                    ? `${groupElements.id}_${counter}`\r\n                    : `Image${counter}`,\r\n                  name: groupElements.id\r\n                    ? `${groupElements.id}_${counter}`\r\n                    : `Image${counter}`,\r\n                  rotation: 0,\r\n                  element: \"group\",\r\n                  user_friendly_name: groupId,\r\n                });\r\n              }\r\n            }\r\n\r\n            if (groupElements.tagName === \"text\") {\r\n              let smallest = [];\r\n\r\n              let v = 0;\r\n\r\n              const textChildren = groupElements.children;\r\n\r\n              if (textChildren.length > 0) {\r\n                for (let i = 0; i <= groupElements.children.length; i++) {\r\n                  v++;\r\n                  if (textChildren[i] !== undefined) {\r\n                    if (textChildren[i].attributes[\"x\"] !== undefined) {\r\n                      smallest.push(\r\n                        Number(textChildren[i].attributes[\"x\"].value)\r\n                      );\r\n                    }\r\n                  }\r\n\r\n                  if (v === textChildren.length) {\r\n                    smallest = Math.min(...smallest);\r\n\r\n                    const translate =\r\n                      extractTranslateFromTransform(groupElements);\r\n\r\n                    counter++;\r\n\r\n                    let element = {\r\n                      id: counter,\r\n                      name: groupElements.id\r\n                        ? `${groupElements.id}_${counter}`\r\n                        : `text${counter}`,\r\n                      bold:\r\n                        groupElements.style.fontWeight !== \"\" ? true : false,\r\n                      italic: false,\r\n                      underline: false,\r\n                      rotation: translate.rotation,\r\n                      width: groupElements.getBBox().width,\r\n                      height: groupElements.getBBox().height,\r\n                      displayValue: groupElements.textContent\r\n                        .replace(/\\s+/g, \" \")\r\n                        .trim(),\r\n                      value: groupElements.textContent\r\n                        .replace(/\\s+/g, \" \")\r\n                        .trim(),\r\n                      x: translate.x - Math.abs(Number(smallest)) - tx,\r\n                      y:\r\n                        translate.y -\r\n                        (Number(\r\n                          groupElements.style.fontSize.replace(\"px\", \"\")\r\n                        ) *\r\n                          74) /\r\n                          100 -\r\n                        ty,\r\n                      scaleX: 1,\r\n                      scaleY: 1,\r\n                      font:\r\n                        groupElements.style.fontFamily !== \"\"\r\n                          ? groupElements.style.fontFamily\r\n                          : \"Arial\",\r\n                      fontSize:\r\n                        groupElements.style.fontSize !== \"\"\r\n                          ? Number(\r\n                              groupElements.style.fontSize.replace(\"px\", \"\")\r\n                            )\r\n                          : 16,\r\n                      letterSpacing:\r\n                        groupElements.style.letterSpacing !== \"\"\r\n                          ? Number(\r\n                              groupElements.style.letterSpacing.replace(\r\n                                \"em\",\r\n                                \"\"\r\n                              )\r\n                            )\r\n                          : null,\r\n                      alignment:\r\n                        groupElements.style.textAlign !== \"\"\r\n                          ? groupElements.style.textAlign\r\n                          : \"left\",\r\n                      fontWeight:\r\n                        groupElements.style.fontWeight !== \"\"\r\n                          ? Number(groupElements.style.fontWeight)\r\n                          : \"normal\",\r\n                      color:\r\n                        groupElements.style.color !== \"\"\r\n                          ? groupElements.style.color\r\n                          : groupElements.style.fill !== \"\"\r\n                          ? groupElements.style.fill\r\n                          : \"black\",\r\n                      type: \"Text\",\r\n                      lineHeight: 1.3,\r\n                    };\r\n\r\n                    arr.push(element);\r\n                  }\r\n                }\r\n              } else {\r\n                const translate = extractTranslateFromTransform(groupElements);\r\n\r\n                counter++;\r\n\r\n                let element = {\r\n                  id: counter,\r\n                  name: groupElements.id\r\n                    ? `${groupElements.id}_${counter}`\r\n                    : `text${counter}`,\r\n                  bold: groupElements.style.fontWeight !== \"\" ? true : false,\r\n                  italic: false,\r\n                  underline: false,\r\n                  rotation: translate.rotation,\r\n                  width: groupElements.getBBox().width,\r\n                  height: groupElements.getBBox().height,\r\n                  displayValue: groupElements.textContent\r\n                    .replace(/\\s+/g, \" \")\r\n                    .trim(),\r\n                  value: groupElements.textContent.replace(/\\s+/g, \" \").trim(),\r\n                  x: translate.x - tx,\r\n                  y:\r\n                    translate.y -\r\n                    (Number(groupElements.style.fontSize.replace(\"px\", \"\")) *\r\n                      74) /\r\n                      100 -\r\n                    ty,\r\n                  scaleX: 1,\r\n                  scaleY: 1,\r\n                  font:\r\n                    groupElements.style.fontFamily !== \"\"\r\n                      ? groupElements.style.fontFamily\r\n                      : \"Arial\",\r\n                  fontSize:\r\n                    groupElements.style.fontSize !== \"\"\r\n                      ? Number(groupElements.style.fontSize.replace(\"px\", \"\"))\r\n                      : 16,\r\n                  letterSpacing:\r\n                    groupElements.style.letterSpacing !== \"\"\r\n                      ? Number(\r\n                          groupElements.style.letterSpacing.replace(\"em\", \"\")\r\n                        )\r\n                      : null,\r\n                  alignment:\r\n                    groupElements.style.textAlign !== \"\"\r\n                      ? groupElements.style.textAlign\r\n                      : \"left\",\r\n                  fontWeight:\r\n                    groupElements.style.fontWeight !== \"\"\r\n                      ? Number(groupElements.style.fontWeight)\r\n                      : \"normal\",\r\n                  color:\r\n                    groupElements.style.color !== \"\"\r\n                      ? groupElements.style.color\r\n                      : groupElements.style.fill !== \"\"\r\n                      ? groupElements.style.fill\r\n                      : \"black\",\r\n                  type: \"Text\",\r\n                  lineHeight: 1.3,\r\n                };\r\n\r\n                arr.push(element);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let tColor = [];\r\n\r\n    arr.filter((e) => {\r\n      if (e.color) {\r\n        const rgb = getRGB(e.color);\r\n        const hex = rgbToHex(rgb[0], rgb[1], rgb[2]);\r\n        tColor.push(hex);\r\n      } else if (e.fill !== \"none\") {\r\n        tColor.push(e.fill);\r\n      }\r\n    });\r\n\r\n    setColors([...new Set(tColor)]);\r\n\r\n    setElements({ elements: arr, property: property[0] });\r\n  };\r\n\r\n  const onSubmitFile = () => {\r\n    setLoading(true);\r\n    // This is the detail of photo which is being stored\r\n    if (!file) {\r\n      alert(\"Please Upload file first!\");\r\n      return setLoading(false);\r\n    }\r\n\r\n    const elementName = `${new Date().getTime()}`;\r\n\r\n    let bucketName = \"template-svg\";\r\n\r\n    let storageRef = firebase\r\n      .storage()\r\n      .ref(`${bucketName}/${file.name}_${elementName}`);\r\n\r\n    storageRef\r\n      .put(file)\r\n      .then((path) => {\r\n        storageRef\r\n          .getDownloadURL()\r\n          .then((url) => {\r\n            render_xml(url, \"SVG-Container\");\r\n          })\r\n          .catch(() => setLoading(false));\r\n      })\r\n      .catch(() => setLoading(false));\r\n  };\r\n\r\n  const [show, setShow] = useState(true);\r\n\r\n  useEffect(() => {\r\n    getAllCategories()\r\n      .then((data) => {\r\n        if (data.message) {\r\n          setCategory({ error: false, category: data.categoryData });\r\n\r\n          setValue({\r\n            ...value,\r\n            category: document.querySelector(\"#category\").value,\r\n          });\r\n        } else {\r\n          setCategory({ ...category, error: data.error });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    category.category &&\r\n      value.category !== \"\" &&\r\n      category.category.forEach((category) => {\r\n        if (category.id === value.category) {\r\n          if (category.categoryName.sub_category !== null) {\r\n            return setSubCategory({\r\n              error: false,\r\n              subCategory: category.categoryName.sub_category,\r\n            });\r\n          }\r\n        }\r\n      });\r\n  }, [category, value]);\r\n\r\n  const [tertiaryColors] = useState([]);\r\n\r\n  return (\r\n    <section className={classes.Create_Template}>\r\n      {/* Popup */}\r\n      {show && (\r\n        <>\r\n          <div className={classes.BackDrop}></div>\r\n          <div className={classes.Popup_Container}>\r\n            <form\r\n              onSubmit={(e) => {\r\n                e.preventDefault();\r\n                if (\r\n                  value.category === \"other\" &&\r\n                  value.categoryName.length > 0\r\n                ) {\r\n                  createCategory({\r\n                    category: value.categoryName,\r\n                    sub_category: value.SubCategoryName,\r\n                  })\r\n                    .then((data) => {\r\n                      setShow(false);\r\n                      alert(data.message);\r\n                    })\r\n                    .catch((err) => {\r\n                      alert(\"something went wrong, please try again\");\r\n                    });\r\n                } else if (\r\n                  value.categoryName !== \"other\" &&\r\n                  value.SubCategory === \"other\" &&\r\n                  value.SubCategoryName.length > 0\r\n                ) {\r\n                  createSubCategory({\r\n                    id: value.category,\r\n                    subcategory: value.SubCategoryName,\r\n                  })\r\n                    .then((data) => {\r\n                      setShow(false);\r\n                      alert(data.message);\r\n                    })\r\n                    .catch((err) => {\r\n                      alert(\"something went wrong, please try again\");\r\n                    });\r\n                } else {\r\n                  setShow(false);\r\n                }\r\n              }}\r\n            >\r\n              {/* Choose Resolution */}\r\n              <div className={classes.Resolution}>\r\n                <label htmlFor=\"cars\">Choose Resolution : </label>\r\n                <select\r\n                  required\r\n                  name=\"resolution\"\r\n                  id=\"resolution\"\r\n                  onChange={(e) =>\r\n                    setProperties({\r\n                      height: e.target.value,\r\n                      width: e.target.value,\r\n                    })\r\n                  }\r\n                >\r\n                  <option defaultValue=\"1200\">1200 / 1200</option>\r\n                  <option value=\"1080\">1080 / 1080</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Template Name */}\r\n              <div className={classes.Template_Name}>\r\n                <label htmlFor=\"template-name\">Template Name :</label>\r\n                <input\r\n                  onChange={(e) =>\r\n                    setValue({\r\n                      ...value,\r\n                      templateName: e.target.value,\r\n                    })\r\n                  }\r\n                  id=\"template-name\"\r\n                  required\r\n                  name=\"template-name\"\r\n                  type=\"text\"\r\n                  placeholder=\"Template name\"\r\n                  defaultValue=\"\"\r\n                />\r\n              </div>\r\n\r\n              {/* Choose Category */}\r\n              <div className={classes.Category}>\r\n                <label htmlFor=\"category\">Category : </label>\r\n\r\n                <select\r\n                  required\r\n                  id=\"category\"\r\n                  name=\"category\"\r\n                  onChange={(e) => {\r\n                    if (e.target.value === \"other\") {\r\n                      setValue({\r\n                        ...value,\r\n                        SubCategory: e.target.value,\r\n                        category: e.target.value,\r\n                        categoryName: e.target.value,\r\n                      });\r\n                    } else {\r\n                      if (category.category) {\r\n                        category.category.forEach((category) => {\r\n                          if (category.id === e.target.value) {\r\n                            // if (category.categoryName.sub_category !== null) {\r\n                            setValue({\r\n                              ...value,\r\n                              category: e.target.value,\r\n                              categoryName: category.categoryName.name,\r\n                            });\r\n                            setSubCategory({\r\n                              error: false,\r\n                              subCategory: category.categoryName.sub_category,\r\n                            });\r\n                          } else {\r\n                            setSubCategory({\r\n                              error: false,\r\n                              subCategory: null,\r\n                            });\r\n                          }\r\n                        });\r\n                      }\r\n                    }\r\n                  }}\r\n                >\r\n                  <option value=\"\" disabled selected>\r\n                    Select Category\r\n                  </option>\r\n                  {category.category &&\r\n                    category.category.map((category) => {\r\n                      return (\r\n                        <option key={category.id} value={category.id}>\r\n                          {category.categoryName.name}\r\n                        </option>\r\n                      );\r\n                    })}\r\n                  <option value=\"other\">other</option>\r\n                </select>\r\n              </div>\r\n\r\n              {value.category === \"other\" && (\r\n                <div className={classes.Category_name}>\r\n                  <label htmlFor=\"category-name\">Category Name: </label>\r\n                  <input\r\n                    required\r\n                    name=\"category-name\"\r\n                    type=\"text\"\r\n                    defaultValue=\"\"\r\n                    placeholder=\"Category Name\"\r\n                    onChange={(e) =>\r\n                      setValue({ ...value, categoryName: e.target.value })\r\n                    }\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Choose Sub Category */}\r\n\r\n              {value.category && (\r\n                <div className={classes.Sub_Category}>\r\n                  <label htmlFor=\"sub-category\">Sub Category</label>\r\n                  <select\r\n                    id=\"sub-category\"\r\n                    name=\"sub-category\"\r\n                    onChange={(e) =>\r\n                      setValue({\r\n                        ...value,\r\n                        SubCategory: e.target.value,\r\n                        SubCategoryName: \"\",\r\n                      })\r\n                    }\r\n                  >\r\n                    <option value=\"\" disabled selected>\r\n                      Select Sub Category\r\n                    </option>\r\n                    {subCategory.subCategory &&\r\n                      subCategory.subCategory.map((category) => (\r\n                        <option key={category.name}>{category.name}</option>\r\n                      ))}\r\n                    <option value=\"other\">other</option>\r\n                  </select>\r\n                </div>\r\n              )}\r\n\r\n              {value.SubCategory === \"other\" && (\r\n                <div className={classes.SubCategory_name}>\r\n                  <label htmlFor=\"subcategory-name\">Sub Category Name: </label>\r\n                  <input\r\n                    required\r\n                    name=\"subcategory-name\"\r\n                    type=\"text\"\r\n                    defaultValue=\"\"\r\n                    placeholder=\"Subcategory Name\"\r\n                    onChange={(e) =>\r\n                      setValue({ ...value, SubCategoryName: e.target.value })\r\n                    }\r\n                  />\r\n                </div>\r\n              )}\r\n              <button>Submit</button>\r\n            </form>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      <Header\r\n        goBack={() => props.history.goBack()}\r\n        disabled={disabled}\r\n        onSubmit={onSubmit}\r\n      />\r\n      <div className={classes.SVG_Container} id=\"SVG-Container\">\r\n        {loading ? <Loader2 /> : null}\r\n        {!file ? (\r\n          <div className={classes.Upload_Handler}>\r\n            <h3>Upload a SVG file</h3>\r\n            <form>\r\n              <input\r\n                accept=\"image/svg+xml\"\r\n                type=\"file\"\r\n                onChange={(e) => {\r\n                  if (e.target.files[0].type !== \"image/svg+xml\") {\r\n                    alert(\"Please Upload SVG File\");\r\n                    return;\r\n                  }\r\n                  setFile(e.target.files[0]);\r\n                }}\r\n              />\r\n            </form>\r\n          </div>\r\n        ) : (\r\n          <div className={classes.Upload_Btn}>\r\n            <p>\r\n              {file\r\n                ? `${file.name} - (${file.size / 1000}kb)`\r\n                : \"select a file Please\"}\r\n            </p>\r\n            <button onClick={() => onSubmitFile()}>Upload the SVG</button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {colors && (\r\n        <form>\r\n          <div className={classes.Color_Container}>\r\n            {colors.map((el) => {\r\n              return (\r\n                <>\r\n                  <div className={classes.Color_Box}>\r\n                    <div\r\n                      style={{\r\n                        backgroundColor: el,\r\n                        width: \"60px\",\r\n                        height: \"60px\",\r\n                      }}\r\n                    ></div>\r\n                    <select\r\n                      data-color={el}\r\n                      onChange={(e) => {\r\n                        const colorValue = e.target.dataset.color;\r\n\r\n                        if (e.target.value === \"primary\") {\r\n                          setSelectedColor({\r\n                            ...selectedColor,\r\n                            primary: [el],\r\n                          });\r\n                        } else if (e.target.value === \"secondary\") {\r\n                          setSelectedColor({\r\n                            ...selectedColor,\r\n                            secondary: [el],\r\n                          });\r\n                        } else {\r\n                          tertiaryColors.push(el);\r\n                          setSelectedColor({\r\n                            ...selectedColor,\r\n                            tertiary: tertiaryColors,\r\n                          });\r\n                        }\r\n\r\n                        for (let color in selectedColor) {\r\n                          for (let key of selectedColor[color]) {\r\n                            if (colorValue === key) {\r\n                              console.log(selectedColor[color]);\r\n                            }\r\n                          }\r\n                        }\r\n                      }}\r\n                    >\r\n                      <option value=\"\" disabled selected>\r\n                        Select\r\n                      </option>\r\n                      {colorOption.map((option) => (\r\n                        <>\r\n                          <option value={option}>{capitalize(option)}</option>\r\n                        </>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </>\r\n              );\r\n            })}\r\n          </div>\r\n        </form>\r\n      )}\r\n      <div id=\"canvas\"></div>\r\n\r\n      {/* <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          onSubmitFile();\r\n        }}\r\n      >\r\n        <input\r\n          type=\"file\"\r\n          onChange={(e) => {\r\n            setFile(e.target.files[0]);\r\n          }}\r\n        />\r\n        <button>Submit</button>\r\n      </form>\r\n\r\n      <div style={{ width: \"100%\", height: \"100%\" }} id=\"SVG-Container\"></div>\r\n      <button onClick={() => onSubmit()}>Submit SVG</button> */}\r\n      {elements && elements.property && disabled && (\r\n        <button\r\n          onClick={() => {\r\n            // 5. Set the state to our new copy\r\n            setElements((prevState) => ({\r\n              ...prevState,\r\n              property: {\r\n                ...prevState.property,\r\n                swatch: selectedColor,\r\n              },\r\n            }));\r\n            setDisabled(false);\r\n          }}\r\n        >\r\n          Add Colors\r\n        </button>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default CreateTemplate;\r\n"],"sourceRoot":""}