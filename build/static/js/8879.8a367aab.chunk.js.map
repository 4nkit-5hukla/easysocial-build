{"version":3,"file":"static/js/8879.8a367aab.chunk.js","mappings":"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","sources":["Apis/ChatFlowApi.ts","Contexts/ChatFlowDashboard/FlowDataProvider.tsx","webpack://easysocial/./src/Components/ChatFlowDashboard/Dialogs/FlowDialog.module.css?a865","Components/ChatFlowDashboard/Dialogs/FlowDialog.tsx","Contexts/ChatFlowDashboard/FlowDialogProvider.tsx","Contexts/ChatFlowDashboard/FlowDrawerProvider.tsx","Contexts/ChatFlowDashboard/FlowHistoryProvider.tsx","Hooks/ChatFlowDashboard/useHistory.ts","Shared/Enums/FlowEdge.ts","Services/ChatFlowService/NodeModelService.ts","Contexts/ChatFlowDashboard/FlowNodeServicesProvider.tsx","Services/ChatFlowService/NodeCopyService.ts","Contexts/ChatFlowDashboard/FlowServicesProvider.tsx","Shared/Enums/ChatFlowMsgEnum.ts","Shared/Enums/ChatFlowNodeEnum.ts","Shared/Enums/OptionType.ts","Utils/Axios.ts","Utils/UniqueEntityID.ts","Utils/Identifier.ts","Utils/index.ts"],"sourcesContent":["import { ChatFlowSettingInterface } from \"Shared/Interfaces/ChatFlowSettingInterface\";\r\nimport { AuthenticatedReq } from \"Utils/Axios\";\r\n\r\nexport default class ChatFlowApi {\r\n  public static getAllDataFields = async () => {\r\n    return await AuthenticatedReq(`/lead-data-fields`, \"GET\");\r\n  };\r\n\r\n  public static createLeadDataField = async (data: any) => {\r\n    return await AuthenticatedReq(`/lead-data-fields/`, \"POST\", { data });\r\n  };\r\n\r\n  public static getChatFlowData = async (chatflow_id: string) => {\r\n    return await AuthenticatedReq(`/chatflow/${chatflow_id}`, \"GET\");\r\n  };\r\n\r\n  public static putChatFlowSettings = async (\r\n    chatflow_id: string,\r\n    data: ChatFlowSettingInterface\r\n  ) => {\r\n    return await AuthenticatedReq(`/chatbots/${chatflow_id}`, \"PUT\", { data });\r\n  };\r\n\r\n  public static putChatFlowData = async (chatflow_id: string, data: any) => {\r\n    return await AuthenticatedReq(`/chatflow/save-data/${chatflow_id}`, \"PUT\", {\r\n      data,\r\n    });\r\n  };\r\n}\r\n","import { createContext, FC, useContext, useEffect, useState } from \"react\";\r\nimport { Node, useEdgesState } from \"react-flow-renderer\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { ChatFlowSettingInterface } from \"Shared/Interfaces/ChatFlowSettingInterface\";\r\nimport { ChatFlowMsg } from \"Shared/Interfaces/ChatFlowMsgInterface\";\r\nimport { ChatFlowNode } from \"Shared/Interfaces/ChatFlowNodeInterface\";\r\nimport { FlowDataContextState } from \"./types\";\r\nimport { useSnacks } from \"Contexts/Snack\";\r\nimport { useFlowHistory } from \"Contexts/ChatFlowDashboard\";\r\nimport { IDataFields } from \"Shared/Interfaces/LeadDataFieldsInterface\";\r\nimport ChatFlowApi from \"Apis/ChatFlowApi\";\r\n\r\nexport const FlowDataContext = createContext<FlowDataContextState | undefined>(\r\n  undefined\r\n);\r\n\r\nexport const useFlowData = () => {\r\n  const context = useContext(FlowDataContext);\r\n\r\n  // If context is undefined, we know we used RadioGroupItem\r\n  // outside of our provider so we can throw a more helpful\r\n  // error!\r\n  if (context === undefined) {\r\n    throw Error(\r\n      \"Item must be used inside of FlowDataProvider, otherwise it will not function correctly.\"\r\n    );\r\n  }\r\n\r\n  // Because of TypeScript's type narrowing, if we make it past\r\n  // the error the compiler knows that context is always defined\r\n  // at this point, so we don't need to do any conditional\r\n  // checking on its values when we use this hook!\r\n  return context;\r\n};\r\n\r\nconst FlowDataProvider: FC<any> = ({ children }) => {\r\n  const { chatflow_id } = useParams();\r\n  const { setErrorMessage, setSuccessMessage } = useSnacks();\r\n  const { resetHistory, saveHistory } = useFlowHistory();\r\n  // const [chatbot_id, setChatbotId] = useState(1);\r\n  const [reloadDrawer, setReloadDrawer] = useState(0);\r\n  const [refreshNode, setRefreshNode] = useState(0);\r\n  const [dataFields, setDataFields] = useState<IDataFields[]>([]);\r\n  const [editingData, toggleEditingData] = useState<boolean>(false);\r\n  const [nodes, setNodes] = useState<Node<any>[]>([]);\r\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\r\n  const [chatMsgs, setChatMsgs] = useState<ChatFlowMsg.ChatFlowMsgInterface[]>(\r\n    []\r\n  );\r\n  const [copiedNode, setCopiedNode] = useState<\r\n    ChatFlowNode.ChatFlowNodeInterface | undefined\r\n  >();\r\n  const [copiedChatMsgs, setCopiedChatMsgs] = useState<\r\n    ChatFlowMsg.ChatFlowMsgInterface | undefined\r\n  >();\r\n  const [flowSettingsLoaded, setFlowSettingLoaded] = useState<boolean>(false);\r\n  const [flowSettings, setFlowSettings] = useState<ChatFlowSettingInterface>({\r\n    auto_reminder: {\r\n      response: { default_message: \"\", languages: [] },\r\n      status: false,\r\n      trigger_time: 30,\r\n      send_last_message: false,\r\n    },\r\n    disable_reply: false,\r\n    reset_session_in: 12,\r\n  });\r\n  const [currentMsgIndex, setCurrentMsgIndex] = useState<number | undefined>(\r\n    undefined\r\n  );\r\n  const [currentNodeIndex, setCurrentNodeIndex] = useState<number | undefined>(\r\n    undefined\r\n  );\r\n\r\n  const addChatMsg = (\r\n    msg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    newNodes: Node<any>[]\r\n  ) => {\r\n    const newChatMsgs: ChatFlowMsg.ChatFlowMsgInterface[] =\r\n      chatMsgs.concat(msg);\r\n    setChatMsgs(newChatMsgs);\r\n    setCurrentMsgIndex(chatMsgs.length);\r\n    saveHistory({ nodes: newNodes, edges, chatMsgs: newChatMsgs });\r\n  };\r\n\r\n  const clearSelectedMsg = () => {\r\n    setCurrentMsgIndex(undefined);\r\n  };\r\n\r\n  const onClickChatMsg = (id: string) => {\r\n    const current = chatMsgs.findIndex((msg) => msg.id === id);\r\n    if (current === -1) return;\r\n    setCurrentMsgIndex(current);\r\n  };\r\n\r\n  const OnChatMsgUpdate = (\r\n    current_msg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    index?: number\r\n  ) => {\r\n    const isIndex = typeof index === \"number\";\r\n    const currentIndex = typeof currentMsgIndex === \"number\";\r\n\r\n    if (isIndex) {\r\n      // setCurrentChatMsg(current_msg);\r\n      const newChatMsgs: ChatFlowMsg.ChatFlowMsgInterface[] = chatMsgs;\r\n      newChatMsgs[index] = current_msg;\r\n      setChatMsgs(newChatMsgs);\r\n      // saveHistory({ nodes, edges, chatMsgs: newChatMsgs });\r\n    } else if (currentIndex) {\r\n      const newChatMsgs: ChatFlowMsg.ChatFlowMsgInterface[] = chatMsgs;\r\n      newChatMsgs[currentMsgIndex] = current_msg;\r\n      setChatMsgs(newChatMsgs);\r\n      // saveHistory({ nodes, edges, chatMsgs: newChatMsgs });\r\n    }\r\n  };\r\n\r\n  const onChatMsgDelete = (index: number, newNodes: Node<any>[]) => {\r\n    const newChatMsgs: ChatFlowMsg.ChatFlowMsgInterface[] = chatMsgs;\r\n    newChatMsgs.splice(index, 1);\r\n    setChatMsgs(newChatMsgs);\r\n    saveHistory({ nodes: newNodes, edges, chatMsgs: newChatMsgs });\r\n    clearSelectedMsg();\r\n  };\r\n\r\n  const saveChatFlowData = async () => {\r\n    try {\r\n      if (chatflow_id) {\r\n        const res = await ChatFlowApi.putChatFlowData(chatflow_id, {\r\n          edges,\r\n          nodes,\r\n          msgs: chatMsgs,\r\n        });\r\n\r\n        if (!res.success) {\r\n          throw Error(res.message);\r\n        }\r\n        setSuccessMessage(res.message);\r\n      }\r\n    } catch (error: any) {\r\n      setErrorMessage(error.message);\r\n    }\r\n  };\r\n\r\n  const fetchChatFlowData = async () => {\r\n    try {\r\n      if (chatflow_id) {\r\n        const res = await ChatFlowApi.getChatFlowData(chatflow_id);\r\n        if (!res.success) {\r\n          throw Error(res.message);\r\n        }\r\n        resetHistory();\r\n        nodes.length < 1 && setNodes(res.payload.nodes);\r\n        edges.length < 1 && setEdges(res.payload.edges);\r\n        chatMsgs.length < 1 && setChatMsgs(res.payload.msgs);\r\n        res.payload.setting && setFlowSettings(res.payload.setting);\r\n        setFlowSettingLoaded(true);\r\n        saveHistory({\r\n          nodes: res.payload.nodes,\r\n          edges: res.payload.edges,\r\n          chatMsgs: res.payload.msgs,\r\n        });\r\n      }\r\n    } catch (error: any) {\r\n      setErrorMessage(error.message);\r\n    }\r\n  };\r\n\r\n  const fetchAllDataFields = async () => {\r\n    try {\r\n      const res = await ChatFlowApi.getAllDataFields();\r\n      if (!res.success) {\r\n        throw Error(res.message);\r\n      }\r\n      setDataFields(res.payload);\r\n    } catch (error: any) {\r\n      console.error(error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    saveHistory({ nodes, edges, chatMsgs });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <FlowDataContext.Provider\r\n      value={{\r\n        chatMsgs,\r\n        addChatMsg,\r\n        clearSelectedMsg,\r\n        onClickChatMsg,\r\n        OnChatMsgUpdate,\r\n        currentMsgIndex,\r\n        currentChatMsg:\r\n          typeof currentMsgIndex === \"number\"\r\n            ? chatMsgs[currentMsgIndex]\r\n            : undefined,\r\n        flowSettings,\r\n        setFlowSettings,\r\n        flowSettingsLoaded,\r\n        reloadDrawer,\r\n        setReloadDrawer,\r\n        refreshNode,\r\n        setRefreshNode,\r\n        onChatMsgDelete,\r\n        setChatMsgs,\r\n        currentNode:\r\n          typeof currentNodeIndex === \"number\"\r\n            ? (nodes[currentNodeIndex] as ChatFlowNode.ChatFlowNodeInterface)\r\n            : undefined,\r\n        currentNodeIndex,\r\n        edges,\r\n        nodes,\r\n        dataFields,\r\n        onEdgesChange,\r\n        setCurrentNodeIndex,\r\n        setEdges,\r\n        setNodes,\r\n        setDataFields,\r\n        saveChatFlowData,\r\n        fetchChatFlowData,\r\n        fetchAllDataFields,\r\n        copiedNode,\r\n        copiedChatMsgs,\r\n        setCopiedNode,\r\n        setCopiedChatMsgs,\r\n        editingData,\r\n        toggleEditingData,\r\n      }}\r\n    >\r\n      {children}\r\n    </FlowDataContext.Provider>\r\n  );\r\n};\r\n\r\nexport default FlowDataProvider;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"DialogContentTextRoot\":\"FlowDialog_DialogContentTextRoot__mktDI\",\"DialogActions\":\"FlowDialog_DialogActions__k5eNV\",\"Reset\":\"FlowDialog_Reset__SDkQw\",\"Save\":\"FlowDialog_Save__AxHhg\"};","import {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n} from \"@mui/material\";\r\nimport React, { FC } from \"react\";\r\nimport classes from \"./FlowDialog.module.css\";\r\n\r\ninterface FlowDialogProps {\r\n  appearance?: \"alert\" | \"warning\";\r\n  header?: React.ReactElement | string;\r\n  message?: React.ReactElement | string;\r\n  show: boolean;\r\n  onClose: () => void;\r\n  onConfirm?: () => void;\r\n}\r\n\r\nconst FlowDialog: FC<FlowDialogProps> = ({\r\n  show,\r\n  appearance,\r\n  header,\r\n  message,\r\n  onClose,\r\n  onConfirm,\r\n}) => {\r\n  return (\r\n    <Dialog\r\n      maxWidth=\"xs\"\r\n      open={show}\r\n      onClose={onClose}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{header || \"No Header\"}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText\r\n          classes={{ root: classes.DialogContentTextRoot }}\r\n          id=\"alert-dialog-description\"\r\n        >\r\n          {message || \"\"}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions className={classes.DialogActions}>\r\n        {appearance !== \"alert\" && (\r\n          <Button\r\n            onClick={() => {\r\n              onClose();\r\n            }}\r\n            className={classes.Reset}\r\n          >\r\n            cancel\r\n          </Button>\r\n        )}\r\n        <Button\r\n          onClick={() => {\r\n            onConfirm && onConfirm();\r\n            onClose();\r\n          }}\r\n          className={classes.Save}\r\n        >\r\n          Continue\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default FlowDialog;\r\n","import React, { ReactElement, useContext, useState } from \"react\";\r\nimport FlowDialog from \"../../Components/ChatFlowDashboard/Dialogs/FlowDialog\";\r\nimport { FlowDialogContextType } from \"./types\";\r\n\r\nexport const FlowDialogContext = React.createContext<\r\n  FlowDialogContextType | undefined\r\n>(undefined);\r\n\r\nexport const useFlowDialog = () => {\r\n  let context = useContext(FlowDialogContext);\r\n\r\n  // If context is undefined, we know we used RadioGroupItem\r\n  // outside of our provider so we can throw a more helpful\r\n  // error!\r\n  if (context === undefined) {\r\n    throw Error(\r\n      \"Item must be used inside of a Object, otherwise it will not function correctly.\"\r\n    );\r\n  }\r\n\r\n  // Because of TypeScript's type narrowing, if we make it past\r\n  // the error the compiler knows that context is always defined\r\n  // at this point, so we don't need to do any conditional\r\n  // checking on its values when we use this hook!\r\n  return context;\r\n};\r\n\r\nconst DialogProvider: React.FC<any> = ({ children }) => {\r\n  const [dialogState, setDialogState] = useState<{\r\n    type?: \"warning\" | \"alert\";\r\n    header?: React.ReactElement | string;\r\n    message?: React.ReactElement | string;\r\n    onConfirm?: () => void;\r\n    show: boolean;\r\n  }>({\r\n    show: false,\r\n  });\r\n\r\n  const openWarningDialog = (\r\n    message: ReactElement | string,\r\n    header: string,\r\n    onConfirm?: () => void\r\n  ) => {\r\n    return setDialogState({\r\n      type: \"warning\",\r\n      header: header || \"Warning\",\r\n      message: message,\r\n      onConfirm,\r\n      show: true,\r\n    });\r\n  };\r\n\r\n  const openAlertDialog = (message: ReactElement | string, header?: string) => {\r\n    return setDialogState({\r\n      type: \"alert\",\r\n      header: header || \"Action not permitted\",\r\n      message: message,\r\n      show: true,\r\n    });\r\n  };\r\n\r\n  const closeDialog = () => {\r\n    setDialogState({\r\n      ...dialogState,\r\n      show: false,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <FlowDialogContext.Provider value={{ openAlertDialog, openWarningDialog }}>\r\n      <FlowDialog\r\n        onConfirm={dialogState.onConfirm}\r\n        onClose={closeDialog}\r\n        show={dialogState.show}\r\n        message={dialogState.message}\r\n        appearance={dialogState.type}\r\n        header={dialogState.header}\r\n      />\r\n      {children}\r\n    </FlowDialogContext.Provider>\r\n  );\r\n};\r\n\r\nexport default DialogProvider;\r\n","import { createContext, FC, useContext, useState } from \"react\";\r\nimport { FlowDrawerContextState } from \"./types\";\r\n\r\nexport const FlowDrawerContext = createContext<\r\n  FlowDrawerContextState | undefined\r\n>(undefined);\r\n\r\nexport const useFlowDrawer = () => {\r\n  let context = useContext(FlowDrawerContext);\r\n\r\n  // If context is undefined, we know we used RadioGroupItem\r\n  // outside of our provider so we can throw a more helpful\r\n  // error!\r\n  if (context === undefined) {\r\n    throw Error(\r\n      \"Item must be used inside of a Object, otherwise it will not function correctly.\"\r\n    );\r\n  }\r\n\r\n  // Because of TypeScript's type narrowing, if we make it past\r\n  // the error the compiler knows that context is always defined\r\n  // at this point, so we don't need to do any conditional\r\n  // checking on its values when we use this hook!\r\n  return context;\r\n};\r\n\r\nexport enum CurrentDrawerModes {\r\n  MENU = \"MENU\",\r\n  NODE = \"NODE\",\r\n  SETTING = \"SETTING\",\r\n}\r\n\r\nconst FlowDrawerProvider: FC<any> = ({ children }) => {\r\n  const [isDrawerOpen, setDrawerOpen] = useState(true);\r\n\r\n  const [currentDrawerMode, setCurrentDrawerMode] =\r\n    useState<CurrentDrawerModes>(CurrentDrawerModes.MENU);\r\n\r\n  return (\r\n    <FlowDrawerContext.Provider\r\n      value={{\r\n        isDrawerOpen,\r\n        setDrawerOpen,\r\n        currentDrawerMode,\r\n        setCurrentDrawerMode,\r\n      }}\r\n    >\r\n      {children}\r\n    </FlowDrawerContext.Provider>\r\n  );\r\n};\r\n\r\nexport default FlowDrawerProvider;\r\n","import { useHistory } from \"Hooks/ChatFlowDashboard/useHistory\";\r\nimport React, { FC, useContext } from \"react\";\r\nimport { FlowHistoryContextType } from \"./types\";\r\n\r\nexport const FlowHistoryContext = React.createContext<\r\n  FlowHistoryContextType | undefined\r\n>(undefined);\r\n\r\nexport const useFlowHistory = () => {\r\n  let context = useContext(FlowHistoryContext);\r\n\r\n  // If context is undefined, we know we used RadioGroupItem\r\n  // outside of our provider so we can throw a more helpful\r\n  // error!\r\n  if (context === undefined) {\r\n    throw Error(\r\n      \"Item must be used inside of a Object, otherwise it will not function correctly.\"\r\n    );\r\n  }\r\n\r\n  // Because of TypeScript's type narrowing, if we make it past\r\n  // the error the compiler knows that context is always defined\r\n  // at this point, so we don't need to do any conditional\r\n  // checking on its values when we use this hook!\r\n  return context;\r\n};\r\n\r\nconst FlowHistoryProvider: FC<any> = ({ children }) => {\r\n  const {\r\n    history,\r\n    setHistory,\r\n    historyIndex,\r\n    setHistoryIndex,\r\n    resetHistory,\r\n    saveHistory,\r\n    canUndo,\r\n    undo,\r\n    canRedo,\r\n    redo,\r\n  } = useHistory();\r\n\r\n  return (\r\n    <FlowHistoryContext.Provider\r\n      value={{\r\n        history,\r\n        setHistory,\r\n        historyIndex,\r\n        setHistoryIndex,\r\n        resetHistory,\r\n        saveHistory,\r\n        canUndo,\r\n        undo,\r\n        canRedo,\r\n        redo,\r\n      }}\r\n    >\r\n      {children}\r\n    </FlowHistoryContext.Provider>\r\n  );\r\n};\r\n\r\nexport default FlowHistoryProvider;\r\n","import { useMemo, useState } from \"react\";\r\nimport { ChatFlowHistoryInterface } from \"Shared/Interfaces/ChatFlowHistoryInterface\";\r\n\r\nexport const useHistory = () => {\r\n  const [history, setHistory] = useState<ChatFlowHistoryInterface[]>([]);\r\n  const [historyIndex, setHistoryIndex] = useState<number>(-1);\r\n\r\n  const saveHistory = (state: ChatFlowHistoryInterface) => {\r\n    setHistory([...history.slice(0, historyIndex + 1), state]);\r\n    setHistoryIndex(historyIndex + 1);\r\n  };\r\n\r\n  const resetHistory = () => {\r\n    setHistory([]);\r\n    setHistoryIndex(-1);\r\n  };\r\n\r\n  const canUndo = useMemo(\r\n    () => history.length > 0 && historyIndex > 0,\r\n    [history, historyIndex]\r\n  );\r\n\r\n  const canRedo = useMemo(\r\n    () => history.length > 0 && historyIndex < history.length - 1,\r\n    [history, historyIndex]\r\n  );\r\n\r\n  const undo = () => {\r\n    if (!canUndo) return;\r\n    if (historyIndex === 0) return;\r\n    setHistoryIndex(historyIndex - 1);\r\n  };\r\n\r\n  const redo = () => {\r\n    if (!canRedo) return;\r\n    if (historyIndex === history.length - 1) return;\r\n    setHistoryIndex(historyIndex + 1);\r\n  };\r\n\r\n  return {\r\n    history,\r\n    setHistory,\r\n    historyIndex,\r\n    setHistoryIndex,\r\n    resetHistory,\r\n    saveHistory,\r\n    canUndo,\r\n    undo,\r\n    canRedo,\r\n    redo,\r\n  };\r\n};\r\n","export enum FlowEdge {\r\n  BEZIER = \"bezier\",\r\n  STRAIGHT = \"straight\",\r\n  STEP = \"step\",\r\n  SMOOTHSTEP = \"smoothstep\",\r\n}\r\n","import {\n  ConditionType,\n  HeaderType,\n  IF_ELSE_TYPES,\n  LocationType,\n  MediaProvider,\n  ValidationType,\n} from \"Shared/Enums/ChatFlowMsgEnum\";\nimport { HandlePosition, HandleType } from \"Shared/Enums/ChatFlowNodeEnum\";\nimport { ChatFlowMsg } from \"Shared/Interfaces/ChatFlowMsgInterface\";\nimport { ChatFlowNode } from \"Shared/Interfaces/ChatFlowNodeInterface\";\nimport { UniqueEntityID } from \"Utils/UniqueEntityID\";\n\nexport default class NodeModelService {\n  private error_msg: string;\n  constructor(\n    private id: string,\n    private type: number,\n    private position: { x: number; y: number },\n    private label: any,\n    private className?: string,\n    private title?: string\n  ) {\n    this.error_msg =\n      \"⚠️ Please enter valid input!\\n\\n🔁 Reply 0️⃣ to go back to main menu\\n\\n🔁 Reply #️⃣ to go back\";\n  }\n\n  protected get common_msg_settings() {\n    return {\n      assign_rules: false,\n      resend_on_error: true,\n      is_first_msg: false,\n      is_last_msg: false,\n      data_field: \"\",\n      disable_auto_reminder: false,\n      jump: false,\n      response_type: \"\",\n      save_input: false,\n      skip_on_back: false,\n    };\n  }\n  protected get common_chat_msg() {\n    return {\n      id: this.id,\n      type: this.type,\n      title: this.title || \"\",\n      msg_settings: this.common_msg_settings,\n    };\n  }\n\n  protected get common_node() {\n    return {\n      id: this.id,\n      type: \"customDefault\",\n      position: this.position,\n      className: this.className || \"parent\",\n    };\n  }\n\n  protected get Type100Msg() {\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"Interactive Text Response\",\n      primary_msg: \"\",\n      error_msg: this.error_msg,\n      options: [],\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n          {\n            type: HandleType.SOURCE,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.BOTTOM,\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type101Msg() {\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"Interactive Text Response - Branched\",\n      primary_msg: \"\",\n      error_msg: this.error_msg,\n      options: [],\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type102Msg() {\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"Basic Message\",\n      primary_msg: \"\",\n      error_msg: this.error_msg,\n      options: [],\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n          {\n            type: HandleType.SOURCE,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.BOTTOM,\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type103Msg() {\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"Geo Location\",\n      location_msg: {\n        type: LocationType.MAP,\n      },\n      error_msg: this.error_msg,\n      options: [],\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n          {\n            type: HandleType.SOURCE,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.BOTTOM,\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type104Msg() {\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"Document\",\n      header: {\n        media_provider: MediaProvider.UPLOAD,\n        type: HeaderType.FILE,\n        uploaded_files: [],\n        api_url: \"\",\n        filename: \"\",\n      },\n      primary_msg: \"\",\n      error_msg: this.error_msg,\n      options: [],\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n          {\n            type: HandleType.SOURCE,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.BOTTOM,\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type105Msg() {\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"API Basic Message\",\n      api_url: \"\",\n      pre_msg: \"\",\n      post_msg: \"\",\n      error_msg: this.error_msg,\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n          {\n            type: HandleType.SOURCE,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.BOTTOM,\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type107Msg() {\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"API Interactive Messages\",\n      api_url: \"\",\n      pre_msg: \"\",\n      post_msg: \"\",\n      error_msg: this.error_msg,\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n          {\n            type: HandleType.SOURCE,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.BOTTOM,\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type108Msg() {\n    const Handle1Id = new UniqueEntityID().toString();\n    const Handle2Id = new UniqueEntityID().toString();\n\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"True or False Condition\",\n      condition: {\n        type: ConditionType.TRUE_FALSE,\n        conditions: [\n          {\n            id: Handle1Id,\n            style: {\n              border: \"1px solid #00c02a\",\n            },\n            removable: true,\n            data_field: \"\",\n          },\n          {\n            id: Handle2Id,\n            style: {\n              border: \"1px solid #AC5BC8\",\n            },\n            removable: false,\n          },\n        ],\n      },\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n          {\n            type: HandleType.SOURCE,\n            id: Handle1Id,\n            position: HandlePosition.BOTTOM,\n            style: {\n              border: \"1px solid #00c02a\",\n            },\n          },\n          {\n            type: HandleType.SOURCE,\n            id: Handle2Id,\n            position: HandlePosition.BOTTOM,\n            style: {\n              border: \"1px solid #AC5BC8\",\n            },\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type109Msg() {\n    const Handle1Id = new UniqueEntityID().toString();\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"If and Else Condition\",\n      condition: {\n        type: ConditionType.IF_ELSE,\n        if_else_param_type: IF_ELSE_TYPES.USER_RESPONSE,\n        evaluate_data_field: \"\",\n        conditions: [\n          {\n            id: Handle1Id,\n            style: {\n              border: \"1px solid #00c02a\",\n            },\n            removable: false,\n          },\n        ],\n      },\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n          {\n            type: HandleType.SOURCE,\n            id: Handle1Id,\n            position: HandlePosition.BOTTOM,\n            style: {\n              border: \"1px solid #00c02a\",\n            },\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type110Msg() {\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"Interactive Button Response\",\n      primary_msg: \"\",\n      error_msg: this.error_msg,\n      action: { buttons: [] },\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type111Msg() {\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"Interactive List Response\",\n      primary_msg: \"\",\n      error_msg: this.error_msg,\n      action: { button: \"\", sections: [] },\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type112Msg() {\n    const Handle1Id = new UniqueEntityID().toString();\n    const Handle2Id = new UniqueEntityID().toString();\n\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"API True or False\",\n      api_url: \"\",\n      condition: {\n        type: ConditionType.TRUE_FALSE,\n        conditions: [\n          {\n            id: Handle1Id,\n            style: {\n              border: \"1px solid #00c02a\",\n            },\n            removable: false,\n            validation_type: ValidationType.SUCCESS,\n          },\n          {\n            id: Handle2Id,\n            style: {\n              border: \"1px solid #c85b5b\",\n            },\n            removable: false,\n            validation_type: ValidationType.FAILURE,\n          },\n        ],\n      },\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n          {\n            type: HandleType.SOURCE,\n            id: Handle1Id,\n            position: HandlePosition.BOTTOM,\n            style: {\n              border: \"1px solid #00c02a\",\n            },\n          },\n          {\n            type: HandleType.SOURCE,\n            id: Handle2Id,\n            position: HandlePosition.BOTTOM,\n            style: {\n              border: \"1px solid #c85b5b\",\n            },\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  protected get Type113Msg() {\n    const flow_msg: ChatFlowMsg.ChatFlowMsgInterface = {\n      ...this.common_chat_msg,\n      title: \"API Interactive List Response\",\n      primary_msg: \"\",\n      api_url: \"\",\n      error_msg: this.error_msg,\n    };\n\n    const flow_node: ChatFlowNode.ChatFlowNodeInterface = {\n      ...this.common_node,\n      data: {\n        label: this.label,\n        type: this.type,\n        handles: [\n          {\n            type: HandleType.TARGET,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.TOP,\n          },\n          {\n            type: HandleType.SOURCE,\n            id: new UniqueEntityID().toString(),\n            position: HandlePosition.BOTTOM,\n            style: {\n              border: \"1px solid #00c02a\",\n            },\n          },\n        ],\n      },\n    };\n\n    return { flow_msg, flow_node };\n  }\n\n  public get_node_data() {\n    switch (this.type) {\n      case 100:\n        return this.Type100Msg;\n      case 101:\n        return this.Type101Msg;\n      case 102:\n        return this.Type102Msg;\n      case 103:\n        return this.Type103Msg;\n      case 104:\n        return this.Type104Msg;\n      case 105:\n        return this.Type105Msg;\n      case 107:\n        return this.Type107Msg;\n      case 108:\n        return this.Type108Msg;\n      case 109:\n        return this.Type109Msg;\n      case 110:\n        return this.Type110Msg;\n      case 111:\n        return this.Type111Msg;\n      case 112:\n        return this.Type112Msg;\n      case 113:\n        return this.Type113Msg;\n      default:\n        return this.Type100Msg;\n    }\n  }\n}\n","import {\r\n  createContext,\r\n  CSSProperties,\r\n  FC,\r\n  useCallback,\r\n  useContext,\r\n} from \"react\";\r\nimport {\r\n  addEdge,\r\n  Edge,\r\n  Node,\r\n  OnEdgesDelete,\r\n  OnEdgeUpdateFunc,\r\n  OnNodesDelete,\r\n  updateEdge,\r\n  useKeyPress,\r\n} from \"react-flow-renderer\";\r\nimport NodeModelService from \"Services/ChatFlowService/NodeModelService\";\r\nimport { FlowEdge } from \"Shared/Enums/FlowEdge\";\r\nimport { UniqueEntityID } from \"Utils/UniqueEntityID\";\r\nimport { CurrentDrawerModes, useFlowDrawer } from \"./FlowDrawerProvider\";\r\nimport { useFlowData } from \"./FlowDataProvider\";\r\nimport { FlowNodeServicesContextState } from \"./types\";\r\nimport { NodeDataLabel } from \"Shared/Enums/ChatFlowNodeEnum\";\r\nimport { useFlowHistory } from \"Contexts/ChatFlowDashboard\";\r\n\r\nexport const FlowNodeServicesContext = createContext<\r\n  FlowNodeServicesContextState | undefined\r\n>(undefined);\r\n\r\nexport const useFlowNodeServices = () => {\r\n  let context = useContext(FlowNodeServicesContext);\r\n\r\n  // If context is undefined, we know we used RadioGroupItem\r\n  // outside of our provider so we can throw a more helpful\r\n  // error!\r\n  if (context === undefined) {\r\n    throw Error(\r\n      \"Item must be used inside of a Object, otherwise it will not function correctly.\"\r\n    );\r\n  }\r\n\r\n  // Because of TypeScript's type narrowing, if we make it past\r\n  // the error the compiler knows that context is always defined\r\n  // at this point, so we don't need to do any conditional\r\n  // checking on its values when we use this hook!\r\n  return context;\r\n};\r\n\r\nconst FlowNodeServicesProvider: FC<any> = ({ children }) => {\r\n  const { saveHistory } = useFlowHistory();\r\n  const { setCurrentDrawerMode } = useFlowDrawer();\r\n  const {\r\n    addChatMsg,\r\n    onClickChatMsg,\r\n    clearSelectedMsg,\r\n    currentChatMsg,\r\n    chatMsgs,\r\n    setReloadDrawer,\r\n    onChatMsgDelete,\r\n    edges,\r\n    setEdges,\r\n    nodes,\r\n    setNodes,\r\n    setCurrentNodeIndex,\r\n    currentNodeIndex,\r\n    setRefreshNode,\r\n    currentNode,\r\n  } = useFlowData();\r\n\r\n  const spacePressed = useKeyPress(\"Space\");\r\n\r\n  const dragOverFlow = useCallback((event: any) => {\r\n    event.preventDefault();\r\n    event.dataTransfer.dropEffect = \"move\";\r\n  }, []);\r\n\r\n  const onEdgeConnect = (params: Edge) => {\r\n    const type = FlowEdge.SMOOTHSTEP;\r\n    if (params.source === params.target) return;\r\n\r\n    const chatMsg = chatMsgs.find((msg) => msg.id === params.source);\r\n    if (!chatMsg) return;\r\n\r\n    const style: CSSProperties = { strokeWidth: 3 };\r\n\r\n    switch (chatMsg.type) {\r\n      case 101:\r\n        for (const option of chatMsg.options || []) {\r\n          if (option.id !== params.sourceHandle) continue;\r\n          option.trigger_id = params.target;\r\n          const newEdges: Edge<any>[] = addEdge(\r\n            { ...params, type, style },\r\n            edges\r\n          );\r\n          setEdges(newEdges);\r\n          saveHistory({ nodes, edges: newEdges, chatMsgs });\r\n          break;\r\n        }\r\n        break;\r\n      case 108:\r\n        for (const condition of chatMsg.condition?.conditions || []) {\r\n          if (condition.id !== params.sourceHandle) continue;\r\n          condition.trigger_id = params.target;\r\n          const newEdges: Edge<any>[] = addEdge(\r\n            { ...params, type, style },\r\n            edges\r\n          );\r\n          setEdges(newEdges);\r\n          saveHistory({ nodes, edges: newEdges, chatMsgs });\r\n          break;\r\n        }\r\n        break;\r\n      case 109:\r\n        for (const condition of chatMsg.condition?.conditions || []) {\r\n          if (condition.id !== params.sourceHandle) continue;\r\n          condition.trigger_id = params.target;\r\n          const newEdges: Edge<any>[] = addEdge(\r\n            { ...params, type, style },\r\n            edges\r\n          );\r\n          setEdges(newEdges);\r\n          saveHistory({ nodes, edges: newEdges, chatMsgs });\r\n          break;\r\n        }\r\n        break;\r\n      case 110:\r\n        for (const button of chatMsg.action?.buttons || []) {\r\n          if (button.button_id !== params.sourceHandle) continue;\r\n          button.trigger_id = params.target;\r\n          const newEdges: Edge<any>[] = addEdge(\r\n            { ...params, type, style },\r\n            edges\r\n          );\r\n          setEdges(newEdges);\r\n          saveHistory({ nodes, edges: newEdges, chatMsgs });\r\n          break;\r\n        }\r\n        break;\r\n      case 111:\r\n        for (const section of chatMsg.action?.sections || []) {\r\n          for (const row of section.rows) {\r\n            if (row.id !== params.sourceHandle) continue;\r\n            row.trigger_id = params.target;\r\n            const newEdges: Edge<any>[] = addEdge(\r\n              { ...params, type, style },\r\n              edges\r\n            );\r\n            setEdges(newEdges);\r\n            saveHistory({ nodes, edges: newEdges, chatMsgs });\r\n            break;\r\n          }\r\n        }\r\n        break;\r\n      case 112:\r\n        for (const condition of chatMsg.condition?.conditions || []) {\r\n          if (condition.id !== params.sourceHandle) continue;\r\n          condition.trigger_id = params.target;\r\n          const newEdges: Edge<any>[] = addEdge(\r\n            { ...params, type, style },\r\n            edges\r\n          );\r\n          setEdges(newEdges);\r\n          saveHistory({ nodes, edges: newEdges, chatMsgs });\r\n          break;\r\n        }\r\n        break;\r\n      default:\r\n        chatMsg.trigger_id = params.target;\r\n        const newEdges: Edge<any>[] = addEdge(\r\n          { ...params, type, style },\r\n          edges\r\n        );\r\n        setEdges(newEdges);\r\n        saveHistory({ nodes, edges: newEdges, chatMsgs });\r\n        break;\r\n    }\r\n  };\r\n\r\n  const onEdgeUpdate: OnEdgeUpdateFunc = (OldEdge, newConnection) => {\r\n    const chatMsg = chatMsgs.find((msg) => msg.id === newConnection.source);\r\n    if (!chatMsg || !newConnection.target) return;\r\n    switch (chatMsg.type) {\r\n      case 101:\r\n        for (const option of chatMsg.options || []) {\r\n          if (option.id !== OldEdge.sourceHandle) continue;\r\n          option.trigger_id = newConnection.target;\r\n          break;\r\n        }\r\n        break;\r\n      case 108:\r\n        for (const condition of chatMsg.condition?.conditions || []) {\r\n          if (condition.id !== OldEdge.sourceHandle) continue;\r\n          condition.trigger_id = newConnection.target;\r\n          break;\r\n        }\r\n        break;\r\n      case 109:\r\n        for (const condition of chatMsg.condition?.conditions || []) {\r\n          if (condition.id !== OldEdge.sourceHandle) continue;\r\n          condition.trigger_id = newConnection.target;\r\n          break;\r\n        }\r\n        break;\r\n      case 110:\r\n        if (chatMsg.action) {\r\n          for (const button of chatMsg.action.buttons || []) {\r\n            if (button.button_id !== OldEdge.sourceHandle) continue;\r\n            button.trigger_id = newConnection.target;\r\n            break;\r\n          }\r\n        }\r\n        break;\r\n      case 111:\r\n        for (const button of chatMsg.action?.sections || []) {\r\n          for (const row of button.rows) {\r\n            if (row.id !== OldEdge.sourceHandle) continue;\r\n            row.trigger_id = newConnection.target;\r\n            break;\r\n          }\r\n        }\r\n        break;\r\n      case 112:\r\n        for (const condition of chatMsg.condition?.conditions || []) {\r\n          if (condition.id !== OldEdge.sourceHandle) continue;\r\n          condition.trigger_id = newConnection.target;\r\n          break;\r\n        }\r\n        break;\r\n      default:\r\n        chatMsg.trigger_id = newConnection.target;\r\n        const newEdges: Edge<any>[] = updateEdge(OldEdge, newConnection, edges);\r\n        setEdges(newEdges);\r\n        saveHistory({ nodes, edges: newEdges, chatMsgs });\r\n        break;\r\n    }\r\n  };\r\n\r\n  const onEdgesDelete: OnEdgesDelete = (edges) => {\r\n    for (const edge of edges) {\r\n      const chatMsg = chatMsgs.find((msg) => msg.id === edge.source);\r\n      if (!chatMsg) return;\r\n\r\n      switch (chatMsg.type) {\r\n        case 101:\r\n          for (const option of chatMsg.options || []) {\r\n            if (option.id !== edge.sourceHandle) continue;\r\n            option.trigger_id = undefined;\r\n            break;\r\n          }\r\n          break;\r\n        case 108:\r\n          for (const condition of chatMsg.condition?.conditions || []) {\r\n            if (condition.id !== edge.sourceHandle) continue;\r\n            condition.trigger_id = undefined;\r\n            break;\r\n          }\r\n          break;\r\n        case 109:\r\n          for (const condition of chatMsg.condition?.conditions || []) {\r\n            if (condition.id !== edge.sourceHandle) continue;\r\n            condition.trigger_id = undefined;\r\n            break;\r\n          }\r\n          break;\r\n        case 110:\r\n          for (const button of chatMsg.action?.buttons || []) {\r\n            if (button.button_id !== edge.sourceHandle) continue;\r\n            button.trigger_id = undefined;\r\n            break;\r\n          }\r\n          break;\r\n        case 111:\r\n          for (const button of chatMsg.action?.sections || []) {\r\n            for (const row of button.rows) {\r\n              if (row.id !== edge.sourceHandle) continue;\r\n              row.trigger_id = undefined;\r\n              break;\r\n            }\r\n          }\r\n          break;\r\n        case 112:\r\n          for (const condition of chatMsg.condition?.conditions || []) {\r\n            if (condition.id !== edge.sourceHandle) continue;\r\n            condition.trigger_id = undefined;\r\n            break;\r\n          }\r\n          break;\r\n        default:\r\n          chatMsg.trigger_id = undefined;\r\n          break;\r\n      }\r\n      saveHistory({ nodes, edges, chatMsgs });\r\n    }\r\n  };\r\n\r\n  const onNodesDelete: OnNodesDelete = (deleted_nodes) => {\r\n    for (const node of deleted_nodes) {\r\n      const chatMsgIndex = chatMsgs.findIndex((msg) => msg.id === node.id);\r\n      const nodeIndex = nodes.findIndex((msg) => msg.id === node.id);\r\n      if (chatMsgIndex === -1 || nodeIndex === -1) continue;\r\n      const newNodes = nodes;\r\n      newNodes.splice(nodeIndex, 1);\r\n      setNodes(newNodes);\r\n      onChatMsgDelete(chatMsgIndex, newNodes);\r\n    }\r\n  };\r\n\r\n  const addFlowNode = (type: number, label: string, position: any) => {\r\n    const id = new UniqueEntityID();\r\n\r\n    const nodeModelService = new NodeModelService(\r\n      id.toString(),\r\n      type,\r\n      position,\r\n      <p>{label}</p>\r\n    );\r\n    const node_data = nodeModelService.get_node_data();\r\n    const newNodes = nodes.concat([node_data.flow_node as any]);\r\n    setNodes(newNodes);\r\n    setCurrentNodeIndex(nodes.length);\r\n    addChatMsg(node_data.flow_msg, newNodes);\r\n  };\r\n\r\n  const onNodeDragEnd = (node: Node) => {\r\n    const draggedElement = nodes.findIndex(\r\n      ({ id }: { id: string }) => id === node.id\r\n    );\r\n\r\n    nodes[draggedElement] = {\r\n      ...nodes[draggedElement],\r\n      position: node.position,\r\n    };\r\n    saveHistory({ nodes, edges, chatMsgs });\r\n  };\r\n\r\n  // stress test code\r\n  // const addFlowNode = (type: number, label: string, position: any) => {\r\n  //   let nodes: any[] = [];\r\n\r\n  //   let xNodes = 10,\r\n  //     yNodes = 10;\r\n\r\n  //   for (let y = 0; y < yNodes; y++) {\r\n  //     for (let x = 0; x < xNodes; x++) {\r\n  //       const position = { x: x * 100, y: y * 50 };\r\n  //       const id = new UniqueEntityID();\r\n\r\n  //       const nodeModelService = new NodeModelService(\r\n  //         id.toString(),\r\n  //         type,\r\n  //         position,\r\n  //         <p>{label}</p>\r\n  //       );\r\n  //       const node_data = nodeModelService.get_node_data();\r\n\r\n  //       nodes.push(node_data.flow_node);\r\n  //       setCurrentNodeIndex(nodes.length);\r\n  //       addChatMsg(node_data.flow_msg, nodes);\r\n  //     }\r\n  //   }\r\n\r\n  //   setNodes((prevState) => prevState.concat(nodes));\r\n  // };\r\n\r\n  const onNodeClick = (\r\n    _event: React.MouseEvent<Element, MouseEvent>,\r\n    node: Node<any>\r\n  ) => {\r\n    setCurrentDrawerMode(CurrentDrawerModes.NODE);\r\n    if (node.id !== currentChatMsg?.id) {\r\n      const node_index = nodes.findIndex((f_node) => f_node.id === node.id);\r\n      if (node_index === -1) return;\r\n\r\n      setCurrentNodeIndex(node_index);\r\n      onClickChatMsg(node.id);\r\n      setReloadDrawer((prev) => (prev += 1));\r\n    }\r\n  };\r\n\r\n  const deselectNode = () => {\r\n    setCurrentNodeIndex(undefined);\r\n    setCurrentDrawerMode(CurrentDrawerModes.MENU);\r\n    clearSelectedMsg();\r\n  };\r\n\r\n  const updateNodeLabel = (label: NodeDataLabel | undefined) => {\r\n    if (typeof currentNodeIndex !== \"number\") return;\r\n\r\n    // setNodes((prevState) => {\r\n    //   prevState[currentNodeIndex] = {\r\n    //     ...prevState[currentNodeIndex],\r\n    //     data: {\r\n    //       ...prevState[currentNodeIndex].data,\r\n    //       nodeDataLabel: label,\r\n    //     },\r\n    //   };\r\n    //   return prevState;\r\n    if (currentNode) {\r\n      currentNode.data.nodeDataLabel = label;\r\n    }\r\n\r\n    setRefreshNode((prev) => (prev += 1));\r\n  };\r\n\r\n  return (\r\n    <FlowNodeServicesContext.Provider\r\n      value={{\r\n        dragOverFlow,\r\n        onConnect: onEdgeConnect,\r\n        spacePressed,\r\n        addFlowNode,\r\n        onNodeClick,\r\n        deselectNode,\r\n        updateNodeLabel,\r\n        onEdgeUpdate,\r\n        onEdgesDelete,\r\n        onNodesDelete,\r\n        onNodeDragEnd,\r\n      }}\r\n    >\r\n      {children}\r\n    </FlowNodeServicesContext.Provider>\r\n  );\r\n};\r\n\r\nexport default FlowNodeServicesProvider;\r\n","import { Node } from \"react-flow-renderer\";\r\nimport { HandleType } from \"Shared/Enums/ChatFlowNodeEnum\";\r\nimport { ChatFlowMsg } from \"Shared/Interfaces/ChatFlowMsgInterface\";\r\nimport { UniqueEntityID } from \"Utils/UniqueEntityID\";\r\n\r\nexport class NodeCopy {\r\n  private static commonNewNode = (\r\n    node: Node,\r\n    newId: string,\r\n    copySourceHandles: boolean = true\r\n  ): Node => ({\r\n    ...node,\r\n    id: newId,\r\n    data: {\r\n      ...node.data,\r\n      nodeDataLabel: undefined,\r\n      handles: copySourceHandles\r\n        ? node.data.handles.map((handle: any) => ({\r\n            ...handle,\r\n            id: new UniqueEntityID().toString(),\r\n          }))\r\n        : node.data.handles.filter(\r\n            (handle: any) => handle.type === HandleType.TARGET\r\n          ),\r\n    },\r\n  });\r\n\r\n  private static newSourceHandles = (node: Node) =>\r\n    node.data.handles.filter(\r\n      (handle: any) => handle.type === HandleType.SOURCE\r\n    );\r\n\r\n  public static CommonCopy = (\r\n    chatMsg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    node: Node,\r\n    newId: string\r\n  ): {\r\n    newNode: Node;\r\n    newChatMsg: ChatFlowMsg.ChatFlowMsgInterface;\r\n  } => ({\r\n    newNode: this.commonNewNode(node, newId),\r\n    newChatMsg: {\r\n      ...chatMsg,\r\n      id: newId,\r\n      trigger_id: undefined,\r\n      msg_settings: {\r\n        ...chatMsg.msg_settings,\r\n        is_first_msg: false,\r\n        is_last_msg: false,\r\n      },\r\n    },\r\n  });\r\n\r\n  public static Message100 = (\r\n    chatMsg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    node: Node,\r\n    newId: string\r\n  ): {\r\n    newNode: Node;\r\n    newChatMsg: ChatFlowMsg.ChatFlowMsgInterface;\r\n  } => {\r\n    const newNode = this.commonNewNode(node, newId);\r\n    const sourceHandles = this.newSourceHandles(newNode);\r\n    return {\r\n      newNode,\r\n      newChatMsg: {\r\n        ...chatMsg,\r\n        id: newId,\r\n        trigger_id: undefined,\r\n        options: chatMsg.options?.map((option, i) => ({\r\n          ...option,\r\n          id: sourceHandles[i].id,\r\n        })),\r\n      },\r\n    };\r\n  };\r\n\r\n  public static Message101 = (\r\n    chatMsg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    node: Node,\r\n    newId: string\r\n  ): {\r\n    newNode: Node;\r\n    newChatMsg: ChatFlowMsg.ChatFlowMsgInterface;\r\n  } => {\r\n    const newNode = this.commonNewNode(node, newId);\r\n    const sourceHandles = this.newSourceHandles(newNode);\r\n    return {\r\n      newNode,\r\n      newChatMsg: {\r\n        ...chatMsg,\r\n        id: newId,\r\n        options: chatMsg.options?.map((option, i) => ({\r\n          ...option,\r\n          id: sourceHandles[i].id,\r\n          trigger_id: undefined,\r\n        })),\r\n      },\r\n    };\r\n  };\r\n\r\n  public static Message108 = (\r\n    chatMsg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    node: Node,\r\n    newId: string\r\n  ): {\r\n    newNode: Node;\r\n    newChatMsg: ChatFlowMsg.ChatFlowMsgInterface;\r\n  } => {\r\n    const newNode = this.commonNewNode(node, newId);\r\n    const sourceHandles = this.newSourceHandles(newNode);\r\n    return {\r\n      newNode,\r\n      newChatMsg: {\r\n        ...chatMsg,\r\n        id: newId,\r\n        ...(chatMsg.condition\r\n          ? {\r\n              condition: {\r\n                ...chatMsg.condition,\r\n                conditions: chatMsg.condition.conditions?.map(\r\n                  (condition, i) => ({\r\n                    ...condition,\r\n                    id: sourceHandles[i].id,\r\n                    trigger_id: undefined,\r\n                  })\r\n                ),\r\n              },\r\n            }\r\n          : {}),\r\n      },\r\n    };\r\n  };\r\n\r\n  public static Message109 = (\r\n    chatMsg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    node: Node,\r\n    newId: string\r\n  ): {\r\n    newNode: Node;\r\n    newChatMsg: ChatFlowMsg.ChatFlowMsgInterface;\r\n  } => {\r\n    const newNode = this.commonNewNode(node, newId);\r\n    const sourceHandles = this.newSourceHandles(newNode);\r\n    return {\r\n      newNode,\r\n      newChatMsg: {\r\n        ...chatMsg,\r\n        id: newId,\r\n        ...(chatMsg.condition\r\n          ? {\r\n              condition: {\r\n                ...chatMsg.condition,\r\n                conditions: chatMsg.condition.conditions.map(\r\n                  (condition, i) => ({\r\n                    ...condition,\r\n                    id: sourceHandles[i].id,\r\n                    trigger_id: undefined,\r\n                  })\r\n                ),\r\n              },\r\n            }\r\n          : {}),\r\n      },\r\n    };\r\n  };\r\n\r\n  public static Message110 = (\r\n    chatMsg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    node: Node,\r\n    newId: string\r\n  ): {\r\n    newNode: Node;\r\n    newChatMsg: ChatFlowMsg.ChatFlowMsgInterface;\r\n  } => {\r\n    const newNode = this.commonNewNode(node, newId);\r\n    const sourceHandles = this.newSourceHandles(newNode);\r\n    return {\r\n      newNode,\r\n      newChatMsg: {\r\n        ...chatMsg,\r\n        id: newId,\r\n        ...(chatMsg.action\r\n          ? {\r\n              action: {\r\n                buttons: chatMsg.action.buttons?.map((button, i) => ({\r\n                  ...button,\r\n                  button_id: sourceHandles[i].id,\r\n                  trigger_id: undefined,\r\n                })),\r\n              },\r\n            }\r\n          : {}),\r\n      },\r\n    };\r\n  };\r\n\r\n  public static Message111 = (\r\n    chatMsg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    node: Node,\r\n    newId: string\r\n  ): {\r\n    newNode: Node;\r\n    newChatMsg: ChatFlowMsg.ChatFlowMsgInterface;\r\n  } => {\r\n    const newNode = this.commonNewNode(node, newId, false);\r\n    return {\r\n      newNode,\r\n      newChatMsg: {\r\n        ...chatMsg,\r\n        id: newId,\r\n        action: {\r\n          ...chatMsg.action,\r\n          sections: [],\r\n        },\r\n      },\r\n    };\r\n  };\r\n\r\n  public static Message112 = (\r\n    chatMsg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    node: Node,\r\n    newId: string\r\n  ): {\r\n    newNode: Node;\r\n    newChatMsg: ChatFlowMsg.ChatFlowMsgInterface;\r\n  } => {\r\n    const newNode = this.commonNewNode(node, newId);\r\n    const sourceHandles = this.newSourceHandles(newNode);\r\n    return {\r\n      newNode,\r\n      newChatMsg: {\r\n        ...chatMsg,\r\n        id: newId,\r\n        ...(chatMsg.condition\r\n          ? {\r\n              condition: {\r\n                ...chatMsg.condition,\r\n                conditions: chatMsg.condition.conditions.map(\r\n                  (condition, i) => ({\r\n                    ...condition,\r\n                    id: sourceHandles[i].id,\r\n                    trigger_id: undefined,\r\n                  })\r\n                ),\r\n              },\r\n            }\r\n          : {}),\r\n      },\r\n    };\r\n  };\r\n}\r\n","import { createContext, FC, memo, useContext, useEffect } from \"react\";\r\nimport { getRandomColor } from \"Utils\";\r\nimport { useFlowData } from \"./FlowDataProvider\";\r\nimport {\r\n  AddOptionProps,\r\n  FlowServicesContextState,\r\n  RemoveOptionProps,\r\n} from \"./types\";\r\nimport { HandlePosition, HandleType } from \"Shared/Enums/ChatFlowNodeEnum\";\r\nimport { ChatFlowNode } from \"Shared/Interfaces/ChatFlowNodeInterface\";\r\nimport { UniqueEntityID } from \"Utils/UniqueEntityID\";\r\nimport { OptionType } from \"Shared/Enums/OptionType\";\r\nimport { NodeCopy } from \"Services/ChatFlowService/NodeCopyService\";\r\nimport { ChatFlowMsg } from \"Shared/Interfaces/ChatFlowMsgInterface\";\r\nimport { Node } from \"react-flow-renderer\";\r\nimport { MessageType } from \"Shared/Enums/ChatFlowMsgEnum\";\r\nimport { useFlowHistory } from \"Contexts/ChatFlowDashboard\";\r\n\r\nexport const FlowServicesContext = createContext<\r\n  FlowServicesContextState | undefined\r\n>(undefined);\r\n\r\nexport const useFlowServices = () => {\r\n  let context = useContext(FlowServicesContext);\r\n\r\n  // If context is undefined, we know we used RadioGroupItem\r\n  // outside of our provider so we can throw a more helpful\r\n  // error!\r\n  if (context === undefined) {\r\n    throw Error(\r\n      \"Item must be used inside of a Object, otherwise it will not function correctly.\"\r\n    );\r\n  }\r\n\r\n  // Because of TypeScript's type narrowing, if we make it past\r\n  // the error the compiler knows that context is always defined\r\n  // at this point, so we don't need to do any conditional\r\n  // checking on its values when we use this hook!\r\n  return context;\r\n};\r\n\r\nconst FlowServicesProvider: FC<any> = ({ children }) => {\r\n  const { history, historyIndex, saveHistory } = useFlowHistory();\r\n  const {\r\n    currentMsgIndex,\r\n    chatMsgs,\r\n    setReloadDrawer,\r\n    setRefreshNode,\r\n    currentNodeIndex,\r\n    currentNode,\r\n    currentChatMsg,\r\n    edges,\r\n    nodes,\r\n    setEdges,\r\n    setNodes,\r\n    setChatMsgs,\r\n    copiedChatMsgs,\r\n    copiedNode,\r\n    setCopiedNode,\r\n    setCopiedChatMsgs,\r\n  } = useFlowData();\r\n\r\n  const addOption = ({ type, index, makeHandle = false }: AddOptionProps) => {\r\n    const currentChatMsg =\r\n      typeof currentMsgIndex === \"number\" && chatMsgs[currentMsgIndex];\r\n    const currentNode =\r\n      typeof currentNodeIndex === \"number\"\r\n        ? (nodes[currentNodeIndex] as ChatFlowNode.ChatFlowNodeInterface)\r\n        : undefined;\r\n\r\n    if (!currentNode || !currentChatMsg) return;\r\n\r\n    const random_color = getRandomColor();\r\n    const option_id = new UniqueEntityID().toString(); //Date.now().toString();\r\n    // const new_id = new UniqueEntityID().toString();\r\n    // const current_id = currentNode.id;\r\n\r\n    if (makeHandle) {\r\n      if (type === OptionType.CONDITION) {\r\n        currentNode.data.handles?.unshift({\r\n          type: HandleType.SOURCE,\r\n          id: option_id,\r\n          position: HandlePosition.BOTTOM,\r\n          style: { border: `1px solid ${random_color}` },\r\n        });\r\n      } else {\r\n        currentNode.data.handles?.push({\r\n          type: HandleType.SOURCE,\r\n          id: option_id,\r\n          position: HandlePosition.BOTTOM,\r\n          style: { border: `1px solid ${random_color}` },\r\n        });\r\n      }\r\n    }\r\n\r\n    switch (type) {\r\n      case OptionType.OPTION:\r\n        currentChatMsg.options?.push({\r\n          label: \"\",\r\n          id: option_id,\r\n          value: \"\",\r\n          style: { border: `2px solid ${random_color}` },\r\n        });\r\n        break;\r\n      case OptionType.BUTTON:\r\n        currentChatMsg.action &&\r\n          currentChatMsg.action.buttons?.push({\r\n            button_id: option_id,\r\n            title: \"\",\r\n            type: \"reply\",\r\n            style: { border: `2px solid ${random_color}` },\r\n          });\r\n        break;\r\n      case OptionType.LIST_SECTION:\r\n        currentChatMsg.action &&\r\n          currentChatMsg.action.sections?.push({\r\n            id: option_id,\r\n            title: \"\",\r\n            rows: [],\r\n          });\r\n        break;\r\n      case OptionType.LIST_SECTION_ITEM:\r\n        currentChatMsg.action &&\r\n          index !== undefined &&\r\n          currentChatMsg.action.sections &&\r\n          currentChatMsg.action.sections[index].rows.push({\r\n            id: option_id,\r\n            title: \"\",\r\n            description: \"\",\r\n            style: { borderLeft: `4px solid ${random_color}` },\r\n          });\r\n        break;\r\n      case OptionType.CONDITION:\r\n        currentChatMsg.condition &&\r\n          currentChatMsg.condition.conditions &&\r\n          currentChatMsg.condition.conditions.unshift({\r\n            id: option_id,\r\n            values: \"\",\r\n            removable: true,\r\n            style: { border: `2px solid ${random_color}` },\r\n          });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    setReloadDrawer((prev) => (prev += 1));\r\n    makeHandle && setRefreshNode((prev) => (prev += 1));\r\n  };\r\n\r\n  const removeOption = ({\r\n    type,\r\n    removeHandle = false,\r\n    id,\r\n    index,\r\n  }: RemoveOptionProps) => {\r\n    const currentChatMsg =\r\n      typeof currentMsgIndex === \"number\" && chatMsgs[currentMsgIndex];\r\n    const currentNode =\r\n      typeof currentNodeIndex === \"number\"\r\n        ? (nodes[currentNodeIndex] as ChatFlowNode.ChatFlowNodeInterface)\r\n        : undefined;\r\n\r\n    if (!currentNode || !currentChatMsg) return;\r\n\r\n    if (removeHandle) {\r\n      const optionIndex = currentNode.data.handles.findIndex(\r\n        (e) => e.id === id\r\n      );\r\n      optionIndex !== -1 && currentNode.data.handles.splice(optionIndex, 1);\r\n    }\r\n\r\n    if (type === OptionType.LIST_SECTION) {\r\n      currentChatMsg.action &&\r\n        index !== undefined &&\r\n        currentChatMsg.action.sections &&\r\n        currentChatMsg.action.sections[index].rows?.forEach((row) => {\r\n          const optionIndex = currentNode.data.handles.findIndex(\r\n            (e) => e.id === row.id\r\n          );\r\n          optionIndex !== -1 && currentNode.data.handles.splice(optionIndex, 1);\r\n        });\r\n    }\r\n\r\n    switch (type) {\r\n      case OptionType.OPTION:\r\n        const optionIndex = currentChatMsg.options?.findIndex(\r\n          (e) => e.id === id\r\n        );\r\n\r\n        typeof optionIndex === \"number\" &&\r\n          currentChatMsg.options?.splice(optionIndex, 1);\r\n        break;\r\n      case OptionType.BUTTON:\r\n        const buttonIndex =\r\n          currentChatMsg.action &&\r\n          currentChatMsg.action.buttons?.findIndex((e) => e.button_id === id);\r\n\r\n        typeof buttonIndex === \"number\" &&\r\n          currentChatMsg.action &&\r\n          currentChatMsg.action.buttons?.splice(buttonIndex, 1);\r\n        break;\r\n      case OptionType.LIST_SECTION:\r\n        const sectionIndex =\r\n          currentChatMsg.action &&\r\n          currentChatMsg.action.sections?.findIndex((e) => e.id === id);\r\n\r\n        typeof sectionIndex === \"number\" &&\r\n          currentChatMsg.action &&\r\n          currentChatMsg.action.sections?.splice(sectionIndex, 1);\r\n        break;\r\n      case OptionType.LIST_SECTION_ITEM:\r\n        const rowIndex =\r\n          currentChatMsg.action &&\r\n          index !== undefined &&\r\n          currentChatMsg.action.sections &&\r\n          currentChatMsg.action.sections[index].rows.findIndex(\r\n            (e) => e.id === id\r\n          );\r\n\r\n        typeof rowIndex === \"number\" &&\r\n          currentChatMsg.action &&\r\n          index !== undefined &&\r\n          currentChatMsg.action.sections &&\r\n          currentChatMsg.action.sections[index].rows?.splice(rowIndex, 1);\r\n        break;\r\n      case OptionType.CONDITION:\r\n        const conditionIndex =\r\n          currentChatMsg.condition &&\r\n          currentChatMsg.condition.conditions?.findIndex((e) => e.id === id);\r\n\r\n        typeof conditionIndex === \"number\" &&\r\n          currentChatMsg.condition &&\r\n          currentChatMsg.condition.conditions?.splice(conditionIndex, 1);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    setReloadDrawer((prev) => (prev += 1));\r\n    removeHandle && setRefreshNode((prev) => (prev += 1));\r\n  };\r\n\r\n  const addCopiedNode = (\r\n    newNode: Node,\r\n    newChatMsg: ChatFlowMsg.ChatFlowMsgInterface\r\n  ) => {\r\n    if (!newNode || !newChatMsg) {\r\n      return;\r\n    }\r\n    const newChatMsgs: ChatFlowMsg.ChatFlowMsgInterface[] =\r\n      chatMsgs.concat(newChatMsg);\r\n    setChatMsgs(newChatMsgs);\r\n    const newNodes: Node<any>[] = nodes.concat({\r\n      ...newNode,\r\n      position: {\r\n        x: newNode.position.x + 50,\r\n        y: newNode.position.y + 50,\r\n      },\r\n    });\r\n    setNodes(newNodes);\r\n    saveHistory({ nodes: newNodes, edges, chatMsgs: newChatMsgs });\r\n  };\r\n\r\n  const getCopiedNode = (\r\n    messageType: MessageType,\r\n    newId: string,\r\n    currentChatMsg: ChatFlowMsg.ChatFlowMsgInterface,\r\n    currentNode: any\r\n  ): { newNode: Node; newChatMsg: ChatFlowMsg.ChatFlowMsgInterface } => {\r\n    switch (messageType) {\r\n      case MessageType.TYPE100:\r\n        return NodeCopy.Message100(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE101:\r\n        return NodeCopy.Message101(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE102:\r\n        return NodeCopy.CommonCopy(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE103:\r\n        return NodeCopy.CommonCopy(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE104:\r\n        return NodeCopy.CommonCopy(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE105:\r\n        return NodeCopy.CommonCopy(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE107:\r\n        return NodeCopy.CommonCopy(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE108:\r\n        return NodeCopy.Message108(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE109:\r\n        return NodeCopy.Message109(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE110:\r\n        return NodeCopy.Message110(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE111:\r\n        return NodeCopy.Message111(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE112:\r\n        return NodeCopy.Message112(currentChatMsg, currentNode, newId);\r\n      case MessageType.TYPE113:\r\n        return NodeCopy.CommonCopy(currentChatMsg, currentNode, newId);\r\n    }\r\n  };\r\n\r\n  const copyNode = () => {\r\n    if (currentChatMsg && currentNode) {\r\n      setCopiedNode(currentNode);\r\n      setCopiedChatMsgs(currentChatMsg);\r\n    }\r\n  };\r\n\r\n  const pasteNode = () => {\r\n    if (copiedChatMsgs && copiedNode) {\r\n      const messageType: MessageType = copiedChatMsgs.type;\r\n      const newId = new UniqueEntityID().toString();\r\n      const { newNode, newChatMsg } = getCopiedNode(\r\n        messageType,\r\n        newId,\r\n        copiedChatMsgs,\r\n        copiedNode\r\n      );\r\n      if (newNode && newChatMsg) {\r\n        addCopiedNode(newNode, newChatMsg);\r\n      }\r\n    }\r\n  };\r\n\r\n  const duplicateNode = () => {\r\n    if (currentChatMsg && currentNode) {\r\n      const messageType: MessageType = currentChatMsg.type;\r\n      const newId = new UniqueEntityID().toString();\r\n      const { newNode, newChatMsg } = getCopiedNode(\r\n        messageType,\r\n        newId,\r\n        currentChatMsg,\r\n        currentNode\r\n      );\r\n      if (newNode && newChatMsg) {\r\n        addCopiedNode(newNode, newChatMsg);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (history[historyIndex]) {\r\n      setNodes(history[historyIndex].nodes);\r\n      setEdges(history[historyIndex].edges);\r\n      setChatMsgs(history[historyIndex].chatMsgs);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [historyIndex]);\r\n\r\n  return (\r\n    <FlowServicesContext.Provider\r\n      value={{\r\n        addOption,\r\n        removeOption,\r\n        copyNode,\r\n        pasteNode,\r\n        duplicateNode,\r\n      }}\r\n    >\r\n      {children}\r\n    </FlowServicesContext.Provider>\r\n  );\r\n};\r\n\r\nexport default memo(FlowServicesProvider);\r\n","export enum MessageType {\r\n  TYPE100 = 100,\r\n  TYPE101 = 101,\r\n  TYPE102 = 102,\r\n  TYPE103 = 103,\r\n  TYPE104 = 104,\r\n  TYPE105 = 105,\r\n  TYPE107 = 107,\r\n  TYPE108 = 108,\r\n  TYPE109 = 109,\r\n  TYPE110 = 110,\r\n  TYPE111 = 111,\r\n  TYPE112 = 112,\r\n  TYPE113 = 113,\r\n}\r\n\r\nexport enum HeaderType {\r\n  TEXT = \"text\",\r\n  VIDEO = \"video\",\r\n  IMAGE = \"image\",\r\n  FILE = \"file\",\r\n}\r\n\r\nexport enum MediaProvider {\r\n  API = \"api\",\r\n  UPLOAD = \"upload\",\r\n}\r\n\r\nexport enum IF_ELSE_TYPES {\r\n  DATA_FIELD = \"lead_data_field\",\r\n  USER_RESPONSE = \"user_response\",\r\n}\r\n\r\nexport enum ConditionType {\r\n  IF_ELSE = \"if_else\",\r\n  TRUE_FALSE = \"true_false\",\r\n  API_VALIDATION = \"api_validation\",\r\n}\r\n\r\nexport enum ValidationType {\r\n  SUCCESS = \"success\",\r\n  FAILURE = \"failure\",\r\n}\r\n\r\nexport enum LocationType {\r\n  MAP = \"map\",\r\n  API = \"api\",\r\n  MANUAL = \"manual\",\r\n}\r\n","export enum HandlePosition {\r\n  TOP = \"top\",\r\n  BOTTOM = \"bottom\",\r\n}\r\n\r\nexport enum HandleType {\r\n  TARGET = \"target\",\r\n  SOURCE = \"source\",\r\n}\r\n\r\nexport enum Position {\r\n  Left = \"left\",\r\n  Top = \"top\",\r\n  Right = \"right\",\r\n  Bottom = \"bottom\",\r\n}\r\n\r\nexport enum NodeDataLabel {\r\n  First = \"FIRST\",\r\n  Last = \"LAST\",\r\n}\r\n","export enum OptionType {\r\n  OPTION = \"option\",\r\n  BUTTON = \"replyButton\",\r\n  CONDITION = \"condition\",\r\n  LIST_SECTION = \"listSection\",\r\n  LIST_SECTION_ITEM = \"listSectionItem\",\r\n}\r\n","import axios, { AxiosError, AxiosInstance, AxiosRequestConfig } from \"axios\";\r\n\r\nconst Axios = axios.create({\r\n  baseURL: `${process.env.REACT_APP_API_URL}/${process.env.REACT_APP_API_VER}`,\r\n  timeout: 15000,\r\n  headers: {\r\n    Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\r\n  },\r\n});\r\n\r\nconst OpenAxios = axios.create({\r\n  baseURL: `/static`,\r\n  timeout: 15000,\r\n});\r\n\r\nconst AddCommonHeaders = (Axios: AxiosInstance) => {\r\n  Axios.defaults.headers.common[\"x-businessId\"] =\r\n    localStorage.getItem(\"businessId\") || \"\";\r\n\r\n  Axios.defaults.headers.common[\"Authorization\"] =\r\n    \"Bearer \" + localStorage.getItem(\"token\");\r\n};\r\n\r\nexport const AuthenticatedReq = async (\r\n  url: string,\r\n  method: string,\r\n  config?: AxiosRequestConfig<any>\r\n) => {\r\n  try {\r\n    AddCommonHeaders(Axios);\r\n    const res = await Axios({ url, method: method, ...config });\r\n    return res.data;\r\n  } catch (err: any) {\r\n    const reqError = err as AxiosError;\r\n    return reqError.response?.data ?? { success: false, message: err.message };\r\n  }\r\n};\r\n\r\nexport const OpenReq = async (\r\n  url: string,\r\n  method: string,\r\n  config?: AxiosRequestConfig<any>\r\n) => {\r\n  try {\r\n    const res = await OpenAxios({ url, method: method, ...config });\r\n    return res.data;\r\n  } catch (err: any) {\r\n    const reqError = err as AxiosError;\r\n    return reqError.response?.data ?? { success: false, message: err.message };\r\n  }\r\n};\r\n\r\nexport default Axios;\r\n","import { v4 as uuid } from \"uuid\";\r\nimport { Identifier } from \"./Identifier\";\r\n\r\nexport class UniqueEntityID extends Identifier<string | number> {\r\n  equals(_id: UniqueEntityID): boolean {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n  constructor(id?: string | number) {\r\n    const split = uuid().split(\"-\"); // [\"109156be\", \"c4fb\", \"41ea\", \"b1b4\", \"efe1671c5836\"]\r\n    const string = split.join(\"\"); // 109156bec4fb41eab1b4efe1671c5836\r\n    super(id ? id : string);\r\n  }\r\n}\r\n","export class Identifier<T> {\r\n  constructor(private value: T) {\r\n    this.value = value;\r\n  }\r\n\r\n  equals(id?: Identifier<T>): boolean {\r\n    if (id === null || id === undefined) {\r\n      return false;\r\n    }\r\n    if (!(id instanceof this.constructor)) {\r\n      return false;\r\n    }\r\n    return id.toValue() === this.value;\r\n  }\r\n\r\n  toString() {\r\n    return String(this.value);\r\n  }\r\n\r\n  /**\r\n   * Return raw value of identifier\r\n   */\r\n\r\n  toValue(): T {\r\n    return this.value;\r\n  }\r\n}\r\n","import moment from \"moment\";\r\nimport ReactHtmlParser from \"html-react-parser\";\r\n\r\nexport function getRandomColor() {\r\n  var rgb = [];\r\n\r\n  for (var i = 0; i < 3; i++) {\r\n    rgb.push(Math.floor(Math.random() * 255));\r\n  }\r\n\r\n  return \"rgb(\" + rgb.join(\",\") + \", 0.5)\";\r\n}\r\n\r\nexport function secondsToHms(d: number) {\r\n  d = Number(d);\r\n  let h = Math.floor(d / 3600);\r\n  let m = Math.floor((d % 3600) / 60);\r\n  let s = Math.floor((d % 3600) % 60);\r\n\r\n  let hDisplay = h > 0 ? h + (h === 1 ? \" hour \" : \" hours \") : \"\";\r\n  let mDisplay = m > 0 ? m + (m === 1 ? \" minute \" : \" minutes \") : \"\";\r\n  let sDisplay = s > 0 ? s + (s === 1 ? \" second\" : \" seconds\") : \"\";\r\n  return hDisplay + mDisplay + sDisplay;\r\n}\r\n\r\nexport const isBackDropOrEscapeKey = (reason: string) =>\r\n  reason === \"backdropClick\" || reason === \"escapeKeyDown\";\r\n\r\nexport const monthFormat = (month: string) => moment(month).format(\"MMM YYYY\");\r\n\r\nexport const reOrder = <T>(\r\n  list: T[],\r\n  startIndex: number,\r\n  endIndex: number\r\n): T[] => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nexport const formatFB_IGAccountsArray = (accounts: string[]): string[] => {\r\n  let withChangedFBAccounts: string[] = [];\r\n\r\n  if (accounts.includes(\"facebook\")) {\r\n    withChangedFBAccounts = accounts.filter((acc) => acc !== \"facebook\");\r\n  }\r\n\r\n  if (accounts.includes(\"instagram\")) {\r\n    withChangedFBAccounts = withChangedFBAccounts.filter(\r\n      (acc) => acc !== \"instagram\"\r\n    );\r\n  }\r\n\r\n  if (accounts.includes(\"facebook\") || accounts.includes(\"instagram\")) {\r\n    withChangedFBAccounts.unshift(\"facebook and instagram\");\r\n  }\r\n\r\n  if (\r\n    accounts.includes(\"facebook and instagram\") &&\r\n    !withChangedFBAccounts.includes(\"facebook and instagram\")\r\n  ) {\r\n    withChangedFBAccounts.push(\"facebook and instagram\");\r\n  }\r\n\r\n  if (\r\n    accounts.includes(\"twitter\") &&\r\n    !withChangedFBAccounts.includes(\"twitter\")\r\n  ) {\r\n    withChangedFBAccounts.push(\"twitter\");\r\n  }\r\n\r\n  if (\r\n    accounts.includes(\"linkedin\") &&\r\n    !withChangedFBAccounts.includes(\"linkedin\")\r\n  ) {\r\n    withChangedFBAccounts.push(\"linkedin\");\r\n  }\r\n\r\n  return withChangedFBAccounts;\r\n};\r\n\r\nexport const userInitials = (name: string) => {\r\n  return {\r\n    children: `${name.split(\" \")[0][0]}${name.split(\" \")[1][0]}`,\r\n  };\r\n};\r\n\r\nexport const formatMessage = (message: string) =>\r\n  ReactHtmlParser(message.replaceAll(/(?:\\r\\n|\\r|\\n)/g, \"<br />\"));\r\n"],"names":["ChatFlowApi","getAllDataFields","AuthenticatedReq","createLeadDataField","data","getChatFlowData","chatflow_id","putChatFlowSettings","putChatFlowData","FlowDataContext","createContext","undefined","useFlowData","context","useContext","Error","children","useParams","useSnacks","setErrorMessage","setSuccessMessage","useFlowHistory","resetHistory","saveHistory","useState","reloadDrawer","setReloadDrawer","refreshNode","setRefreshNode","dataFields","setDataFields","editingData","toggleEditingData","nodes","setNodes","useEdgesState","edges","setEdges","onEdgesChange","chatMsgs","setChatMsgs","copiedNode","setCopiedNode","copiedChatMsgs","setCopiedChatMsgs","flowSettingsLoaded","setFlowSettingLoaded","auto_reminder","response","default_message","languages","status","trigger_time","send_last_message","disable_reply","reset_session_in","flowSettings","setFlowSettings","currentMsgIndex","setCurrentMsgIndex","currentNodeIndex","setCurrentNodeIndex","clearSelectedMsg","saveChatFlowData","msgs","res","success","message","fetchChatFlowData","length","payload","setting","fetchAllDataFields","console","error","useEffect","Provider","value","addChatMsg","msg","newNodes","newChatMsgs","concat","onClickChatMsg","id","current","findIndex","OnChatMsgUpdate","current_msg","index","currentIndex","currentChatMsg","onChatMsgDelete","splice","currentNode","show","appearance","header","onClose","onConfirm","Dialog","maxWidth","open","DialogTitle","DialogContent","DialogContentText","classes","root","DialogActions","className","Button","onClick","FlowDialogContext","React","useFlowDialog","dialogState","setDialogState","openAlertDialog","type","openWarningDialog","CurrentDrawerModes","FlowDrawerContext","useFlowDrawer","isDrawerOpen","setDrawerOpen","MENU","currentDrawerMode","setCurrentDrawerMode","FlowHistoryContext","history","setHistory","historyIndex","setHistoryIndex","canUndo","useMemo","canRedo","state","slice","undo","redo","useHistory","FlowEdge","NodeModelService","position","label","title","error_msg","this","assign_rules","resend_on_error","is_first_msg","is_last_msg","data_field","disable_auto_reminder","jump","response_type","save_input","skip_on_back","msg_settings","common_msg_settings","flow_msg","common_chat_msg","primary_msg","options","flow_node","common_node","handles","HandleType","UniqueEntityID","toString","HandlePosition","location_msg","LocationType","media_provider","MediaProvider","HeaderType","uploaded_files","api_url","filename","pre_msg","post_msg","Handle1Id","Handle2Id","condition","ConditionType","conditions","style","border","removable","if_else_param_type","IF_ELSE_TYPES","evaluate_data_field","action","buttons","button","sections","validation_type","ValidationType","Type100Msg","Type101Msg","Type102Msg","Type103Msg","Type104Msg","Type105Msg","Type107Msg","Type108Msg","Type109Msg","Type110Msg","Type111Msg","Type112Msg","Type113Msg","FlowNodeServicesContext","useFlowNodeServices","spacePressed","useKeyPress","dragOverFlow","useCallback","event","preventDefault","dataTransfer","dropEffect","onConnect","params","SMOOTHSTEP","source","target","chatMsg","find","strokeWidth","option","sourceHandle","trigger_id","newEdges","addEdge","button_id","section","rows","row","addFlowNode","node_data","get_node_data","onNodeClick","_event","node","node_index","f_node","prev","deselectNode","updateNodeLabel","nodeDataLabel","onEdgeUpdate","OldEdge","newConnection","updateEdge","onEdgesDelete","edge","onNodesDelete","deleted_nodes","chatMsgIndex","nodeIndex","onNodeDragEnd","draggedElement","NodeCopy","commonNewNode","newId","copySourceHandles","map","handle","filter","newSourceHandles","CommonCopy","newNode","newChatMsg","Message100","sourceHandles","i","Message101","Message108","Message109","Message110","Message111","Message112","FlowServicesContext","useFlowServices","FlowServicesProvider","addCopiedNode","x","y","getCopiedNode","messageType","MessageType","addOption","makeHandle","random_color","getRandomColor","option_id","OptionType","unshift","push","description","borderLeft","values","removeOption","removeHandle","optionIndex","e","forEach","buttonIndex","sectionIndex","rowIndex","conditionIndex","copyNode","pasteNode","duplicateNode","memo","Position","NodeDataLabel","Axios","axios","baseURL","process","timeout","headers","Authorization","localStorage","getItem","OpenAxios","AddCommonHeaders","defaults","common","url","method","config","reqError","OpenReq","string","uuid","split","join","_id","constructor","toValue","String","rgb","Math","floor","random","secondsToHms","d","Number","h","m","s","isBackDropOrEscapeKey","reason","monthFormat","month","moment","format","reOrder","list","startIndex","endIndex","result","Array","from","removed","formatFB_IGAccountsArray","accounts","withChangedFBAccounts","includes","acc","userInitials","name","formatMessage","ReactHtmlParser","replaceAll"],"sourceRoot":""}