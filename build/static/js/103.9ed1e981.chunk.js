(this.webpackJsonpeasysocial=this.webpackJsonpeasysocial||[]).push([[103],{1643:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return m}));var a=n(7),r=n(3),c=n.n(r),o=n(10),s=function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(o.API,"/get/category"),{method:"GET",headers:{Accept:"application/json","X-Auth-Token":localStorage.getItem("token"),"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(o.API,"/create/category"),{method:"PUT",headers:{Accept:"application/json","X-Auth-Token":localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(o.API,"/create/sub-category"),{method:"PUT",headers:{Accept:"application/json","X-Auth-Token":localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(o.API,"/get/element-category"),{method:"GET",headers:{Accept:"application/json","X-Auth-Token":localStorage.getItem("token"),"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(o.API,"/create/element-category"),{method:"PUT",headers:{Accept:"application/json","X-Auth-Token":localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(o.API,"/create/element-sub-category"),{method:"PUT",headers:{Accept:"application/json","X-Auth-Token":localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},2357:function(e,t,n){e.exports={TemplateSuccess:"TemplateSuccess_TemplateSuccess__305mK",Input_Container:"TemplateSuccess_Input_Container__247S_",Element_Container:"TemplateSuccess_Element_Container__g0Dwu"}},2469:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(5),c=n(16),o=n(9),s=n(3),u=n.n(s),l=n(0),i=n.n(l),g=n(1643),m=n(222),p=n(2357),h=n.n(p),b=n(38),d=n(401),j=n(2);t.default=function(e){var t=i.a.useState(null),n=Object(o.a)(t,2),s=n[0],l=n[1],p=i.a.useState(null),f=Object(o.a)(p,2),y=f[0],v=f[1];return i.a.useEffect((function(){Object(m.d)(e.match.params.templateId).then((function(e){return l(e)})),Object(g.f)().then((function(e){e.message&&v(e.categoryData)})).catch((function(e){return console.log(e)}))}),[]),Object(j.jsxs)("section",{className:h.a.TemplateSuccess,children:[Object(j.jsxs)("main",{children:[s&&s.map((function(e,t){return Object(j.jsx)("div",{className:h.a.Element_Container,children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(j.jsx)("div",{className:h.a.Img_Container,children:Object(j.jsx)("img",{style:{margin:"auto",display:"block"},width:"40%",src:e.src.svg,alt:"img"})}),Object(j.jsxs)("div",{className:h.a.Input_Container,children:[Object(j.jsxs)("div",{className:h.a.Element_Name,children:[Object(j.jsx)("label",{htmlFor:"element-name",children:"Element Name"}),Object(j.jsx)("input",{onChange:function(e){var n=Object(c.a)(s),a=Object(r.a)({},n[t]);a.element_name=e.target.value,n[t]=a,l(n)},defaultValue:e.element_name,type:"text",name:"element-name",id:"element-name",placeholder:"Element Name"})]}),Object(j.jsxs)("div",{className:h.a.Element_Name,children:[Object(j.jsxs)("label",{htmlFor:"element-category",children:["Element Category:"," "]}),Object(j.jsxs)("select",{onChange:function(e){var n=Object(c.a)(s),a=Object(r.a)({},n[t]);"other"!==e.target.value?y.forEach((function(r){r.id===e.target.value&&(null!==r.categoryName.sub_category?(a.categoryName=r.categoryName.name,a.category=e.target.value,a.subCategory=r.categoryName.sub_category,a.subCategoryName=null,a.subcategoryName=null,n[t]=a,l(n)):(a.categoryName=null,a.subCategory=null,a.categoryName=r.categoryName.name,a.category=e.target.value,n[t]=a,l(n)))})):(a.subCategoryName=null,a.categoryName=null,a.category=e.target.value,a.subcategoryName="other",a.subCategory=null,n[t]=a,l(n))},type:"text",name:"element-category",id:"element-category",children:[Object(j.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select Category"}),y&&y.map((function(e){return Object(j.jsx)("option",{value:e.id,children:e.categoryName.name},e.id)})),Object(j.jsx)("option",{value:"other",children:"other"})]})]}),s&&s[t].category&&"other"===s[t].category&&Object(j.jsxs)("div",{className:h.a.category_Name,children:[Object(j.jsx)("label",{htmlFor:"element-category-name",children:"Element Category Name"}),Object(j.jsx)("input",{onChange:function(e){var n=Object(c.a)(s),a=Object(r.a)({},n[t]);a.categoryName=e.target.value,n[t]=a,l(n)},defaultValue:"",type:"text",name:"element-category-name",id:"element-category-name",placeholder:"Category Name"})]}),s&&s[t].category&&Object(j.jsxs)("div",{className:h.a.Element_Name,children:[Object(j.jsxs)("label",{htmlFor:"element-subcategory",children:["Element sub-Category:"," "]}),Object(j.jsxs)("select",{type:"text",name:"element-subcategory",id:"element-subcategory",onChange:function(e){var n=Object(c.a)(s),a=Object(r.a)({},n[t]);"other"!==e.target.value?a.subCategoryName=e.target.value:a.subcategoryName=e.target.value,n[t]=a,l(n)},children:[Object(j.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select Sub-Category"}),s&&s[t].subCategory&&s[t].subCategory.length>0&&s[t].subCategory.map((function(e){return Object(j.jsx)("option",{children:e.name},e.name)})),Object(j.jsx)("option",{value:"other",children:"other"})]})]}),s&&s[t].subcategoryName&&"other"===s[t].subcategoryName&&Object(j.jsxs)("div",{className:h.a.subcategory_Name,children:[Object(j.jsx)("label",{htmlFor:"element-sub-category-name",children:"Element Sub Category Name"}),Object(j.jsx)("input",{onChange:function(e){var n=Object(c.a)(s),a=Object(r.a)({},n[t]);a.subCategoryName=e.target.value,n[t]=a,l(n)},defaultValue:"",type:"text",name:"element-sub-category-name",id:"element-sub-category-name",placeholder:"Sub-category Name"})]}),s&&s[t].category&&Object(j.jsxs)("div",{className:h.a.Tags,children:[Object(j.jsx)("label",{htmlFor:"tag",children:"Add Tags: "}),Object(j.jsx)("input",{onChange:function(e){var n=Object(c.a)(s),a=Object(r.a)({},n[t]);a.tags=e.target.value,n[t]=a,l(n)},defaultValue:"",type:"text",name:"tag",id:"tag",placeholder:"Add Tags"}),Object(j.jsx)("br",{}),s&&s[t].tags&&s[t].tags.length>0&&"object"!=typeof s[t].tags&&Object(j.jsx)("button",{onClick:function(){var e=Object(c.a)(s),n=Object(r.a)({},e[t]);n.tags=n.tags.split(","),e[t]=n,l(e)},children:"Add Tags"})]}),s&&s[t].category&&"other"===s[t].category&&null!==s[t].categoryName&&Object(j.jsx)("div",{className:h.a.Btn_Container,children:Object(j.jsx)("button",{onClick:function(e){s[t].categoryName.length>0?Object(g.b)({category:s[t].categoryName,sub_category:s[t].subCategoryName||null}).then((function(e){Object(g.f)().then((function(e){e.message&&v(e.categoryData)})).catch((function(e){return console.log(e)}))})).catch((function(e){alert("something went wrong, please try again")})):s[t].categoryName.length<1&&s[t].subcategoryName.length>0&&Object(g.c)({id:s[t].category,subcategory:s[t].subcategoryName}).then((function(e){Object(g.f)().then((function(e){e.message&&v(e.categoryData)})).catch((function(e){return console.log(e)}))})).catch((function(e){alert("something went wrong, please try again")}))},children:"Update Category"})})]})]})},t)})),Object(j.jsx)("button",{onClick:Object(a.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,s.filter((function(e){return null!==e.categoryName&&null!==e.element_name}));case 3:if(!((n=e.sent).length>0)){e.next=10;break}return r=n.length,e.next=8,n.forEach(function(){var e=Object(a.a)(u.a.mark((function e(n,c){var o,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.subcategoryName=void 0,n.subCategory=void 0,o="".concat(Object(d.a)(),"_").concat(n.element_name),(s=new Image).src=n.src.svg,s.crossOrigin="anonymous",l=document.getElementById("canvas"),s.onload=Object(a.a)(u.a.mark((function e(){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=l.appendChild(l.ownerDocument.importNode(document.createElement("canvas"),!0))).width=n.width,c.height=n.height,c.getContext("2d").drawImage(s,0,0),c.toBlob(function(){var e=Object(a.a)(u.a.mark((function e(s){var l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"element-png",l=b.b.storage().ref("".concat("element-png","/").concat(o,".png")),e.next=4,l.put(s).then(function(){var e=Object(a.a)(u.a.mark((function e(o){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getDownloadURL().then(function(){var e=Object(a.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.src.png=a,t.push(n),c.remove(),t.length===r&&Object(m.g)(t).then((function(e){return window.location.href="/template/upload/finish"})).catch((function(e){return alert("something went wrong")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:"image/png"},1);case 6:case"end":return e.stop()}}),e)})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 8:e.next=11;break;case 10:alert("you haven't saved any elements yet!");case 11:case"end":return e.stop()}}),e)}))),children:"save all elements"})]}),Object(j.jsx)("div",{id:"canvas"})]})}}}]);
//# sourceMappingURL=103.9ed1e981.chunk.js.map