{"version":3,"sources":["Pages/PaymentHistory/PaymentHistory.module.css","Pages/PaymentHistory/PaymentHistory.js"],"names":["module","exports","connect","state","payments","user","dispatch","fetchPaymentsByUser","history","props","fetchPaymentsByUserRef","useRef","current","length","useEffect","expiryDate","payment","month","Date","expiry","getMonth","day","getDate","year","getFullYear","className","classes","PaymentHistory","title","PaymentHistory_Main","map","Detail","Payment_Grid_Detail","name","Invoice_Btn","onClick","window","open","API","orderId","businessId","Payment_Grid_Amount","amount","toString","replace"],"mappings":"gGACAA,EAAOC,QAAU,CAAC,eAAiB,uCAAuC,oBAAsB,4CAA4C,OAAS,+BAA+B,oBAAsB,4CAA4C,oBAAsB,4CAA4C,YAAc,sC,kCCDtU,sFAiFeC,uBAZS,SAACC,GACvB,MAAO,CACLC,SAAUD,EAAME,KAAKD,aAIE,SAACE,GAC1B,MAAO,CACLC,oBAAqB,SAACC,GAAD,OAAaF,EAASC,YAAoBC,QAIpDN,EAzEQ,SAACO,GACtB,IAAMC,EAAyBC,kBAAO,eAEtCD,EAAuBE,QAAU,WAC/B,OACEH,EAAML,SAASS,OAAS,GAAKJ,EAAMF,oBAAoBE,EAAMD,UAIjEM,qBAAU,WACRJ,EAAuBE,YACtB,IAEH,IAAMG,EAAa,SAACC,GAClB,IAAMC,EAAQ,IAAIC,KAAKF,EAAQG,QAAQC,WAAa,EAC9CC,EAAM,IAAIH,KAAKF,EAAQG,QAAQG,UAC/BC,EAAO,IAAIL,KAAKF,EAAQG,QAAQK,cAEtC,MAAM,GAAN,OAAUH,EAAV,YAAiBJ,EAAjB,YAA0BM,IAG5B,OACE,0BAASE,UAAWC,IAAQC,eAA5B,UACE,cAAC,IAAD,CAAQC,MAAM,oBACd,sBAAMH,UAAWC,IAAQG,oBAAzB,SACGpB,EAAML,SAASS,OAAS,GACvBJ,EAAML,SAAS0B,KAAI,SAACd,GAAD,OACjB,mCACE,sBAAKS,UAAWC,IAAQK,OAAxB,UACE,sBAAKN,UAAWC,IAAQM,oBAAxB,UACE,6BAAKhB,EAAQiB,OACb,4BAAIlB,EAAWC,KACf,cAAC,IAAD,CACES,UAAWC,IAAQQ,YACnBC,QAAS,WACPC,OAAOC,KAAP,UACKC,MADL,mCACmCtB,EAAQuB,QAD3C,YACsDvB,EAAQwB,YAC5D,WALN,iCAYF,qBAAKf,UAAWC,IAAQe,oBAAxB,SACE,oCACK,IACFzB,EAAQ0B,OACNC,WACAC,QAAQ,kCAAmC,KAJhD","file":"static/js/117.4a8b9e45.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"PaymentHistory\":\"PaymentHistory_PaymentHistory__36p6v\",\"PaymentHistory_Main\":\"PaymentHistory_PaymentHistory_Main__jF6L0\",\"Detail\":\"PaymentHistory_Detail__3mbzh\",\"Payment_Grid_Detail\":\"PaymentHistory_Payment_Grid_Detail__1YqZ0\",\"Payment_Grid_Amount\":\"PaymentHistory_Payment_Grid_Amount__3FqD2\",\"Invoice_Btn\":\"PaymentHistory_Invoice_Btn__k8RwC\"};","import classes from \"./PaymentHistory.module.css\";\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchPaymentsByUser } from \"../../Store/actions\";\r\nimport Modal2 from \"../../Components/UI/Modal2/Modal2\";\r\nimport CustomButton from \"../../Components/UI/Button/CustomButton\";\r\nimport { API } from \"../../Backend\";\r\n\r\nconst PaymentHistory = (props) => {\r\n  const fetchPaymentsByUserRef = useRef(() => {});\r\n\r\n  fetchPaymentsByUserRef.current = () => {\r\n    return (\r\n      props.payments.length < 1 && props.fetchPaymentsByUser(props.history)\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPaymentsByUserRef.current();\r\n  }, []);\r\n\r\n  const expiryDate = (payment) => {\r\n    const month = new Date(payment.expiry).getMonth() + 1;\r\n    const day = new Date(payment.expiry).getDate();\r\n    const year = new Date(payment.expiry).getFullYear();\r\n\r\n    return `${day}-${month}-${year}`;\r\n  };\r\n\r\n  return (\r\n    <section className={classes.PaymentHistory}>\r\n      <Modal2 title=\"Payment History\" />\r\n      <main className={classes.PaymentHistory_Main}>\r\n        {props.payments.length > 0 &&\r\n          props.payments.map((payment) => (\r\n            <>\r\n              <div className={classes.Detail}>\r\n                <div className={classes.Payment_Grid_Detail}>\r\n                  <h1>{payment.name}</h1>\r\n                  <p>{expiryDate(payment)}</p>\r\n                  <CustomButton\r\n                    className={classes.Invoice_Btn}\r\n                    onClick={() => {\r\n                      window.open(\r\n                        `${API}/business/order/invoice/${payment.orderId}/${payment.businessId}`,\r\n                        \"_blank\"\r\n                      );\r\n                    }}\r\n                  >\r\n                    Download Invoice\r\n                  </CustomButton>\r\n                </div>\r\n                <div className={classes.Payment_Grid_Amount}>\r\n                  <h1>\r\n                    Rs{\" \"}\r\n                    {payment.amount\r\n                      .toString()\r\n                      .replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, \",\")}\r\n                    .00\r\n                  </h1>\r\n                </div>\r\n              </div>\r\n            </>\r\n          ))}\r\n      </main>\r\n    </section>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    payments: state.user.payments,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchPaymentsByUser: (history) => dispatch(fetchPaymentsByUser(history)),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PaymentHistory);\r\n"],"sourceRoot":""}