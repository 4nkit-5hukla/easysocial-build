(this.webpackJsonpeasysocial=this.webpackJsonpeasysocial||[]).push([[101],{2360:function(e,r,t){e.exports={MyProfile:"MyProfile_MyProfile__2rNog",MyProfile_Form:"MyProfile_MyProfile_Form__3n5Yk",Change_Password_Btn:"MyProfile_Change_Password_Btn__l2wCJ"}},2361:function(e,r,t){e.exports={Container:"ResetPasswordPage_Container__1oFa2",Form:"ResetPasswordPage_Form__3Rchr",HelperText:"ResetPasswordPage_HelperText__3BmFC",ErrorText:"ResetPasswordPage_ErrorText__1fNUg"}},2567:function(e,r,t){"use strict";t.r(r);var n=t(28),a=t(5),s=t(9),c=t(2360),o=t.n(c),i=t(0),u=t(149),l=t(34),d=t(106),b=t(146),p=t(84),f=t(43),m=t(18),j=t(86),h=t(115),O=t(181),v=t(7),w=t(3),g=t.n(w),x=t(142),y=t(2361),P=t.n(y),_=t(54),T=t(204),C=t(15),N=t(38),k=t(49),S=t(1347),L=t.n(S),E=t(27),M=t(2),q=function(e){var r=e.open,t=e.closePage,c=e.mobileNumber,o=Object(i.useState)({otp:{value:"",required:!0,type:"number",placeholder:"OTP",id:1,name:"otp"},newPassword:{value:"",required:!0,type:"password",placeholder:"New Password",id:2,readOnly:!0,name:"new-password"},confirmPassword:{value:"",name:"confirm-password",required:!0,type:"password",placeholder:"Confirm Password",id:3}}),p=Object(s.a)(o,2),f=p[0],m=p[1],j=Object(i.useState)(""),h=Object(s.a)(j,2),O=h[0],w=h[1],y=Object(_.c)(),S=y.setSuccessMessage,q=y.setErrorMessage,R=y.disabled,F=y.setDisabled,H=y.setInfoMessage,I=Object(_.c)(),U=Object(i.useState)({counter:0,disabled:!1,startTimer:!1}),D=Object(s.a)(U,2),B=D[0],J=D[1],V=function(){W(c),J((function(e){return Object(a.a)(Object(a.a)({},e),{},{disabled:!0,counter:30,startTimer:!0})}))},W=function(){var e=Object(v.a)(g.a.mark((function e(r){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r="+91".concat(r)).length<=10)){e.next=3;break}return e.abrupt("return");case 3:return F(),e.prev=4,e.next=7,N.b.auth().signInWithPhoneNumber(r,window.recaptchaVerifier);case 7:t=e.sent,window.confirmationResult=t,S("OTP has been sent to your mobile number!"),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",q(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(r){return e.apply(this,arguments)}}(),z=function(){var e=Object(v.a)(g.a.mark((function e(r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(f.otp.value.length<6)){e.next=2;break}return e.abrupt("return",q("Please Enter OTP"));case 2:return F(),e.next=5,N.b.auth().setPersistence(N.b.auth.Auth.Persistence.NONE);case 5:window.confirmationResult.confirm(f.otp.value).then((function(e){var t=e.user._lat,n=N.b.auth().currentUser.uid;r&&r({userId:n,token:t,password:Object(E.b)(f.confirmPassword.value).enc})})).catch((function(e){return q(e.message)}));case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){r&&(window.recaptchaVerifier=new N.b.auth.RecaptchaVerifier("captcha-container",{size:"invisible",callback:function(e){W(c,I)},"expired-callback":function(){alert("try again!")}}),V())}),[r]),Object(T.a)((function(){J((function(e){return Object(a.a)(Object(a.a)({},e),{},{disabled:e.counter>0,counter:e.counter-1,startTimer:e.counter>0})}))}),B.counter>=0&&B.startTimer?1e3:null);var Y=function(e,r){var t;t=Object(l.l)(f[r],{value:e.target.value});var a,s=Object(l.l)(f,Object(n.a)({},r,t));if(m(s),"confirmPassword"===r)return f.newPassword.value!==e.target.value?w("Confirm Password must match with New Password"):(w(""),a=e.target.value,L.a.isStrongPassword(a,{minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1})?w(""):a.length<8?w("Password can't be less than 8 characters"):w("Password must contain a combination of Upper and Lowercase Character, Number and Special Character"))};return Object(M.jsxs)(x.a.div,{initial:{opacity:0,x:"100%",y:"0%",pointerEvents:"none"},transition:{duration:.5,ease:[.43,.13,.23,.96]},variants:{open:{opacity:1,x:"0%",y:"0%",pointerEvents:"all"},closed:{opacity:0,x:"100%",y:"0%",pointerEvents:"none"}},animate:r?"open":"closed",className:P.a.Container,children:[Object(M.jsx)(u.a,{close:t,title:"Change Password"}),Object(M.jsxs)("form",{className:P.a.Form,onSubmit:function(e){e.preventDefault(),z(function(){var e=Object(v.a)(g.a.mark((function e(r){var t,n,a,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.userId,n=r.token,a=r.password,e.prev=1,e.next=4,Object(k.resetPassword)({userId:t,token:n,password:a});case 4:if(!(s=e.sent).error){e.next=7;break}return e.abrupt("return",q(s.error));case 7:return localStorage.setItem("token",s.token),S("You have Successfully changed your password"),e.next=11,Object(l.j)(555);case 11:return H("Wait, We are redirecting you to login page!"),N.b.auth().signOut(),e.abrupt("return",window.open("/signout","_self"));case 16:return e.prev=16,e.t0=e.catch(1),e.abrupt("return",q(e.t0.message));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(r){return e.apply(this,arguments)}}())},children:[Object(M.jsx)(d.a,{type:f.otp.type,name:f.otp.name,value:f.otp.value,inputChangedHandler:Y,required:f.otp.required,id:"otp",placeholder:f.otp.placeholder,maxLength:6,minLength:6,readOnly:!1}),Object(M.jsxs)("div",{style:{marginTop:"-10px"},className:"d-flex justify-content-between ",children:[Object(M.jsxs)("p",{className:P.a.HelperText,children:["sent on: ",c]}),Object(M.jsxs)("p",{style:{display:"flex",justifyContent:"flex-end",width:"max-content",fontSize:"15px",opacity:B.disabled?.3:.6,pointerEvents:B.disabled?"none":"all",cursor:B.disabled?"not-allowed":"pointer"},onClick:function(){V()},children:["Resend OTP",B.counter<30&&B.counter>0&&" in ".concat(B.counter,"s")]})]}),Object(M.jsx)(d.a,{type:f.newPassword.type,name:"new-password",value:f.newPassword.value,inputChangedHandler:Y,required:!0,id:"newPassword",placeholder:f.newPassword.placeholder}),Object(M.jsx)(d.a,{type:f.confirmPassword.type,name:f.confirmPassword.name,value:f.confirmPassword.value,inputChangedHandler:Y,required:!0,id:"confirmPassword",placeholder:f.confirmPassword.placeholder,readOnly:!1}),O&&O.length>0&&Object(M.jsx)("div",{style:{marginTop:"-12px"},children:Object(M.jsx)("p",{className:Object(C.default)(P.a.HelperText,P.a.ErrorText),children:O})}),Object(M.jsx)(b.a,{disabled:R||O,type:"submit",svgStyle:{marginLeft:"10px"},children:"Save New Password"})]}),Object(M.jsx)("div",{id:"captcha-container"})]})};r.default=Object(f.b)((function(e){return{user:e.user.user}}),(function(e){return{startLoading:function(){return e(m.T())},cancelLoading:function(){return e(m.e())},error:function(r){return e(m.n(r))},fetchUserDetail:function(){return e(m.s())}}}))((function(e){var r=Object(i.useState)(!1),t=Object(s.a)(r,2),c=t[0],f=t[1],m=Object(i.useState)({name:{value:"",elementType:"text",required:!0,type:"text",placeholder:"Name",id:1},mobile:{value:"",elementType:"number",required:!0,type:"number",placeholder:"Mobile",id:2,maxLength:10,minLength:10,readOnly:!0},email:{value:"",elementType:"email",required:!0,type:"Email",placeholder:"Email id",id:3}}),v=Object(s.a)(m,2),w=v[0],g=v[1],x=Object(i.useRef)((function(){}));x.current=function(){if(!e.user)return e.startLoading(),Object(p.c)().then((function(r){if(r.error)e.error(r.error),T(Object(a.a)(Object(a.a)({},_),{},{success:null,error:r.error,disabled:!1}));else{var t=function(e){void 0!==r.data[e]&&g((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(n.a)({},e,Object(a.a)(Object(a.a)({},t[e]),{},{value:r.data[e]})))}))};for(var s in w)t(s);e.cancelLoading()}}));var r=function(r){void 0!==e.user[r]&&g((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(n.a)({},r,Object(a.a)(Object(a.a)({},t[r]),{},{value:e.user[r]})))}))};for(var t in e.user)r(t)};var y=Object(i.useState)({error:null,success:null,disabled:!1}),P=Object(s.a)(y,2),_=P[0],T=P[1];Object(i.useEffect)((function(){x.current()}),[]);var C=function(e,r){var t;t=Object(l.l)(w[r],{value:e.target.value});var a=Object(l.l)(w,Object(n.a)({},r,t));g(a)},N=[];for(var k in w)N.push({id:k,config:w[k]});return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("section",{className:o.a.MyProfile,children:[Object(M.jsx)(u.a,{title:"My Profile"}),Object(M.jsx)(j.ToastProvider,{children:Object(M.jsx)(h.a,{show:null!==_.error||null!==_.success,appearance:_.error?"error":_.success?"success":"info",message:_.error||_.success})}),Object(M.jsx)("div",{className:o.a.MyProfile_Form,children:Object(M.jsxs)("form",{onSubmit:function(r){T(Object(a.a)(Object(a.a)({},_),{},{error:null,success:null,disabled:!0})),r.preventDefault(),Object(p.e)({number:"+91".concat(w.mobile.value),email:w.email.value,name:w.name.value}).then((function(r){r.error?T(Object(a.a)(Object(a.a)({},_),{},{success:null,error:r.error,disabled:!1})):(T(Object(a.a)(Object(a.a)({},_),{},{success:r.message,error:null,disabled:!1})),e.fetchUserDetail())})).catch((function(e){T(Object(a.a)(Object(a.a)({},_),{},{success:null,error:e,disabled:!1}))}))},children:[N.map((function(e){return Object(M.jsx)(d.a,{type:e.config.elementType,name:e.config.type,value:e.config.value,inputChangedHandler:C,required:e.config.required,id:e.id,placeholder:e.config.placeholder,maxLength:e.config.maxLength,minLength:e.config.minLength,readOnly:e.config.readOnly},e.id)})),Object(M.jsx)(b.a,{disabled:_.disabled,svgStyle:{marginLeft:"10px"},children:"Save Changes"})]})}),Object(M.jsx)(O.a,{classes:{root:o.a.Change_Password_Btn},onClick:function(){return f(!0)},children:"Change your password >"})]}),Object(M.jsx)(q,{mobileNumber:w.mobile.value,open:c,closePage:function(){return f(!1)}})]})}))}}]);
//# sourceMappingURL=101.8b29215a.chunk.js.map