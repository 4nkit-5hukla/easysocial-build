(this.webpackJsonpeasysocial=this.webpackJsonpeasysocial||[]).push([[67],{1634:function(e,t,n){"use strict";var a=n(9),i=n(0),r=n.n(i),c=n(772),l=n(2);t.a=function(e){var t=Object(i.useState)(null),n=Object(a.a)(t,2),o=n[0],s=n[1];return Object(i.useEffect)((function(){e.img&&!o&&function(){var t=new window.Image;t.src=e.img,t.crossOrigin="anonymous",t.addEventListener("load",(function(){s(t)}))}()}),[e.img,o]),Object(l.jsx)(r.a.Fragment,{children:Object(l.jsx)(c.Image,{id:e.id,name:e.name,image:o,x:e.x,y:e.y,width:e.width,height:e.height,onDragMove:function(t){return e.updateProperty(t)},onTransformEnd:function(t){return e.updateProperty(t)},draggable:!0,scaleX:e.scaleX,scaleY:e.scaleY})})}},1635:function(e,t,n){"use strict";n(0);var a=n(772),i=n(2);t.a=function(e){return Object(i.jsx)(a.Text,{width:e.width,height:e.height,lineHeight:e.lineHeight,scaleX:parseInt(e.scaleX),id:e.id,x:parseInt(e.x),y:parseInt(e.y),text:e.text,textDecoration:e.underline?"underline":"",fontFamily:e.font,fontSize:parseInt(e.fontSize),fill:e.color,fontStyle:e.bold&&e.italic?"bold italic":e.italic?"italic":e.bold?"bold":"normal",name:e.name,align:e.textAlignment,draggable:!0,onTransform:function(t){var n=t.target,a=n.scaleX(),i=n.scaleY(),r=n.width(),c=(i-1)/1*100/2;return n.setAttrs({width:r*a,scaleX:1}),function(){var t=null;return["top-right","top-left","bottom-right","bottom-left"].map((function(n){if(e.transformer.getActiveAnchor()===n)return t=n})),t}()&&n.setAttrs({fontSize:e.fontSize+c}),e.getFontSize(n.fontSize())},onTransformEnd:function(t){return e.updateProperty(t)},onDragMove:function(t){return e.updateProperty(t)},rotation:parseInt(e.rotation),letterSpacing:Number(e.letterSpacing)})}},1636:function(e,t,n){e.exports={Header:"Header_Header__3uB-d",Header_Text:"Header_Header_Text__2N2EW",Title:"Header_Title__rICwm",Sub:"Header_Sub__3t57o",Next:"Header_Next__2dwcE",LeftArrow:"Header_LeftArrow__2zENS",IndexBtn:"Header_IndexBtn__2YUep",IndexDown:"Header_IndexDown__2vbL0"}},1637:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(25),i=n(21),r=n(44),c=n(45),l=n(0),o=n.n(l),s=n(772),d=n(2),u=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.checkNode()}},{key:"componentDidUpdate",value:function(){this.checkNode()}},{key:"checkNode",value:function(){var e=this.transformer.getStage(),t=this.props.selectedShapeName,n=e.findOne((function(e){return e.id()===t}));n!==this.transformer.node()&&(n?(this.transformer.nodes([n]),"Text"===n.className?(this.transformer.enabledAnchors(["top-left","top-right","middle-right","middle-left","bottom-left","bottom-right"]),this.props.anchorName(this.transformer)):"Image"===n.className?this.transformer.enabledAnchors(["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"]):this.transformer.enabledAnchors(["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"])):this.transformer.detach(),this.transformer.getLayer().batchDraw())}},{key:"render",value:function(){var e=this;return Object(d.jsx)(s.Transformer,{ref:function(t){e.transformer=t}})}}]),n}(o.a.Component)},1638:function(e,t,n){"use strict";n(0);var a=n(1639),i=n.n(a),r=n(2);t.a=function(e){return Object(r.jsxs)("div",{className:i.a.Button_Container,children:[e.undo&&Object(r.jsx)("div",{className:i.a.Undo_Button,onClick:function(){return e.handleCropStart()},children:Object(r.jsx)("button",{children:Object(r.jsxs)("svg",{width:"437",height:"437",viewBox:"0 0 437 437",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(r.jsx)("g",{"clip-path":"url(#clip0)",children:Object(r.jsx)("path",{d:"M224 143.573C167.573 143.573 116.16 164.586 76.8 199.04L0 122.24V314.24H192L114.88 237.12C144.427 212.267 182.293 196.907 224 196.907C299.627 196.907 363.627 246.08 386.027 314.24L436.48 297.6C407.147 208.213 323.2 143.573 224 143.573Z",fill:"black"})}),Object(r.jsx)("defs",{children:Object(r.jsx)("clipPath",{id:"clip0",children:Object(r.jsx)("rect",{width:"436.48",height:"436.48",fill:"white"})})})]})})}),e.redo&&Object(r.jsx)("div",{className:i.a.Redo_Button,children:Object(r.jsx)("button",{children:Object(r.jsxs)("svg",{width:"437",height:"437",viewBox:"0 0 437 437",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(r.jsx)("g",{"clip-path":"url(#clip0)",children:Object(r.jsx)("path",{d:"M359.573 199.04C320.32 164.587 268.906 143.573 212.48 143.573C113.28 143.573 29.333 208.213 0 297.6L50.453 314.24C72.853 246.08 136.853 196.907 212.48 196.907C254.187 196.907 292.053 212.267 321.6 237.12L244.48 314.24H436.48V122.24L359.573 199.04Z",fill:"black"})}),Object(r.jsx)("defs",{children:Object(r.jsx)("clipPath",{id:"clip0",children:Object(r.jsx)("rect",{width:"436.48",height:"436.48",fill:"white"})})})]})})}),e.copy&&Object(r.jsx)("div",{className:i.a.Copy_Button,onClick:function(){return e.handleCopyElement()},children:Object(r.jsx)("button",{children:Object(r.jsx)("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(r.jsx)("path",{d:"M311 512H120C75.8867 512 40 476.113 40 432V161C40 116.887 75.8867 81 120 81H311C355.113 81 391 116.887 391 161V432C391 476.113 355.113 512 311 512ZM120 121C97.9453 121 80 138.945 80 161V432C80 454.055 97.9453 472 120 472H311C333.055 472 351 454.055 351 432V161C351 138.945 333.055 121 311 121H120ZM471 382V80C471 35.8867 435.113 0 391 0H169C157.953 0 149 8.95312 149 20C149 31.0469 157.953 40 169 40H391C413.055 40 431 57.9453 431 80V382C431 393.047 439.953 402 451 402C462.047 402 471 393.047 471 382Z",fill:"black"})})})}),Object(r.jsx)("div",{className:i.a.Delete_Button,onClick:function(){return e.handleDeleteElement()},children:Object(r.jsx)("button",{children:Object(r.jsxs)("svg",{width:"300",height:"384",viewBox:"0 0 300 384",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(r.jsx)("path",{d:"M22 341.333C22 364.907 41.093 384 64.667 384H235.334C258.907 384 278 364.907 278 341.333V85.333H22V341.333Z",fill:"black"}),Object(r.jsx)("path",{d:"M224.667 21.333L203.333 0H96.667L75.333 21.333H0.666992V64H299.333V21.333H224.667Z",fill:"black"})]})})})]})}},1639:function(e,t,n){e.exports={Button_Container:"Button_Button_Container__2l7go"}},1640:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(772),c=n(2);t.a=function(e){return Object(c.jsx)(i.a.Fragment,{children:Object(c.jsx)(r.Rect,{id:e.id,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,x:Number(e.x)?Number(e.x):0,y:Number(e.y)?Number(e.y):0,width:Number(e.width),height:Number(e.height),scaleX:Number(e.scaleX),scaleY:Number(e.scaleY),rotation:Number(e.rotation),onDragMove:function(t){return e.updateProperty(t)},onTransformEnd:function(t){return e.updateProperty(t)},draggable:!0})})}},1641:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(772),c=n(2);t.a=function(e){return Object(c.jsx)(i.a.Fragment,{children:Object(c.jsx)(r.Path,{id:e.id,fill:e.fill,x:Number(e.x),y:Number(e.y),scaleX:Number(e.scaleX),scaleY:Number(e.scaleY),rotation:Number(e.rotation),draggable:!0,data:e.d,name:e.name,onDragMove:function(t){e.updateProperty(t)},onTransformEnd:function(t){return e.updateProperty(t)}})})}},1642:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(772),c=n(2);t.a=function(e){return Object(c.jsx)(i.a.Fragment,{children:Object(c.jsx)(r.Circle,{id:e.id,fill:e.fill?e.fill:null,x:Number(e.x),y:Number(e.y),scaleX:Number(e.scaleX),scaleY:Number(e.scaleY),rotation:Number(e.rotation),draggable:!0,strokeWidth:e.strokeWidth,stroke:e.stroke||"black",radius:Number(e.radius),name:e.name,onDragMove:function(t){return e.updateProperty(t)},onTransformEnd:function(t){return e.updateProperty(t)}})})}},1657:function(e,t,n){"use strict";n(0);var a=n(1636),i=n.n(a),r=n.p+"static/media/up-arrow.212a7457.svg",c=n(2);t.a=function(e){return Object(c.jsxs)("header",{className:i.a.Header,onClick:e.deselect,children:[Object(c.jsx)("div",{className:i.a.LeftArrow,children:Object(c.jsx)("svg",{onClick:function(){return e.goBack()},width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{d:"M8 1L1.8858 6.24074C1.42019 6.63984 1.42019 7.36016 1.8858 7.75926L8 13",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"bevel"})})}),Object(c.jsxs)("div",{className:i.a.Header_Text,children:[Object(c.jsx)("div",{className:i.a.Title,children:Object(c.jsx)("h1",{children:"Edit Post"})}),Object(c.jsx)("div",{className:i.a.Sub,children:Object(c.jsx)("p",{children:"Edit Post"})})]}),Object(c.jsxs)("div",{className:i.a.IndexBtn,children:[Object(c.jsx)("div",{className:i.a.IndexUp,onClick:e.moveUp,children:Object(c.jsx)("img",{src:r,alt:"moveUp"})}),Object(c.jsx)("div",{className:i.a.IndexDown,onClick:e.moveDown,children:Object(c.jsx)("img",{src:r,alt:"moveDown"})})]}),Object(c.jsx)("div",{className:i.a.Next,children:Object(c.jsxs)("a",{href:"#next",onClick:e.saveToDataBase,children:["Next",Object(c.jsx)("svg",{width:"9",height:"11",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{d:"M8 1L1.8858 6.24074C1.42019 6.63984 1.42019 7.36016 1.8858 7.75926L8 13",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"bevel"})})]})})]})}},2352:function(e,t,n){e.exports={FontPanel:"FontPanel_FontPanel__2HDQW",Font_Family:"FontPanel_Font_Family__3Rjmd",DropDown:"FontPanel_DropDown__10RyD",DropDown_Content:"FontPanel_DropDown_Content__3oWOq",Font:"FontPanel_Font__SoHpE",Font_Size:"FontPanel_Font_Size__2LYa0",Size:"FontPanel_Size__2OiuS",Font_Style:"FontPanel_Font_Style__297n9",Saperator:"FontPanel_Saperator__1DKHW",Font_Align:"FontPanel_Font_Align__uj6W-",line1:"FontPanel_line1__2Kb0d",line2:"FontPanel_line2__1fljF",Font_Color:"FontPanel_Font_Color__26wqK",Color:"FontPanel_Color__3C0Eq",Line_Height:"FontPanel_Line_Height__T_5Pl"}},2353:function(e,t,n){e.exports={BackDrop:"EditText_BackDrop__hGSkQ",EditText:"EditText_EditText__1guoD",TextPopup:"EditText_TextPopup__2lNB0",Btn:"EditText_Btn__IZqrr",ApplyBtn:"EditText_ApplyBtn__ViYD-",CancelBtn:"EditText_CancelBtn__3SAH6"}},2354:function(e,t,n){e.exports={BackDrop:"AddFont_BackDrop__3G4Ov",AddFont:"AddFont_AddFont__Ppaov",TextPopup:"AddFont_TextPopup__3GrZ2",Btn:"AddFont_Btn__19xuZ",ApplyBtn:"AddFont_ApplyBtn__2TpZ9",CancelBtn:"AddFont_CancelBtn__d4I3D"}},2355:function(e,t,n){e.exports={canvas_container:"Canvas_canvas_container__2JAMS",Toggle_Preview:"Canvas_Toggle_Preview__21mXC"}},2356:function(e,t,n){e.exports={Container:"GeneralPanel_Container__1Cqup",GeneralPanel:"GeneralPanel_GeneralPanel__3yNXG",Color:"GeneralPanel_Color__2Zfkp",Fill:"GeneralPanel_Fill__2FB2a",Stroke:"GeneralPanel_Stroke__2XYoN",Spacing:"GeneralPanel_Spacing__3NsTz",Parent:"GeneralPanel_Parent__3KTeb",Line:"GeneralPanel_Line__3LTmt",Rect:"GeneralPanel_Rect__7_9vJ",StrokeWidth:"GeneralPanel_StrokeWidth__1NReQ",DropDown_Content:"GeneralPanel_DropDown_Content__XJ_T1"}},2527:function(e,t,n){"use strict";n.r(t);var a=n(16),i=n(5),r=n(9),c=n(1771),l=n.n(c),o=n(0),s=n.n(o),d=n(40),u=n(43),f=n(772),h=n(18),j=n(1634),b=n(1635),p=n(1657),m=n(2352),g=n.n(m),x=n(2353),O=n.n(x),v=n(2),_=function(e){var t=s.a.useRef(),n=s.a.useState(!1),a=Object(r.a)(n,2),i=a[0],c=a[1];return Object(v.jsxs)(s.a.Fragment,{children:[i&&Object(v.jsx)("div",{className:O.a.BackDrop}),Object(v.jsx)("div",{className:O.a.EditText,style:{marginBottom:e.fontStyle?"60px":"20px"},onClick:function(){return c(!i)},children:Object(v.jsx)("h1",{children:"Edit"})}),i&&Object(v.jsxs)("div",{className:O.a.TextPopup,children:[Object(v.jsx)("textarea",{defaultValue:e.displayValue,ref:t,className:O.a.Textarea,name:"Edit",cols:"30",rows:"30"}),Object(v.jsxs)("div",{className:O.a.Btn,children:[Object(v.jsx)("button",{className:O.a.ApplyBtn,onClick:function(){e.handleText(t.current.value),c(!i)},children:Object(v.jsx)("p",{children:"Save"})}),Object(v.jsx)("button",{className:O.a.CancelBtn,onClick:function(){e.handleText(t.current.value),c(!i)},children:Object(v.jsx)("p",{children:"Cancel"})})]})]})]})},y=n(247),w=n(2354),C=n.n(w),N=function(e){var t=s.a.useRef(),n=s.a.useRef();return Object(v.jsxs)(s.a.Fragment,{children:[e.show&&Object(v.jsx)("div",{className:C.a.BackDrop,onClick:e.handleShow}),e.show&&Object(v.jsx)("div",{className:C.a.TextPopup,children:Object(v.jsxs)("form",{onSubmit:function(a){a.preventDefault(),Object(y.a)({name:t.current.value,path:n.current.value}).then((function(a){e.handleShow(),e.getFontData(t.current.value,n.current.value)})).catch((function(t){e.handleShow()}))},children:[Object(v.jsx)("h1",{children:"Add Font"}),Object(v.jsx)("input",{required:!0,defaultValue:e.displayValue,placeholder:"Font Name Here....",ref:t,className:C.a.Textarea,name:"name"}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{required:!0,defaultValue:e.displayValue,placeholder:"Font URL Here....",ref:n,className:C.a.Textarea,name:"path"}),Object(v.jsx)("div",{className:C.a.Btn,children:Object(v.jsx)("button",{className:C.a.ApplyBtn,children:"Save"})})]})})]})},S=Object(u.b)((function(e){return{fonts:e.font.fonts}}),null)((function(e){var t=s.a.useState(!1),n=Object(r.a)(t,2),i=n[0],c=n[1],l=s.a.useState(!1),d=Object(r.a)(l,2),u=d[0],f=d[1],h=s.a.useState(!1),j=Object(r.a)(h,2),b=j[0],p=j[1],m=Object(o.useState)([]),x=Object(r.a)(m,2),O=x[0],y=x[1],w=e.fontFamily;Object(o.useEffect)((function(){var t=[];e.fonts&&(e.fonts.map((function(e,n){t.push({name:e.name,color:null,src:e.path})})),y(t))}),[e.fonts]),O.filter((function(t){t.name===e.fontFamily?(t.color="#12B0EE",w=t.name):t.color=null}));var C=Object(o.useState)(!1),S=Object(r.a)(C,2),k=S[0],F=S[1],P=function(){return F(!k)};return Object(v.jsxs)(s.a.Fragment,{children:[Object(v.jsx)(N,{handleShow:P,show:k,getFontData:function(e,t){return y([].concat(Object(a.a)(O),[{fontFamily:e,color:null,src:t}]))}}),Object(v.jsx)(_,{displayValue:e.displayValue,handleText:e.handleText,fontStyle:b}),Object(v.jsxs)("div",{className:g.a.FontPanel,children:[Object(v.jsxs)("div",{className:g.a.Font_Family,children:[i&&Object(v.jsxs)("div",{className:g.a.DropDown_Content,children:[e.fonts&&O.map((function(t,n){return Object(v.jsx)("div",{className:g.a.Font,onClick:function(){return e.getFont(t.name,t.src)},children:Object(v.jsx)("h1",{style:{fontFamily:t.name,color:t.color},children:t.name})},n)})),Object(v.jsx)("div",{className:g.a.Font,children:Object(v.jsx)("h1",{onClick:function(){return P()},style:{color:"red",fontWeight:"bold"},children:"+ Add Font"})})]}),Object(v.jsx)("div",{onClick:function(){c(!i),f(!1),p(!1)},style:{backgroundColor:i?"#e7ebf2":"white"},className:g.a.DropDown,children:Object(v.jsx)("h3",{children:w&&w.length>7?w.slice(0,7)+"...":w})})]}),Object(v.jsxs)("div",{className:g.a.Font_Size,children:[u&&Object(v.jsx)("div",{className:g.a.DropDown_Content,children:[8,9,10,11,12,14,18,24,30,36,48,60,72,96].map((function(t){return Object(v.jsx)("p",{style:{color:e.fontSize===t?"#12B0EE":"black"},onClick:function(){return e.getFontSize(t)},className:g.a.Size,children:t},t)}))}),Object(v.jsx)("input",{style:{backgroundColor:u?"#e7ebf2":"white"},defaultValue:e.fontSize,type:"number",className:g.a.Dropdown,onClick:function(){c(!1),f(!u),p(!1)},onChange:function(t){return e.getFontSize(t.target.value)}})]}),Object(v.jsxs)("div",{className:g.a.Font_Style,children:[b&&Object(v.jsxs)("div",{className:g.a.DropDown_Content,children:[Object(v.jsx)("h1",{style:{backgroundColor:e.isBold?"#12B0EE":null},onClick:function(){e.handleBold(!e.isBold)},children:Object(v.jsx)("b",{children:"B"})}),Object(v.jsx)("h1",{style:{backgroundColor:e.isItalic?"#12B0EE":null},onClick:function(){e.handleItalic(!e.isItalic)},children:Object(v.jsx)("i",{children:"i"})}),Object(v.jsx)("h1",{style:{backgroundColor:e.isUnderline?"#12B0EE":null},onClick:function(){return e.handleUnderline(!e.isUnderline)},children:Object(v.jsx)("u",{children:"U"})}),Object(v.jsx)("div",{className:g.a.Saperator}),Object(v.jsx)("h1",{style:{backgroundColor:"normal"===e.fontVariant?"#12B0EE":null},onClick:e.handleNormalize,children:"-"}),Object(v.jsx)("h1",{style:{backgroundColor:"capitalize"===e.fontVariant?"#12B0EE":null},onClick:e.handleCapitalize,children:"Aa"}),Object(v.jsx)("h1",{style:{backgroundColor:"uppercase"===e.fontVariant?"#12B0EE":null},onClick:e.handleUppercase,children:"AA"}),Object(v.jsx)("h1",{style:{backgroundColor:"smallcase"===e.fontVariant?"#12B0EE":null},onClick:e.handleSmallcase,children:"aa"})]}),Object(v.jsx)("div",{style:{backgroundColor:b?"#e7ebf2":"white"},className:g.a.DropDown,children:Object(v.jsxs)("h3",{onClick:function(){c(!1),f(!1),p(!b)},children:["A",Object(v.jsx)("span",{children:"A"})]})})]}),Object(v.jsxs)("div",{className:g.a.Font_Align,onClick:e.handleAlignment,children:[Object(v.jsx)("div",{className:g.a.line1}),Object(v.jsx)("div",{className:g.a.line2,style:"center"===e.alignment?{margin:"auto"}:"right"===e.alignment?{marginLeft:"auto"}:null}),Object(v.jsx)("div",{className:g.a.line3,style:"center"===e.alignment?{width:"16px"}:{width:"10px !important"}})]}),Object(v.jsx)("div",{className:g.a.Line_Height,children:Object(v.jsx)("input",{style:{backgroundColor:u?"#e7ebf2":"white"},defaultValue:e.lineHeight,type:"number",className:g.a.Dropdown,onClick:function(){c(!1),f(!1),p(!1)},onChange:function(t){return e.handleLineHeight(t.target.value)}})}),Object(v.jsx)("div",{className:g.a.Font_Color,children:Object(v.jsx)("div",{className:g.a.Color,style:{backgroundColor:e.fontColor},children:Object(v.jsx)("input",{type:"color",onInput:function(t){return e.getFontColor(t.target.value)}})})}),Object(v.jsx)("div",{className:g.a.Line_Height,children:Object(v.jsx)("input",{style:{backgroundColor:u?"#e7ebf2":"white"},defaultValue:e.letterSpacing,type:"number",className:g.a.Dropdown,onClick:function(){c(!1),f(!1),p(!1)},onChange:function(t){return e.handleLetterSpacing(t.target.value)}})})]})]})})),k=n(1637),F=n(627),P=n(1640),D=n(1641),B=n(1642),T=n(2355),E=n.n(T),V=n(222),H=n(2356),X=n.n(H),A=n.p+"static/media/horizontal-symmetry.83e1bdb9.svg",z=function(e){return Object(v.jsx)("div",{className:X.a.Container,children:Object(v.jsx)("div",{className:X.a.GeneralPanel,children:Object(v.jsx)("div",{className:X.a.Spacing,onClick:e.handleFlip,children:Object(v.jsx)("div",{className:X.a.Parent,children:Object(v.jsx)("img",{src:A,alt:"Flip"})})})})})},L=n(1638);t.default=Object(u.b)((function(e){return{canvas:e.canvas.data,fonts:e.font.fonts,photo:e.imageHandler.photo}}),(function(e){return{fetchData:function(t){return e(h.C(t))},fetchFonts:function(){return e(h.q())},getPhotos:function(t){return e(h.z(t))},addPhoto:function(t){return e(h.c(t))},deletePhoto:function(t){return e(h.m(t))}}}))(Object(d.withRouter)((function(e){var t=Object(o.useRef)(),n=Object(o.useState)({canvasWidth:null,canvasHeight:null,canvasScaleX:null,canvasScaleY:null}),c=Object(r.a)(n,2),s=c[0],d=c[1],u=Object(o.useState)(!1),h=Object(r.a)(u,2),m=h[0],g=h[1],x=s.canvasWidth,O=s.canvasHeight,_=Object(o.useState)(null),y=Object(r.a)(_,2),w=y[0],C=y[1],N=Object(o.useState)(null),T=Object(r.a)(N,2),H=T[0],X=T[1],A=Object(o.useState)(0),I=Object(r.a)(A,2),Y=I[0],W=I[1],G=Object(o.useState)(null),U=Object(r.a)(G,2),M=U[0],R=U[1],Z=Object(o.useState)(null),q=Object(r.a)(Z,2),J=q[0],K=q[1],Q=Object(o.useState)(null),$=Object(r.a)(Q,2),ee=$[0],te=$[1],ne=function(e){if(e.target!==e.target.getStage()){if(!("Transformer"===e.target.getParent().className)){var t=e.target.id();te(t||" ")}}else te(" ")},ae=Object(o.useState)({displayValue:null,textFont:"Arial",fontSize:30,fontColor:"white",fontVariant:"normal",bold:!1,italic:!1,underline:!1,alignment:"left",rotation:0,x:0,y:0,scaleX:1,scaleY:1,letterSpacing:0,lineHeight:1.3}),ie=Object(r.a)(ae,2),re=ie[0],ce=ie[1],le=re.fontColor,oe=re.displayValue,se=re.fontVariant,de=re.bold,ue=re.italic,fe=re.underline,he=re.alignment,je=function(e){if("Text"===e.target.className){w.filter((function(t,n){return t.id===e.target.id()&&ce(Object(i.a)(Object(i.a)({},re),{},{displayValue:e.target.text(),font:e.target.fontFamily(),fontSize:e.target.fontSize(),value:e.target.text(),color:e.target.fill(),bold:t.bold,italic:t.italic,underline:t.underline,fontVariant:t.fontVariant,alignment:t.alignment,x:e.target.x(),y:e.target.y(),scaleX:e.target.scaleX(),scaleY:e.target.scaleY(),rotation:e.target.rotation(),id:e.target.id(),name:e.target.name(),type:"Text",width:t.width*e.target.scaleX(),letterSpacing:e.target.letterSpacing(),lineHeight:e.target.lineHeight()})),K(n)}));var t=Object(a.a)(w),n=Object(i.a)({},t[J]);n=re,t[J]=n,C(t)}},be=function(e){"Text"===e.target.className&&w.filter((function(t,n){if(t.id===e.target.id()){var r=Object(a.a)(w),c=Object(i.a)({},r[n]);c.x=e.target.x(),c.y=e.target.y(),c.width=c.width*e.target.scaleX(),c.rotation=e.target.rotation(),c.scaleY=e.target.scaleY(),r[n]=c,C(r)}return t}))},pe=function(e){"Rect"===e.target.className&&w.filter((function(t,n){if(t.id===e.target.id()){var r=Object(a.a)(w),c=Object(i.a)({},r[n]);c.x=e.target.x(),c.y=e.target.y(),c.scaleX=e.target.scaleX(),c.scaleY=e.target.scaleY(),r[n]=c,C(r)}return t}))},me=function(e){"Image"===e.target.className&&w.filter((function(t,n){if(t.id===e.target.id()){var r=Object(a.a)(w),c=Object(i.a)({},r[n]);c.x=e.target.x(),c.y=e.target.y(),c.scaleX=e.target.scaleX(),c.rotation=e.target.rotation(),c.scaleY=e.target.scaleY(),r[n]=c,C(r)}return t}))},ge=function(e){"Path"===e.target.className&&w.filter((function(t,n){if(t.id===e.target.id()){var r=Object(a.a)(w),c=Object(i.a)({},r[n]);c.x=e.target.x(),c.y=e.target.y(),c.scaleX=e.target.scaleX(),c.scaleY=e.target.scaleY(),c.rotation=e.target.rotation(),r[n]=c,C(r)}return t}))},xe=function(e){"Circle"===e.target.className&&w.filter((function(t,n){if(t.id===e.target.id()){var r=Object(a.a)(w),c=Object(i.a)({},r[n]);c.x=e.target.x(),c.y=e.target.y(),c.scaleX=e.target.scaleX(),c.scaleY=e.target.scaleY(),r[n]=c,C(r)}return t}))},Oe=function(e){w.filter((function(t){return t.id===ee&&(t.fontSize=e),g(!m),t}))},ve=["left","center","right"],_e=Object(o.useState)(null),ye=Object(r.a)(_e,2),we=ye[0],Ce=ye[1];Object(o.useEffect)((function(){if(3===Y)return W(0);H&&w.filter((function(e){e.id===ee&&(e.alignment=ve[Y],ce(Object(i.a)(Object(i.a)({},re),{},{alignment:e.alignment})))}))}),[Y]),Object(o.useEffect)((function(){e.fetchData(e.match.params.templateId),e.fetchFonts()}),[]),Object(o.useEffect)((function(){if(e.fonts){var t=document.getElementsByTagName("head")[0];e.fonts.forEach((function(e){var n=document.createElement("link");n.href=e.path,n.type="text/css",n.rel="stylesheet",t.append(n)}))}}),[e.fonts]),Object(o.useEffect)((function(){var t=[];e.canvas&&(d(Object(i.a)(Object(i.a)({},s),{},{canvasWidth:e.canvas.property.canvasWidth,canvasHeight:e.canvas.property.canvasHeight})),C(e.canvas.elements),e.canvas.elements.filter((function(e,n){"Text"===e.type&&t.push(e)}))),X(t)}),[e.canvas]);var Ne=Object(o.useRef)(),Se=null;Ne.current&&(Se=Ne.current.offsetWidth/x);var ke=Object(o.useState)(null),Fe=Object(r.a)(ke,2),Pe=Fe[0],De=Fe[1],Be=Object(o.useState)(!1),Te=Object(r.a)(Be,2),Ee=Te[0],Ve=Te[1];Object(o.useEffect)((function(){e.canvas&&!Pe&&function(){var t=new window.Image;t.src=e.canvas.property.thumbnail.png,t.crossOrigin="anonymous",t.addEventListener("load",(function(){De(t)}))}()}),[e.canvas,Pe]),Object(o.useEffect)((function(){var e=t.current.findOne((function(e){return"previewImg"===e.id()}));Pe&&(e.cache(),e.getLayer().batchDraw())}),[Pe]),Object(o.useEffect)((function(){t.current.findOne((function(e){return"layer"===e.id()})).batchDraw()}),[m]);var He=function(e,t,n){if(n>=e.length)for(var a=n-e.length+1;a--;)return w;if(n<0)return w;e.splice(n,0,e.splice(t,1)[0]),C(e)};return Object(v.jsxs)("div",{className:E.a.canvas_container,children:[Object(v.jsx)(F.Helmet,{children:Object(v.jsx)("title",{children:"Edit Post"})}),Object(v.jsx)(p.a,{goBack:function(){return e.history.goBack()},saveToDataBase:function(){var t={elements:Object(a.a)(w),property:e.canvas.property};Object(V.f)(e.match.params.templateId,t).then((function(e){window.location.href="/template/success/".concat(e.id)})).catch((function(e){return console.log(e)}))},moveUp:function(){var e=t.current.findOne((function(e){return"layer"===e.id()})),n=w.findIndex((function(e){return e.id===ee}));He(w,n,n+1),g(!m),e.batchDraw()},moveDown:function(){var e=t.current.findOne((function(e){return"layer"===e.id()})),n=w.findIndex((function(e){return e.id===ee}));He(w,n,n-1),g(!m),e.batchDraw()}}),Object(v.jsxs)("div",{ref:Ne,children:[Object(v.jsx)(f.Stage,{ref:t,width:Number(x*Se),height:Number(O*Se),style:{backgroundColor:"white"},scaleX:Number(Se),scaleY:Number(Se),onTap:function(e){R(e.target.className),console.log(e.target),je(e),be(e)},onClick:function(e){R(e.target.className),te(e.target.id),je(e)},onMouseDown:function(e){return ne(e)},onTouchStart:function(e){return ne(e)},children:Object(v.jsxs)(f.Layer,{id:"layer",children:[w&&w.map((function(e,t){return"Text"===e.type?Object(v.jsx)(b.a,{x:e.x,y:e.y,width:e.width,height:e.height,scaleX:e.scaleX,text:e.displayValue,id:e.id,font:e.font,fontSize:e.fontSize,color:e.color,alignment:e.alignment,bold:e.bold,italic:e.italic,underline:e.underline,rotation:e.rotation,name:e.name,textAlignment:e.alignment,getFontSize:Oe,transformer:we,updateProperty:be,letterSpacing:e.letterSpacing||0,lineHeight:e.lineHeight},e.id):"Path"===e.type?Object(v.jsx)(D.a,{x:e.x,y:e.y,fill:e.fill,scaleX:e.scaleX,scaleY:e.scaleY,d:e.d,id:e.id,name:e.name,rotation:e.rotation,transformer:we,updateProperty:ge},e.id):"Image"===e.type?Object(v.jsx)(j.a,{x:e.x,y:e.y,width:e.width,height:e.height,img:e.src,id:e.id,name:e.name,scaleX:e.scaleX,scaleY:e.scaleY,zIndex:e.zIndex,rotation:e.rotation,updateProperty:me},e.id):"Rect"===e.type?Object(v.jsx)(P.a,{id:e.id,x:e.x,y:e.y,width:e.width,height:e.height,fill:"none"!==e.fill?e.fill:"transparent",stroke:e.stroke,strokeWidth:e.strokeWidth,scaleX:e.scaleX,rotation:e.rotation,scaleY:e.scaleY,updateProperty:pe,zIndex:e.zIndex},e.id):"Circle"===e.type?Object(v.jsx)(B.a,{x:e.cx,y:e.cy,radius:e.r,scaleX:e.scaleX,scaleY:e.scaleY,id:e.id,name:e.name,rotation:e.rotation,strokeWidth:e["stroke-width"]||0,stroke:e.stroke,transformer:we,fill:"none"!==e.fill&&e.fill,updateProperty:xe},e.id):e})),Object(v.jsx)(f.Image,{id:"previewImg",image:Pe,x:e.canvas&&0-e.canvas.property.x,y:e.canvas&&0-e.canvas.property.y,width:e.canvas&&e.canvas.property.width,height:e.canvas&&e.canvas.property.height,opacity:.5,filters:[l.a.Filters.Grayscale],listening:!1,visible:Ee}),Object(v.jsx)(k.a,{selectedShapeName:ee,anchorName:function(e){return Ce(e)}})]})}),Object(v.jsx)("div",{className:E.a.Toggle_Preview,onClick:function(){return Ve(!Ee)},children:Object(v.jsx)("p",{children:"Show Design Preview"})}),ee&&Object(v.jsx)(L.a,{undo:!1,redo:!1,copy:!1,handleDeleteElement:function(){var e=w.filter((function(e){return e.id!==ee}));C(e)}}),"Text"===M&&Object(v.jsx)(S,{getFont:function(e,t){w.filter((function(t){return t.id===ee&&(t.font=e,window.WebFont.load({google:{families:[e]}}),g(!m)),t}))},fontFamily:w.find((function(e){return e.id===ee}))&&(w.find((function(e){return e.id===ee})).font||"Arial"),getFontSize:Oe,fontSize:w.find((function(e){return e.id===ee}))&&(w.find((function(e){return e.id===ee})).fontSize||16),getFontColor:function(e){w.filter((function(t){return t.id===ee&&(t.color=e),g(!m),t}))},fontColor:le,handleUppercase:function(){w.filter((function(e){return e.id===ee&&(e.displayValue=e.displayValue.toUpperCase(),ce(Object(i.a)(Object(i.a)({},re),{},{displayValue:e.displayValue,fontVariant:"uppercase"}))),e}))},handleSmallcase:function(){w.filter((function(e){return e.id===ee&&(e.displayValue=e.displayValue.toLowerCase(),ce(Object(i.a)(Object(i.a)({},re),{},{displayValue:e.displayValue,fontVariant:"smallcase"}))),e}))},handleCapitalize:function(){w.filter((function(e){return e.id===ee&&(e.displayValue=e.displayValue.replace(/(?:^|\s|["'([{])+\S/g,(function(e){return e.toUpperCase()})),ce(Object(i.a)(Object(i.a)({},re),{},{displayValue:e.displayValue,fontVariant:"capitalize"}))),e}))},handleNormalize:function(){w.filter((function(e){return e.id===ee&&(e.displayValue=e.value,ce(Object(i.a)(Object(i.a)({},re),{},{displayValue:e.displayValue,fontVariant:"normal"}))),e}))},fontVariant:se,handleItalic:function(e){w.filter((function(t){return t.id===ee?(t.italic=e,ce(Object(i.a)(Object(i.a)({},re),{},{italic:t.italic}))):t}))},handleBold:function(e){w.filter((function(t){return t.id===ee?(t.bold=e,ce(Object(i.a)(Object(i.a)({},re),{},{bold:t.bold}))):t}))},handleUnderline:function(e){w.filter((function(t){return t.id===ee?(t.underline=e,ce(Object(i.a)(Object(i.a)({},re),{},{underline:t.underline}))):t}))},isBold:de,isItalic:ue,isUnderline:fe,handleAlignment:function(){return W(Y+1)},alignment:he,handleText:function(e){w.filter((function(t){return t.id===ee?(t.displayValue=e,t.value=e,ce(Object(i.a)(Object(i.a)({},re),{},{displayValue:e}))):t}))},displayValue:oe,lineHeight:w.find((function(e){return e.id===ee}))&&(w.find((function(e){return e.id===ee})).lineHeight||0),handleLineHeight:function(e){w.filter((function(t){return t.id===ee?(t.lineHeight=Number(e)||1,ce(Object(i.a)(Object(i.a)({},re),{},{lineHeight:e}))):(g(!m),t)}))},letterSpacing:w.find((function(e){return e.id===ee}))&&(w.find((function(e){return e.id===ee})).letterSpacing||1),handleLetterSpacing:function(e){w.filter((function(t){return t.id===ee?(t.letterSpacing=Number(e)||1,ce(Object(i.a)(Object(i.a)({},re),{},{letterSpacing:e}))):(g(!m),t)}))}}),null!==M&&"Text"!==M&&Object(v.jsx)(z,{handleFlip:function(){w.filter((function(e){return e.id===ee&&(e.scaleX=-e.scaleX),g(!m),e}))}})]})]})})))}}]);
//# sourceMappingURL=67.5ed5cc32.chunk.js.map