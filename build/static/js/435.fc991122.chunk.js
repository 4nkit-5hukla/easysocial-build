"use strict";(self.webpackChunkeasysocial=self.webpackChunkeasysocial||[]).push([[435],{80908:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(74165),a=n(15861),s=n(43144),o=n(15671),i=n(76138),c=(0,s.Z)((function e(){(0,o.Z)(this,e)}));c.fileUpload=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.ln)("/asset?directory=".concat(t),"POST",{data:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c.fileRemove=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.ln)("/asset","DELETE",{data:{id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.fileRemoveByURL=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.ln)("/asset","DELETE",{data:{url:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},10547:function(e,t,n){n.d(t,{d:function(){return a}});var r=n(80184),a=function(){return(0,r.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"//www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 32V0H32V32H20ZM12 32V0H0V32H12Z",fill:"#FFFFFF"})})}},70298:function(e,t,n){n.d(t,{s:function(){return a}});var r=n(80184),a=function(){return(0,r.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"//www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M32 16L-2.17362e-06 32L-7.7486e-07 -1.39876e-06L32 16Z",fill:"#FFFFFF"})})}},90297:function(e,t,n){var r=n(1413),a=n(29439),s=n(45987),o=n(72791),i=n(42169),c=n(80184),l=["src","alt"];t.Z=function(e){var t=e.src,n=e.alt,u=(0,s.Z)(e,l),d=(0,o.useState)(!0),p=(0,a.Z)(d,2),x=p[0],m=p[1];return(0,c.jsx)(i.Z,(0,r.Z)({component:"img",image:x?t:"/static/images/svg/fallback-img.svg",alt:n,onError:function(){return m(!1)}},u))}},70435:function(e,t,n){n.r(t),n.d(t,{default:function(){return De}});var r=n(1413),a=n(74165),s=n(15861),o=n(29439),i=n(72791),c=n(6907),l=n(43504),u=n(13400),d=n(57621),p=n(39504),x=n(94721),m=n(38940),h=n(43144),f=n(15671),v=n(76138),g=(0,h.Z)((function e(){(0,f.Z)(this,e)}));g.getWaTemplateMessages=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.ln)("/wa-templates","GET");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),g.getWaTemplateMessage=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.ln)("/wa-templates/".concat(t),"GET");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.syncWaTemplateMessage=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.ln)("/wa-templates/sync-templates","GET");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),g.createWaTemplateMessage=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.ln)("/wa-templates/create-template","POST",{data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.updateWaTemplateMessage=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.ln)("/wa-templates/update-template-form/".concat(t),"PUT",{data:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g.updateWaTemplateComponents=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.ln)("/wa-templates/update/".concat(t),"PUT",{data:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g.deleteWaTemplateMessage=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.ln)("/wa-templates/delete/".concat(t),"DELETE");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var b=n(15894),j=n(53821),Z=n(54094),y=n(83559),w=n(29862),C=n(93355),T=n(10090),E=n(15021),k=n(49900),S=n(81918),F=n(57064),R=n(71715),D=n(23786),N=n(5574),M=n(65661),U=n(39157),A=n(97123),I=n(36151),B=n(7235),P=n(17049),_=n(80184),W=function(e){var t=e.template_status,n=e.name,r=e.id,c=e.description,l=(0,Z.s)(),d=l.setErrorMessage,p=l.setSuccessMessage,x=(0,b.dI)(),m=x.setEditWaTemplateId,h=x.setShowWaTemplateForm,f=x.setPreviewWaTemplateId,v=x.setShowWaTemplatePreview,j=(0,i.useState)(null),y=(0,o.Z)(j,2),w=y[0],C=y[1],T=(0,i.useState)(!1),W=(0,o.Z)(T,2),V=W[0],O=W[1],L=function(){O(!1)},H=function(){C(null)},z=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.deleteWaTemplateMessage(r);case 3:if((t=e.sent).success){e.next=6;break}throw Error(t.message);case 6:p(t.message),setTimeout((function(){return window.location.reload()}),1e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d(e.t0.message);case 13:return e.prev=13,L(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return(0,_.jsxs)(i.Fragment,{children:[(0,_.jsxs)(E.ZP,{component:"div",sx:{px:{xs:0,md:2}},children:[(0,_.jsx)(k.Z,{primary:(0,_.jsxs)("div",{className:"primary-block",children:[(0,_.jsx)("h2",{className:"list-title",children:n}),(0,_.jsx)(S.Z,{label:t,size:"small",sx:{bgcolor:P.sB[t],alignItems:"center",color:"#FFFFFF",borderRadius:1,height:20,"& .MuiChip-label":{px:.5,fontSize:10,fontWeight:900,lineHeight:"12px"}}})]}),secondary:c,sx:{"& .primary-block":{alignItems:"center",display:"flex",flexWrap:"wrap",gap:1.25,marginBottom:.75,"& .list-title":{color:"text.secondary",fontSize:15,fontWeight:500,lineHeight:"18px"}},"& .MuiListItemText-secondary":{color:"text.secondary",fontSize:12,fontWeight:400,lineHeight:"15px"}}}),(0,_.jsx)(F.Z,{children:(0,_.jsx)(u.Z,{onClick:function(e){C(e.currentTarget)},children:(0,_.jsx)(B.Z,{})})})]}),Boolean(w)&&(0,_.jsxs)(R.Z,{anchorEl:w,open:Boolean(w),onClose:H,keepMounted:!0,MenuListProps:{"aria-labelledby":"Options"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{minWidth:120}},children:["DRAFT"===t&&(0,_.jsx)(D.Z,{onClick:function(){m(r),h(!0),H()},children:"Edit"}),("SUBMITTED"===t||"APPROVED"===t)&&(0,_.jsx)(D.Z,{onClick:function(){f(r),v(!0),H()},children:"Preview"}),(0,_.jsx)(D.Z,{onClick:function(){O(!0),H()},children:"Delete"})]}),(0,_.jsxs)(N.Z,{open:V,"aria-labelledby":"responsive-dialog-title",children:[(0,_.jsx)(M.Z,{id:"responsive-dialog-title",children:"Delete"}),(0,_.jsx)(U.Z,{children:"Are you sure you want to delete?"}),(0,_.jsxs)(A.Z,{children:[(0,_.jsx)(I.Z,{color:"secondary",onClick:function(){L()},children:"Cancel"}),(0,_.jsx)(I.Z,{onClick:(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:case"end":return e.stop()}}),e)}))),autoFocus:!0,children:"Delete"})]})]})]})},V=function(e){var t=e.color,n=void 0===t?"#4D4D4D":t;return(0,_.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"//www.w3.org/2000/svg",children:(0,_.jsx)("path",{d:"M12.537 9.457H9.366C9.18035 9.457 9.0023 9.53075 8.87103 9.66203C8.73975 9.7933 8.666 9.97135 8.666 10.157C8.666 10.3427 8.73975 10.5207 8.87103 10.652C9.0023 10.7832 9.18035 10.857 9.366 10.857H11.046C10.2739 11.6639 9.27808 12.2215 8.18661 12.4582C7.09515 12.6948 5.95785 12.5997 4.92084 12.1851C3.88384 11.7704 2.99451 11.0552 2.36711 10.1312C1.73972 9.20727 1.40292 8.11683 1.4 7C1.4 6.81435 1.32625 6.6363 1.19497 6.50503C1.0637 6.37375 0.885652 6.3 0.7 6.3C0.514348 6.3 0.336301 6.37375 0.205025 6.50503C0.0737498 6.6363 0 6.81435 0 7C0.00370066 8.36696 0.407555 9.70292 1.16172 10.843C1.91589 11.9831 2.98737 12.8775 4.24392 13.4157C5.50047 13.9539 6.88711 14.1124 8.23271 13.8716C9.57831 13.6309 10.824 13.0015 11.816 12.061V13.3C11.816 13.4857 11.8897 13.6637 12.021 13.795C12.1523 13.9263 12.3303 14 12.516 14C12.7017 14 12.8797 13.9263 13.011 13.795C13.1423 13.6637 13.216 13.4857 13.216 13.3V10.15C13.2143 9.96914 13.1426 9.79598 13.016 9.66679C12.8895 9.5376 12.7178 9.46242 12.537 9.457ZM7 0C5.20547 0.00511853 3.48144 0.69924 2.184 1.939V0.7C2.184 0.514348 2.11025 0.336301 1.97897 0.205025C1.8477 0.0737498 1.66965 0 1.484 0C1.29835 0 1.1203 0.0737498 0.989025 0.205025C0.85775 0.336301 0.784 0.514348 0.784 0.7V3.85C0.784 4.03565 0.85775 4.2137 0.989025 4.34497C1.1203 4.47625 1.29835 4.55 1.484 4.55H4.634C4.81965 4.55 4.9977 4.47625 5.12897 4.34497C5.26025 4.2137 5.334 4.03565 5.334 3.85C5.334 3.66435 5.26025 3.4863 5.12897 3.35503C4.9977 3.22375 4.81965 3.15 4.634 3.15H2.954C3.72573 2.34351 4.72086 1.78605 5.81168 1.54918C6.90249 1.3123 8.03921 1.40682 9.07592 1.8206C10.1126 2.23439 11.002 2.94855 11.63 3.87142C12.2579 4.7943 12.5957 5.88377 12.6 7C12.6 7.18565 12.6737 7.3637 12.805 7.49497C12.9363 7.62625 13.1143 7.7 13.3 7.7C13.4857 7.7 13.6637 7.62625 13.795 7.49497C13.9263 7.3637 14 7.18565 14 7C14 6.08075 13.8189 5.17049 13.4672 4.32122C13.1154 3.47194 12.5998 2.70026 11.9497 2.05025C11.2997 1.40024 10.5281 0.884626 9.67878 0.532843C8.8295 0.18106 7.91925 0 7 0Z",fill:n})})},O=function(e){var t=e.isSearchActive,n=e.setSearchActive,r=(0,Z.s)(),c=r.setErrorMessage,l=r.setSuccessMessage,d=(0,b.DU)().totalWaTemplates,p=(0,b.dI)(),x=p.setWaTemplateFilter,h=p.setShowWaTemplateForm,f=p.setTotalWaTemplates,v=p.setWaTemplatesData,j=(0,i.useState)(!1),C=(0,o.Z)(j,2),E=C[0],k=C[1],S=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,g.syncWaTemplateMessage();case 4:if(!(t=e.sent).success){e.next=16;break}return e.next=8,g.getWaTemplateMessages();case 8:if((n=e.sent).success){e.next=11;break}throw Error(t.message);case 11:f(n.payload.length),v(n.payload),l(t.message),e.next=17;break;case 16:c(t.message);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),c(e.t0.message);case 22:return e.prev=22,k(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[0,19,22,25]])})));return function(){return e.apply(this,arguments)}}();return(0,_.jsxs)(w.sm,{children:[(0,_.jsx)(w.vd,{children:(0,_.jsx)(y.Kk,{disableIcon:!0,type:"button",onClick:function(){return h(!0)},sx:{py:0,px:2,height:36,mt:0},children:"New Template Message"})}),(0,_.jsxs)(w.DU,{children:[!t&&(0,_.jsx)(w.yE,{children:(0,_.jsx)(w.og,{children:"".concat(d," Template Messages")})}),(0,_.jsxs)(w.sv,{children:[t&&(0,_.jsx)(w._8,{children:(0,_.jsxs)(w.w2,{children:[(0,_.jsx)(u.Z,{disableTouchRipple:!0,disableFocusRipple:!0,disableRipple:!0,sx:{position:"absolute"},children:(0,_.jsx)(T.o,{})}),(0,_.jsx)(w.Mj,{onChange:function(e){var t=e.target.value;return x(t)},placeholder:"Search Template"}),(0,_.jsx)(u.Z,{onClick:function(){x(""),n(!t)},sx:{position:"absolute",right:0,top:0},children:(0,_.jsx)(m.Z,{})})]})}),!t&&(0,_.jsx)(u.Z,{onClick:function(){return n((function(e){return!e}))},children:(0,_.jsx)(T.o,{})}),!t&&(0,_.jsx)(y.Kk,{icon:(0,_.jsx)(V,{color:E?"#00000042":"#4D4D4D"}),variant:"outlined",type:"button",disabled:E,onClick:function(){return S()},sx:{alignSelf:"center",borderRadius:4,borderColor:"#0000003b",color:"#000000de",flexDirection:"row-reverse",fontSize:14,fontWeight:400,letterSpacing:"0.02857em",lineHeight:"16px",gap:1,height:30,py:.625,px:1.875,textTransform:"capitalize"},children:E?"Syncing...":"Sync Messages"})]})]})]})},L=n(93433),H=n(73974),z=n(64280),q=n(61134),G=n(40341),Y=n(33956),K=n(35641),Q=n(4942),X=n(63366),J=n(87462),$=n(28182),ee=n(94419),te=n(20890),ne=n(93736),re=n(66934),ae=n(21217);function se(e){return(0,ae.Z)("MuiCardHeader",e)}var oe=(0,n(75878).Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),ie=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],ce=(0,re.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:function(e,t){var n;return(0,J.Z)((n={},(0,Q.Z)(n,"& .".concat(oe.title),t.title),(0,Q.Z)(n,"& .".concat(oe.subheader),t.subheader),n),t.root)}})({display:"flex",alignItems:"center",padding:16}),le=(0,re.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:function(e,t){return t.avatar}})({display:"flex",flex:"0 0 auto",marginRight:16}),ue=(0,re.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:function(e,t){return t.action}})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),de=(0,re.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:function(e,t){return t.content}})({flex:"1 1 auto"}),pe=i.forwardRef((function(e,t){var n=(0,ne.Z)({props:e,name:"MuiCardHeader"}),r=n.action,a=n.avatar,s=n.className,o=n.component,i=void 0===o?"div":o,c=n.disableTypography,l=void 0!==c&&c,u=n.subheader,d=n.subheaderTypographyProps,p=n.title,x=n.titleTypographyProps,m=(0,X.Z)(n,ie),h=(0,J.Z)({},n,{component:i,disableTypography:l}),f=function(e){var t=e.classes;return(0,ee.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},se,t)}(h),v=p;null==v||v.type===te.Z||l||(v=(0,_.jsx)(te.Z,(0,J.Z)({variant:a?"body2":"h5",className:f.title,component:"span",display:"block"},x,{children:v})));var g=u;return null==g||g.type===te.Z||l||(g=(0,_.jsx)(te.Z,(0,J.Z)({variant:a?"body2":"body1",className:f.subheader,color:"text.secondary",component:"span",display:"block"},d,{children:g}))),(0,_.jsxs)(ce,(0,J.Z)({className:(0,$.Z)(f.root,s),as:i,ref:t,ownerState:h},m,{children:[a&&(0,_.jsx)(le,{className:f.avatar,ownerState:h,children:a}),(0,_.jsxs)(de,{className:f.content,ownerState:h,children:[v,g]}),r&&(0,_.jsx)(ue,{className:f.action,ownerState:h,children:r})]}))})),xe=n(96739),me=function(e){var t=e.index,n=e.control,r=e.removeQuickReply;return(0,_.jsxs)(d.Z,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:4,boxShadow:"0px 0px 20px 1px rgba(0, 0, 0, 0.1)",mb:3,p:2,pb:3},elevation:0,children:[(0,_.jsx)(pe,{title:"Quick Reply ".concat(t+1),action:(0,_.jsx)(u.Z,{"aria-label":"Remove Quick Reply ".concat(t+1),onClick:function(){return r(t)},children:(0,_.jsx)(xe.Z,{})}),sx:{p:0,"& .MuiCardHeader-title":{fontSize:16,fontWeight:500,lineHeight:"22px"}}}),(0,_.jsx)(w.gN,{sx:{my:2},children:(0,_.jsx)(K.Z,{control:n,name:"components[3].buttons[".concat(t,"].text"),label:"Label",required:!0,sx:w.ey})})]},t)},he=n(54093),fe=function(e){var t=e.index,n=e.type,a=e.url,s=e.phone_number,c=e.waTemplateButtonCtaTypes,l=e.control,p=e.setValue,x=e.removeCallAction,m=(0,j.O)().country,h=/[{][{]\d{1,3}[}][}]/gm,f=(0,i.useState)(0),v=(0,o.Z)(f,2),g=v[0],b=v[1],Z=(0,i.useCallback)((function(){if(a){var e=a.match(h);e&&e.length>0?b(1):b(0)}}),[a]);return(0,i.useEffect)((function(){Z()}),[Z]),(0,_.jsxs)(d.Z,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:4,boxShadow:"0px 0px 20px 1px rgba(0, 0, 0, 0.1)",mb:3,p:2,pb:3},elevation:0,children:[(0,_.jsx)(pe,{title:"Call to Action ".concat(t+1),action:(0,_.jsx)(u.Z,{"aria-label":"Remove Call to Action ".concat(t+1),onClick:function(){return x(t)},children:(0,_.jsx)(xe.Z,{})}),sx:{p:0,"& .MuiCardHeader-title":{fontSize:16,fontWeight:500,lineHeight:"22px"}}}),(0,_.jsx)(w.gN,{sx:{my:2},children:(0,_.jsxs)(K.Z,{select:!0,control:l,label:"Action Type",name:"components[3].buttons[".concat(t,"].type"),sx:w.Br,required:!0,defaultValue:n,children:[(0,_.jsx)(D.Z,{value:"",disabled:!0,children:"Select Action Type"}),c.map((function(e,t){var n=e.value,r=e.name;return(0,_.jsx)(D.Z,{value:n,children:r},t)}))]})}),""!==n&&(0,_.jsx)(w.gN,{sx:{my:2},children:(0,_.jsx)(K.Z,{control:l,name:"components[3].buttons[".concat(t,"].text"),label:"Label",required:!0,sx:w.ey})}),"PHONE_NUMBER"===n&&(0,_.jsx)(w.gN,{sx:{my:2},children:(0,_.jsx)(he.Kr,{label:"Phone",placeholder:"Phone",required:!0,fullWidth:!0,defaultCountry:m,value:null!==s&&void 0!==s?s:"",onChange:function(e){p("components[3].buttons[".concat(t,"].phone_number"),e.replaceAll(" ",""))},variant:"filled",sx:w.RC})}),"URL"===n&&(0,_.jsxs)(w.gN,{sx:{my:2},children:[(0,_.jsxs)(w.n2,{children:[(0,_.jsx)(K.Z,{control:l,name:"components[3].buttons[".concat(t,"].url"),label:"URL",required:!0,sx:(0,r.Z)((0,r.Z)({},w.ey),{},{pb:2,height:"auto"})}),(0,_.jsx)(w.qD,{size:"small",focusRipple:!1,className:"add-variable",disabled:1===g,onClick:function(){if(1!==g){var e="".concat(a,"{{",1,"}}");p("components[3].buttons[".concat(t,"].url"),e),b(1)}},children:"ADD VARIABLE"})]}),(0,_.jsxs)(w.Dy,{children:[(0,_.jsxs)(w.kV,{children:[a?a.length:0,"/60 Characters"]}),(0,_.jsxs)(w.kV,{children:[g,"/1 Variable"]})]})]})]},t)},ve=function(e){var t=e.open,n=e.closeDrawer,r=/[{][{]\d{1,3}[}][}]/gm,c=(0,Z.s)(),l=c.setErrorMessage,d=c.setSuccessMessage,p=(0,j.O)().businessId,x=(0,b.DU)(),m=x.editWaTemplateId,h=x.waTemplatesData,f=x.waTemplateCategories,v=x.waTemplateLanguages,T=x.waTemplateTypes,E=x.waTemplateHeaderTypes,k=x.waTemplateButtonTypes,S=x.waTemplateButtonCtaTypes,F=(0,b.dI)(),R=F.setWaTemplatesData,N=F.setShowWaPreviewForm,M=F.setPreviewWaTemplateId,U={name:"",category:"",language:"",template_type:"",businessId:p,components:[{format:"",text:"",type:P.rU.HEADER,active:!1},{text:"",type:P.rU.BODY},{text:"",type:P.rU.FOOTER,active:!1},{buttons:[],type:P.rU.BUTTONS,active:!1}]},A=(0,q.cI)({defaultValues:U}),I=A.control,B=A.handleSubmit,W=A.watch,V=A.reset,O=A.setValue,Q=W(),X=Q.name,J=Q.category,$=Q.language,ee=Q.template_type,te=Q.components,ne=te.find((function(e){return e.type===P.rU.HEADER})),re=te.find((function(e){return e.type===P.rU.BODY})),ae=te.find((function(e){return e.type===P.rU.FOOTER})),se=te.find((function(e){return e.type===P.rU.BUTTONS})),oe=(0,i.useState)(0),ie=(0,o.Z)(oe,2),ce=ie[0],le=ie[1],ue=(0,i.useState)(""),de=(0,o.Z)(ue,2),pe=de[0],xe=de[1],he=(0,i.useCallback)((function(){var e=null===X.match(/^[A-Za-z0-9_]+$/g)?X.slice(0,-1):X.replace(/\s/g,"").toLowerCase();O("name",e)}),[X]),ve=(0,i.useCallback)((function(){var e=ne.text.match(r);e&&e.length>0?le(1):le(0)}),[ne.text]),ge=(0,i.useCallback)((function(){var e=ne.text.match(r);null!==e&&0!==e.length?(O("components[0].text",e.reduce((function(e,t,n){return 0===n?e.replace(t,"{{".concat(n+1,"}}")):e.replace(t,"")}),e.reduce((function(e,t,n){return e.replace(t,"{{".concat(n+1,"}}"))}),ne.text))),le(1)):le(0)}),[ne.text]),be=function(e){var t=se.buttons;t.splice(e,1),O("components[3].buttons",t)},je=function(e){var t=se.buttons;t.splice(e,1),O("components[3].buttons",t)},Ze=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!m){e.next=14;break}return e.next=4,g.updateWaTemplateMessage(m,t);case 4:if((s=e.sent).success){e.next=7;break}throw Error(s.message);case 7:d(s.message),M(null!==(r=s.payload.id)&&void 0!==r?r:m),V(U),n(),N(!0),e.next=25;break;case 14:return e.next=16,g.createWaTemplateMessage(t);case 16:if((o=e.sent).success){e.next=19;break}throw Error(o.message);case 19:d(o.message),R([o.payload].concat((0,L.Z)(h))),M(o.payload.id),V(U),n(),N(!0);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(0),l(e.t0.message);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t){return e.apply(this,arguments)}}(),ye=(0,i.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!m){e.next=12;break}return e.next=4,g.getWaTemplateMessage(m);case 4:if((t=e.sent).success){e.next=7;break}throw Error(t.message);case 7:V(t.payload),""!==t.payload.components[0].format&&O("components[0].active",!0),""!==t.payload.components[2].text&&O("components[2].active",!0),t.payload.components[3].buttons.length>0&&O("components[3].active",!0),t.payload.components[3].buttons[0]&&("QUICK_REPLY"===t.payload.components[3].buttons[0].type?xe("QUICK_REPLY"):"URL"!==t.payload.components[3].buttons[0].type&&"PHONE_NUMBER"!==t.payload.components[3].buttons[0].type||xe("CALL_TO_ACTION"));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),l(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),[m]);return(0,i.useEffect)((function(){ye()}),[ye]),(0,i.useEffect)((function(){he()}),[he]),(0,i.useEffect)((function(){ge()}),[ge]),(0,i.useEffect)((function(){ve()}),[ve]),(0,_.jsx)(H.ZP,{anchor:"right",open:t,onClose:function(e,t){(0,G.MF)(t)||(V(U),n())},sx:{zIndex:"modal"},children:(0,_.jsxs)(w.Dj,{sx:{width:{xs:"100vw",md:360}},children:[(0,_.jsxs)(w.yW,{children:[(0,_.jsx)(u.Z,{onClick:function(){V(U),n()},sx:{width:32,height:32},children:(0,_.jsx)(C.I,{})}),(0,_.jsx)(w.Gh,{children:"".concat(m?"Update":"Create New"," Template")})]}),(0,_.jsxs)(w.aN,{onSubmit:B(Ze),onReset:function(){V(U),n()},children:[(0,_.jsx)(w.gq,{children:(0,_.jsxs)(w.mn,{children:[(0,_.jsx)(w.gN,{children:(0,_.jsx)(K.Z,{control:I,name:"name",label:"Template Name",placeholder:"Template Name",required:!0,sx:w.ey})}),(0,_.jsx)(w.gN,{children:(0,_.jsxs)(K.Z,{select:!0,control:I,label:"Template Category",name:"category",sx:w.Br,required:!0,defaultValue:J,children:[(0,_.jsx)(D.Z,{value:"",disabled:!0,children:"Select Template Category"}),f.map((function(e,t){var n=e.value,r=e.name;return(0,_.jsx)(D.Z,{value:n,children:r},t)}))]})}),(0,_.jsx)(w.gN,{children:(0,_.jsxs)(K.Z,{select:!0,control:I,label:"Language",name:"language",sx:w.Br,required:!0,defaultValue:$,children:[(0,_.jsx)(D.Z,{value:"",disabled:!0,children:"Select Language"}),v.map((function(e,t){var n=e.code,r=e.name;return(0,_.jsx)(D.Z,{value:n,children:r},t)}))]})}),(0,_.jsx)(w.gN,{children:(0,_.jsxs)(K.Z,{select:!0,control:I,label:"Template Type",name:"template_type",sx:w.Br,required:!0,defaultValue:ee,children:[(0,_.jsx)(D.Z,{value:"",disabled:!0,children:"Select Template Type"}),T.map((function(e,t){var n=e.value,r=e.label;return(0,_.jsx)(D.Z,{value:n,children:r},t)}))]})}),"media"===ee&&(0,_.jsx)(w.gN,{children:(0,_.jsxs)(w.gq,{sx:{justifyContent:"space-between"},children:[(0,_.jsx)(w.mn,{children:(0,_.jsx)(w.m8,{children:"Header"})}),(0,_.jsx)(Y.Z,{control:I,name:"components[0].active"})]})}),"media"===ee&&ne.active&&(0,_.jsx)(w.gN,{children:(0,_.jsxs)(K.Z,{select:!0,control:I,label:"Header Type",name:"components[0].format",sx:w.Br,required:!0,defaultValue:ne.format,children:[(0,_.jsx)(D.Z,{value:"",disabled:!0,children:"Select Header Type"}),E.map((function(e,t){var n=e.value,r=e.name;return(0,_.jsx)(D.Z,{value:n,children:r},t)}))]})}),"media"===ee&&ne.active&&"TEXT"===ne.format&&(0,_.jsxs)(w.gN,{children:[(0,_.jsxs)(w.n2,{children:[(0,_.jsx)(K.Z,{control:I,rows:5,multiline:!0,name:"components[0].text",placeholder:"Message",required:!0,inputProps:{maxLength:60},sx:w.FO}),(0,_.jsx)(w.qD,{size:"small",focusRipple:!1,className:"add-variable",disabled:1===ce,onClick:function(){if(1!==ce){var e="".concat(ne.text,"{{",1,"}}");O("components[0].text",e),le(1)}},children:"ADD VARIABLE"})]}),(0,_.jsxs)(w.Dy,{children:[(0,_.jsxs)(w.kV,{children:[ne.text.length,"/60 Characters"]}),(0,_.jsxs)(w.kV,{children:[ce,"/1 Variable"]})]})]}),""!==ee&&(0,_.jsx)(w.gN,{children:(0,_.jsx)(w.m8,{children:"Body"})}),""!==ee&&(0,_.jsxs)(w.gN,{children:[(0,_.jsxs)(w.n2,{children:[(0,_.jsx)(K.Z,{control:I,rows:5,multiline:!0,name:"components[1].text",placeholder:"Message",required:!0,onBlur:function(){var e=re.text.match(r);null!==e&&0!==e.length&&O("components[1].text",e.reduce((function(e,t,n){return e.replace(t,"{{".concat(n+1,"}}"))}),re.text))},inputProps:{maxLength:1024},sx:w.FO}),(0,_.jsx)(w.qD,{size:"small",focusRipple:!1,className:"add-variable",onClick:function(){var e=re.text.match(r),t=e&&e.length>0?"".concat(re.text,"{{").concat(e.length+1,"}}"):"".concat(re.text,"{{",1,"}}");O("components[1].text",t)},children:"ADD VARIABLE"})]}),(0,_.jsx)(w.Dy,{children:(0,_.jsxs)(w.kV,{children:[re.text.length,"/1024 Characters"]})})]}),"media"===ee&&(0,_.jsx)(w.gN,{children:(0,_.jsxs)(w.gq,{sx:{justifyContent:"space-between"},children:[(0,_.jsx)(w.mn,{children:(0,_.jsx)(w.m8,{children:"Footer"})}),(0,_.jsx)(Y.Z,{control:I,name:"components[2].active"})]})}),"media"===ee&&ae.active&&(0,_.jsxs)(w.gN,{children:[(0,_.jsx)(w.n2,{children:(0,_.jsx)(K.Z,{control:I,rows:5,multiline:!0,name:"components[2].text",placeholder:"Message",required:!0,inputProps:{maxLength:60},sx:w.FO})}),(0,_.jsx)(w.Dy,{children:(0,_.jsxs)(w.kV,{children:[ae.text.length,"/60 Characters"]})})]}),"media"===ee&&(0,_.jsx)(w.gN,{children:(0,_.jsxs)(w.gq,{sx:{justifyContent:"space-between"},children:[(0,_.jsx)(w.mn,{children:(0,_.jsx)(w.m8,{children:"Buttons"})}),(0,_.jsx)(Y.Z,{control:I,name:"components[3].active"})]})}),"media"===ee&&se.active&&(0,_.jsxs)(w.gN,{children:[(0,_.jsxs)(w.gq,{sx:{alignItems:"center",columnGap:2,justifyContent:"space-between",mb:2.5},children:[(0,_.jsx)(w.mn,{children:(0,_.jsxs)(z.Z,{select:!0,label:"Button Type",sx:w.Br,required:!0,value:pe,onChange:function(e){xe(e.target.value)},disabled:se.buttons.length>0,children:[(0,_.jsx)(D.Z,{value:"",disabled:!0,children:"Select Button Type"}),k.map((function(e,t){var n=e.label,r=e.name;return(0,_.jsx)(D.Z,{value:r,children:n},t)}))]})}),(0,_.jsx)(w.aV,{children:(0,_.jsx)(y.Kk,{variant:"outlined",color:"primary",onClick:function(){if(""===pe&&l("Please Select button Type"),"QUICK_REPLY"===pe)if(se.buttons.length<3){var e=se.buttons;e.push({type:"QUICK_REPLY",text:""}),O("components[3].buttons",e)}else l("Limit exceeded");if("CALL_TO_ACTION"===pe)if(se.buttons.length<2){var t=se.buttons;t.push({type:"",text:""}),O("components[3].buttons",t)}else l("Limit exceeded")},disableIcon:!0,children:"Add a Button"})})]}),"media"===ee&&se.active&&se.buttons.length>0&&(0,_.jsx)(i.Fragment,{children:se.buttons.map((function(e,t){var n=e.type,r=e.url,a=e.phone_number;return"QUICK_REPLY"===n?(0,_.jsx)(me,{index:t,removeQuickReply:be,control:I},t):(0,_.jsx)(fe,{index:t,type:n,url:r,phone_number:a,waTemplateButtonCtaTypes:S,control:I,setValue:O,removeCallAction:je},t)}))})]})]})}),(0,_.jsxs)(y.W9,{children:[(0,_.jsx)(y.Kk,{type:"reset",variant:"outlined",color:"primary",sx:{height:48},disableIcon:!0,children:"Cancel"}),(0,_.jsx)(y.Kk,{type:"submit",children:"Preview & Save"})]})]})]})})},ge=n(45987),be=n(50533),je=n(43334),Ze=n(73599),ye=n(42169),we=n(64554),Ce=n(70298),Te=n(10547),Ee=function(){return(0,_.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"//www.w3.org/2000/svg",children:[(0,_.jsx)("path",{d:"M10.5378 1.11084H7.60995C7.35479 1.11084 7.14798 1.31765 7.14798 1.57281C7.14798 1.82797 7.35479 2.03478 7.60995 2.03478H9.42251L4.99274 6.46455C4.81232 6.64498 4.81232 6.93746 4.99274 7.11788C5.08298 7.20807 5.20119 7.25319 5.3194 7.25319C5.43762 7.25319 5.55583 7.20807 5.64607 7.11788L10.0758 2.68811V4.50072C10.0758 4.75588 10.2826 4.96269 10.5378 4.96269C10.793 4.96269 10.9998 4.75588 10.9998 4.50072V1.57286C10.9998 1.31765 10.793 1.11084 10.5378 1.11084Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"}),(0,_.jsx)("path",{d:"M8.64816 6.53803C8.393 6.53803 8.18619 6.74484 8.18619 7V9.965H1.92394V3.70275H5.5C5.75516 3.70275 5.96197 3.49594 5.96197 3.24078C5.96197 2.98562 5.75516 2.77881 5.5 2.77881L1.46197 2.77881C1.20681 2.77881 1 2.98562 1 3.24078V10.427C1 10.6821 1.20681 10.8889 1.46197 10.8889H8.64816C8.90333 10.8889 9.11013 10.6821 9.11013 10.427V7C9.11013 6.74484 8.90333 6.53803 8.64816 6.53803Z",fill:"#32C5FF",stroke:"#32C5FF",strokeWidth:"0.5"})]})},ke=function(e){var t=e.components,n=(0,i.useRef)(null),a=(0,i.useState)(!1),s=(0,o.Z)(a,2),c=s[0],l=s[1],u=(0,i.useState)(!1),d=(0,o.Z)(u,2),p=d[0],x=d[1],m=(0,i.useState)(""),h=(0,o.Z)(m,2),f=h[0],v=h[1],g=t.find((function(e){return e.type===P.rU.HEADER})),b=t.find((function(e){return e.type===P.rU.BODY})),j=t.find((function(e){return e.type===P.rU.FOOTER})),Z=t.find((function(e){return e.type===P.rU.BUTTONS})),y=function(e){if(e){var t=e.example;if(t){var n=t.header_text;return n||[]}return[]}return[]}(g),C=function(e){if(e){var t=e.example;if(t){var n=t.header_handle;return n&&n.length>0?(0,o.Z)(n,1)[0]:""}return""}return""}(g),T=function(e){if(e){var t=e.example;if(t){var n=t.header_files;return n&&n.length>0?(0,o.Z)(n,1)[0]:""}return""}return""}(g),E=function(e){if(e){var t=e.example;if(t){var n=t.body_text;return n||[]}return[]}return[]}(b),k=function(e){return g?e.reduce((function(e,t,n){return t&&""!==t?e.replace("{{".concat(n+1,"}}"),t):e}),g.text):""}(y),S=function(e){return b?e.reduce((function(e,t,n){return t&&""!==t?e.replace("{{".concat(n+1,"}}"),t):e}),b.text):""}(E);return(0,i.useEffect)((function(){n.current&&(n.current.addEventListener("playing",(function(){v("playing")})),n.current.addEventListener("pause",(function(){v("")})),n.current.addEventListener("ended",(function(){v("")})),c?n.current.play():n.current.pause())}),[c]),(0,_.jsxs)(w.oU,{children:[g&&"IMAGE"===g.format&&(0,_.jsx)(w.s_,{children:C&&""!==C&&(0,_.jsx)(ye.Z,{component:"img",alt:"header-img",image:C,sx:w.B_})}),g&&"VIDEO"===g.format&&(0,_.jsxs)(be.Z,{underline:"none",component:"button",type:"button",onClick:function(){return l(!c)},onMouseEnter:function(){return x(!0)},onMouseLeave:function(){return x(!1)},sx:w.lN,children:[(0,_.jsx)(ye.Z,{component:"video",ref:n,className:"video",disablePictureInPicture:!0,sx:(0,r.Z)((0,r.Z)({},w.B_),{},{height:130}),children:C&&""!==C&&(0,_.jsx)("source",{src:C,type:"video/mp4"})}),(0,_.jsxs)(we.Z,{position:"absolute",display:"flex",children:[""===f&&(0,_.jsx)(Ce.s,{}),p&&"playing"===f&&(0,_.jsx)(Te.d,{})]})]}),g&&"DOCUMENT"===g.format&&(0,_.jsx)(be.Z,{underline:"none",className:"media-wrapper doc",href:C,target:"_blank",sx:(0,r.Z)((0,r.Z)({},w.lN),{},{backgroundColor:"#F5F5F5",color:"#A1AEB4",fontSize:90,fontWeight:900,lineHeight:"96px"}),children:C&&""!==C?T.split(".").pop().slice(0,4).toUpperCase():""}),g&&"TEXT"===g.format&&(0,_.jsx)(w.z,{children:k}),(0,_.jsx)(w.Ac,{children:(0,G.wv)(S)}),j&&""!==j.text&&(0,_.jsx)(w.HU,{children:j.text}),Z&&Z.buttons.length>0&&(0,_.jsx)(w.UE,{children:Z.buttons.map((function(e,t){return(0,_.jsx)(i.Fragment,{children:"QUICK_REPLY"===e.type?(0,_.jsx)(I.Z,{variant:"outlined",type:"button",sx:(0,r.Z)((0,r.Z)({},w.ef),{},{color:"#767676",minWidth:"calc(50% - 8px)"}),children:e.text}):"PHONE_NUMBER"===e.type?(0,_.jsx)(I.Z,{href:"tel:".concat(e.phone_number),variant:"outlined",sx:(0,r.Z)((0,r.Z)({},w.ef),{},{color:"#32C5FF",minWidth:"100%"}),children:e.text}):(0,_.jsxs)(I.Z,{href:e.example?e.example.reduce((function(e,t,n){return t&&""!==t?e.replace("{{".concat(n+1,"}}"),t):e}),e.url):"",variant:"outlined",target:"_blank",rel:"noreferrer",sx:(0,r.Z)((0,r.Z)({},w.ef),{},{color:"#32C5FF",minWidth:"100%"}),children:[(0,_.jsx)(Ee,{}),e.text]})},t)}))})]})},Se=["active"],Fe=function(e){var t,n,r,c,l=e.open,d=e.closeDrawer,p=(0,j.O)(),x=p.isMobile,m=p.isTablet,h=/[{][{]\d{1,3}[}][}]/gm,f=(0,Z.s)(),v=f.setErrorMessage,T=f.setSuccessMessage,E=(0,b.DU)(),k=E.previewWaTemplateId,S=E.showWaTemplatePreview,F=(0,b.dI)(),R=F.setPreviewWaTemplateData,D=F.setEditWaTemplateId,N=F.setShowWaTemplateForm,M=(0,i.useState)([]),U=(0,o.Z)(M,2),A=U[0],I=U[1],B={components:[{format:"",text:"",type:P.rU.HEADER},{text:"",type:P.rU.BODY},{text:"",type:P.rU.FOOTER},{buttons:[],type:P.rU.BUTTONS}]},W=(0,q.cI)({defaultValues:B}),V=W.control,O=W.handleSubmit,L=W.watch,z=W.setValue,Y=L().components,Q=Y.find((function(e){return e.type===P.rU.HEADER})),X=Y.find((function(e){return e.type===P.rU.BODY})),J=Y.find((function(e){return e.type===P.rU.BUTTONS})),$=null===Q||void 0===Q||null===(t=Q.example)||void 0===t||null===(n=t.header_handle)||void 0===n?void 0:n[0],ee=[Q&&"TEXT"!==Q.format,!(!Q||"TEXT"!==Q.format||!Q.text||""===Q.text)&&Q.text.includes("{{1}}"),X&&X.text&&""!==X.text&&X.text.includes("{{1}}"),J&&J.buttons.length>0&&"URL"===(null===(r=J.buttons[0])||void 0===r?void 0:r.type)&&(null===(c=J.buttons[0])||void 0===c?void 0:c.url.includes("{{1}}"))].reduce((function(e,t){return e||t}),!1),ne=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.components.map((function(e){e.active;var t=(0,ge.Z)(e,Se);return"HEADER"===t.type?(delete t.example.header_files,t):t})),!k){e.next=10;break}return e.next=5,g.updateWaTemplateComponents(k,{components:n});case 5:if((r=e.sent).success){e.next=8;break}throw Error(r.message);case 8:T(r.message),d();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),re=(0,i.useCallback)((function(){Y.length>0&&Y.forEach((function(e){var t=e.type,n=e.text;e.buttons;if("BODY"===t){var r=n.match(h);r&&I(r.map((function(e,t){return t+1})))}}))}),[Y]),ae=(0,i.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!k){e.next=9;break}return e.next=4,g.getWaTemplateMessage(k);case 4:if((t=e.sent).success){e.next=7;break}throw Error(t.message);case 7:R(t.payload),z("components",t.payload.components);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),v(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[k]);return(0,i.useEffect)((function(){ae()}),[ae]),(0,i.useEffect)((function(){re()}),[re]),(0,_.jsxs)(H.ZP,{anchor:"right",open:l,onClose:function(e,t){(0,G.MF)(t)&&!S||d()},sx:{zIndex:"modal","& .MuiPaper-root.MuiDrawer-paper":{flexDirection:"row-reverse"}},children:[(0,_.jsxs)(w.Dj,{sx:{width:{xs:"100vw",md:360}},children:[l&&(0,_.jsxs)(w.yW,{children:[(0,_.jsx)(u.Z,{onClick:function(){d()},sx:{width:32,height:32},children:(0,_.jsx)(C.I,{})}),(0,_.jsx)(w.Gh,{children:ee&&!S?"Enter Sample Values":"Preview Template"})]}),l&&(0,_.jsxs)(w.aN,{onSubmit:O(ne),children:[(!ee||S||x)&&(0,_.jsx)(ke,{components:Y}),!S&&Q&&("IMAGE"===Q.format||"VIDEO"===Q.format||"DOCUMENT"===Q.format)&&(0,_.jsx)(w.gN,{children:(0,_.jsx)(je.Z,{setValue:z,control:V,fileTypes:"IMAGE"===Q.format?Ze.F.IMAGE:"VIDEO"===Q.format?Ze.F.VIDEO:Ze.F.FILE,label:"Drag & Drop ".concat(Q.format.charAt(0).toUpperCase()).concat(Q.format.slice(1).toLowerCase()),defaultFieldName:"components[0].example.header_handle[0]",fileNameField:"components[0].example.header_files[0]",fileURL:null!==$&&void 0!==$?$:"",width:"100%"})}),!S&&Q&&"TEXT"===Q.format&&Q.text.includes("{{1}}")&&(0,_.jsx)(w.gN,{children:(0,_.jsx)(K.Z,{control:V,name:"components[0].example.header_text[0]",label:"Header Variable 1",placeholder:"Header {{1}}",required:!0,sx:w.ey})}),!S&&A.length>0&&A.map((function(e,t){return(0,_.jsx)(w.gN,{children:(0,_.jsx)(K.Z,{control:V,name:"components[1].example.body_text[".concat(t,"]"),label:"Body Variable ".concat(e),placeholder:"Body ".concat(e),required:!0,sx:w.ey})},"bodyVar{{".concat(e,"}}"))})),!S&&J&&J.buttons&&J.buttons.length>0&&J.buttons.map((function(e,t){return"URL"===e.type?(0,_.jsx)(w.gN,{children:(0,_.jsx)(K.Z,{control:V,name:"components[3].buttons[".concat(t,"].example[0]"),label:"URL Button ".concat(t+1),placeholder:"Url button ".concat(t+1," variable 1"),required:!0,sx:w.ey})},t):null})),!S&&(0,_.jsx)(y.W9,{children:(0,_.jsx)(y.Kk,{type:"submit",children:"Submit for Approval"})}),!S&&(0,_.jsxs)(y.W9,{sx:{alignItems:"center",justifyContent:"center",gap:.625,my:2},children:[(0,_.jsx)(te.Z,{component:"p",sx:{color:"#686C72",fontSize:14,fontWeight:400,lineHeight:"16px"},children:"Not happy?"}),(0,_.jsx)(be.Z,{type:"button",component:"button",variant:"body2",underline:"none",onClick:function(){D(k),N(!0),d()},children:"Continue Editing"})]})]})]}),!S&&l&&ee&&m&&(0,_.jsx)(w.Dj,{sx:{borderRight:"1px solid #24272c1a",py:11.25,px:6.25,width:360},children:(0,_.jsx)(ke,{components:Y})})]})},Re=function(){var e=(0,j.O)(),t=e.isMobile,n=e.isTablet,h=(0,Z.s)().setErrorMessage,f=(0,i.useState)(!0),v=(0,o.Z)(f,2),E=v[0],k=v[1],S=(0,i.useState)(!1),F=(0,o.Z)(S,2),R=F[0],D=F[1],N=(0,b.DU)(),M=N.waTemplatesData,U=N.waTemplateFilter,A=N.showWaTemplateForm,I=N.showWaPreviewForm,B=N.showWaTemplatePreview,P=(0,b.dI)(),V=P.setWaTemplatesData,L=P.setTotalWaTemplates,H=P.setWaTemplateFilter,z=P.setShowWaTemplateForm,q=P.setShowWaPreviewForm,G=P.setShowWaTemplatePreview,Y=P.setEditWaTemplateId,K=P.setPreviewWaTemplateId,Q=(0,i.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.getWaTemplateMessages();case 3:if((t=e.sent).success){e.next=6;break}throw Error(t.message);case 6:L(t.payload.length),V(t.payload),k(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]);return(0,i.useEffect)((function(){Q()}),[Q]),(0,_.jsxs)(i.Fragment,{children:[(0,_.jsx)(c.ql,{children:(0,_.jsx)("title",{children:"WhatsApp Template Messages"})}),t&&(0,_.jsxs)(w.yW,{sx:w.jo,children:[!R&&(0,_.jsx)(u.Z,{component:l.rU,to:"/business-settings",sx:{width:32,height:32},children:(0,_.jsx)(C.I,{})}),!R&&(0,_.jsx)(w.Gh,{children:"Template Messages"}),R&&(0,_.jsx)(w._8,{children:(0,_.jsxs)(w.w2,{children:[(0,_.jsx)(u.Z,{disableTouchRipple:!0,disableFocusRipple:!0,disableRipple:!0,sx:{position:"absolute"},children:(0,_.jsx)(T.o,{})}),(0,_.jsx)(w.Mj,{onChange:function(e){var t=e.target.value;return H(t)},placeholder:"Search Template"}),(0,_.jsx)(u.Z,{onClick:function(){H(""),D(!R)},sx:{position:"absolute",right:0,top:0},children:(0,_.jsx)(m.Z,{})})]})}),!R&&M.length>0&&(0,_.jsx)(u.Z,{onClick:function(){return D((function(e){return!e}))},children:(0,_.jsx)(T.o,{})})]}),(0,_.jsx)(w.hm,{sx:w.q7,children:(0,_.jsx)(w.Ip,{sx:w._e,children:!E&&(0,_.jsx)(d.Z,{elevation:0,sx:w.we,children:(0,_.jsx)(p.Z,{sx:w.ny,children:0===M.length?(0,_.jsxs)(w.rV,{children:[(0,_.jsx)(w._D,{children:(0,_.jsx)(y.Kk,{disableIcon:!0,onClick:function(){return z(!0)},sx:{borderRadius:2,boxShadow:"0px 8px 8px rgba(50, 197, 255, 0.1)",fontSize:16,fontWeight:700,height:36,lineHeight:"19px",margin:"auto",textTransform:"capitalize"},children:"New Template Message"})}),(0,_.jsx)(w.iC,{children:(0,_.jsxs)(w.y7,{children:["In order to initiate a conversation message your customers. Create a new template message. Send a template message to masses from ",(0,_.jsx)("strong",{children:"Broadcast"})," option in ",(0,_.jsx)("strong",{children:"Engage"})," workspace."]})})]}):(0,_.jsxs)(i.Fragment,{children:[n&&(0,_.jsx)(O,{isSearchActive:R,setSearchActive:D}),n&&(0,_.jsx)(x.Z,{}),M.filter((function(e){var t;return null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===U||void 0===U?void 0:U.toLowerCase())})).map((function(e,t){return(0,_.jsx)(W,(0,r.Z)({},e),t)}))]})})})})}),t&&M.length>0&&(0,_.jsx)(w.jB,{children:(0,_.jsx)(y.Kk,{onClick:function(){return z(!0)},variant:"outlined",color:"primary",disableIcon:!0,children:"New Template Message"})}),(0,_.jsx)(ve,{open:A,closeDrawer:function(){Y(void 0),z(!1)}}),(0,_.jsx)(Fe,{open:I||B,closeDrawer:function(){K(void 0),q(!1),G(!1)}})]})},De=function(){return(0,_.jsx)(Re,{})}},43334:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(74165),a=n(15861),s=n(29439),o=n(72791),i=n(64554),c=n(54094),l=n(53420),u=n(80908),d=n(73599),p=n(1413),x=n(57831),m="StyledDropZone_File_Added__GYpDH",h="StyledDropZone_PreFile__TxcLB",f="StyledDropZone_input-text__uT4ha",v={display:"flex",justifyContent:"center",alignItems:"center",flex:1,padding:"20px",height:"100%",width:"100%",cursor:"pointer",textAlign:"center",borderRadius:"8px",borderColor:"#B8BAC2",borderStyle:"dashed",backgroundColor:" #F2F3F7",color:"#000000",opacity:"0.5",outline:"none",transition:"border .24s ease-in-out",boxSizing:"border-box"},g={borderColor:"#2196f3"},b={borderColor:"#00e676"},j={borderColor:"#ff1744"},Z=n(28182),y=n(36151),w=n(90297),C="Styles_Upload_Overlay__UBMfw",T="Styles_image_preview__qGzTF",E="Styles_File_Preview__J-4o2",k="Styles_RemoveButton__dDb5i",S=n(80184),F=function(e){var t=e.removeFile,n=e.fileUrl;return(0,S.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,S.jsx)("div",{className:C,children:(0,S.jsx)(y.Z,{className:(0,Z.Z)("mt-1",k),onClick:t,children:"Remove"})}),(0,S.jsx)(w.Z,{src:n,alt:"preview"})]})},R=function(e){var t=e.removeFile,n=e.fileUrl;return(0,S.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,S.jsx)("div",{className:C,children:(0,S.jsx)(y.Z,{className:(0,Z.Z)("mt-1",k),onClick:t,children:"Remove"})}),(0,S.jsx)("video",{className:(0,Z.Z)(T,"w-100"),src:n,controls:!0,autoPlay:!0,muted:!0,loop:!0})]})},D=n(53513),N=function(e){var t=e.fileUrl,n=e.removeFile,r=e.fileName;return(0,S.jsx)("div",{className:"d-flex justify-content-center",style:{height:"100%"},children:(0,S.jsxs)("div",{className:E,children:[(0,S.jsxs)("div",{className:"d-flex align-items-center",children:[(0,S.jsx)(D.Z,{fontSize:"large"})," ",(0,S.jsx)("p",{children:""!==r?r:null===t||void 0===t?void 0:t.split("/").pop()})]}),(0,S.jsx)(y.Z,{className:(0,Z.Z)("mt-1",k),onClick:n,children:"Remove"})]})})},M={image:{label:"PNG / JPG",value:{"image/*":[]},component:function(e){var t=e.removeFile,n=e.fileUrl;return(0,S.jsx)(F,{removeFile:t,fileUrl:n})}},video:{label:"MP4 / 3GP / 4K",value:{"video/*":[]},component:function(e){var t=e.removeFile,n=e.fileUrl;return(0,S.jsx)(R,{removeFile:t,fileUrl:n})}},file:{label:"DOC / XLS / PDF / ZIP",value:{"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-powerpoint":[".ppt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"application/vnd.ms-excel":[],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"text/plain":[],"application/pdf":[],"application/x-zip-compressed":[]},component:function(e){var t=e.fileUrl,n=e.removeFile,r=e.fileName;return(0,S.jsx)(N,{fileUrl:t,removeFile:n,fileName:r})}}},U=function(e){var t,n=e.onChange,r=e.fileType,a=e.removeFile,s=e.fileUrl,i=e.fileName,c=e.label,l=(0,x.uI)({maxFiles:1,maxSize:9e6,accept:M[r].value,noClick:!0,noKeyboard:!0,onDrop:n}),u=l.getRootProps,d=l.getInputProps,Z=l.isDragActive,y=l.isDragAccept,w=l.isDragReject,C=l.open,T=(0,o.useMemo)((function(){return(0,p.Z)((0,p.Z)((0,p.Z)((0,p.Z)({},v),Z?g:{}),y?b:{}),w?j:{})}),[Z,y,w]);return(0,S.jsx)(o.Fragment,{children:""===s?(0,S.jsx)("div",{className:h,onClick:C,children:(0,S.jsxs)("div",(0,p.Z)((0,p.Z)({},u({style:T})),{},{children:[(0,S.jsx)("input",(0,p.Z)({},d())),(0,S.jsxs)("div",{className:f,children:[(0,S.jsx)("h1",{children:c}),(0,S.jsx)("p",{children:null===(t=M[r])||void 0===t?void 0:t.label})]})]}))}):(0,S.jsx)("div",{className:m,children:M[r].component({removeFile:a,fileUrl:s,fileName:i})})})},A=function(e){e.control;var t=e.fileTypes,n=void 0===t?d.F.IMAGE:t,p=e.setValue,x=e.label,m=void 0===x?"Upload Image":x,h=e.defaultFieldName,f=e.fileURL,v=e.fileNameField,g=e.width,b=e.height,j=(0,c.s)().setErrorMessage,Z=(0,o.useState)(""),y=(0,s.Z)(Z,2),w=y[0],C=y[1],T=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,a,s){var o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.length>0)){e.next=14;break}return(o=new FormData).append("file",t[0]),o.append("max_size","10000"),o.append("allowed_ext",d.T[n]),e.next=8,u.Z.fileUpload(l.T.ENGAGE_ASSETS,o);case 8:if((i=e.sent).success){e.next=11;break}throw Error(i.message);case 11:C(i.payload.file_name),p(h,i.payload.url),v&&""!==v&&p(v,i.payload.file_name);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),j(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,r){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""===f){e.next=8;break}return e.next=4,u.Z.fileRemoveByURL(f);case 4:if((t=e.sent).success){e.next=7;break}throw Error(t.message);case 7:p(h,"");case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),p(h,""),console.error(e.t0),j(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return(0,S.jsx)(i.Z,{sx:{transition:"all 0.2s ease-in-out",width:{xs:null!==g&&void 0!==g?g:157,lg:180,xl:200},height:{xs:null!==b&&void 0!==b?b:157,lg:180,xl:200},margin:"auto"},children:(0,S.jsx)(U,{label:m,fileType:n,removeFile:E,fileUrl:f,fileName:w,onChange:T})})},I=A},33956:function(e,t,n){var r=n(1413),a=n(45987),s=n(61134),o=n(46920),i=n(80184),c=["control","defaultValue","rules","name"];t.Z=function(e){var t=e.control,n=(e.defaultValue,e.rules),l=e.name,u=(0,a.Z)(e,c);return(0,i.jsx)(s.Qr,{rules:n,control:t,name:l,render:function(e){var t=e.field;return(0,i.jsx)(o.k,(0,r.Z)((0,r.Z)({},u),{},{checked:t.value,onChange:t.onChange}))}})}},46920:function(e,t,n){n.d(t,{k:function(){return i}});var r=n(1413),a=n(9955),s=n(66934),o=n(80184),i=(0,s.ZP)((function(e){return(0,o.jsx)(a.Z,(0,r.Z)({focusVisibleClassName:".Mui-focusVisible",disableRipple:!0},e))}))((function(e){var t=e.theme;return{width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:t.palette.primary,opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:t.palette.primary,border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:"light"===t.palette.mode?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:13,backgroundColor:"light"===t.palette.mode?"#E9E9EA":"#39393D",opacity:1,transition:t.transitions.create(["background-color"],{duration:500})}}}))},53420:function(e,t,n){var r,a;n.d(t,{T:function(){return r}}),function(e){e.ASSETS="Assets",e.SENT="Sent",e.Received="Received",e.ENGAGE_ASSETS="Engage-assets",e.POST="Post",e.CURATE_ASSETS="Curate-assets",e.WEB="Web"}(r||(r={})),function(e){e.BUSINESS="business-",e.USER="user-"}(a||(a={}))},73599:function(e,t,n){var r,a;n.d(t,{F:function(){return a},T:function(){return r}}),function(e){e.image="image/png,image/jpeg,image/jpg",e.video="video/mp4,video/3gp",e.file="application/msword,.doc,application/vnd.openxmlformats-officedocument.wordprocessingml.document,.docx,application/vnd.ms-powerpoint,.ppt,application/vnd.openxmlformats-officedocument.presentationml.presentation,.pptx,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,.xlsx,text/plain,application/pdf,application/x-zip-compressed"}(r||(r={})),function(e){e.VIDEO="video",e.IMAGE="image",e.FILE="file"}(a||(a={}))},17049:function(e,t,n){n.d(t,{YU:function(){return l},bo:function(){return c},rU:function(){return r},sB:function(){return s},sw:function(){return u}});var r,a,s,o=n(43144),i=n(15671);!function(e){e.HEADER="HEADER",e.BODY="BODY",e.FOOTER="FOOTER",e.BUTTONS="BUTTONS"}(r||(r={})),function(e){e.APPROVED="APPROVED",e.DRAFT="DRAFT",e.SUBMITTED="SUBMITTED"}(a||(a={})),function(e){e.APPROVED="#25ba00",e.DRAFT="#ffad33",e.SUBMITTED="#04c4ee"}(s||(s={}));var c=(0,o.Z)((function e(t,n,r,a){(0,i.Z)(this,e),this.name=t,this.size=n,this.statusColor=r,this.message=a}));c.TIER1=new c("TIER 1",1,"#FF8719","TIER 1 allows 1000 outgoing messages to be sent in 24hrs. To reach next tier send 1000 messages for consecutive 3 days."),c.TIER2=new c("TIER 2",2,"#32C5FF","TIER 1 allows 1000 outgoing messages to be sent in 24hrs. To reach next tier send 1000 messages for consecutive 3 days."),c.TIER3=new c("TIER 3",3,"#00CD39","TIER 1 allows 1000 outgoing messages to be sent in 24hrs. To reach next tier send 1000 messages for consecutive 3 days.");var l=(0,o.Z)((function e(t,n,r){(0,i.Z)(this,e),this.status=t,this.statusColor=n,this.health=r}));l.GREY=new l("Unable to Connect","#82868B","GREY"),l.RED=new l("Poor","#E02020","RED"),l.ORANGE=new l("Moderate","#FF8719","ORANGE"),l.GREEN=new l("Good","#5ECF70","GREEN");var u=(0,o.Z)((function e(t,n){(0,i.Z)(this,e),this.status=t,this.statusColor=n}));u.NotConnected=new u("not-connected","#E02020"),u.Connected=new u("connected","#5ECF70")},50533:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(93433),a=n(29439),s=n(4942),o=n(63366),i=n(87462),c=n(72791),l=n(28182),u=n(94419),d=n(14036),p=n(66934),x=n(93736),m=n(23031),h=n(42071),f=n(20890),v=n(21217);function g(e){return(0,v.Z)("MuiLink",e)}var b=(0,n(75878).Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),j=n(18529),Z=n(12065),y={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},w=function(e){var t=e.theme,n=e.ownerState,r=function(e){return y[e]||e}(n.color),a=(0,j.D)(t,"palette.".concat(r),!1)||n.color,s=(0,j.D)(t,"palette.".concat(r,"Channel"));return"vars"in t&&s?"rgba(".concat(s," / 0.4)"):(0,Z.Fq)(a,.4)},C=n(80184),T=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],E=(0,p.ZP)(f.Z,{name:"MuiLink",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["underline".concat((0,d.Z)(n.underline))],"button"===n.component&&t.button]}})((function(e){var t=e.theme,n=e.ownerState;return(0,i.Z)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,i.Z)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:w({theme:t,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&(0,s.Z)({position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(b.focusVisible),{outline:"auto"}))})),k=c.forwardRef((function(e,t){var n=(0,x.Z)({props:e,name:"MuiLink"}),s=n.className,p=n.color,f=void 0===p?"primary":p,v=n.component,b=void 0===v?"a":v,j=n.onBlur,Z=n.onFocus,w=n.TypographyClasses,k=n.underline,S=void 0===k?"always":k,F=n.variant,R=void 0===F?"inherit":F,D=n.sx,N=(0,o.Z)(n,T),M=(0,m.Z)(),U=M.isFocusVisibleRef,A=M.onBlur,I=M.onFocus,B=M.ref,P=c.useState(!1),_=(0,a.Z)(P,2),W=_[0],V=_[1],O=(0,h.Z)(t,B),L=(0,i.Z)({},n,{color:f,component:b,focusVisible:W,underline:S,variant:R}),H=function(e){var t=e.classes,n=e.component,r=e.focusVisible,a=e.underline,s={root:["root","underline".concat((0,d.Z)(a)),"button"===n&&"button",r&&"focusVisible"]};return(0,u.Z)(s,g,t)}(L);return(0,C.jsx)(E,(0,i.Z)({color:f,className:(0,l.Z)(H.root,s),classes:w,component:b,onBlur:function(e){A(e),!1===U.current&&V(!1),j&&j(e)},onFocus:function(e){I(e),!0===U.current&&V(!0),Z&&Z(e)},ref:O,ownerState:L,variant:R,sx:[].concat((0,r.Z)(Object.keys(y).includes(f)?[]:[{color:f}]),(0,r.Z)(Array.isArray(D)?D:[D]))},N))}))}}]);
//# sourceMappingURL=435.fc991122.chunk.js.map