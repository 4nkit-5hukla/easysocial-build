(this.webpackJsonpeasysocial=this.webpackJsonpeasysocial||[]).push([[126],{2561:function(e,r,t){"use strict";t.r(r);var s=t(0),a=t(43),n=t(7),c=t(3),o=t.n(c),u=t(30),i=t.n(u),l=t(258),b=(t(38),t(49),t(24)),d=t(10);t(23);var g=t(54),p=t(124),f=t.n(p),h=t(2);r.default=function(e){var r=e.location,t=Object(a.c)(),c=Object(a.d)((function(e){return e.customLoginState})),u=Object(g.c)();return Object(s.useEffect)((function(){var e,s=f.a.parse(r.search);e=function(){return t(function(e){var r=e.toastMessage,t=e.userId,s=e.accessToken;return function(){var e=Object(n.a)(o.a.mark((function e(a){var n,c,u,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.setErrorMessage,c=r.setSuccessMessage,e.prev=1,s){e.next=4;break}return e.abrupt("return",n("Unauthorized request!"));case 4:if(t){e.next=6;break}return e.abrupt("return",n("No userId attached!"));case 6:return e.next=8,i()({url:"".concat(d.API_V2,"/auth/custom-login-token"),method:"GET",headers:{userId:t,AccessToken:s,Accept:"application/json","Content-Type":"application/json"}});case 8:if(u=e.sent,g=u.data.payload.token){e.next=12;break}return e.abrupt("return",a(Object(l.b)({error:!0,errorMessage:"No token found!"})));case 12:return localStorage.setItem("userId",t),localStorage.setItem("token",g),a(Object(b.f)(u.redirect||"/engage/chat")),c("Successfully loggedIn!"),a(Object(l.c)({token:g,userId:t})),window.open(u.redirect||"/engage/chat","_self"),e.abrupt("return",a(Object(l.b)({error:!1,errorMessage:""})));case 21:return e.prev=21,e.t0=e.catch(1),n(e.t0.message),e.abrupt("return",a(Object(l.b)({error:!0,errorMessage:e.t0.message})));case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(r){return e.apply(this,arguments)}}()}({toastMessage:u,userId:s.userId,accessToken:s.accessToken}))},localStorage.getItem("token")&&(t(Object(b.d)()),localStorage.removeItem("businessId"),u.setInfoMessage("SuccessFully logged out current user!")),e()}),[]),Object(h.jsx)("div",{className:"col-10 m-auto",children:Object(h.jsx)("h1",{className:"mt-5",children:c.error?c.errorMessage:"Generating session for you...."})})}}}]);
//# sourceMappingURL=126.d1dfe6ce.chunk.js.map